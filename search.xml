<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Queue</title>
      <link href="2020/11/24/Queue/"/>
      <url>2020/11/24/Queue/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>åœ¨å‰é¢å·²ç»çœ‹è¿‡å—é™çš„çº¿æ€§åºåˆ—ï¼š<a href="http://wangba.me/2020/10/27/Stack/">æ ˆ</a></p><p>åœ¨æœ¬ç« ä¸­å¯ä»¥çœ‹ä¸€ä¸‹å¦å¤–ä¸€ä¸ªå—é™çš„çº¿æ€§åºåˆ—ï¼šé˜Ÿåˆ—</p><p>åœ¨æœ¬ç« ä¸­å¯ä»¥çœ‹åˆ°ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124152246.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124152246.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124152245584"></p><p>ğŸ¢ : é¦–å…ˆå¯¹æ¯”ä¸€ä¸‹æ ˆï¼Œå¹¶ä»‹ç»ä¸€ä¸‹é˜Ÿåˆ—çš„ç‰¹æ€§</p><p>ğŸ· : åœ¨è¿™ä¸€å°èŠ‚ä¸­åˆ†åˆ«ç”¨æ•°ç»„å’Œé“¾è¡¨å®ç°ä¸€ä¸‹é˜Ÿåˆ—ï¼Œä¸»è¦æ˜¯ç”¨æ•°ç»„å®ç°</p><p>ğŸ­ : åœ¨è¿™ä¸€å°èŠ‚ä¸»è¦ä»‹ç»ä¸€ä¸‹å‡ ä¸ªç‰¹æ®Šçš„é˜Ÿåˆ—ï¼Œå…¶ä¸­ä¸»è¦æ˜¯ä¼˜å…ˆé˜Ÿåˆ—å’ŒåŒç«¯é˜Ÿåˆ—</p><p>ğŸ‚ : ç”±äºåœ¨ Java ä¸­ï¼Œé˜Ÿåˆ—æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç®€å•çœ‹ä¸€ä¸‹å®ç°ç±»</p><h2 id="äºŒã€ç‰¹æ€§"><a href="#äºŒã€ç‰¹æ€§" class="headerlink" title="äºŒã€ç‰¹æ€§"></a>äºŒã€ç‰¹æ€§</h2><p>é¦–å…ˆæ¥å›å¿†ä¸€ä¸‹æ ˆçš„ç‰¹æ€§ï¼šå…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡º</p><p>è€Œé˜Ÿåˆ—çš„ç‰¹æ€§å°±æ˜¯ï¼š<code>å…ˆè¿›å…ˆå‡ºï¼Œåè¿›åå‡º</code></p><p>å¯ä»¥çœ‹ä¸€ä¸‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><blockquote><p>å­—ç¬¦ä¸² â€œwangâ€ ä¾æ¬¡å…¥é˜Ÿï¼Œéšåå†å‡ºé˜Ÿï¼ˆçœç•¥éƒ¨åˆ†æ­¥éª¤ï¼‰</p></blockquote><p>![image-20201124154741796](../../../Library/Application Support/typora-user-images/image-20201124154741796.png)</p><h2 id="ä¸‰ã€å®ç°é˜Ÿåˆ—"><a href="#ä¸‰ã€å®ç°é˜Ÿåˆ—" class="headerlink" title="ä¸‰ã€å®ç°é˜Ÿåˆ—"></a>ä¸‰ã€å®ç°é˜Ÿåˆ—</h2><h3 id="3-1-æ•°ç»„å®ç°"><a href="#3-1-æ•°ç»„å®ç°" class="headerlink" title="3.1 æ•°ç»„å®ç°"></a>3.1 æ•°ç»„å®ç°</h3><p>é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“æœ‰å“ªäº›æ“ä½œï¼š</p><ul><li>åªåœ¨é˜Ÿå°¾è¿›è¡Œå…¥é˜Ÿçš„æ“ä½œï¼šenqueue</li><li>åªåœ¨é˜Ÿå¤´è¿›è¡Œå‡ºé˜Ÿçš„æ“ä½œï¼šdequeue</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LC0000ArrayQueue</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] elements;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> capacity = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> front = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> tail = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LC0000ArrayQueue</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        elements = <span class="keyword">new</span> String[n];</span><br><span class="line">        capacity = n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// enqueue</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">enqueue</span><span class="params">(String element)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (tail == capacity) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        elements[tail] = element;</span><br><span class="line">        tail++;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// dequeue</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">dequeue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (front == tail) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        String res = elements[front];</span><br><span class="line">        front++;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ä»”ç»†æƒ³æƒ³è¿™ä¸ªæ˜¯æœ‰é—®é¢˜çš„ï¼Œå°±æ‹¿ä¸Šé¢é‚£ä¸ªä¾‹å­æ¥è¯´ï¼Œå®ƒå…¨éƒ¨å…¥é˜Ÿå’Œå…¨éƒ¨å‡ºé˜Ÿåçš„ç»“æœåº”è¯¥æ˜¯è¿™æ ·ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124162102.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124162102.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124162100985"></p><p>é‚£ä¹ˆå·¦è¾¹çš„ç©ºé—´å°±æ²¡æœ‰å†ä½¿ç”¨äº†ï¼Œå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæ¥è€ƒè™‘ä¸€ä¸‹åœ¨æ•°ç»„ä¸­æ˜¯å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ•°ç»„ä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åç§»åŠ¨æŠŠè¿™ä¸ªå…ƒç´ åçš„æ‰€æœ‰æ•°æ®éƒ½å‘å‰ç§»åŠ¨ä¸€ä½ã€‚</p><p>é‚£ä¹ˆåœ¨è¿™é‡Œåªéœ€è¦å‡ºé˜Ÿä¸€ä¸ªå…ƒç´ ï¼ŒéšåæŠŠæ‰€æœ‰å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä½å³å¯ã€‚ä½†æ˜¯è¿™ä¸ªæ¯å‡ºé˜Ÿä¸€ä¸ªå…ƒç´ å°±ç§»åŠ¨ä¸€ä½ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œç¨å¾®ä¼˜åŒ–ä¸€ä¸‹ï¼Œåªåœ¨æˆ‘ä»¬éœ€è¦å®ƒçš„æ—¶å€™æ‰è¿›è¡Œç§»åŠ¨æ“ä½œã€‚é‚£ä¹ˆæˆ‘ä»¬ä»€ä¹ˆæ—¶å€™æ˜¯éœ€è¦åˆ°è¿™äº›ç©ºä½™çš„ç©ºé—´å‘¢ï¼Œæ˜¯ä¸æ˜¯åªæœ‰åœ¨å…ƒç´ å…¥é˜Ÿçš„æ—¶å€™æ‰éœ€è¦ï¼Œæ‰€ä»¥åªéœ€è¦åœ¨å…¥é˜Ÿçš„æ—¶å€™è¿›è¡Œæ•°æ®æ¬ç§»çš„æ“ä½œå³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// enqueue</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">enqueue</span><span class="params">(String element)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (tail == capacity) &#123;</span><br><span class="line">        <span class="comment">// queue is full</span></span><br><span class="line">        <span class="keyword">if</span> (front == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = front; i &lt; elements.length; i++) &#123;</span><br><span class="line">            elements[i - front] = elements[i];</span><br><span class="line">        &#125;</span><br><span class="line">        tail -= front;</span><br><span class="line">        front = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    elements[tail] = element;</span><br><span class="line">    tail++;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é¦–å…ˆè¦åˆ¤æ–­ä¸€ä¸‹é˜Ÿåˆ—æ˜¯ä¸æ˜¯çœŸçš„æ»¡äº†</li><li>å¦‚æœä¸æ˜¯æ»¡çš„ï¼Œå°±å¯ä»¥å°† <code>front</code> åˆ° <code>tail</code> çš„å…ƒç´ å…¨éƒ¨æ¬åˆ° <code>0</code> åˆ° <code>tail - front</code> çš„ä½ç½®</li></ul><h3 id="3-2-é“¾è¡¨å®ç°"><a href="#3-2-é“¾è¡¨å®ç°" class="headerlink" title="3.2 é“¾è¡¨å®ç°"></a>3.2 é“¾è¡¨å®ç°</h3><p>ç”¨é“¾è¡¨å®ç°çš„è¯ï¼Œå°±ä¸ç”¨è€ƒè™‘ <code>capacity</code> çš„é—®é¢˜äº†ï¼Œç†è®ºä¸Šåœ¨å†…å­˜è¶³å¤Ÿçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ— é™å…¥é˜Ÿï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LC0000LinkedListQueue</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node front;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node tail;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// enqueue</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(String element)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (tail == <span class="keyword">null</span>) &#123;</span><br><span class="line">            Node next = <span class="keyword">new</span> Node(element, <span class="keyword">null</span>);</span><br><span class="line">            front = next;</span><br><span class="line">            tail = next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            tail.next = <span class="keyword">new</span> Node(element, <span class="keyword">null</span>);</span><br><span class="line">            tail = tail.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// dequeue</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">dequeue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (front == tail) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        String res = front.val;</span><br><span class="line">        front = front.next;</span><br><span class="line">        <span class="keyword">if</span> (front == <span class="keyword">null</span>) &#123;</span><br><span class="line">            tail = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String val;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Node next;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(String val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Node(String val, Node next) &#123;</span><br><span class="line">        <span class="keyword">this</span>.val = val;</span><br><span class="line">        <span class="keyword">this</span>.next = next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å››ã€ä¸€äº›ç‰¹æ®Šçš„é˜Ÿåˆ—"><a href="#å››ã€ä¸€äº›ç‰¹æ®Šçš„é˜Ÿåˆ—" class="headerlink" title="å››ã€ä¸€äº›ç‰¹æ®Šçš„é˜Ÿåˆ—"></a>å››ã€ä¸€äº›ç‰¹æ®Šçš„é˜Ÿåˆ—</h2><h3 id="4-1-å¾ªç¯é˜Ÿåˆ—"><a href="#4-1-å¾ªç¯é˜Ÿåˆ—" class="headerlink" title="4.1 å¾ªç¯é˜Ÿåˆ—"></a>4.1 å¾ªç¯é˜Ÿåˆ—</h3><p>åœ¨ä¸Šé¢ç”¨æ•°ç»„å®ç°é˜Ÿåˆ—æ—¶ï¼Œç”±äºé˜Ÿåˆ—çš„ç‰¹æ€§ä½¿å¾—æˆ‘ä»¬å·²ç»å°†å…¶è¿›è¡Œäº†ä¸€æ¬¡ä¼˜åŒ–ï¼Œåœ¨æ¯æ¬¡è¿›è¡Œå…¥é˜Ÿæ“ä½œæ—¶éƒ½è¦æœ‰æ¡ä»¶çš„è¿›è¡Œä¸€æ¬¡æ•°æ®ç§»åŠ¨æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œé‚£æœ‰æ²¡æœ‰èƒ½å°†è¿™ä¸ªæ—¶é—´å¤æ‚åº¦ä¹Ÿçœå»çš„é˜Ÿåˆ—æ“ä½œå‘¢ï¼Ÿè¿™å°±æ˜¯æœ¬å°èŠ‚ä»‹ç»çš„ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—ï¼š<code>å¾ªç¯é˜Ÿåˆ—</code></p><p>é¡¾åæ€ä¹‰ï¼Œè¿™ç§é˜Ÿåˆ—æœ€å¤§çš„ç‰¹ç‚¹å°±åœ¨äº <code>å¾ªç¯</code> äºŒå­—ï¼Œé‚£åˆ°åº•è¦å¦‚ä½•å®ç°è¿™ä¸ªå¾ªç¯å‘¢ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸ªä¾‹å­ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124185122.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124185122.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124185121876"></p><p>æˆ‘ä»¬æ­£å¸¸æƒ…å†µä¸‹ï¼Œç©ºä½™çš„ç©ºé—´å°±æ˜¯å·¦è¾¹é‚£éƒ¨åˆ†ç©ºç™½ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å®ç°ç›´æ¥å°†æ–°åŠ å…¥çš„å…ƒç´ ç›´æ¥æ”¾å…¥å·¦è¾¹ç©ºç™½çš„ç©ºé—´ä¸å°±è¡Œäº†å—ï¼Ÿé‚£ä¹ˆç”¨ä»€ä¹ˆæ“ä½œæ‰èƒ½è¾¾åˆ°è¿™æ ·çš„æ•ˆæœå‘¢ï¼Œä½¿ç”¨ <code>å–ä½™</code> è¿™ä¸ªæ•°å­¦æ“ä½œå³å¯ã€‚</p><p>çœ‹èµ·æ¥çš„ç¡®æ˜¯å¾ˆ easy ï¼Œåªè¦å°† <code>tail = (tail + 1) % capacity</code> å³å¯ï¼Œä½†æ˜¯äº‹å®çœŸçš„å¦‚æ­¤å—ï¼Ÿ</p><p>åœ¨å‰é¢ä½¿ç”¨æ•°ç»„å®ç°é˜Ÿåˆ—æ—¶ï¼Œæˆ‘ä»¬å¯¹æ ˆç©ºå’Œæ ˆæ»¡çš„åˆ¤æ–­æ˜¯è¿™æ ·çš„</p><ul><li>æ ˆç©ºï¼š<code>front == tail</code></li><li>æ ˆæ»¡ï¼š<code>tail  == capacity</code></li></ul><p>é‚£åœ¨å¾ªç¯é˜Ÿåˆ—ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å®ç°è¿™ä¸¤ä¸ªåˆ¤æ–­å‘¢ï¼Ÿè¿˜æ˜¯ä¸¾ä¸ªä¾‹å­ï¼Œä¸ºäº†æ›´åŠ æ–¹ä¾¿ç†è§£ï¼Œæˆ‘å°†æ•°ç»„çš„é¦–å°¾ç›¸è¿ï¼Œæœ¬è´¨æ˜¯è¿˜æ˜¯ä¸€ä¸ªæ•°ç»„ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124192312.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124192312.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124192309732"></p><ul><li>æ ˆç©ºï¼š<code>front == tail</code></li><li>æ ˆæ»¡ï¼šåœ¨å¾ªç¯é˜Ÿåˆ—ä¸­ç”¨ <code>tail  == capacity</code> åˆ¤æ–­æ ˆæ»¡è‚¯å®šä¸åœ¨åˆé€‚ã€‚åœ¨ä¸Šé¢å³å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯¥å¾ªç¯æ ˆè¿˜æ²¡æœ‰æ»¡ï¼Œæˆ‘ä»¬å°è¯•åœ¨å…¶ä¸­å†å¢åŠ ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆæ ˆæ»¡çš„åˆ¤æ–­å°±å˜æˆäº† <code>front == tail</code> ï¼Œè¿™å°±å’Œåˆ¤æ–­æ ˆç©ºä¸€æ ·äº†ï¼Œæ‰€ä»¥åœ¨å¾ªç¯é˜Ÿåˆ—ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¼šæµªè´¹ä¸€ä¸ªç©ºé—´ï¼Œå³ tail æŒ‡å‘çš„çš„æ•°æ®ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢å³å›¾è¿™æ ·çš„æƒ…å†µï¼Œé‚£ä¹ˆæ­¤æ—¶åˆ¤æ–­æ ˆæ»¡çš„æ¡ä»¶å°±å˜æˆäº†ï¼š <code>(tail + 1) % capacity == front</code></li></ul><p>ä¸Šä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LC0000CycleQueue</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] elements;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> capacity = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> front = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> tail = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LC0000CycleQueue</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        elements = <span class="keyword">new</span> String[n];</span><br><span class="line">        capacity = n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// enqueue</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">enqueue</span><span class="params">(String element)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// judging queue is full</span></span><br><span class="line">        <span class="keyword">if</span> ((tail + <span class="number">1</span>) % capacity == front) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        elements[tail] = element;</span><br><span class="line">        tail = (tail + <span class="number">1</span>) % capacity;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// dequeue</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">dequeue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// judging queue is empty</span></span><br><span class="line">        <span class="keyword">if</span> (front == tail) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        String res = elements[front];</span><br><span class="line">        front = (front + <span class="number">1</span>) % capacity;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-2-ä¼˜å…ˆé˜Ÿåˆ—"><a href="#4-2-ä¼˜å…ˆé˜Ÿåˆ—" class="headerlink" title="4.2 ä¼˜å…ˆé˜Ÿåˆ—"></a>4.2 ä¼˜å…ˆé˜Ÿåˆ—</h3><p>è¿™ä¸€å°èŠ‚ä»‹ç»ä¸€ä¸‹å¦ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—ï¼šä¼˜å…ˆé˜Ÿåˆ—ã€‚è€è§„çŸ©ï¼Œå…ˆè¯´ä¸€ä¸‹ç‰¹æ€§ï¼š</p><ul><li>æœ¬è´¨ä¸Šè¿˜æ˜¯é˜Ÿåˆ—ï¼Œæ‰€ä»¥é˜Ÿåˆ—è¯¥æœ‰çš„æ“ä½œå®ƒéƒ½æœ‰</li><li>ä½†æ˜¯å®ƒçš„ enqueue å’Œ dequeue çš„æ“ä½œç»“æœå¯èƒ½ä¸æ­£å¸¸çš„é˜Ÿåˆ—ç»“æœä¸ä¸€æ ·ï¼š</li></ul><blockquote><p>enqueue : æ’å…¥ä¸€ä¸ªå…ƒç´ </p><p>dequeue : åˆ é™¤æœ€å°å€¼æ“ä½œï¼ˆè¿”å›å¹¶åˆ é™¤æœ€å°å…ƒç´ ï¼‰æˆ–åˆ é™¤æœ€å¤§å€¼æ“ä½œï¼ˆè¿”å›å¹¶åˆ é™¤æœ€å¤§å…ƒç´ ï¼‰</p></blockquote><p><strong>ä¼˜å…ˆé˜Ÿåˆ—çš„ä¸»è¦æ“ä½œï¼š</strong></p><p>ä¼˜å…ˆé˜Ÿåˆ—æ˜¯å…ƒç´ çš„å®¹å™¨ï¼Œæ¯ä¸ªå…ƒç´ æœ‰ä¸€ä¸ªç›¸å…³çš„é”®å€¼ï¼›</p><ul><li><p><code>insert(key, data)</code>ï¼šæ’å…¥é”®å€¼ä¸ºkeyçš„æ•°æ®åˆ°ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œå…ƒç´ ä»¥å…¶keyè¿›è¡Œæ’åºï¼›</p></li><li><p><code>deleteMin/deleteMax</code>ï¼šåˆ é™¤å¹¶è¿”å›æœ€å°/æœ€å¤§é”®å€¼çš„å…ƒç´ ï¼›</p></li><li><p><code>getMinimum/getMaximum</code>ï¼šè¿”å›æœ€å°/æœ€å¤§å‰‘æŒ‡çš„å…ƒç´ ï¼Œä½†ä¸åˆ é™¤å®ƒï¼›</p></li></ul><p><strong>ä¼˜å…ˆé˜Ÿåˆ—çš„è¾…åŠ©æ“ä½œï¼š</strong></p><ul><li><code>ç¬¬kæœ€å°/ç¬¬kæœ€å¤§</code>ï¼šè¿”å›ä¼˜å…ˆé˜Ÿåˆ—ä¸­é”®å€¼ä¸ºç¬¬kä¸ªæœ€å°/æœ€å¤§çš„å…ƒç´ ï¼›</li><li><code>å¤§å°ï¼ˆsizeï¼‰</code>ï¼šè¿”å›ä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼›</li><li><code>å †æ’åºï¼ˆHeap Sortï¼‰</code>ï¼šåŸºäºé”®å€¼çš„ä¼˜å…ˆçº§å°†ä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„å…ƒç´ è¿›è¡Œæ’åºï¼›</li></ul><p>ä¼˜å…ˆé˜Ÿåˆ—åŸºäºä»€ä¹ˆå®ç°æœ€å¥½ï¼Ÿ</p><table><thead><tr><th>å®ç°</th><th>æ’å…¥</th><th>åˆ é™¤</th><th>å¯»æ‰¾æœ€å°å€¼</th></tr></thead><tbody><tr><td>æ— åºæ•°ç»„</td><td>1</td><td>n</td><td>n</td></tr><tr><td>æ— åºé“¾è¡¨</td><td>1</td><td>n</td><td>n</td></tr><tr><td>æœ‰åºæ•°ç»„</td><td>n</td><td>1</td><td>1</td></tr><tr><td>æœ‰åºé“¾è¡¨</td><td>n</td><td>1</td><td>1</td></tr><tr><td>äºŒå‰æœç´¢æ ‘</td><td>logn(å¹³å‡)</td><td>logn(å¹³å‡)</td><td>logn(å¹³å‡)</td></tr><tr><td>å¹³è¡¡äºŒå‰æœç´¢æ ‘</td><td>logn</td><td>logn</td><td>logn</td></tr><tr><td>äºŒå‰å †</td><td>logn</td><td>logn</td><td>1</td></tr></tbody></table><p>å¯ä»¥çœ‹åˆ°ä¸€èˆ¬çš„ä¼˜å…ˆé˜Ÿåˆ—éƒ½æ˜¯åŸºäº <code>äºŒå‰å †</code> å®ç°ï¼Œå…·ä½“å¦‚ä½•å®ç°æš‚æ—¶ä¸ç»†è®²ï¼Œç­‰åˆ°å†™åˆ°äºŒå‰å †çš„æ—¶å€™æåŠä¸€ä¸‹</p><p>åœ¨ LeetCode ä¸­å…³äºä¼˜å…ˆé˜Ÿåˆ—çš„é¢˜ç›®ä¹Ÿä¸å°‘ï¼Œæœ€ç»å…¸çš„å°±æ˜¯ <a href="https://leetcode-cn.com/problems/merge-k-sorted-lists/">0023. Merge k Sorted Lists</a> ï¼Œå…·ä½“è§£æ³•å¯ä»¥çœ‹ä¸‹ <a href="http://wangba.me/2020/10/14/0023-Merge-k-Sorted-Lists/">0023. Merge k Sorted Lists</a> ä¸­çš„è§£æ³•ä¸‰ï¼Œè¿˜æœ‰æ¯”è¾ƒç»å…¸çš„ 0215ã€0239ã€0264ã€0295ã€0347ã€0692 ç­‰ç­‰</p><h2 id="äº”ã€Java-ä¸­çš„é˜Ÿåˆ—"><a href="#äº”ã€Java-ä¸­çš„é˜Ÿåˆ—" class="headerlink" title="äº”ã€Java ä¸­çš„é˜Ÿåˆ—"></a>äº”ã€Java ä¸­çš„é˜Ÿåˆ—</h2><p>åœ¨ Java ä¸­ï¼Œé˜Ÿåˆ—åªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124210441.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124210441.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124210438755"></p><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹é‡Œé¢çš„å…·ä½“å®ç°ç±»å§ï¼Œè¿™é‡Œä¼˜å…ˆé€‰æ‹©ä¸Šé¢ä¼˜å…ˆé˜Ÿåˆ—ï¼Œç»§æ‰¿å’Œå®ç°ç±»å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124210805.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124210805.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124210802761"></p><p>åœ¨ä¼˜å…ˆé˜Ÿåˆ—çš„ Structure ä¸­å¯ä»¥çœ‹åˆ°ï¼š</p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124210955.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201124210955.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201124210954420" style="zoom:200%;" /><p>å¯ä»¥çœ‹åˆ°æœ€å…³é”®çš„ä¸¤ä¸ªæ–¹æ³•ï¼š offer å’Œ removeï¼Œå…¶ä¸­ add æ˜¯è°ƒç”¨ offer æ–¹æ³•çš„ï¼Œè¿™ä¸¤ä¸ªå°±æ˜¯å¯¹åº”ç€é˜Ÿåˆ—ä¸­çš„ enqueue å’Œ dequeue æ–¹æ³•ã€‚</p><p>ç”±äºä¼˜å…ˆé˜Ÿåˆ—æ˜¯åŸºäºäºŒå‰å †çš„ï¼Œæ‰€ä»¥ä¼šæœ‰ <code>ä¸Šæµ®</code> å’Œ <code>ä¸‹æ²‰</code> æ“ä½œï¼Œåœ¨æ­¤å°±ä¸ç»†è¯´äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">offer</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (e == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">int</span> i = size;</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= queue.length)</span><br><span class="line">        grow(i + <span class="number">1</span>);</span><br><span class="line">    size = i + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">        queue[<span class="number">0</span>] = e;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        siftUp(i, e);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = indexOf(o);</span><br><span class="line">    <span class="keyword">if</span> (i == -<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        removeAt(i);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> E <span class="title">removeAt</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert i &gt;= 0 &amp;&amp; i &lt; size;</span></span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">int</span> s = --size;</span><br><span class="line">    <span class="keyword">if</span> (s == i) <span class="comment">// removed last element</span></span><br><span class="line">        queue[i] = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        E moved = (E) queue[s];</span><br><span class="line">        queue[s] = <span class="keyword">null</span>;</span><br><span class="line">        siftDown(i, moved);</span><br><span class="line">        <span class="keyword">if</span> (queue[i] == moved) &#123;</span><br><span class="line">            siftUp(i, moved);</span><br><span class="line">            <span class="keyword">if</span> (queue[i] != moved)</span><br><span class="line">                <span class="keyword">return</span> moved;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é‡å­¦ç®—æ³•ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Algorithm </tag>
            
            <tag> Queue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Stack--Monotonic Stack</title>
      <link href="2020/11/23/Stack-Monotonic-Stack/"/>
      <url>2020/11/23/Stack-Monotonic-Stack/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>åœ¨å‰é¢å·²ç»æåŠè¿‡ <a href="http://wangba.me/2020/10/27/Stack/">æ ˆ</a> è¿™ä¸ªæ•°æ®ç»“æ„ï¼Œåœ¨ LeetCode ä¸­æœ‰è€ƒå¯Ÿè¿‡è¿™æ ·ä¸€ç§æ ˆæ“ä½œï¼šå•è°ƒæ ˆã€‚</p><p>é¡¾åæ€ä¹‰ï¼Œè¿™æ˜¯åœ¨æ ˆçš„åŸºç¡€ä¸Šè¾¾åˆ°å•è°ƒé€’å¢æˆ–å•è°ƒé€’å‡çš„æ•ˆæœã€‚</p><p>å¤§æ¦‚çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li><p>å¦‚æœæƒ³è¾¾åˆ°é€’å¢çš„æ•ˆæœï¼š</p><ul><li>è¿›æ ˆï¼šé¦–å…ˆè¦æ¯”è¾ƒä¸æ ˆé¡¶çš„å¤§å°ï¼Œå¦‚æœæ¯”æ ˆé¡¶å…ƒç´ å¤§ï¼Œé‚£ä¹ˆç›´æ¥æ”¾åœ¨æ ˆé¡¶å³å¯ï¼›å¦åˆ™è¦å°†æ ˆé¡¶å…ƒç´ å‡ºæ ˆï¼Œç„¶åå°†è¿™ä¸ªå…ƒç´ ä¸æ ˆé¡¶å…ƒç´ è¿›è¡Œæ¯”è¾ƒ</li><li>å‡ºæ ˆï¼šç›´æ¥å‡ºæ ˆå³å¯</li></ul></li><li><p>å¦‚æœæƒ³è¾¾åˆ°é€’å‡çš„æ•ˆæœï¼š</p><ul><li>è¿›æ ˆï¼šé¦–å…ˆè¦æ¯”è¾ƒä¸æ ˆé¡¶çš„å¤§å°ï¼Œå¦‚æœæ¯”æ ˆé¡¶å…ƒç´ å°ï¼Œé‚£ä¹ˆç›´æ¥æ”¾åœ¨æ ˆé¡¶å³å¯ï¼›å¦åˆ™è¦å°†æ ˆé¡¶å…ƒç´ å‡ºæ ˆï¼Œç„¶åå°†è¿™ä¸ªå…ƒç´ ä¸æ ˆé¡¶å…ƒç´ è¿›è¡Œæ¯”è¾ƒ</li><li>å‡ºæ ˆï¼šç›´æ¥å‡ºæ ˆå³å¯</li></ul></li></ul><h2 id="äºŒã€Example"><a href="#äºŒã€Example" class="headerlink" title="äºŒã€Example"></a>äºŒã€Example</h2><p>å‡å¦‚æœ‰ä¸‹é¢çš„ä¾‹å­ï¼š</p><p>æœ‰ä¸€ç»„æ•°ä¸ºï¼š</p><blockquote><p>1ï¼Œ4ï¼Œ2ï¼Œ5ï¼Œ7ï¼Œ6ï¼Œ8</p></blockquote><p>ç°åœ¨è¦å¾—åˆ°ä¸€ä¸ªå•è°ƒé€’å¢æ ˆï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p><table><thead><tr><th>Step</th><th>Op</th><th>Stack</th></tr></thead><tbody><tr><td>1</td><td>1  push</td><td>1</td></tr><tr><td>2</td><td>4  push</td><td>1  4</td></tr><tr><td>3</td><td>4 pop  |  2  push</td><td>1  2</td></tr><tr><td>4</td><td>5  push</td><td>1  2  5</td></tr><tr><td>5</td><td>7 push</td><td>1  2  5  7</td></tr><tr><td>6</td><td>7  pop  |  6  push</td><td>1  2  5  6</td></tr><tr><td>7</td><td>8  push</td><td>1  2  5  6  8</td></tr></tbody></table><h2 id="ä¸‰ã€LeetCode-496"><a href="#ä¸‰ã€LeetCode-496" class="headerlink" title="ä¸‰ã€LeetCode 496"></a>ä¸‰ã€LeetCode 496</h2><p>çœ‹ä¸€ä¸ªå…¸å‹ä¾‹å­ <a href="https://leetcode-cn.com/problems/next-greater-element-i/">LeetCode 0496</a> :</p><p>é¢˜æ„ï¼šç»™å®šä¸¤ä¸ª æ²¡æœ‰é‡å¤å…ƒç´  çš„æ•°ç»„ nums1 å’Œ nums2 ï¼Œå…¶ä¸­nums1 æ˜¯ nums2 çš„å­é›†ã€‚æ‰¾åˆ° nums1 ä¸­æ¯ä¸ªå…ƒç´ åœ¨ nums2 ä¸­çš„ä¸‹ä¸€ä¸ªæ¯”å…¶å¤§çš„å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: nums1 &#x3D; [4,1,2], nums2 &#x3D; [1,3,4,2].</span><br><span class="line">Output: [-1,3,-1]</span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] nextGreaterElement(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[nums1.length];</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i : nums2) &#123;</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; stack.peek() &lt; i) &#123;</span><br><span class="line">            map.put(stack.peek(), i);</span><br><span class="line">            stack.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums1.length; i++) &#123;</span><br><span class="line">        res[i] = map.get(nums1[i]) != <span class="keyword">null</span> ? map.get(nums1[i]) : -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> é‡å­¦ç®—æ³•ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Algorithm </tag>
            
            <tag> Stack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0084. Largest Rectangle in Histogram</title>
      <link href="2020/11/02/0084-Largest-Rectangle-in-Histogram/"/>
      <url>2020/11/02/0084-Largest-Rectangle-in-Histogram/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="84-Largest-Rectangle-in-Histogram-Hard"><a href="#84-Largest-Rectangle-in-Histogram-Hard" class="headerlink" title="84. Largest Rectangle in Histogram Hard"></a><a href="https://leetcode-cn.com/problems/largest-rectangle-in-histogram/">84. Largest Rectangle in Histogram</a> <font color="#e82f34" size=5>Hard</font></h2><p>Given <em>n</em> non-negative integers representing the histogramâ€™s bar height where the width of each bar is 1, find the area of largest rectangle in the histogram.</p><p><img src="https://assets.leetcode.com/uploads/2018/10/12/histogram.png" class="lazyload" data-srcset="https://assets.leetcode.com/uploads/2018/10/12/histogram.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>Above is a histogram where width of each bar is 1, given height = <code>[2,1,5,6,2,3]</code>.</p><p><img src="https://assets.leetcode.com/uploads/2018/10/12/histogram_area.png" class="lazyload" data-srcset="https://assets.leetcode.com/uploads/2018/10/12/histogram_area.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>The largest rectangle is shown in the shaded area, which has area = <code>10</code> unit.</p><p><strong>Example:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [2,1,5,6,2,3]</span><br><span class="line">Output: 10</span><br></pre></td></tr></table></figure><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šæš´åŠ›ç ´è§£"><a href="#æ€è·¯ä¸€ï¼šæš´åŠ›ç ´è§£" class="headerlink" title="æ€è·¯ä¸€ï¼šæš´åŠ›ç ´è§£"></a>æ€è·¯ä¸€ï¼šæš´åŠ›ç ´è§£</h3><ul><li>å…ˆç”¨ HashSet å­˜å‚¨æ•°ç»„ä¸­ä¸é‡å¤çš„å€¼ï¼Œä¸»è¦æ˜¯ç”¨æ¥åŠ é€Ÿçš„ï¼Œä¸ç”¨ä¹Ÿå¯ä»¥ï¼Œåƒåœ¨æœ¬é¢˜é‡Œé¢å°±å¯ä»¥å°‘ç®—ä¸€æ¬¡ <code>2</code></li><li>ç„¶åéå†è¿™ä¸ª setï¼Œå†åœ¨ set ä¸­è¿›è¡Œæ•°ç»„éå†ï¼Œæ‰¾åˆ°è¿ç»­æ¯”å½“å‰å€¼å¤§äºæˆ–ç­‰äºçš„æ•°ç»„å€¼ï¼Œå¹¶æ‰¾åˆ°æœ€å¤§çš„å®½åº¦ï¼Œåƒåœ¨ä¸Šé¢çš„ğŸŒ°ä¸­ï¼Œå½“å€¼ä¸º <code>1</code> æ—¶ï¼Œéå†ä¸€éåï¼Œæœ€å¤§çš„çš„å®½åº¦ä¸º <code>6</code> </li></ul><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">largestRectangleArea</span><span class="params">(<span class="keyword">int</span>[] heights)</span> </span>&#123;</span><br><span class="line">    Set&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> height : heights) &#123;</span><br><span class="line">        set.add(height);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> height : set) &#123;</span><br><span class="line">        <span class="keyword">int</span> width = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> value : heights) &#123;</span><br><span class="line">            <span class="keyword">if</span> (value &gt;= height) &#123;</span><br><span class="line">                width++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                max = Math.max(max, width);</span><br><span class="line">                width = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        max = Math.max(max, width);</span><br><span class="line">        res = Math.max(res, max * (height));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p></blockquote><h3 id="æ€è·¯äºŒï¼š"><a href="#æ€è·¯äºŒï¼š" class="headerlink" title="æ€è·¯äºŒï¼š"></a>æ€è·¯äºŒï¼š</h3><p>è¿™ä¸ªæ€è·¯æœ‰ç‚¹å’Œ <a href="http://wangba.me/2020/10/28/0042-Trapping-Rain-Water/">42é¢˜</a> æœ‰ç‚¹åƒï¼Œå¯ä»¥çœ‹ä¸‹é¢çš„ğŸŒ°ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201104211959.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201104211959.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201104211954756"></p><ul><li>åœ¨æ€è·¯ä¸€ä¸­ï¼Œæ˜¯å°†æ¯ä¸€ä¸ªä¸é‡å¤çš„æ•°ç»„å…ƒç´ å’Œæ•´ä¸ªæ•°ç»„è¿›è¡Œå¯¹æ¯”ï¼Œæ±‚å‡ºæœ€å¤§é¢ç§¯</li><li>åœ¨ è¯¥è§£æ³•ä¸­ï¼Œä»ç„¶æ˜¯æ±‚æ¯ä¸ªæŸ±å­æ‰€å çš„æœ€å¤§é¢ç§¯ï¼Œæœ€åå–æœ€å¤§çš„å³å¯</li><li>çº¢è‰²æ˜¯å½“å‰æŸ±å­ï¼Œåˆ†åˆ«æ‰¾åˆ°ç¦»è¯¥æŸ±å­å·¦è¾¹æœ€è¿‘æ¯”è¯¥æŸ±å­ä½çš„æŸ±å­ <code>leftMin </code> å’Œå³è¾¹æœ€è¿‘ä½äºè¯¥æŸ±å­çš„æŸ±å­    <code>rightMin</code> </li><li>æ­¤æ—¶çš„é¢ç§¯å¯ä»¥è®¡ç®—ä¸ºï¼š<code>heights[cur] * ( rightMin - leftMin -1)</code></li></ul><p>é‚£ä¹ˆå¦‚ä½•æ±‚å‡ºæ¯ä¸€ä¸ªæŸ±å­çš„ <code>leftMin </code> ï¼Œä¸‹é¢çš„ä»£ç æ˜¯æ—¶é—´å¤æ‚åº¦ä¸º O(n)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] leftMin = <span class="keyword">new</span> <span class="keyword">int</span>[heights.length];</span><br><span class="line">leftMin[<span class="number">0</span>] = -<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; heights.length; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> temp = i - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (temp &gt;= <span class="number">0</span> &amp;&amp; heights[i] &lt;= heights[temp]) &#123;</span><br><span class="line">        temp--;</span><br><span class="line">    &#125;</span><br><span class="line">    leftMin[i] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä¸Šé¢çš„ä»£ç æ˜¯å¯ä»¥é™ä½æ—¶é—´å¤æ‚åº¦çš„ï¼Œå¯ä»¥çœ‹ä¸‹é¢è¿™ä¸ªğŸŒ°ï¼š</p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201105213556.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201105213556.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201105202816731" style="zoom:200%;" /><ul><li>å¦‚æœæˆ‘ä»¬è¦æ±‚ <code>cur</code> çš„ <code>leftMin</code> ï¼Œå¯ä»¥æ”¾å¼ƒä¸€éƒ¨åˆ†æ¯”è¾ƒï¼Œå…·ä½“æ˜¯å“ªä¸€éƒ¨åˆ†å‘¢ï¼Ÿ</li><li>å¦‚æœå½“å‰ <code>cur</code> é«˜åº¦å°äº <code>cur - 1</code> ï¼Œé‚£ä¹ˆ <code>leftMin[i - 1] + 1</code> åˆ° <code>cur - 1</code> ä¹‹é—´æ‰€æœ‰æŸ±å­çš„é«˜åº¦éƒ½æ˜¯å¤§äº <code>cur</code> çš„ï¼Œå› ä¸º <code>leftMin[i - 1]</code> æ˜¯ç¬¬ä¸€ä¸ªæ¯” <code>cur - 1</code> ä½çš„</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] leftMin = <span class="keyword">new</span> <span class="keyword">int</span>[heights.length];</span><br><span class="line">leftMin[<span class="number">0</span>] = -<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; heights.length; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> temp = i - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (temp &gt;= <span class="number">0</span> &amp;&amp; heights[temp] &gt;= heights[i]) &#123;</span><br><span class="line">        temp = leftMin[temp];</span><br><span class="line">    &#125;</span><br><span class="line">    leftMin[i] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">largestRectangleArea</span><span class="params">(<span class="keyword">int</span>[] heights)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (heights.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>[] leftMin = <span class="keyword">new</span> <span class="keyword">int</span>[heights.length];</span><br><span class="line">    leftMin[<span class="number">0</span>] = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; heights.length; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> temp = i - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (temp &gt;= <span class="number">0</span> &amp;&amp; heights[temp] &gt;= heights[i]) &#123;</span><br><span class="line">            temp = leftMin[temp];</span><br><span class="line">        &#125;</span><br><span class="line">        leftMin[i] = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>[] rightMin = <span class="keyword">new</span> <span class="keyword">int</span>[heights.length];</span><br><span class="line">    rightMin[heights.length - <span class="number">1</span>] = heights.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = heights.length - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">int</span> temp = i + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (temp &lt;= heights.length -<span class="number">1</span> &amp;&amp; heights[temp] &gt;= heights[i]) &#123;</span><br><span class="line">            temp = rightMin[temp];</span><br><span class="line">        &#125;</span><br><span class="line">        rightMin[i] = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; heights.length; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> temp = (rightMin[i] - leftMin[i] - <span class="number">1</span>) * heights[i];</span><br><span class="line">        max = Math.max(max, temp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯ä¸‰ï¼šæ ˆ"><a href="#æ€è·¯ä¸‰ï¼šæ ˆ" class="headerlink" title="æ€è·¯ä¸‰ï¼šæ ˆ"></a>æ€è·¯ä¸‰ï¼šæ ˆ</h3><ul><li>å½“éå†åˆ° <code>cur</code> æ—¶ï¼Œå‡ºç° <code>height[cur] &lt; height[peek]</code> æ—¶ï¼Œé‚£ä¹ˆ <code>leftMin</code> ä¸€å®šæ˜¯ <code>newPeek</code> ï¼Œ<code>rightMin</code> å°±æ˜¯ <code>cur</code> ï¼Œæ­¤æ—¶é¢ç§¯æœ€å¤§å€¼å°±æ˜¯ <code>(cur - leftMin - 1) * height[peek]</code></li></ul><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201105212529.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201105212529.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201105212528335"></p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">largestRectangleArea</span><span class="params">(<span class="keyword">int</span>[] heights)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">    Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; heights.length) &#123;</span><br><span class="line">        <span class="keyword">if</span> (stack.isEmpty()) &#123;</span><br><span class="line">            stack.push(i);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> peek = stack.peek();</span><br><span class="line">            <span class="keyword">if</span> (heights[i] &gt;= heights[peek]) &#123;</span><br><span class="line">                stack.push(i);</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">int</span> height = heights[stack.pop()];</span><br><span class="line">                <span class="keyword">int</span> leftMin = stack.isEmpty() ? -<span class="number">1</span> : stack.peek();</span><br><span class="line">                <span class="keyword">int</span> area = (i - leftMin - <span class="number">1</span>) * height;</span><br><span class="line">                max = Math.max(area, max);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">int</span> height = heights[stack.pop()];</span><br><span class="line">        <span class="keyword">int</span> leftMin = stack.isEmpty() ? -<span class="number">1</span> : stack.peek();</span><br><span class="line">        <span class="keyword">int</span> area = (heights.length - leftMin - <span class="number">1</span>) * height;</span><br><span class="line">        max = Math.max(area, max);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Stack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0071. Simplify Path</title>
      <link href="2020/10/30/0071-Simplify-Path/"/>
      <url>2020/10/30/0071-Simplify-Path/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="71-Simplify-Path-Medium"><a href="#71-Simplify-Path-Medium" class="headerlink" title="71. Simplify Path Medium"></a><a href="https://leetcode-cn.com/problems/simplify-path/">71. Simplify Path</a> <font color="#fd9016" size=5>Medium</font></h2><p>Given an <strong>absolute path</strong> for a file (Unix-style), simplify it. Or in other words, convert it to the <strong>canonical path</strong>.</p><p>In a UNIX-style file system, a period <code>.</code> refers to the current directory. Furthermore, a double period <code>..</code> moves the directory up a level.</p><p>Note that the returned canonical path must always begin with a slash <code>/</code>, and there must be only a single slash <code>/</code> between two directory names. The last directory name (if it exists) <strong>must not</strong> end with a trailing <code>/</code>. Also, the canonical path must be the <strong>shortest</strong> string representing the absolute path.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;&#x2F;home&#x2F;&quot;</span><br><span class="line">Output: &quot;&#x2F;home&quot;</span><br><span class="line">Explanation: Note that there is no trailing slash after the last directory name.</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;&#x2F;..&#x2F;&quot;</span><br><span class="line">Output: &quot;&#x2F;&quot;</span><br><span class="line">Explanation: Going one level up from the root directory is a no-op, as the root level is the highest level you can go.</span><br></pre></td></tr></table></figure><p><strong>Example 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;&#x2F;home&#x2F;&#x2F;foo&#x2F;&quot;</span><br><span class="line">Output: &quot;&#x2F;home&#x2F;foo&quot;</span><br><span class="line">Explanation: In the canonical path, multiple consecutive slashes are replaced by a single one.</span><br></pre></td></tr></table></figure><p><strong>Example 4:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;&#x2F;a&#x2F;.&#x2F;b&#x2F;..&#x2F;..&#x2F;c&#x2F;&quot;</span><br><span class="line">Output: &quot;&#x2F;c&quot;</span><br></pre></td></tr></table></figure><p><strong>Example 5:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;&#x2F;a&#x2F;..&#x2F;..&#x2F;b&#x2F;..&#x2F;c&#x2F;&#x2F;.&#x2F;&#x2F;&quot;</span><br><span class="line">Output: &quot;&#x2F;c&quot;</span><br></pre></td></tr></table></figure><p><strong>Example 6:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;&#x2F;a&#x2F;&#x2F;b&#x2F;&#x2F;&#x2F;&#x2F;c&#x2F;d&#x2F;&#x2F;.&#x2F;.&#x2F;&#x2F;..&quot;</span><br><span class="line">Output: &quot;&#x2F;a&#x2F;b&#x2F;c&quot;</span><br></pre></td></tr></table></figure><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šæ ˆ"><a href="#æ€è·¯ä¸€ï¼šæ ˆ" class="headerlink" title="æ€è·¯ä¸€ï¼šæ ˆ"></a>æ€è·¯ä¸€ï¼šæ ˆ</h3><p>è¿™ä¸¤ä¸ªæ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯åˆ†åˆ«ä½¿ç”¨æ•°ç»„å’Œæ ˆè€Œå·²</p><ul><li>é¦–å…ˆä» <code>/</code> åˆ†å¼€ï¼Œç„¶åç”¨æ ˆä¿å­˜ï¼Œå¦‚æœæ ˆä¸ä¸ºç©ºï¼Œä¸”å½“å‰å­—ç¬¦ä¸º <code>..</code> è¯´æ˜è¦è¿›è¡Œè¿›å…¥ä¸Šå±‚ç›®å½•ï¼Œæ­¤æ—¶å°†æ ˆä¸­çš„å…ƒç´ å¼¹å‡º</li><li>åªè¦ä¸ä¸ºç©ºã€ä¸ä¸º <code>.</code> ã€ä¸ä¸º <code>..</code> ï¼Œå°±æŠŠå…¶ä¸­çš„å…ƒç´ æ”¾å…¥æ ˆä¸­å³å¯</li><li>æœ€ååœ¨æœ€å‰é¢å’Œæ¯ä¸ªå­—ç¬¦ä¸²ä¸­é—´åŠ ä¸Š <code>/</code></li></ul><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">simplifyPath</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1. Stack</span></span><br><span class="line">    String[] split = path.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">    Stack&lt;String&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String s : split) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!stack.isEmpty() &amp;&amp; <span class="string">&quot;..&quot;</span>.equals(s)) &#123;</span><br><span class="line">            stack.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="string">&quot;.&quot;</span>.equals(s) &amp;&amp; !<span class="string">&quot;&quot;</span>.equals(s) &amp;&amp; !<span class="string">&quot;..&quot;</span>.equals(s)) &#123;</span><br><span class="line">            stack.push(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    List&lt;String&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;(stack);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;/&quot;</span> + String.join(<span class="string">&quot;/&quot;</span>, res);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p></blockquote><h3 id="æ€è·¯äºŒï¼šçº¯æ•°ç»„"><a href="#æ€è·¯äºŒï¼šçº¯æ•°ç»„" class="headerlink" title="æ€è·¯äºŒï¼šçº¯æ•°ç»„"></a>æ€è·¯äºŒï¼šçº¯æ•°ç»„</h3><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">simplifyPath</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line">    String[] split = path.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">    List&lt;String&gt; wordList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String s : split) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s.isEmpty() || s.equals(<span class="string">&quot;.&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        wordList.add(s);</span><br><span class="line">    &#125;</span><br><span class="line">    List&lt;String&gt; wordListSim = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String s : wordList) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s.equals(<span class="string">&quot;..&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!wordListSim.isEmpty()) &#123;</span><br><span class="line">                wordListSim.remove(wordListSim.size() - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            wordListSim.add(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;/&quot;</span> + String.join(<span class="string">&quot;/&quot;</span>, wordListSim);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Stack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>something need to learn or write</title>
      <link href="2020/10/29/something-need-to-learn-or-write/"/>
      <url>2020/10/29/something-need-to-learn-or-write/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><ul><li><input disabled="" type="checkbox"> å®ä½“ç±»ä½¿ç”¨ java.x çš„ valiation å’Œ hibernate çš„ validator è¿›è¡Œæ ¡éªŒ</li><li><input disabled="" type="checkbox"> Spring Data JPA çš„æ›´æ·±å…¥ä½¿ç”¨</li><li><input disabled="" type="checkbox"> Shiro æˆ–è€… Spring Security æ•´åˆ JWT</li><li><input disabled="" type="checkbox"> mapstruct å’Œ beansUtils çš„ç±»è‡ªåŠ¨èµ‹å€¼</li><li><input disabled="" type="checkbox"> Java 8-13 ä¸­çš„ä¸€äº›æ–°ç‰¹æ€§</li><li><input disabled="" type="checkbox"> å‰åç«¯åˆ†ç¦»ä¸­çš„å¼‚å¸¸å¤„ç†</li></ul><hr><h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><ul><li><input disabled="" type="checkbox"> å“ˆä½›çš„ CS 50 è¯¾ç¨‹</li><li><input disabled="" type="checkbox"> ä»é›¶æ­å»ºä¸€ä¸ª Hexo ä¸»é¢˜</li></ul><hr><h3 id="Leetcode"><a href="#Leetcode" class="headerlink" title="Leetcode"></a>Leetcode</h3><ul><li><input checked="" disabled="" type="checkbox"> <a href="http://141.164.52.228/tags/Array/">æ•°ç»„</a></li><li><input checked="" disabled="" type="checkbox"> <a href="http://141.164.52.228/tags/LinkedList/">é“¾è¡¨</a></li><li><input disabled="" type="checkbox"> æ ˆ</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0042. Trapping Rain Water</title>
      <link href="2020/10/28/0042-Trapping-Rain-Water/"/>
      <url>2020/10/28/0042-Trapping-Rain-Water/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="42-Trapping-Rain-Water-Hard"><a href="#42-Trapping-Rain-Water-Hard" class="headerlink" title="42. Trapping Rain Water Hard"></a><a href="https://leetcode-cn.com/problems/trapping-rain-water/">42. Trapping Rain Water</a> <font color="#e82f34" size=5>Hard</font></h2><p>Given <code>n</code> non-negative integers representing an elevation map where the width of each bar is <code>1</code>, compute how much water it can trap after raining.</p><p><strong>Example 1:</strong></p><p><img src="https://assets.leetcode.com/uploads/2018/10/22/rainwatertrap.png" class="lazyload" data-srcset="https://assets.leetcode.com/uploads/2018/10/22/rainwatertrap.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: height &#x3D; [0,1,0,2,1,0,1,3,2,1,2,1]</span><br><span class="line">Output: 6</span><br><span class="line">Explanation: The above elevation map (black section) is represented by array [0,1,0,2,1,0,1,3,2,1,2,1]. In this case, 6 units of rain water (blue section) are being trapped.</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: height &#x3D; [4,2,0,3,2,5]</span><br><span class="line">Output: 9</span><br></pre></td></tr></table></figure><p><strong>Constraints:</strong></p><ul><li><code>n == height.length</code></li><li><code>0 &lt;= n &lt;= 3 * 104</code></li><li><code>0 &lt;= height[i] &lt;= 105</code></li></ul><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šè¡Œæ±‚è§£"><a href="#æ€è·¯ä¸€ï¼šè¡Œæ±‚è§£" class="headerlink" title="æ€è·¯ä¸€ï¼šè¡Œæ±‚è§£"></a>æ€è·¯ä¸€ï¼šè¡Œæ±‚è§£</h3><p>æ¯æ¬¡æ±‚ä¸€è¡Œçš„æ‰€æœ‰æ°´ï¼š</p><ul><li>é¦–å…ˆè¦æ ‡è®°æ˜¯å¦å¼€å§‹ï¼Œåªè¦ç¬¬ä¸€æ¬¡å‡ºç° height[i] &gt;= å½“å‰å±‚æ¬¡çš„å€¼æ—¶ï¼Œæ‰å¼€å§‹è®¡æ•°ï¼Œå› ä¸ºå®ƒå·¦è¾¹æ²¡æœ‰å¢™</li></ul><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// find the maximum num in the height</span></span><br><span class="line">    <span class="keyword">int</span> max = Integer.MIN_VALUE;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i : height) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; max) max = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= max; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">boolean</span> start = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> value : height) &#123;</span><br><span class="line">            <span class="keyword">if</span> (start &amp;&amp; value &lt; i) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (value &gt;= i) &#123;</span><br><span class="line">                res += count;</span><br><span class="line">                count = <span class="number">0</span>;</span><br><span class="line">                start = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n * m)        å…¶ä¸­ n ä¸ºæ•°ç»„é•¿åº¦ï¼Œm ä¸ºæ•°ç»„ä¸­æœ€å¤§çš„å€¼</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p></blockquote><h3 id="æ€è·¯äºŒï¼šåˆ—æ±‚è§£"><a href="#æ€è·¯äºŒï¼šåˆ—æ±‚è§£" class="headerlink" title="æ€è·¯äºŒï¼šåˆ—æ±‚è§£"></a>æ€è·¯äºŒï¼šåˆ—æ±‚è§£</h3><ul><li>åªè¦å…³æ³¨äºæ¯ä¸€åˆ—å°±è¡Œï¼Œä¸”å…³æ³¨è¯¥åˆ—çš„å·¦è¾¹æœ€é«˜åˆ—å’Œå³è¾¹æœ€é«˜åˆ—</li><li>å¦‚ä½•æ±‚è§£è¯¥åˆ—çš„æ°´ï¼Œåªéœ€è¦å°†è¿™å·¦å³é«˜åˆ—ä¸­è¾ƒä½çš„é‚£ä¸ªå‡å»å½“å‰çš„åˆ—çš„é«˜åº¦å³å¯</li></ul><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 2. column</span></span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; height.length; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> minColumn = getMinColumn(i, height);</span><br><span class="line">        <span class="keyword">if</span> (minColumn &gt; height[i]) &#123;</span><br><span class="line">            count += (minColumn - height[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getMinColumn</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">int</span>[] height)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> left = <span class="number">0</span>, right = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (height[i] &gt; left) left = height[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = index + <span class="number">1</span>; i &lt; height.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (height[i] &gt; right) right = height[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Math.min(left, right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)    </p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p></blockquote><h3 id="æ€è·¯ä¸‰ï¼šæ ˆ"><a href="#æ€è·¯ä¸‰ï¼šæ ˆ" class="headerlink" title="æ€è·¯ä¸‰ï¼šæ ˆ"></a>æ€è·¯ä¸‰ï¼šæ ˆ</h3><p>å¯ä»¥æƒ³è±¡ä¸ºæ‹¬å·åŒ¹é…ï¼šå…¶ä¸­å¢™å¯ä»¥çœ‹ä½œ<code>æ‹¬å·</code>ï¼Œæ°´å¯ä»¥çœ‹ä½œæ‹¬å·åŒ¹é…çš„ä¸­é—´è®¡ç®—</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 3. Stack</span></span><br><span class="line">    Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (cur &lt; height.length) &#123;</span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; height[cur] &gt; height[stack.peek()]) &#123;</span><br><span class="line">            <span class="keyword">int</span> temp = height[stack.peek()];</span><br><span class="line">            stack.pop();</span><br><span class="line">            <span class="keyword">if</span> (stack.isEmpty()) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">int</span> len = cur - stack.peek() - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> min = Math.min(height[cur], height[stack.peek()]);</span><br><span class="line">            res += (min - temp) * len;</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(cur);</span><br><span class="line">        cur++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯å››ï¼šåŠ¨æ€è§„åˆ’"><a href="#æ€è·¯å››ï¼šåŠ¨æ€è§„åˆ’" class="headerlink" title="æ€è·¯å››ï¼šåŠ¨æ€è§„åˆ’"></a>æ€è·¯å››ï¼šåŠ¨æ€è§„åˆ’</h3><p>åœ¨æ€è·¯äºŒä¸­ï¼Œæ˜¯ä½¿ç”¨æ²¡æ¬¡æ‰¾ä¸€ä¸ªæ•°ï¼Œéƒ½è¦éå†æ•´ä¸ªæ•°ç»„æ‰¾åˆ°å·¦è¾¹å’Œå³è¾¹çš„æœ€é«˜åˆ—ï¼Œç„¶åè¿›è¡Œè®¡ç®—ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œä½¿ç”¨ä¸€ä¸ª dp æ•°ç»„å°†è¿™äº›å€¼ç»´æŠ¤èµ·æ¥ï¼š</p><p>ç¬¬ i åˆ—çš„å·¦è¾¹æœ€é«˜åˆ—å’Œå³è¾¹æœ€é«˜åˆ—åº”è¯¥ä¸ºï¼š</p><p><code>left[i] = max(left[i - 1], height[i - 1])</code></p><p><code>right[i] = max(right[i + 1], height[i + 1])</code></p><p>è¿™æ ·ç”¨ä¸¤ä¸ªæ•°ç»„å»ç»´æŠ¤å°±è¡Œäº†ï¼Œæ¯æ¬¡éå†çš„æ—¶å€™ç›´æ¥åœ¨è¿™ä¸ª dp æ•°ç»„ä¸­å–å°±è¡Œäº†</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span>[] left = <span class="keyword">new</span> <span class="keyword">int</span>[height.length];</span><br><span class="line">    <span class="keyword">int</span>[] right = <span class="keyword">new</span> <span class="keyword">int</span>[height.length];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// use array to save the maximum left num of every item</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; height.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        left[i] = Math.max(left[i - <span class="number">1</span>], height[i - <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// use array to save the maximum right num of every item</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = height.length - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        right[i] = Math.max(right[i + <span class="number">1</span>], height[i + <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; height.length; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> minColumn = Math.min(left[i], right[i]);</span><br><span class="line">        <span class="keyword">if</span> (minColumn &gt; height[i]) &#123;</span><br><span class="line">            res += minColumn - height[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(nï¼‰    </p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p></blockquote><h3 id="æ€è·¯äº”ï¼šåŠ¨æ€è§„åˆ’-åŒæŒ‡é’ˆ"><a href="#æ€è·¯äº”ï¼šåŠ¨æ€è§„åˆ’-åŒæŒ‡é’ˆ" class="headerlink" title="æ€è·¯äº”ï¼šåŠ¨æ€è§„åˆ’ + åŒæŒ‡é’ˆ"></a>æ€è·¯äº”ï¼šåŠ¨æ€è§„åˆ’ + åŒæŒ‡é’ˆ</h3><p>åœ¨æ€è·¯å››ä¸­ï¼Œå·²ç»ä½¿ç”¨ dp æ•°ç»„å»å­˜å‚¨å·¦è¾¹å’Œå³è¾¹çš„æœ€é«˜åˆ—ï¼Œä½†æ˜¯ä»”ç»†æ€è€ƒä¸€ä¸‹ï¼Œè¿™ä¸ª dp æ•°ç»„ä¸­çš„å€¼ï¼Œå…¶å®å°±ä½¿ç”¨ä¸€æ¬¡ï¼Œé‚£ä¹ˆå¯ä»¥å°†è¿™ä¸ªç©ºé—´å¤æ‚åº¦å†é™ä½ä¸€ç‚¹ï¼Œæœ‰ç‚¹ç±»ä¼¼äºç”¨åŠ¨æ€è§„åˆ’æ±‚è§£æ–æ³¢é‚£å¥‘æ•°åˆ—</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trap</span><span class="params">(<span class="keyword">int</span>[] height)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>, l = <span class="number">0</span>, r = height.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">        <span class="keyword">int</span> mn = Math.min(height[l], height[r]);</span><br><span class="line">        <span class="keyword">if</span> (height[l] == mn) &#123;</span><br><span class="line">            ++l;</span><br><span class="line">            <span class="keyword">while</span> (l &lt; r &amp;&amp; height[l] &lt; mn) &#123;</span><br><span class="line">                res += mn - height[l++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            --r;</span><br><span class="line">            <span class="keyword">while</span> (l &lt; r &amp;&amp; height[r] &lt; mn) &#123;</span><br><span class="line">                res += mn - height[r--];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(nï¼‰    </p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Stack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0020. Valid Parentheses</title>
      <link href="2020/10/28/0020-Valid-Parentheses/"/>
      <url>2020/10/28/0020-Valid-Parentheses/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="20-Valid-Parentheses-Easy"><a href="#20-Valid-Parentheses-Easy" class="headerlink" title="20. Valid Parentheses Easy"></a><a href="https://leetcode-cn.com/problems/valid-parentheses/">20. Valid Parentheses</a> <font color="#49b666" size=5>Easy</font></h2><p>Given a string <code>s</code> containing just the characters <code>&#39;(&#39;</code>, <code>&#39;)&#39;</code>, <code>&#39;&#123;&#39;</code>, <code>&#39;&#125;&#39;</code>, <code>&#39;[&#39;</code> and <code>&#39;]&#39;</code>, determine if the input string is valid.</p><p>An input string is valid if:</p><ol><li>Open brackets must be closed by the same type of brackets.</li><li>Open brackets must be closed in the correct order.</li></ol><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: s &#x3D; &quot;()&quot;</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: s &#x3D; &quot;()[]&#123;&#125;&quot;</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure><p><strong>Example 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: s &#x3D; &quot;(]&quot;</span><br><span class="line">Output: false</span><br></pre></td></tr></table></figure><p><strong>Example 4:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: s &#x3D; &quot;([)]&quot;</span><br><span class="line">Output: false</span><br></pre></td></tr></table></figure><p><strong>Example 5:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: s &#x3D; &quot;&#123;[]&#125;&quot;</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure><p><strong>Constraints:</strong></p><ul><li><code>1 &lt;= s.length &lt;= 104</code></li><li><code>s</code> consists of parentheses only <code>&#39;()[]&#123;&#125;&#39;</code>.</li></ul><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šæ ˆ"><a href="#æ€è·¯ä¸€ï¼šæ ˆ" class="headerlink" title="æ€è·¯ä¸€ï¼šæ ˆ"></a>æ€è·¯ä¸€ï¼šæ ˆ</h3><p>åœ¨æ ˆçš„é‚£ä¸€èŠ‚ä¸­ï¼Œå°±æåŠåˆ°äº†æ ˆçš„å…¶ä¸­ä¸€ä¸ªåº”ç”¨å°±æ˜¯æ‹¬å·åŒ¹é…ï¼Œå¤§è‡´æ€è·¯å¦‚ä¸‹ï¼š</p><p>é‡åˆ° <code>(</code>ã€ <code>&#123;</code>ã€ <code>[</code> è¿™ä¸‰ç§å·¦æ‹¬å·ï¼Œç›´æ¥è®©å®ƒå…¥æ ˆï¼Œç›´åˆ°å‡ºç° <code>ï¼‰</code>ã€ <code>&#125;</code>ã€ <code>]</code> ï¼Œé¦–å…ˆåˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºæˆ–è€…æ ˆé¡¶çš„å…ƒç´ æ˜¯å¦å¯¹åº”ï¼Œå¦‚æœå¯¹åº”ï¼Œé‚£ä¹ˆè®©å®ƒå‡ºæ ˆï¼Œç»§ç»­ä¸Šè¿°æ“ä½œå³å¯</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (s == <span class="keyword">null</span> || s.length() == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    Stack&lt;Character&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">        <span class="keyword">char</span> temp = s.charAt(i);</span><br><span class="line">        <span class="keyword">if</span> (temp != <span class="string">&#x27;)&#x27;</span> &amp;&amp; temp != <span class="string">&#x27;]&#x27;</span> &amp;&amp; temp != <span class="string">&#x27;&#125;&#x27;</span>) &#123;</span><br><span class="line">            stack.push(s.charAt(i));</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (temp == <span class="string">&#x27;)&#x27;</span> &amp;&amp; !stack.isEmpty() &amp;&amp; stack.peek() == <span class="string">&#x27;(&#x27;</span> ||</span><br><span class="line">                temp == <span class="string">&#x27;]&#x27;</span> &amp;&amp; !stack.isEmpty() &amp;&amp; stack.peek() == <span class="string">&#x27;[&#x27;</span> ||</span><br><span class="line">                temp == <span class="string">&#x27;&#125;&#x27;</span> &amp;&amp; !stack.isEmpty() &amp;&amp; stack.peek() == <span class="string">&#x27;&#123;&#x27;</span>) &#123;</span><br><span class="line">            stack.pop();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p></blockquote><p>è¿˜çœ‹åˆ°äº†ä¸€ç§åå‘å†™æ³•</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(s.isEmpty()) &#123; <span class="keyword">return</span> <span class="keyword">true</span>; &#125;</span><br><span class="line">    Stack&lt;Character&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">char</span> c:s.toCharArray())&#123;</span><br><span class="line">        <span class="keyword">if</span>(c == <span class="string">&#x27;(&#x27;</span>) &#123; stack.push(<span class="string">&#x27;)&#x27;</span>); &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(c == <span class="string">&#x27;[&#x27;</span>) &#123; stack.push(<span class="string">&#x27;]&#x27;</span>); &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(c == <span class="string">&#x27;&#123;&#x27;</span>) &#123; stack.push(<span class="string">&#x27;&#125;&#x27;</span>); &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(stack.isEmpty() || stack.pop() != c)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Stack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Stack</title>
      <link href="2020/10/27/Stack/"/>
      <url>2020/10/27/Stack/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201027195704.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201027195704.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201027195658275"></p><p>å¿«é€Ÿé¢„è§ˆï¼š</p><ul><li>ğŸ·ï¼šç¬¬ä¸€å°èŠ‚çœ‹ä¸€ä¸‹æ ˆçš„ç‰¹æ€§ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§å—é™çš„æ•°æ®ç»“æ„çš„å‡ºç°ï¼Ÿ</li><li>ğŸ¢ï¼šç¬¬äºŒå°èŠ‚çœ‹ä¸€ä¸‹è¦å®ç°ä¸€ä¸ªæ ˆï¼Œæœ€åŸºæœ¬éœ€è¦ä»€ä¹ˆæ“ä½œï¼Ÿ</li><li>ğŸ­ï¼šç¬¬ä¸‰å°èŠ‚çœ‹ä¸€ä¸‹æ ˆçš„çš„åº”ç”¨ï¼Œæ˜¯ä¸æ˜¯è¿™äº›åº”ç”¨é©±åŠ¨ç€æ ˆçš„è¯ç”Ÿ</li><li>ğŸ¦ï¼šæœ€åä¸€ä¸ªå°èŠ‚è¿˜æ˜¯è€å¥—è·¯ï¼Œç®€å•çš„çœ‹ä¸€ä¸‹ Java ä¸­å…³äºæ ˆçš„ API</li></ul><h2 id="äºŒã€ç‰¹æ€§"><a href="#äºŒã€ç‰¹æ€§" class="headerlink" title="äºŒã€ç‰¹æ€§"></a>äºŒã€ç‰¹æ€§</h2><p>â€‹        åœ¨å‰é¢å·²ç»ä»‹ç»äº†æ•°ç»„å’Œé“¾è¡¨ä¸¤ç§æœ€åŸºæœ¬çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥è¯´ä»–ä¿©å°±æ˜¯æ•´ä¸ªæ•°æ®ç»“æ„ä¸ç®—æ³•çš„åŸºçŸ³ã€‚çœ‹ä¸€ä¸‹æ ˆçš„ç»„æˆï¼š</p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201027201132.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201027201132.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201027201130766" style="zoom:67%;" /><p>é‚£ä¹ˆå®ƒå’Œå…¶ä»–çº¿æ€§è¡¨æœ€å¤§çš„åŒºåˆ«åœ¨å“ªå‘¢ï¼Ÿæ¯«æ— ç–‘é—®ï¼šå®ƒåªå…è®¸åœ¨<code>ä¸€ç«¯è¿›è¡Œæ’å…¥å’Œåˆ é™¤</code></p><p>æˆ–è€…è¯´æˆ <code>å…ˆè¿›åå‡ºã€åè¿›å…ˆå‡º</code></p><p>æ­¤æ—¶ï¼Œå°æœ‹å‹ï¼Œä½ æ˜¯å¦æœ‰å¾ˆå¤šé—®å·ï¼Ÿä¸ºä»€ä¹ˆè¦æœ‰è¿™ç§å—é™çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ç”¨æ•°ç»„å’Œé“¾è¡¨ä¸é¦™å—ï¼Ÿå½“ç„¶æ ˆå°±æ˜¯åŸºäºæ•°ç»„æˆ–é“¾è¡¨å®ç°çš„ï¼Œä½†æ˜¯åœ¨ç‰¹å®šçš„éœ€æ±‚ä¸‹ï¼Œæ ˆå°±åº”ç”¨è€Œç”Ÿäº†ã€‚å…·ä½“å¯ä»¥å‚è€ƒä¸‹é¢çš„æ ˆçš„åº”ç”¨å’Œ Java ä¸­æ ˆï¼Œå°±å¯ä»¥çœ‹åˆ°åœ¨æŸäº›æƒ…å†µä¸‹æ ˆçš„ä¼˜åŠ¿ã€ä»¥åŠç”±äºæ•°ç»„å’Œé“¾è¡¨æš´éœ²å‡ºå¤ªå¤šçš„æ¥å£ï¼Œè€Œæ ˆåªéœ€è¦å…¶ä¸­çš„ä¸€å°éƒ¨åˆ†å°±å¯ä»¥äº†</p><h2 id="ä¸‰ã€å®ç°æ ˆ"><a href="#ä¸‰ã€å®ç°æ ˆ" class="headerlink" title="ä¸‰ã€å®ç°æ ˆ"></a>ä¸‰ã€å®ç°æ ˆ</h2><p>æˆ‘ä»¬åœ¨ä¸Šé¢å°±æåˆ°äº†ï¼Œæ ˆæ—¢å¯ä»¥åŸºäºæ•°ç»„å®ç°ï¼Œä¹Ÿå¯ä»¥åŸºäºé“¾è¡¨å®ç°ã€‚æ ˆæœ€é‡è¦çš„ä¸¤ä¸ªæ“ä½œï¼š<code>å…¥æ ˆ</code> å’Œ <code>å‡ºæ ˆ</code> </p><h3 id="3-1-å®šå®¹æ ˆ"><a href="#3-1-å®šå®¹æ ˆ" class="headerlink" title="3.1 å®šå®¹æ ˆ"></a>3.1 å®šå®¹æ ˆ</h3><p>è¿™æ˜¯ã€Šç®—æ³•ã€‹ä¸­æ–‡ç‰ˆä¸­çš„è¯‘åï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å®¹é‡å›ºå®šçš„æ ˆï¼ŒåŸºäºæ•°ç»„å¹¶ç”¨ Java ä»£ç æ¥å®ç°ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FixedCapacityStackOfString</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] items;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FixedCapacityStackOfString</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.items = <span class="keyword">new</span> String[n];</span><br><span class="line">        <span class="keyword">this</span>.count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.n = n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¥æ ˆ</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">push</span><span class="params">(String item)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (count == n) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        items[count] = item;</span><br><span class="line">        count++;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‡ºæ ˆ</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (count == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        String item = items[count - <span class="number">1</span>];</span><br><span class="line">        count--;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(1)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)   ä¸åŒ…å«è¯¥æ ˆæœ¬èº«ï¼Œæ“ä½œæ—¶çš„ç©ºé—´å¤æ‚åº¦</p></blockquote><h3 id="3-2-æ‰©å®¹æ ˆ"><a href="#3-2-æ‰©å®¹æ ˆ" class="headerlink" title="3.2 æ‰©å®¹æ ˆ"></a>3.2 æ‰©å®¹æ ˆ</h3><p>åœ¨ä¸Šé¢çš„å®šå®¹æ ˆä¸­ï¼Œæ˜¯ç”¨ä¸€ä¸ªå›ºå®šå¤§å°çš„æ•°ç»„å½“æˆå®ç°æ ˆçš„ç»“æ„ï¼Œé‚£ä¹ˆåº”è¯¥å¦‚ä½•å®ç°ä¸€ä¸ªæ‰©å®¹æ ˆå‘¢ï¼Ÿ</p><p>å…¶å®ä¹Ÿå¾ˆå¥½å®ç°ï¼Œå›å¿†ä¸€ä¸‹åŠ¨æ€æ•°ç»„çš„äº‹é¡¹ï¼Œæ˜¯å°†æ•°ç»„è¿›è¡Œæ‰©å®¹ï¼Œç„¶åå°†åŸæ¥çš„æ•°æ® copy è¿›å»å°±è¡Œäº†ï¼›é‚£ä¹ˆç”¨åŒæ ·çš„æ–¹å¼å¯¹åŸºäºæ•°ç»„çš„æ ˆè¿›è¡Œæ‰©å®¹ (å½“ç„¶åŸºäºé“¾è¡¨å®ç°çš„æ ˆå°±æ²¡æœ‰è¿™ä¸€æ¦‚å¿µï¼Œç†è®ºä¸Šåªè¦å†…å­˜ç©ºé—´è¶³å¤Ÿå¤§ï¼Œæ ˆå¯ä»¥æ— é™å¤§)</p><ul><li>å½“æ ˆæ»¡çš„æ—¶å€™ï¼Œè¿›è¡Œæ‰©å®¹ï¼šæ–°å»ºä¸€ä¸ªæ¯”ç°åœ¨å¤§çš„æ•°ç»„</li><li>å°†åŸæ¥æ ˆä¸­çš„æ•°æ®å…¨éƒ¨å¤åˆ¶åˆ°æ–°çš„æ•°ç»„ä¸­</li></ul><p>å…·ä½“å®ç°å¯ä»¥å‚è€ƒä¸‹é¢çš„ç¬¬äº”å°èŠ‚</p><h2 id="å››ã€æ ˆçš„åº”ç”¨"><a href="#å››ã€æ ˆçš„åº”ç”¨" class="headerlink" title="å››ã€æ ˆçš„åº”ç”¨"></a>å››ã€æ ˆçš„åº”ç”¨</h2><h3 id="4-1-æ’¤é”€æ“ä½œ"><a href="#4-1-æ’¤é”€æ“ä½œ" class="headerlink" title="4.1 æ’¤é”€æ“ä½œ"></a>4.1 æ’¤é”€æ“ä½œ</h3><p>â€‹        å¦‚æœä½ ç»å¸¸ä½¿ç”¨ command + Z æˆ–è€… ctrl + Zï¼Œä½ å¯èƒ½ä¼šéå¸¸ç†è§£è¿™ä¸ªæ“ä½œï¼šå½“æˆ‘ä»¬å¤åˆ¶æˆ–è€…ä¿®æ”¹äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬æƒ³æŠŠå®ƒæ¢å¤æˆå¤åˆ¶æˆ–ä¿®æ”¹ä¹‹å‰çš„ä¸€æ ·çš„çŠ¶æ€ï¼Œåªéœ€è¦æŒ‰ä¸Šé¢çš„å¿«æ·é”®å°±è¡Œäº†ï¼Œä»”ç»†æƒ³ä¸€ä¸‹æ˜¯å¦æœ‰æ ˆçš„å½±å­åœ¨é‡Œé¢</p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201027215546.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201027215546.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201027215543027" style="zoom:80%;" /><p>å°±å¦‚åŒä¸Šé¢è¿™ä¸ªä¾‹å­ï¼šæˆ‘ä»¬å†™åˆ°äº† wangbaï¼Œéšååˆä¸æƒ³è¦ wangba äº†ï¼Œæ­¤æ—¶è¿›è¡Œæ’¤é”€æ“ä½œï¼Œåªéœ€è¦å°†æ ˆä¸­çš„ wangba pop å°±å¯ä»¥äº†ï¼Œæœ‰çš„è¿˜æœ‰å‰è¿›åŠŸèƒ½ï¼Œæ­¤æ—¶åªéœ€è¦å°†å…¶ push è¿›æ¥å³å¯</p><h3 id="4-2-å‡½æ•°è°ƒç”¨"><a href="#4-2-å‡½æ•°è°ƒç”¨" class="headerlink" title="4.2 å‡½æ•°è°ƒç”¨"></a>4.2 å‡½æ•°è°ƒç”¨</h3><p>â€‹        å¦‚æœäº†è§£è¿‡æ“ä½œç³»ç»Ÿæˆ–è€…å¬è¯´è¿‡å‡½æ•°è°ƒç”¨ï¼Œé‚£ä¹ˆå¯ä»¥æ›´å®¹æ˜“ç†è§£ä¸‹é¢çš„å†…å®¹ï¼Œåœ¨è®¡ç®—æœºä¸­ï¼Œæ“ä½œç³»ç»Ÿä¼šç»™æ¯ä¸ªçº¿ç¨‹åˆ†é…ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œè€Œè¿™ä¸ªå†…å­˜ç©ºé—´å°±æ˜¯æ ˆå¼ç»“æ„ï¼Œä¸“é—¨ä¸ºå‡½æ•°è°ƒç”¨å­˜å‚¨ä¸´æ—¶å˜é‡ï¼Œå°±ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">1</span>, b = <span class="number">2</span>;</span><br><span class="line">      <span class="keyword">int</span> res = add(a, b);</span><br><span class="line">    System.out.println(res);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Integer <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢è¿™æ®µ Java ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹è§åœ¨ main ä¸­è°ƒç”¨äº† add å‡½æ•°ï¼Œåœ¨æ ˆå¸§ä¸­åº”è¯¥å°±æ˜¯è¿™æ ·ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201123155657.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201123155657.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201123155657021"></p><blockquote><p>å½“ç„¶ï¼ŒçœŸå®æƒ…å†µä¸æ˜¯è¿™æ ·çš„ï¼Œè¦æ˜¯è¿™ä¹ˆç®€å•ï¼Œè®¡ç®—æœºåº•å±‚å°±ä¸ä¼šè¿™ä¹ˆåŠé€€äº† ï½ï½ï½</p><p>å¦‚æœæœ‰å…´è¶£äº†è§£æ›´æ·±å¯ä»¥å‚è€ƒï¼šã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹æˆ–è€…æƒ³å¤§æ¦‚äº†è§£ä¸€ä¸‹å¯ä»¥å‚è€ƒ <a href="https://blog.csdn.net/wangyezi19930928/article/details/16921927">è¿™ä¸ª</a></p></blockquote><h3 id="4-3-è¡¨è¾¾å¼æ±‚å€¼"><a href="#4-3-è¡¨è¾¾å¼æ±‚å€¼" class="headerlink" title="4.3 è¡¨è¾¾å¼æ±‚å€¼"></a>4.3 è¡¨è¾¾å¼æ±‚å€¼</h3><p>ğŸ¢ï¼šåœ¨ç¼–è¯‘å™¨ä¸­æ˜¯å¦‚ä½•å¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼çš„å‘¢ï¼Ÿå¦‚æœæ˜¯åç¼€è¡¨è¾¾å¼å°±åªéœ€è¦ä¸€ä¸ªæ“ä½œæ ˆå³å¯ï¼›å¦‚æœæ˜¯å‰ç¼€æˆ–ä¸­ç¼€è¡¨è¾¾å¼åˆ™éœ€è¦ä¸€ä¸ªæ“ä½œæ•°æ ˆå’Œä¸€ä¸ªæ“ä½œç¬¦æ ˆï¼Œæ¥çœ‹ä¸€ä¸‹ä¸­ç¼€è¡¨è¾¾å¼çš„æ±‚å€¼è¿‡ç¨‹ï¼š</p><p><code>a * (b + c)</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201123165540.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201123165540.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201123165539976"></p><p>è¿‡ç¨‹å¤§æ¦‚å¦‚ä¸‹ï¼š</p><ul><li>é‡åˆ°æ“ä½œæ•°å°±å‹åˆ°æ“ä½œæ•°çš„æ ˆï¼›é‡åˆ°æ“ä½œç¬¦å°±å‹åˆ°æ“ä½œç¬¦çš„æ ˆ</li><li>åœ¨å‹åˆ°æ“ä½œç¬¦çš„æ ˆæ˜¯æœ‰æ¡ä»¶çš„ï¼šå¦‚æœæ“ä½œç¬¦<code>æ ˆé¡¶çš„ç¬¦å·</code>çš„ä¼˜å…ˆçº§å¤§äºç­‰äºè¦<code>å‹å…¥çš„ç¬¦å·</code>ï¼Œé‚£å°±å–æ“ä½œæ•°æ ˆé¡¶çš„ä¸¤ä¸ªæ•°è¿›è¡Œè®¡ç®—ï¼›å¦‚æœå°äºåˆ™ç›´æ¥æŠŠæ“ä½œç¬¦å‹å…¥æ“ä½œç¬¦çš„æ ˆ</li></ul><h3 id="4-4-æ‹¬å·åŒ¹é…"><a href="#4-4-æ‹¬å·åŒ¹é…" class="headerlink" title="4.4 æ‹¬å·åŒ¹é…"></a>4.4 æ‹¬å·åŒ¹é…</h3><p>å…³äºæ‹¬å·åŒ¹é…å¯ä»¥å‚è€ƒ <a href="https://leetcode-cn.com/problems/valid-parentheses/">LeetCode 0020</a>ï¼Œå…³äºè¿™é¢˜çš„è§£ç­”å¯ä»¥çœ‹ <a href="http://wangba.me/2020/10/28/0020-Valid-Parentheses/">0020. Valid Parentheses</a></p><h2 id="äº”ã€Javaä¸­çš„æ ˆ"><a href="#äº”ã€Javaä¸­çš„æ ˆ" class="headerlink" title="äº”ã€Javaä¸­çš„æ ˆ"></a>äº”ã€Javaä¸­çš„æ ˆ</h2><p>é¦–å…ˆçœ‹ä¸€ä¸‹ç»§æ‰¿ä¸å®ç°çš„å…³ç³»ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201123170705.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201123170705.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201123170704974"></p><p>å†çœ‹ä¸€ä¸‹è¯¥ç±»ä¸­çš„ Structure :</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201123170836.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201123170836.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201123170835999"></p><p>å¯ä»¥çœ‹å‡ºæ¥å¾ˆç®€å•ï¼Œå°±å¦‚åŒä¸Šé¢åœ¨å®šå®¹æ ˆä¸­çš„æ“ä½œå·®ä¸å¤šï¼Œå®é™…ä¸Šå·®çš„å¾ˆå¤šï¼Œè¦è€ƒè™‘åˆ°æ‰©å®¹ã€å¹¶å‘ç­‰ç­‰æƒ…å†µï¼Œæ“ä½œå¤§éƒ½æ˜¯åœ¨ä»–çš„çˆ¶ç±» Vertor ä¸­å®Œæˆï¼Œå¦‚æœä½ çœ‹è¿‡é¢ç»å•¥çš„ï¼Œä½ åº”è¯¥å°±å¬è¿‡å¹¶å‘ä¸è¦ä½¿ç”¨ Vertorï¼Œè¦å¤šä½¿ç”¨ JUC åŒ…ä¸‹é¢çš„ç±»ï¼Œç„¶åç©¶å…¶åŸå› å°±æ˜¯ï¼šVertor ä½¿ç”¨ <code>synchronized</code> å…³é”®å­—ï¼ŒJUC åŒ…ä¸‹çš„æ˜¯ä½¿ç”¨ <code>ReentrantLock</code>ï¼Œè€Œå¯é‡å…¥é”çš„åº•å±‚åˆ™æ˜¯ AQS</p><p>LeetCode é‡ç‚¹å…³äºæ ˆçš„é‡ç‚¹ï¼š<code>Monotonic Stack</code></p>]]></content>
      
      
      <categories>
          
          <category> é‡å­¦ç®—æ³•ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>148. SortList</title>
      <link href="2020/10/26/148-SortList/"/>
      <url>2020/10/26/148-SortList/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="148-Sort-List-Medium"><a href="#148-Sort-List-Medium" class="headerlink" title="148. Sort List Medium"></a><a href="https://leetcode-cn.com/problems/sort-list/">148. Sort List</a> <font color="#fd9016" size=5>Medium</font></h2><p>Given the <code>head</code> of a linked list, return <em>the list after sorting it in <strong>ascending order</strong></em>.</p><p><strong>Follow up:</strong> Can you sort the linked list in <code>O(n logn)</code> time and <code>O(1)</code> memory (i.e. constant space)?</p><p><strong>Example 1:</strong></p><p><img src="https://assets.leetcode.com/uploads/2020/09/14/sort_list_1.jpg" class="lazyload" data-srcset="https://assets.leetcode.com/uploads/2020/09/14/sort_list_1.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: head &#x3D; [4,2,1,3]</span><br><span class="line">Output: [1,2,3,4]</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><p><img src="https://assets.leetcode.com/uploads/2020/09/14/sort_list_2.jpg" class="lazyload" data-srcset="https://assets.leetcode.com/uploads/2020/09/14/sort_list_2.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: head &#x3D; [-1,5,3,4,0]</span><br><span class="line">Output: [-1,0,3,4,5]</span><br></pre></td></tr></table></figure><p><strong>Example 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: head &#x3D; []</span><br><span class="line">Output: []</span><br></pre></td></tr></table></figure><p><strong>Constraints:</strong></p><ul><li>The number of nodes in the list is in the range <code>[0, 5 * 104]</code>.</li><li><code>-105 &lt;= Node.val &lt;= 105</code></li></ul><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šé€’å½’æ³•"><a href="#æ€è·¯ä¸€ï¼šé€’å½’æ³•" class="headerlink" title="æ€è·¯ä¸€ï¼šé€’å½’æ³•"></a>æ€è·¯ä¸€ï¼šé€’å½’æ³•</h3><ul><li>å½’å¹¶æ’åº</li><li>æ‰¾é“¾è¡¨ä¸­ç‚¹</li><li>å“¨å…µ</li></ul><p>æœ¬é¢˜æ˜¯ä¸€ä¸ªæ— åºé“¾è¡¨çš„æ’åºé—®é¢˜ï¼Œè¦æ±‚æ˜¯ç©ºé—´å¤æ‚åº¦ä¸º <code>O(nlogn)</code> ï¼Œé‚£åªèƒ½æƒ³åˆ°å¿«é€Ÿæ’åºã€å½’å¹¶æ’åºã€å †æ’åºï¼Œå¿«æ’ä¸Šé€šè¿‡ç´¢å¼•çš„ï¼Œä¸é€‚åˆç”¨åœ¨é“¾è¡¨ä¸­ï¼›å †æ’åºæ–°å»ºç»“ç‚¹ä¸­ï¼›è¿™é¢˜å¯é‡‡ç”¨å½’å¹¶æ’åºï¼Œåœ¨ <a href="http://wangba.me/2020/10/13/0021-Merge-Two-Sorted-Lists/">21é¢˜</a> ä¸­ä»‹ç»äº†åˆå¹¶ä¸¤ä¸ªæœ‰åºåˆ—è¡¨ï¼Œç°åœ¨åªæ˜¯ä¸€ä¸ªæ— åºé“¾è¡¨ï¼Œæ²¡æœ‰æ¡ä»¶åˆ›é€ æ¡ä»¶ï¼š</p><ul><li>ä¸¤ä¸ªé“¾è¡¨ï¼šæ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹ï¼Œåˆ‡æ–­</li><li>æœ‰åºï¼šä¸€ä¸ªæ— åºé“¾è¡¨åˆ‡å¼€åï¼Œå˜æˆäº†ä¸¤ä¸ªæ— åºé“¾è¡¨ï¼Œå†å¯¹æ¯ä¸€ä¸ªé“¾è¡¨è¿›è¡Œé€’å½’ï¼Œå½“åªæœ‰ä¸€ä¸ªç»“ç‚¹ï¼Œè‡ªç„¶å°±æ˜¯æœ‰åºçš„äº†</li></ul><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">sortList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) <span class="keyword">return</span> head;</span><br><span class="line">    ListNode slow = head, fast = head, pre = head;</span><br><span class="line">    <span class="keyword">while</span> (fast != <span class="keyword">null</span> &amp;&amp; fast.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">        pre = slow;</span><br><span class="line">        slow = slow.next;</span><br><span class="line">        fast = fast.next.next;</span><br><span class="line">    &#125;</span><br><span class="line">    pre.next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> mergeTwoLists(sortList(head), sortList(slow));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ListNode <span class="title">mergeTwoLists</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line">    ListNode dummy = <span class="keyword">new</span> ListNode(-<span class="number">1</span>);</span><br><span class="line">    ListNode cur = dummy;</span><br><span class="line">    <span class="keyword">while</span> (l1 != <span class="keyword">null</span> &amp;&amp; l2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (l1.val &lt; l2.val) &#123;</span><br><span class="line">            cur.next = l1;</span><br><span class="line">            l1 = l1.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cur.next = l2;</span><br><span class="line">            l2 = l2.next;</span><br><span class="line">        &#125;</span><br><span class="line">        cur = cur.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (l1 != <span class="keyword">null</span>) cur.next = l1;</span><br><span class="line">    <span class="keyword">if</span> (l2 != <span class="keyword">null</span>) cur.next = l2;</span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)   å…¶å®å¹¶ä¸æ˜¯ 1 ï¼Œç”±äºé€’å½’è¦è°ƒç”¨æ ˆ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>147. Insertion Sort List</title>
      <link href="2020/10/23/147-Insertion-Sort-List/"/>
      <url>2020/10/23/147-Insertion-Sort-List/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="147-Insertion-Sort-List-Medium"><a href="#147-Insertion-Sort-List-Medium" class="headerlink" title="147. Insertion Sort List Medium"></a><a href="https://leetcode-cn.com/problems/insertion-sort-list/">147. Insertion Sort List</a> <font color="#fd9016" size=5>Medium</font></h2><p>Sort a linked list using insertion sort.</p><p><img src="https://upload.wikimedia.org/wikipedia/commons/0/0f/Insertion-sort-example-300px.gif" class="lazyload" data-srcset="https://upload.wikimedia.org/wikipedia/commons/0/0f/Insertion-sort-example-300px.gif" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>A graphical example of insertion sort. The partial sorted list (black) initially contains only the first element in the list.<br>With each iteration one element (red) is removed from the input data and inserted in-place into the sorted list</p><p><strong>Algorithm of Insertion Sort:</strong></p><ol><li>Insertion sort iterates, consuming one input element each repetition, and growing a sorted output list.</li><li>At each iteration, insertion sort removes one element from the input data, finds the location it belongs within the sorted list, and inserts it there.</li><li>It repeats until no input elements remain.</li></ol><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: 4-&gt;2-&gt;1-&gt;3</span><br><span class="line">Output: 1-&gt;2-&gt;3-&gt;4</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: -1-&gt;5-&gt;3-&gt;4-&gt;0</span><br><span class="line">Output: -1-&gt;0-&gt;3-&gt;4-&gt;5</span><br></pre></td></tr></table></figure><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šæ’å…¥æ’åº"><a href="#æ€è·¯ä¸€ï¼šæ’å…¥æ’åº" class="headerlink" title="æ€è·¯ä¸€ï¼šæ’å…¥æ’åº"></a>æ€è·¯ä¸€ï¼šæ’å…¥æ’åº</h3><p>æŒ‰ç…§æ’å…¥æ’åºçš„æ€æƒ³ï¼Œè¦æ³¨æ„çš„ç‚¹ï¼š</p><ul><li>ä¸è¦æ–­é“¾</li><li>æ¯ä¸€æ¬¡éƒ½æ˜¯ä»å¤´å¼€å§‹è¿›è¡Œæ¯”è¾ƒ</li></ul><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">insertionSortList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) <span class="keyword">return</span> head;</span><br><span class="line"></span><br><span class="line">    ListNode res = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    ListNode pre = res;</span><br><span class="line">    ListNode cur = head;</span><br><span class="line">    ListNode next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (cur != <span class="keyword">null</span>) &#123;</span><br><span class="line">        next = cur.next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (pre.next != <span class="keyword">null</span> &amp;&amp; pre.next.val &lt; cur.val) &#123;</span><br><span class="line">            pre = pre.next;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        cur.next = pre.next;</span><br><span class="line">        pre.next = cur;</span><br><span class="line">        <span class="comment">// ä»å¤´å¼€å§‹</span></span><br><span class="line">        pre = res;</span><br><span class="line">        cur = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>143. Reorder List</title>
      <link href="2020/10/22/143-Reorder-List/"/>
      <url>2020/10/22/143-Reorder-List/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="143-Reorder-List-Medium"><a href="#143-Reorder-List-Medium" class="headerlink" title="143. Reorder List Medium"></a><a href="https://leetcode-cn.com/problems/reorder-list/">143. Reorder List</a> <font color="#fd9016" size=5>Medium</font></h2><p>Given a singly linked list <em>L</em>: <em>L</em>0â†’<em>L</em>1â†’â€¦â†’<em>L**n</em>-1â†’<em>L</em>n,<br>reorder it to: <em>L</em>0â†’<em>L**n</em>â†’<em>L</em>1â†’<em>L**n</em>-1â†’<em>L</em>2â†’<em>L**n</em>-2â†’â€¦</p><p>You may <strong>not</strong> modify the values in the listâ€™s nodes, only nodes itself may be changed.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Given 1-&gt;2-&gt;3-&gt;4, reorder it to 1-&gt;4-&gt;2-&gt;3.</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Given 1-&gt;2-&gt;3-&gt;4-&gt;5, reorder it to 1-&gt;5-&gt;2-&gt;4-&gt;3.</span><br></pre></td></tr></table></figure><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šæš´åŠ›è§£æ³•"><a href="#æ€è·¯ä¸€ï¼šæš´åŠ›è§£æ³•" class="headerlink" title="æ€è·¯ä¸€ï¼šæš´åŠ›è§£æ³•"></a>æ€è·¯ä¸€ï¼šæš´åŠ›è§£æ³•</h3><p>ç›´æ¥å°†é“¾è¡¨å­˜åœ¨æ•°ç»„ä¸­ï¼Œç„¶åè¿›è¡Œæ“ä½œï¼Œä¸ç”¨è€ƒè™‘æ–­é“¾ç­‰é—®é¢˜ï¼Œç›´æ¥ç”¨æ•°ç»„ä¸‹æ ‡è§£å†³ä¸€åˆ‡</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reorderList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Given 1-&gt;2-&gt;3-&gt;4-&gt;5, reorder it to 1-&gt;5-&gt;2-&gt;4-&gt;3.</span></span><br><span class="line">    <span class="comment">// 1. æš´åŠ›è§£æ³•</span></span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    List&lt;ListNode&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (head != <span class="keyword">null</span>) &#123;</span><br><span class="line">        list.add(head);</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = list.size() - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">        list.get(i).next = list.get(j);</span><br><span class="line">        i++;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i == j) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        list.get(j).next = list.get(i);</span><br><span class="line">        j--;</span><br><span class="line">    &#125;</span><br><span class="line">    list.get(j).next = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p></blockquote><h3 id="æ€è·¯äºŒï¼šé€’å½’"><a href="#æ€è·¯äºŒï¼šé€’å½’" class="headerlink" title="æ€è·¯äºŒï¼šé€’å½’"></a>æ€è·¯äºŒï¼šé€’å½’</h3><p>çœ‹åˆ°é€’å½’è¿˜æ˜¯è¦æƒ³åˆ°ä¸¤ä¸ªæ–¹é¢çš„é—®é¢˜ï¼š</p><ul><li>å‡ºå£</li><li>è°ƒç”¨é€’å½’å‡½æ•°çš„ç»Ÿä¸€æ“ä½œ</li></ul><p>é¦–å…ˆè¦æ˜ç¡®é€’å½’ä¼ å‡ºæ¥çš„æ˜¯å•¥ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨æ€è·¯ä¸€çš„æƒ³æ³•å°±æ˜¯ï¼Œæˆ‘æƒ³æ‰¾æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦éå†ä¸€éæ‰èƒ½æ‰¾åˆ°é‚£ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥ä½¿ç”¨äº†æ•°ç»„ï¼Œé€šè¿‡ä¸‹æ ‡è·å–å…¶ä¸­çš„å…ƒç´ ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥é€’å½’å‡ºæ¥çš„å±€éƒ¨é“¾è¡¨çš„å°¾å…ƒç´ ï¼Œçœ‹ä¸‹é¢çš„ğŸŒ°ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201022204518.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201022204518.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201022204517106"></p><p>ç°åœ¨é€’å½’åˆ°å‡ºå£ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å°† <code>tail</code> ä¼ å‡ºæ¥</p><p>ç¬¬äºŒï¼Œæœ¬é¢˜çš„å‡ºå£è¦åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼šå¥‡æ•°ä¸ªå’Œå¶æ•°</p><p>å¥‡æ•°ï¼šç›´æ¥ä¼ å‡ºæ¥</p><p>å¶æ•°ï¼šå°†å®ƒçš„ <code>next</code> ä¼ å‡ºæ¥</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reorderList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Given 1-&gt;2-&gt;3-&gt;4-&gt;5, reorder it to 1-&gt;5-&gt;2-&gt;4-&gt;3.</span></span><br><span class="line">    <span class="comment">// 2. é€’å½’æ³•</span></span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    ListNode count = head;</span><br><span class="line">    <span class="keyword">while</span> (count != <span class="keyword">null</span>) &#123;</span><br><span class="line">        count = count.next;</span><br><span class="line">        len++;</span><br><span class="line">    &#125;</span><br><span class="line">    helper(head, len);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ListNode <span class="title">helper</span><span class="params">(ListNode listNode, <span class="keyword">int</span> length)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (length == <span class="number">1</span>) &#123;</span><br><span class="line">        ListNode tail = listNode.next;</span><br><span class="line">        listNode.next = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> tail;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (length == <span class="number">2</span>) &#123;</span><br><span class="line">        ListNode tail = listNode.next.next;</span><br><span class="line">        listNode.next.next = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> tail;</span><br><span class="line">    &#125;</span><br><span class="line">    ListNode helper = helper(listNode.next, length - <span class="number">2</span>);</span><br><span class="line">    ListNode cur = listNode.next;</span><br><span class="line">    ListNode next = helper.next;</span><br><span class="line">    listNode.next = helper;</span><br><span class="line">    helper.next = cur;</span><br><span class="line">    <span class="keyword">return</span> next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯ä¸‰ï¼šåˆ†ç»„è§£æ³•"><a href="#æ€è·¯ä¸‰ï¼šåˆ†ç»„è§£æ³•" class="headerlink" title="æ€è·¯ä¸‰ï¼šåˆ†ç»„è§£æ³•"></a>æ€è·¯ä¸‰ï¼šåˆ†ç»„è§£æ³•</h3><p>è¿˜å¯ä»¥å°†è¿™ä¸ªé¢˜åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>æ‰¾åˆ°ä¸­ç‚¹ï¼Œåˆ†å‰²æˆä¸¤ä¸ªé“¾è¡¨</li><li>å¯¹åä¸€ä¸ªé“¾è¡¨è¿›è¡Œé€†åº</li><li>åŒæŒ‡é’ˆåŒæ­¥è¿›è¡Œï¼Œå°†åé¢é“¾è¡¨ä¸å‰é¢çš„é“¾è¡¨è¿›è¡Œè¿æ¥</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6</span><br><span class="line"></span><br><span class="line">åˆ†å‰²ï¼š1 -&gt; 2 -&gt; 3</span><br><span class="line">     4 -&gt; 5 -&gt; 6</span><br><span class="line">     </span><br><span class="line">é€†åºï¼š6 -&gt; 5 -&gt; 4</span><br><span class="line">     </span><br><span class="line">è¿æ¥ï¼š1 -&gt; 6 -&gt; 2 -&gt; 5 -&gt; 3 -&gt; 4</span><br></pre></td></tr></table></figure><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reorderList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Given 1-&gt;2-&gt;3-&gt;4-&gt;5, reorder it to 1-&gt;5-&gt;2-&gt;4-&gt;3.</span></span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    ListNode slow = head, fast = head;</span><br><span class="line">    <span class="keyword">while</span> (fast.next != <span class="keyword">null</span> &amp;&amp; fast.next.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">        slow = slow.next;</span><br><span class="line">        fast = fast.next.next;</span><br><span class="line">    &#125;</span><br><span class="line">    ListNode cur = slow.next;</span><br><span class="line">    slow.next = <span class="keyword">null</span>;</span><br><span class="line">    ListNode next = reverseList(cur);</span><br><span class="line">    <span class="keyword">while</span> (head != <span class="keyword">null</span> &amp;&amp; next != <span class="keyword">null</span>) &#123;</span><br><span class="line">        ListNode l1 = head.next;</span><br><span class="line">        ListNode l2 = next.next;</span><br><span class="line">        head.next = next;</span><br><span class="line">        next.next = l1;</span><br><span class="line">        head = l1;</span><br><span class="line">        next = l2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ListNode <span class="title">reverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// é€’å½’æ³•</span></span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    ListNode listNode = reverseList(head.next);</span><br><span class="line">    head.next.next = head;</span><br><span class="line">    head.next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> listNode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p></blockquote><blockquote><p>æ³¨ï¼šåœ¨ LeetCode ä¸­ï¼Œé€’å½’æ³•æ—¶é—´å¤æ‚åº¦å¯ä»¥ beats 100%ï¼Œç¬¬ä¸‰ç§æ–¹æ³•ä¸å¯ä»¥ï¼ŒæŒ‰ç…§åˆ†ææ¥è¯´ï¼Œåº”è¯¥æ˜¯ä¸€æ ·çš„</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>142. Linked List Cycle II</title>
      <link href="2020/10/22/142-Linked-List-Cycle-II/"/>
      <url>2020/10/22/142-Linked-List-Cycle-II/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="142-Linked-List-Cycle-II-Medium"><a href="#142-Linked-List-Cycle-II-Medium" class="headerlink" title="142. Linked List Cycle II Medium"></a><a href="https://leetcode-cn.com/problems/linked-list-cycle-ii/">142. Linked List Cycle II</a> <font color="#fd9016" size=5>Medium</font></h2><p>Given a linked list, return the node where the cycle begins. If there is no cycle, return <code>null</code>.</p><p>There is a cycle in a linked list if there is some node in the list that can be reached again by continuously following the <code>next</code> pointer. Internally, <code>pos</code> is used to denote the index of the node that tailâ€™s <code>next</code> pointer is connected to. <strong>Note that <code>pos</code> is not passed as a parameter</strong>.</p><p><strong>Notice</strong> that you <strong>should not modify</strong> the linked list.</p><p><strong>Follow up:</strong></p><p>Can you solve it using <code>O(1)</code> (i.e. constant) memory?</p><p><strong>Example 1:</strong></p><p><img src="https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist.png" class="lazyload" data-srcset="https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: head &#x3D; [3,2,0,-4], pos &#x3D; 1</span><br><span class="line">Output: tail connects to node index 1</span><br><span class="line">Explanation: There is a cycle in the linked list, where tail connects to the second node.</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><p><img src="https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist_test2.png" class="lazyload" data-srcset="https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist_test2.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: head &#x3D; [1,2], pos &#x3D; 0</span><br><span class="line">Output: tail connects to node index 0</span><br><span class="line">Explanation: There is a cycle in the linked list, where tail connects to the first node.</span><br></pre></td></tr></table></figure><p><strong>Example 3:</strong></p><p><img src="https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist_test3.png" class="lazyload" data-srcset="https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist_test3.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: head &#x3D; [1], pos &#x3D; -1</span><br><span class="line">Output: no cycle</span><br><span class="line">Explanation: There is no cycle in the linked list.</span><br></pre></td></tr></table></figure><p><strong>Constraints:</strong></p><ul><li>The number of the nodes in the list is in the range <code>[0, 104]</code>.</li><li><code>-105 &lt;= Node.val &lt;= 105</code></li><li><code>pos</code> is <code>-1</code> or a <strong>valid index</strong> in the linked-list.</li></ul><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼š"><a href="#æ€è·¯ä¸€ï¼š" class="headerlink" title="æ€è·¯ä¸€ï¼š"></a>æ€è·¯ä¸€ï¼š</h3><p>å¤§ä½“æ€è·¯è¿˜æ˜¯å’Œ <a href="">141</a> ä¸€æ ·çš„ï¼Œå”¯ä¸€çš„åç»­æ“ä½œå°±æ˜¯ï¼šè®©ç›¸é‡ç‚¹å’Œå¼€å§‹ç‚¹ä¸€èµ·å†å‘åèµ°ï¼Œè¿™ä¸¤ä¸ªç‚¹å†æ¬¡ç›¸é‡çš„ç‚¹å°±æ˜¯å…¥å£ç‚¹ï¼Œå…·ä½“å¯ä»¥å‚è€ƒä¸‹é¢çš„å›¾å’Œæ•°å­¦è¯æ˜ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201022155330.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201022155330.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201022155322951"></p><p><strong>æ•°å­¦è¯æ˜</strong></p><p>æ¡ä»¶ï¼šç¯çš„ç»“ç‚¹æ•° <code>N</code>ã€å¼€å§‹ç‚¹åˆ°å…¥å£ç‚¹è·ç¦» <code>X</code>ã€å…¥å£ç‚¹åˆ°ç›¸é‡ç‚¹è·ç¦» <code>Y</code> (é€†æ—¶é’ˆçš„è·ç¦»ï¼Œä¸Šå›¾ä¸­é•¿çš„é‚£éƒ¨åˆ†)</p><p>å‡è®¾ï¼š<strong>slow</strong> ç»“ç‚¹æ€»å…±èµ°äº† <code>T</code> æ­¥åˆ°ç›¸é‡ç‚¹ï¼›åˆ™ <strong>fast</strong> ç»“ç‚¹å…±èµ°äº† <code>2T</code> æ­¥</p><p>â€‹              <strong>slow</strong> ç»“ç‚¹æ€»å…±èµ°äº† <code>K1</code> åœˆï¼› <strong>fast</strong> ç»“ç‚¹å…±èµ°äº† <code>K2</code> åœˆ</p><p>åˆ™ï¼š</p><p><code>T = X + K1 * N + Y </code>                :one:</p><p><code>2T = X + K2 * N + Y</code>             :two:</p><p>åŒ–ç®€ï¼š</p><p><code>T = (K2 - K1) * N</code></p><p>å¸¦åˆ° :one: ä¸­ï¼š</p><p><code>X = (K2 - 2K1 -1) * N + (N - Y)</code></p><p>å…¶ä¸­ï¼š</p><p><code>(N - Y)</code> è¡¨ç¤ºç›¸é‡ç‚¹åˆ°å…¥å£ç‚¹çš„è·ç¦»</p><p>è¿™æ—¶å€™å°±å¯ä»¥è¯´ï¼šæˆ‘ç›¸é‡ç‚¹çš„ç»“ç‚¹å‘å‰èµ°äº† <code>(K2 - 2K1 -1)</code> åœˆå›åˆ°äº†ç›¸é‡ç‚¹ï¼Œå†èµ°äº† <code>(N - Y)</code> åˆ°äº†å…¥å£ç‚¹</p><p>ç®€ç›´å°±æ˜¯ <code>Amazing</code> å•Šï¼</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">detectCycle</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    ListNode slow = head, fast = head;</span><br><span class="line">    ListNode temp = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (fast != <span class="keyword">null</span> &amp;&amp; fast.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">        slow = slow.next;</span><br><span class="line">        fast = fast.next.next;</span><br><span class="line">        <span class="keyword">if</span> (slow == fast) &#123;</span><br><span class="line">            temp = slow;</span><br><span class="line">            <span class="keyword">while</span> (head != temp) &#123;</span><br><span class="line">                head = head.next;</span><br><span class="line">                temp = temp.next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO()</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO()</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0092. Reverse Linked List II</title>
      <link href="2020/10/21/0092-Reverse-Linked-List-II/"/>
      <url>2020/10/21/0092-Reverse-Linked-List-II/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="92-Reverse-Linked-List-II-Medium"><a href="#92-Reverse-Linked-List-II-Medium" class="headerlink" title="92. Reverse Linked List II Medium"></a><a href="https://leetcode-cn.com/problems/reverse-linked-list-ii/">92. Reverse Linked List II</a> <font color="#fd9016" size=5>Medium</font></h2><p>éš¾åº¦ä¸­ç­‰551</p><p>Reverse a linked list from position <em>m</em> to <em>n</em>. Do it in one-pass.</p><p><strong>Note:</strong> 1 â‰¤ <em>m</em> â‰¤ <em>n</em> â‰¤ length of list.</p><p><strong>Example:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL, m &#x3D; 2, n &#x3D; 4</span><br><span class="line">Output: 1-&gt;4-&gt;3-&gt;2-&gt;5-&gt;NULL</span><br></pre></td></tr></table></figure><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šåˆ©ç”¨åè½¬é“¾è¡¨"><a href="#æ€è·¯ä¸€ï¼šåˆ©ç”¨åè½¬é“¾è¡¨" class="headerlink" title="æ€è·¯ä¸€ï¼šåˆ©ç”¨åè½¬é“¾è¡¨"></a>æ€è·¯ä¸€ï¼šåˆ©ç”¨åè½¬é“¾è¡¨</h3><p>åœ¨ <a href="http://wangba.me/2020/10/09/0206-Reverse-Linked-List/]">206</a> ä¸­å·²ç»è§£å†³äº†åè½¬æ•´ä¸ªé“¾è¡¨ï¼Œç°åœ¨è¿™ç§éƒ¨åˆ†çš„åè½¬é“¾è¡¨ï¼Œåªéœ€è¦å°†ä¸Šé¢çš„æ–­é“¾ï¼Œä¸¢åˆ°åè½¬æ•´ä¸ªé“¾è¡¨çš„å‡½æ•°ä¸­ï¼Œå†æ¢å¤è¿æ¥å°±è¡Œäº†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸé“¾è¡¨ï¼š1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL</span><br><span class="line"></span><br><span class="line">æ–­é“¾ï¼š1 2-&gt;3-&gt;4 5-&gt;NULL</span><br><span class="line">è°ƒç”¨å‡½æ•°ï¼š4-&gt;3-&gt;2</span><br><span class="line"></span><br><span class="line">æ¢å¤ï¼š1-&gt;4-&gt;3-&gt;2-&gt;5-&gt;NULL</span><br></pre></td></tr></table></figure><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseBetween</span><span class="params">(ListNode head, <span class="keyword">int</span> m, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    ListNode listNode = <span class="keyword">new</span> ListNode(-<span class="number">1</span>);</span><br><span class="line">    listNode.next = head;</span><br><span class="line">    ListNode res = listNode;</span><br><span class="line">    ListNode pre = <span class="keyword">null</span>;</span><br><span class="line">    ListNode cur = <span class="keyword">null</span>;</span><br><span class="line">    ListNode next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (listNode != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (count == m) &#123;</span><br><span class="line">            next = listNode;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (count == m - <span class="number">1</span>) &#123;</span><br><span class="line">            pre = listNode;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (count == n) &#123;</span><br><span class="line">            cur = listNode;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        listNode = listNode.next;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">    ListNode temp = cur.next;</span><br><span class="line">    cur.next = <span class="keyword">null</span>;</span><br><span class="line">    ListNode node = reverseList(pre.next);</span><br><span class="line">    pre.next = node;</span><br><span class="line">    next.next = temp;</span><br><span class="line">    <span class="keyword">return</span> res.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ListNode <span class="title">reverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¿­ä»£æ³•</span></span><br><span class="line">    ListNode pre = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (head != <span class="keyword">null</span>) &#123;</span><br><span class="line">        ListNode next = head.next;</span><br><span class="line">        head.next = pre;</span><br><span class="line">        pre = head;</span><br><span class="line">        head = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pre;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å†™çš„æœ‰ç‚¹å¤æ‚äº†â€¦â€¦</p><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p></blockquote><h3 id="æ€è·¯äºŒï¼šå¤´æ’æ³•"><a href="#æ€è·¯äºŒï¼šå¤´æ’æ³•" class="headerlink" title="æ€è·¯äºŒï¼šå¤´æ’æ³•"></a>æ€è·¯äºŒï¼šå¤´æ’æ³•</h3><p>è¿˜æ˜¯è¦ä½¿ç”¨å“¨å…µï¼Œé¿å…é‡å¤æ“ä½œï¼Œå“¨å…µåé¢ç»“ç‚¹çš„æ“ä½œï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªè¦è¿›è¡Œé€†ç½®ç»“ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹ï¼Œç„¶åå¯¹åæ¯ä¸ªç»“ç‚¹éƒ½è¿›è¡Œ<code>å¤´æ’æ³•</code>å°±è¡Œäº†</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseBetween</span><span class="params">(ListNode head, <span class="keyword">int</span> m, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    ListNode dummy = <span class="keyword">new</span> ListNode(-<span class="number">1</span>);</span><br><span class="line">    dummy.next = head;</span><br><span class="line">    ListNode pre = dummy;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        pre = pre.next;</span><br><span class="line">    &#125;</span><br><span class="line">    ListNode cur = pre.next;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = m; i &lt; n; i++) &#123;</span><br><span class="line">        ListNode next = cur.next;</span><br><span class="line">        cur.next = next.next;</span><br><span class="line">        next.next = pre.next;</span><br><span class="line">        pre.next = next;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0086. Partition List</title>
      <link href="2020/10/20/0086-Partition-List/"/>
      <url>2020/10/20/0086-Partition-List/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="86-Partition-List-Medium"><a href="#86-Partition-List-Medium" class="headerlink" title="86. Partition List Medium"></a><a href="https://leetcode-cn.com/problems/partition-list/">86. Partition List</a> Medium</h2><p>Given a linked list and a value <em>x</em>, partition it such that all nodes less than <em>x</em> come before nodes greater than or equal to <em>x</em>.</p><p>You should preserve the original relative order of the nodes in each of the two partitions.</p><p><strong>Example:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: head &#x3D; 1-&gt;4-&gt;3-&gt;2-&gt;5-&gt;2, x &#x3D; 3</span><br><span class="line">Output: 1-&gt;2-&gt;2-&gt;4-&gt;3-&gt;5</span><br></pre></td></tr></table></figure><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šå¤§å°é“¾è¡¨"><a href="#æ€è·¯ä¸€ï¼šå¤§å°é“¾è¡¨" class="headerlink" title="æ€è·¯ä¸€ï¼šå¤§å°é“¾è¡¨"></a>æ€è·¯ä¸€ï¼šå¤§å°é“¾è¡¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åŸé“¾è¡¨ï¼š1 -&gt; 4 -&gt; 3 -&gt; 2 -&gt; 5 -&gt; 2</span><br><span class="line"></span><br><span class="line">å¤§é“¾è¡¨ï¼š4 -&gt; 3 -&gt; 5</span><br><span class="line">å°é“¾è¡¨ï¼š1 -&gt; 2 -&gt; 2</span><br><span class="line"></span><br><span class="line">åˆå¹¶é“¾è¡¨ï¼š1 -&gt; 2 -&gt; 2 -&gt; 4 -&gt; 3 -&gt; 5</span><br></pre></td></tr></table></figure><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">partition</span><span class="params">(ListNode head, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        Input: head = 1-&gt;4-&gt;3-&gt;2-&gt;5-&gt;2, x = 3</span></span><br><span class="line"><span class="comment">//        Output: 1-&gt;2-&gt;2-&gt;4-&gt;3-&gt;5</span></span><br><span class="line">        <span class="comment">// å°é“¾è¡¨</span></span><br><span class="line">        ListNode min = <span class="keyword">new</span> ListNode(-<span class="number">1</span>);</span><br><span class="line">        ListNode l  = min;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤§é“¾è¡¨</span></span><br><span class="line">        ListNode max = <span class="keyword">new</span> ListNode(-<span class="number">1</span>);</span><br><span class="line">        ListNode h = max;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (head != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (head.val &lt; x) &#123;</span><br><span class="line">                l.next = head;</span><br><span class="line">                l = l.next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                h.next = head;</span><br><span class="line">                h = h.next;</span><br><span class="line">            &#125;</span><br><span class="line">            head = head.next;</span><br><span class="line">        &#125;</span><br><span class="line">        h.next = <span class="keyword">null</span>;</span><br><span class="line">        l.next = max.next;</span><br><span class="line">        <span class="keyword">return</span> min.next;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO()</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0083. Remove Duplicates from Sorted List</title>
      <link href="2020/10/19/0083-Remove-Duplicates-from-Sorted-List/"/>
      <url>2020/10/19/0083-Remove-Duplicates-from-Sorted-List/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="83-Remove-Duplicates-from-Sorted-List-Easy"><a href="#83-Remove-Duplicates-from-Sorted-List-Easy" class="headerlink" title="83. Remove Duplicates from Sorted List Easy"></a><a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list/">83. Remove Duplicates from Sorted List</a> <font color="#49b666" size=5>Easy</font></h2><p>Given a sorted linked list, delete all duplicates such that each element appear only <em>once</em>.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: 1-&gt;1-&gt;2</span><br><span class="line">Output: 1-&gt;2</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: 1-&gt;1-&gt;2-&gt;3-&gt;3</span><br><span class="line">Output: 1-&gt;2-&gt;3</span><br></pre></td></tr></table></figure><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šåŒæŒ‡é’ˆ"><a href="#æ€è·¯ä¸€ï¼šåŒæŒ‡é’ˆ" class="headerlink" title="æ€è·¯ä¸€ï¼šåŒæŒ‡é’ˆ"></a>æ€è·¯ä¸€ï¼šåŒæŒ‡é’ˆ</h3><p>ç”±äºéƒ½æ˜¯å·²ç»æ’å¥½åºçš„é“¾è¡¨ï¼Œç›¸åŒçš„æ•°éƒ½åœ¨ä¸€èµ·ï¼Œåªè¦ä½¿ç”¨åŒæŒ‡é’ˆï¼šä¸€ä¸ªæŒ‡å‘å‡ºç°çš„ç¬¬ä¸€ä¸ªæ•°ï¼Œä¸€ä¸ªä¸€ç›´éå†åˆ°è¿™ä¸ªæ•°ç»“æŸå³å¯</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">deleteDuplicates</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) <span class="keyword">return</span> head;</span><br><span class="line">    ListNode slow = head;</span><br><span class="line">    ListNode fast = head.next;</span><br><span class="line">    <span class="keyword">while</span> (fast != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (slow.val == fast.val) &#123;</span><br><span class="line">            fast = fast.next;</span><br><span class="line">            slow.next = fast;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            slow = slow.next;</span><br><span class="line">            fast = fast.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0025. Reverse Nodes in k-Group</title>
      <link href="2020/10/15/0025-Reverse-Nodes-in-k-Group/"/>
      <url>2020/10/15/0025-Reverse-Nodes-in-k-Group/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="25-Reverse-Nodes-in-k-Group-Hard"><a href="#25-Reverse-Nodes-in-k-Group-Hard" class="headerlink" title="25. Reverse Nodes in k-Group Hard"></a><a href="https://leetcode-cn.com/problems/reverse-nodes-in-k-group/">25. Reverse Nodes in k-Group</a> <font color="#e82f34" size=5>Hard</font></h2><p>Given a linked list, reverse the nodes of a linked list <em>k</em> at a time and return its modified list.</p><p><em>k</em> is a positive integer and is less than or equal to the length of the linked list. If the number of nodes is not a multiple of <em>k</em> then left-out nodes, in the end, should remain as it is.</p><p><strong>Follow up:</strong></p><ul><li>Could you solve the problem in <code>O(1)</code> extra memory space?</li><li>You may not alter the values in the listâ€™s nodes, only nodes itself may be changed.</li></ul><p><strong>Example 1:</strong></p><p><img src="https://assets.leetcode.com/uploads/2020/10/03/reverse_ex1.jpg" class="lazyload" data-srcset="https://assets.leetcode.com/uploads/2020/10/03/reverse_ex1.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: head &#x3D; [1,2,3,4,5], k &#x3D; 2</span><br><span class="line">Output: [2,1,4,3,5]</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><p><img src="https://assets.leetcode.com/uploads/2020/10/03/reverse_ex2.jpg" class="lazyload" data-srcset="https://assets.leetcode.com/uploads/2020/10/03/reverse_ex2.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: head &#x3D; [1,2,3,4,5], k &#x3D; 3</span><br><span class="line">Output: [3,2,1,4,5]</span><br></pre></td></tr></table></figure><p><strong>Example 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: head &#x3D; [1,2,3,4,5], k &#x3D; 1</span><br><span class="line">Output: [1,2,3,4,5]</span><br></pre></td></tr></table></figure><p><strong>Example 4:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: head &#x3D; [1], k &#x3D; 1</span><br><span class="line">Output: [1]</span><br></pre></td></tr></table></figure><p><strong>Constraints:</strong></p><ul><li>The number of nodes in the list is in the range <code>sz</code>.</li><li><code>1 &lt;= sz &lt;= 5000</code></li><li><code>0 &lt;= Node.val &lt;= 1000</code></li><li><code>1 &lt;= k &lt;= sz</code></li></ul><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šè¿­ä»£"><a href="#æ€è·¯ä¸€ï¼šè¿­ä»£" class="headerlink" title="æ€è·¯ä¸€ï¼šè¿­ä»£"></a>æ€è·¯ä¸€ï¼šè¿­ä»£</h3><p>å¯ä»¥ç»“åˆä¸‹é¢çš„å›¾å’Œä»£ç è¿›è¡ŒæŸ¥çœ‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201015194154.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201015194154.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201015193552764"></p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseKGroup</span><span class="params">(ListNode head, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    ListNode ans = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    ans.next = head;</span><br><span class="line"></span><br><span class="line">    ListNode res = ans;</span><br><span class="line">    ListNode end = ans;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (end.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k &amp;&amp; end != <span class="keyword">null</span>; i++) end = end.next;</span><br><span class="line">        <span class="keyword">if</span> (end == <span class="keyword">null</span>) <span class="keyword">break</span>;</span><br><span class="line">        ListNode start = res.next;</span><br><span class="line">        ListNode next = end.next;</span><br><span class="line">        end.next = <span class="keyword">null</span>;</span><br><span class="line">        res.next = reverseList(start);</span><br><span class="line">        start.next = next;</span><br><span class="line">        res = start;</span><br><span class="line"></span><br><span class="line">        end = res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ListNode <span class="title">reverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// é€’å½’æ³•</span></span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    ListNode listNode = reverseList(head.next);</span><br><span class="line">    head.next.next = head;</span><br><span class="line">    head.next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> listNode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p></blockquote><h3 id="æ€è·¯äºŒï¼šé€’å½’"><a href="#æ€è·¯äºŒï¼šé€’å½’" class="headerlink" title="æ€è·¯äºŒï¼šé€’å½’"></a>æ€è·¯äºŒï¼šé€’å½’</h3><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseKGroup</span><span class="params">(ListNode head, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    ListNode point = head;</span><br><span class="line">    <span class="comment">//æ‰¾åˆ°å­é“¾è¡¨çš„å°¾éƒ¨</span></span><br><span class="line">    <span class="keyword">int</span> i = k;</span><br><span class="line">    <span class="keyword">while</span>(i - <span class="number">1</span> &gt;<span class="number">0</span>)&#123;</span><br><span class="line">        point = point.next;</span><br><span class="line">        <span class="keyword">if</span> (point == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line">        i--;</span><br><span class="line">    &#125;</span><br><span class="line">    ListNode temp = point.next;</span><br><span class="line">    <span class="comment">//å°†å­é“¾è¡¨æ–­å¼€</span></span><br><span class="line">    point.next = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å€’ç½®å­é“¾è¡¨ï¼Œå¹¶æ¥å—æ–°çš„å¤´ç»“ç‚¹</span></span><br><span class="line">    ListNode new_head = reverseList(head);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//head å…¶å®æ˜¯å€’ç½®é“¾è¡¨çš„å°¾éƒ¨ï¼Œç„¶åæˆ‘ä»¬å°†åè¾¹çš„å€’ç½®ç»“æœæ¥è¿‡æ¥å°±å¯ä»¥äº†</span></span><br><span class="line">    <span class="comment">//temp æ˜¯é“¾è¡¨æ–­å¼€åçš„å¤´æŒ‡é’ˆï¼Œå¯ä»¥å‚è€ƒè§£æ³•ä¸€çš„å›¾ç¤º</span></span><br><span class="line">    head.next = reverseKGroup(temp,k);</span><br><span class="line">    <span class="keyword">return</span> new_head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ListNode <span class="title">reverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// é€’å½’æ³•</span></span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    ListNode listNode = reverseList(head.next);</span><br><span class="line">    head.next.next = head;</span><br><span class="line">    head.next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> listNode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1002. Find Common Characters</title>
      <link href="2020/10/14/1002-Find-Common-Characters/"/>
      <url>2020/10/14/1002-Find-Common-Characters/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="1002-Find-Common-Characters-Easy"><a href="#1002-Find-Common-Characters-Easy" class="headerlink" title="1002. Find Common Characters Easy"></a><a href="https://leetcode-cn.com/problems/find-common-characters/">1002. Find Common Characters</a> <font color="#49b666" size=5>Easy</font></h4><p>Given an array <code>A</code> of strings made only from lowercase letters, return a list of all characters that show up in all strings within the list <strong>(including duplicates)</strong>. For example, if a character occurs 3 times in all strings but not 4 times, you need to include that character three times in the final answer.</p><p>You may return the answer in any order.</p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [&quot;bella&quot;,&quot;label&quot;,&quot;roller&quot;]</span><br><span class="line">Output: [&quot;e&quot;,&quot;l&quot;,&quot;l&quot;]</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [&quot;cool&quot;,&quot;lock&quot;,&quot;cook&quot;]</span><br><span class="line">Output: [&quot;c&quot;,&quot;o&quot;]</span><br></pre></td></tr></table></figure><p><strong>Note:</strong></p><ol><li><code>1 &lt;= A.length &lt;= 100</code></li><li><code>1 &lt;= A[i].length &lt;= 100</code></li><li><code>A[i][j]</code> is a lowercase letter</li></ol><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šæš´åŠ›ç ´è§£"><a href="#æ€è·¯ä¸€ï¼šæš´åŠ›ç ´è§£" class="headerlink" title="æ€è·¯ä¸€ï¼šæš´åŠ›ç ´è§£"></a>æ€è·¯ä¸€ï¼šæš´åŠ›ç ´è§£</h3><p>ä»…ä¾›å‚è€ƒï¼š</p><ul><li>æ‰¾åˆ°é•¿åº¦æœ€å°çš„å­—ç¬¦ä¸²ï¼Œç”±äºæ˜¯è€ƒè™‘æ¯ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­é‡å¤çš„å…ƒç´ </li><li>å°†è¿™ä¸ªå­—ç¬¦ä¸²æ”¾åˆ° map ä¸­ï¼Œmap ä¸­çš„å€¼å¯ä»¥è®¾ä¸ºå­—ç¬¦ä¸²æ•°ç»„é•¿åº¦</li><li>ä¾æ¬¡éå†ï¼Œå¦‚æœé‡å¤å°± -1 ï¼Œæœ€åçœ‹ map ä¸­çš„å€¼æ˜¯å¦å˜ä¸º 0</li></ul><h3 id="æ€è·¯äºŒï¼šå“ˆå¸Œ"><a href="#æ€è·¯äºŒï¼šå“ˆå¸Œ" class="headerlink" title="æ€è·¯äºŒï¼šå“ˆå¸Œ"></a>æ€è·¯äºŒï¼šå“ˆå¸Œ</h3><p>å¯ä»¥ç»“åˆä¸‹é¢çš„å›¾å’Œä»£ç è¿›è¡Œç†è§£</p><ul><li>ç”±äºéƒ½æ˜¯å°å†™å­—æ¯ï¼Œåªéœ€è¦ä½¿ç”¨å®¹é‡ä¸º 26 çš„æ•°ç»„è¡¨ç¤º 26 ä½å­—æ¯ï¼›</li><li>ç¬¬ä¸€ä¸ª 26 ä½æ•°ç»„ï¼Œå°†å­—ç¬¦ä¸²æ•°ç»„çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²è£…ä¸‹ï¼Œé‡å¤çš„ + 1</li><li>åé¢å’Œç¬¬ä¸€ä¸ªä¸€æ ·æ“ä½œå¾—åˆ°æ–°çš„æ•°ç»„ï¼Œæ¯”è¾ƒå…¶ä¸­çš„å€¼ï¼Œå–<code>æœ€å° </code>çš„å³å¯ï¼Œå› ä¸ºæœ€å°çš„é‚£ä¸ªæ‰ä»£è¡¨ç€å®ƒåœ¨è‡ªå·±çš„æ•°ç»„ä¸­é‡å¤äº†å¤šå°‘æ¬¡ï¼Œåœ¨æ‰€æœ‰çš„å­—ç¬¦ä¸²ä¸­ï¼Œå®ƒæœ€å¤šçš„å­—ç¬¦é‡å¤ </li><li>å°†ç»“æœæ”¾åœ¨ç¬¬ä¸€ä¸ªæ•°ç»„ï¼Œç»§ç»­æ¯”è¾ƒ</li></ul><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201014193842.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201014193842.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201014193840865"></p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">commonChars</span><span class="params">(String[] A)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å“ˆå¸Œè¡¨</span></span><br><span class="line">    <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">26</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A[<span class="number">0</span>].length(); i++) &#123;</span><br><span class="line">        res[A[<span class="number">0</span>].charAt(i) - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; A.length; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] temp = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">26</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; A[i].length(); j++) &#123;</span><br><span class="line">            temp[A[i].charAt(j) - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">26</span>; j++) &#123;</span><br><span class="line">            res[j] = Math.min(res[j], temp[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    List&lt;String&gt; ans = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (res[i] != <span class="number">0</span>) &#123;</span><br><span class="line">            ans.add(String.valueOf((<span class="keyword">char</span>)((i) + <span class="string">&#x27;a&#x27;</span>)));</span><br><span class="line">            res[i]--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0023. Merge k Sorted Lists</title>
      <link href="2020/10/14/0023-Merge-k-Sorted-Lists/"/>
      <url>2020/10/14/0023-Merge-k-Sorted-Lists/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="23-Merge-k-Sorted-Lists-Hard"><a href="#23-Merge-k-Sorted-Lists-Hard" class="headerlink" title="23. Merge k Sorted Lists Hard"></a><a href="https://leetcode-cn.com/problems/merge-k-sorted-lists/">23. Merge k Sorted Lists</a> <font color="#e82f34" size=5>Hard</font></h2><p>You are given an array of <code>k</code> linked-lists <code>lists</code>, each linked-list is sorted in ascending order.</p><p><em>Merge all the linked-lists into one sorted linked-list and return it.</em></p><p><strong>Example 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Input: lists &#x3D; [[1,4,5],[1,3,4],[2,6]]</span><br><span class="line">Output: [1,1,2,3,4,4,5,6]</span><br><span class="line">Explanation: The linked-lists are:</span><br><span class="line">[</span><br><span class="line">  1-&gt;4-&gt;5,</span><br><span class="line">  1-&gt;3-&gt;4,</span><br><span class="line">  2-&gt;6</span><br><span class="line">]</span><br><span class="line">merging them into one sorted list:</span><br><span class="line">1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4-&gt;5-&gt;6</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: lists &#x3D; []</span><br><span class="line">Output: []</span><br></pre></td></tr></table></figure><p><strong>Example 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: lists &#x3D; [[]]</span><br><span class="line">Output: []</span><br></pre></td></tr></table></figure><p><strong>Constraints:</strong></p><ul><li><code>k == lists.length</code></li><li><code>0 &lt;= k &lt;= 10^4</code></li><li><code>0 &lt;= lists[i].length &lt;= 500</code></li><li><code>-10^4 &lt;= lists[i][j] &lt;= 10^4</code></li><li><code>lists[i]</code> is sorted in <strong>ascending order</strong>.</li><li>The sum of <code>lists[i].length</code> wonâ€™t exceed <code>10^4</code>.</li></ul><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šæš´åŠ›è§£æ³•"><a href="#æ€è·¯ä¸€ï¼šæš´åŠ›è§£æ³•" class="headerlink" title="æ€è·¯ä¸€ï¼šæš´åŠ›è§£æ³•"></a>æ€è·¯ä¸€ï¼šæš´åŠ›è§£æ³•</h3><p>éå†é“¾è¡¨æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªé“¾è¡¨ï¼Œåœ¨æ¯ä¸€ä¸ªé“¾è¡¨ä¸­ç»§ç»­éå†ï¼Œå°†æ‰€æœ‰çš„ç»“æœéƒ½å­˜åœ¨æ•°ç»„ä¸­ï¼Œå†è¿›è¡Œä¸€æ¬¡å¿«é€Ÿæ’åºï¼Œæœ€åå†æŠŠæ•°ç»„ä¸­çš„æ¯ä¸ªç»“ç‚¹ç»„è£…æˆé“¾è¡¨å³å¯</p><p> <strong>ä»£ç </strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeKLists</span><span class="params">(ListNode[] lists)</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (ListNode listNode : lists) &#123;</span><br><span class="line">        <span class="keyword">while</span> (listNode != <span class="keyword">null</span>) &#123;</span><br><span class="line">            res.add(listNode.val);</span><br><span class="line">            listNode = listNode.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Collections.sort(res);</span><br><span class="line">    ListNode head = <span class="keyword">new</span> ListNode(-<span class="number">1</span>);</span><br><span class="line">    ListNode ans = head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i : res) &#123;</span><br><span class="line">        ListNode listNode = <span class="keyword">new</span> ListNode(i);</span><br><span class="line">        head.next  = listNode;</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    head.next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> ans.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(nlogn)ï¼Œn ä¸ºæ‰€æœ‰ç»“ç‚¹æ•°</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</p></blockquote><h3 id="æ€è·¯äºŒï¼šåˆ—æ¯”è¾ƒ"><a href="#æ€è·¯äºŒï¼šåˆ—æ¯”è¾ƒ" class="headerlink" title="æ€è·¯äºŒï¼šåˆ—æ¯”è¾ƒ"></a>æ€è·¯äºŒï¼šåˆ—æ¯”è¾ƒ</h3><p>åˆ©ç”¨æ¯ä¸ªé“¾è¡¨æ•°ç»„ä¸­çš„é“¾è¡¨æ˜¯æœ‰åºçš„ï¼Œåˆ™æ¯æ¬¡æ‹¿åˆ°æœ€å°çš„ç»“ç‚¹åŠ å…¥æ–°çš„é“¾è¡¨ä¸­ï¼Œæ¯ä¸ªé“¾è¡¨æ•°ç»„ä¸­çš„é“¾è¡¨å¤´çš„å€¼ä¸€å®šæ˜¯æœ€å°çš„</p><p> <strong>ä»£ç </strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeKLists</span><span class="params">(ListNode[] lists)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 2. åˆ—æ¯”è¾ƒ</span></span><br><span class="line">    <span class="comment">// æœ€å°ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">int</span> minIndex = <span class="number">0</span>;</span><br><span class="line">    ListNode head = <span class="keyword">new</span> ListNode(-<span class="number">1</span>);</span><br><span class="line">    ListNode res = head;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">        <span class="keyword">boolean</span> isCompleted = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">        <span class="comment">// éå†ä¸€éé“¾è¡¨æ•°ç»„æ‰¾åˆ°æ•°å€¼æœ€å°çš„ç»“ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lists.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (lists[i] != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (lists[i].val &lt; min) &#123;</span><br><span class="line">                    minIndex = i;</span><br><span class="line">                    min = lists[i].val;</span><br><span class="line">                &#125;</span><br><span class="line">                isCompleted = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å½“æ‰€æœ‰çš„é“¾è¡¨å…¨éƒ¨éå†å®Œäº†ï¼Œwhile å¾ªç¯ç»“æŸ</span></span><br><span class="line">        <span class="keyword">if</span> (isCompleted) <span class="keyword">break</span>;</span><br><span class="line">        head.next = lists[minIndex];</span><br><span class="line">        head = head.next;</span><br><span class="line">        lists[minIndex] = lists[minIndex].next;</span><br><span class="line">    &#125;</span><br><span class="line">    head.next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> res.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(m * n)ï¼Œm ä¸ºæœ€é•¿é“¾è¡¨çš„é•¿åº¦ï¼›n ä¸ºé“¾è¡¨æ•°ç»„é•¿åº¦</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p></blockquote><h3 id="æ€è·¯ä¸‰ï¼šä¼˜å…ˆé˜Ÿåˆ—"><a href="#æ€è·¯ä¸‰ï¼šä¼˜å…ˆé˜Ÿåˆ—" class="headerlink" title="æ€è·¯ä¸‰ï¼šä¼˜å…ˆé˜Ÿåˆ—"></a>æ€è·¯ä¸‰ï¼šä¼˜å…ˆé˜Ÿåˆ—</h3><p>åœ¨ä¸Šé¢çš„æ€è·¯ä¸­ï¼Œæ¯æ¬¡éƒ½æ˜¯æ‰¾åˆ°é“¾è¡¨æ•°ç»„ä¸­æœ€å°çš„ç»“ç‚¹ï¼Œå†åŠ å…¥æ–°é“¾è¡¨ä¸­ï¼Œåœ¨ä¸Šé¢ä½¿ç”¨çš„ç›´æ¥éå†çš„æ–¹å¼ï¼Œåœ¨è¿™é‡Œå¯ä»¥é‡‡ç”¨ä¼˜å…ˆé˜Ÿåˆ—çš„æ–¹å¼ï¼Œä¼˜å…ˆé˜Ÿåˆ—æ˜¯åŸºäºå †å®ç°çš„ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯å°/å¤§æ ¹(é¡¶)å †ï¼Œåªéœ€è¦å°†æ¯ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹æ”¾å…¥ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œå¤§å°æ¯”è¾ƒï¼Œå‡ºé˜Ÿåˆ—æ˜¯å°±æ˜¯æœ€å°/æœ€å¤§</p><p> <strong>ä»£ç </strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeKLists</span><span class="params">(ListNode[] lists)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¼˜å…ˆé˜Ÿåˆ—ä¸­é»˜è®¤å°±æ˜¯å°æ ¹å †</span></span><br><span class="line">    PriorityQueue&lt;ListNode&gt; priorityQueue = <span class="keyword">new</span> PriorityQueue&lt;ListNode&gt;(Comparator.comparing(n -&gt; n.val));</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å°†æ¯ä¸ªç»“ç‚¹çš„çš„å¤´ç»“ç‚¹åŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lists.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (lists[i] != <span class="keyword">null</span>) &#123;</span><br><span class="line">            priorityQueue.add(lists[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ListNode head = <span class="keyword">new</span> ListNode(-<span class="number">1</span>);</span><br><span class="line">    ListNode res = head;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!priorityQueue.isEmpty()) &#123;</span><br><span class="line">        <span class="comment">// å‡ºé˜Ÿåˆ—æ—¶å°±æ˜¯æœ€å°å€¼å…ˆå‡ºæ¥çš„</span></span><br><span class="line">        head.next = priorityQueue.poll();</span><br><span class="line">        head = head.next;</span><br><span class="line">        <span class="comment">// å°†å‡ºé˜Ÿåˆ—çš„åé¢é‚£ä¸ªå€¼åŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—</span></span><br><span class="line">        <span class="keyword">if</span> (head.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">            priorityQueue.add(head.next);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(nlogk)ï¼Œn è¡¨ç¤ºæ‰€æœ‰çš„ç»“ç‚¹ä¹¦æ•°ï¼Œlogk è¡¨ç¤ºæ¯ä¸ªç»“ç‚¹çš„å…¥é˜Ÿã€å‡ºé˜Ÿ</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(k)ï¼Œk è¡¨ç¤ºé“¾è¡¨æ•°ç»„çš„é•¿åº¦ï¼›åœ¨ Java ä¸­ä¼˜å…ˆé˜Ÿåˆ—æ˜¯æœ‰é»˜è®¤å€¼çš„</p></blockquote><h3 id="æ€è·¯å››ï¼šä¸¤ä¸¤åˆå¹¶"><a href="#æ€è·¯å››ï¼šä¸¤ä¸¤åˆå¹¶" class="headerlink" title="æ€è·¯å››ï¼šä¸¤ä¸¤åˆå¹¶"></a>æ€è·¯å››ï¼šä¸¤ä¸¤åˆå¹¶</h3><p>åœ¨<a href="http://wangba.me/2020/10/13/0021-Merge-Two-Sorted-Lists/">0021. Merge Two Sorted Lists</a>ä¸­ï¼Œå·²ç»å®ç°è¿‡ä¸¤ä¸ªæœ‰åºé“¾è¡¨çš„åˆå¹¶ï¼Œæœ¬é¢˜ä¹Ÿå¯ä»¥å‚è€ƒè¿™ä¸ªæ€è·¯ï¼šé¦–å…ˆå°†é“¾è¡¨ 0 å’Œé“¾è¡¨ 1 åˆå¹¶ï¼Œåˆå¹¶æˆæ–°çš„é“¾è¡¨ aï¼Œåœ¨å’Œé“¾è¡¨ 2 è¿›è¡Œåˆå¹¶ â€¦â€¦</p><p> <strong>ä»£ç </strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeKLists</span><span class="params">(ListNode[] lists)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 4. ä¸¤ä¸¤åˆå¹¶</span></span><br><span class="line">    ListNode temp = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lists.length; i++) &#123;</span><br><span class="line">        temp = mergeTwoLists(temp, lists[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ListNode <span class="title">mergeTwoLists</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l1 == <span class="keyword">null</span>) <span class="keyword">return</span> l2;</span><br><span class="line">    <span class="keyword">if</span> (l2 == <span class="keyword">null</span>) <span class="keyword">return</span> l1;</span><br><span class="line">    <span class="keyword">if</span> (l1.val &gt; l2.val) &#123;</span><br><span class="line">        l2.next = mergeTwoLists(l1, l2.next);</span><br><span class="line">        <span class="keyword">return</span> l2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        l1.next = mergeTwoLists(l1.next, l2);</span><br><span class="line">        <span class="keyword">return</span> l1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€è·¯äº”ï¼šäºŒåˆ†æ³•ä¸¤ä¸¤åˆå¹¶"><a href="#æ€è·¯äº”ï¼šäºŒåˆ†æ³•ä¸¤ä¸¤åˆå¹¶" class="headerlink" title="æ€è·¯äº”ï¼šäºŒåˆ†æ³•ä¸¤ä¸¤åˆå¹¶"></a>æ€è·¯äº”ï¼šäºŒåˆ†æ³•ä¸¤ä¸¤åˆå¹¶</h3><p>åœ¨ä¸Šé¢æ€è·¯äº”ä¸­ï¼Œåˆå¹¶çš„æ€è·¯æ˜¯ï¼šå…ˆæ˜¯åˆå¹¶ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªï¼Œåˆå¹¶ä¸ºæ–°çš„åï¼Œå†å’Œç¬¬ä¸‰ä¸ªè¿›è¡Œåˆå¹¶ï¼Œè¿™æ ·çš„æ•ˆç‡æœ‰ç‚¹ä½</p><p>è¿™ä¸ªæ€è·¯ä¹Ÿæ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼Œä½¿ç”¨äºŒåˆ†æ³•ï¼š</p><p> <strong>ä»£ç </strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeKLists</span><span class="params">(ListNode[] lists)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (lists.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> merge(lists, <span class="number">0</span> , lists.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ListNode <span class="title">merge</span><span class="params">(ListNode[] lists, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (left == right) <span class="keyword">return</span> lists[left];</span><br><span class="line">    <span class="keyword">int</span> mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">    ListNode l = merge(lists, left, mid);</span><br><span class="line">    ListNode r = merge(lists, mid + <span class="number">1</span>, right);</span><br><span class="line">    <span class="keyword">return</span> mergeTwoLists(l , r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> ListNode <span class="title">mergeTwoLists</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l1 == <span class="keyword">null</span>) <span class="keyword">return</span> l2;</span><br><span class="line">    <span class="keyword">if</span> (l2 == <span class="keyword">null</span>) <span class="keyword">return</span> l1;</span><br><span class="line">    <span class="keyword">if</span> (l1.val &gt; l2.val) &#123;</span><br><span class="line">        l2.next = mergeTwoLists(l1, l2.next);</span><br><span class="line">        <span class="keyword">return</span> l2;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        l1.next = mergeTwoLists(l1.next, l2);</span><br><span class="line">        <span class="keyword">return</span> l1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0021. Merge Two Sorted Lists</title>
      <link href="2020/10/13/0021-Merge-Two-Sorted-Lists/"/>
      <url>2020/10/13/0021-Merge-Two-Sorted-Lists/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="21-Merge-Two-Sorted-Lists-Easy"><a href="#21-Merge-Two-Sorted-Lists-Easy" class="headerlink" title="21. Merge Two Sorted Lists Easy"></a><a href="https://leetcode-cn.com/problems/merge-two-sorted-lists/">21. Merge Two Sorted Lists</a> <font color="#49b666" size=5>Easy</font></h2><p>Merge two sorted linked lists and return it as a new <strong>sorted</strong> list. The new list should be made by splicing together the nodes of the first two lists.</p><p><strong>Example 1:</strong></p><p><img src="https://assets.leetcode.com/uploads/2020/10/03/merge_ex1.jpg" class="lazyload" data-srcset="https://assets.leetcode.com/uploads/2020/10/03/merge_ex1.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: l1 &#x3D; [1,2,4], l2 &#x3D; [1,3,4]</span><br><span class="line">Output: [1,1,2,3,4,4]</span><br></pre></td></tr></table></figure><p><strong>Example 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: l1 &#x3D; [], l2 &#x3D; []</span><br><span class="line">Output: []</span><br></pre></td></tr></table></figure><p><strong>Example 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: l1 &#x3D; [], l2 &#x3D; [0]</span><br><span class="line">Output: [0]</span><br></pre></td></tr></table></figure><p><strong>Constraints:</strong></p><ul><li>The number of nodes in both lists is in the range <code>[0, 50]</code>.</li><li><code>-100 &lt;= Node.val &lt;= 100</code></li><li>Both <code>l1</code> and <code>l2</code> are sorted in <strong>non-decreasing</strong> order.</li></ul><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><h3 id="æ€è·¯ä¸€ï¼šè¿­ä»£æ³•"><a href="#æ€è·¯ä¸€ï¼šè¿­ä»£æ³•" class="headerlink" title="æ€è·¯ä¸€ï¼šè¿­ä»£æ³•"></a>æ€è·¯ä¸€ï¼šè¿­ä»£æ³•</h3><p>è®¾ç½®ä¸€ä¸ªå¤´ç»“ç‚¹ï¼Œéšåå¼€å§‹æ¯”è¾ƒä¸¤ä¸ªé“¾è¡¨çš„ç»“ç‚¹å€¼å¤§å°ï¼Œå…·ä½“é€»è¾‘å¯ä»¥å°†ä¸‹é¢çš„å›¾å’Œä»£ç é€»è¾‘è”ç³»èµ·æ¥ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201013173857.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201013173857.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201013173854931"></p><p><strong>ä»£ç </strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeTwoLists</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¿­ä»£æ³•</span></span><br><span class="line">    <span class="comment">// 1 2 4     1 3 4</span></span><br><span class="line">    <span class="comment">// 1 1 2 3 4 4</span></span><br><span class="line">    ListNode temp = <span class="keyword">new</span> ListNode(-<span class="number">1</span>);</span><br><span class="line">    ListNode res = temp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (l1 != <span class="keyword">null</span> &amp;&amp; l2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (l1.val &gt; l2.val) &#123;</span><br><span class="line">            temp.next = l2;</span><br><span class="line">            temp = temp.next;</span><br><span class="line">            l2 = l2.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            temp.next = l1;</span><br><span class="line">            temp = temp.next;</span><br><span class="line">            l1 = l1.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (l1 == <span class="keyword">null</span>) temp.next = l2;</span><br><span class="line">    <span class="keyword">if</span> (l2 == <span class="keyword">null</span>) temp.next = l1;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res.next;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(m + n)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p></blockquote><h3 id="æ€è·¯äºŒï¼šé€’å½’æ³•"><a href="#æ€è·¯äºŒï¼šé€’å½’æ³•" class="headerlink" title="æ€è·¯äºŒï¼šé€’å½’æ³•"></a>æ€è·¯äºŒï¼šé€’å½’æ³•</h3><p>é€’å½’æœ€é‡è¦çš„ä¸¤ä¸ªç‚¹ï¼š</p><ul><li>é€’å½’çš„å‡ºå£ï¼Œåœ¨æœ¬é¢˜é‡Œé¢å°±æ˜¯å½“å…¶ä¸­çš„ä¸€ä¸ªé“¾è¡¨ä¸ºç©ºï¼Œç›´æ¥è¿”å›å¦å¤–ä¸€ä¸ªé“¾è¡¨å³å¯</li><li>è¦è¿›è¡Œé€’å½’ï¼Œä¼ å…¥å‚æ•°åçš„ç»“æœåº”è¯¥æ˜¯å·²ç»ç¡®å®šçš„äº†ï¼Œåœ¨è¿™é‡Œå°±æ˜¯é“¾è¡¨å·²ç»æ’å¥½åºäº†</li></ul><p>ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœç°åœ¨æ˜¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">é“¾è¡¨laï¼š1 -&gt; 3 -&gt; 5</span><br><span class="line"></span><br><span class="line">é“¾è¡¨lbï¼š2 -&gt; 4 -&gt; 6</span><br></pre></td></tr></table></figure><p>è¿›è¡Œç¬¬ä¸€æ¬¡é€’å½’æ—¶ï¼šè¦æ¯”è¾ƒ 1 å’Œ 2 çš„å¤§å°ï¼Œå‘ç° 1 &lt; 2ï¼Œæ­¤æ—¶åªéœ€è¦å°† 1.next =  <strong>mergeTwoLists(3, 2)</strong> å°±è¡Œäº†ï¼Œä¸è¦å»æƒ³ <strong>mergeTwoLists(3, 2)</strong> æ€ä¹ˆæ¥çš„ï¼Œè¦æŠŠå®ƒå½“ä½œå·²ç»ç¡®å®šçš„å€¼å°±è¡Œï¼Œè€Œ <strong>mergeTwoLists(3, 2)</strong> çš„å€¼å¯ä»¥çœ‹ä½œæ˜¯ä¸‹é¢è¿™ä¸¤ä¸ªé“¾è¡¨çš„è¿›è¡Œ <strong>mergeTwoLists</strong> çš„ç»“æœ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">é“¾è¡¨laï¼š3 -&gt; 5</span><br><span class="line"></span><br><span class="line">é“¾è¡¨lbï¼š2 -&gt; 4 -&gt; 6</span><br></pre></td></tr></table></figure><p> <strong>ä»£ç </strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">mergeTwoLists</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// é€’å½’æ³•</span></span><br><span class="line">    <span class="comment">// é€’å½’çš„å‡ºå£</span></span><br><span class="line">    <span class="keyword">if</span> (l1 == <span class="keyword">null</span>) <span class="keyword">return</span> l2;</span><br><span class="line">    <span class="keyword">if</span> (l2 == <span class="keyword">null</span>) <span class="keyword">return</span> l1;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (l1.val &gt; l2.val) &#123;</span><br><span class="line">        l2.next = mergeTwoLists(l1, l2.next);</span><br><span class="line">        <span class="keyword">return</span> l2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        l1.next = mergeTwoLists(l1.next, l2);</span><br><span class="line">        <span class="keyword">return</span> l1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ—¶é—´å¤æ‚åº¦ï¼šO(m + n)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(m + n)</p><ul><li>ç”±äºé€’å½’æ˜¯è°ƒç”¨æ ˆçš„ï¼Œæ¯é€’å½’ä¸€æ¬¡éœ€è¦ä¸€ä¸ªæ ˆå¸§</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Array </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆSpring Security(ä¸ƒ)</title>
      <link href="2020/10/13/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%B8%83/"/>
      <url>2020/10/13/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%B8%83/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>â€‹        è¿™ä¸€å°èŠ‚æ•´ç†ä¸€ä¸‹å‰é¢å‡ èŠ‚çš„å†…å®¹ï¼Œä¸»è¦å®Œæ•´çš„æ‹ä¸€é Spring Security çš„ç™»å½•è¿‡ç¨‹ã€‚ä¸ºäº†æœ‰ä¸€ä¸ª Architecture First  çš„å°è±¡ï¼Œå…ˆå°†å…¶ä¸­å…³é”®çš„ç±»å’Œæ¥å£åˆ—å‡ºï¼Œå¦‚æœçœ‹åˆ°åé¢å‘ç°æœ‰å°è±¡ï¼Œå°±å¯ä»¥è·³åˆ°å‰é¢æ¥çœ‹ä¸€ä¸‹ï¼š</p><ul><li><p><strong>SecurityContextHolder</strong></p></li><li><p><strong>Authentication</strong></p></li><li><p>Token ç±»</p><ul><li><strong>UsernamePasswordAuthenticationToken</strong></li><li><strong>AbstractAuthenticationToken</strong></li></ul></li><li><p>Provider å’Œ Manger ç±»</p><ul><li><strong>AuthenticationManager</strong></li><li><strong>ProviderManager</strong></li><li><strong>AuthenticationProvider</strong></li><li><strong>DaoAuthenticationProvider</strong></li></ul></li><li><p><strong>UserDetails</strong> ä¸ <strong>UserDetailsService</strong></p></li></ul><p>ä¸»è¦å¯ä»¥å‚è€ƒä¸€ä¸‹è¿™å¼ å›¾ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201013133116.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201013133116.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201013133113040"></p><p>å›¾æºï¼š<a href="https://lexburner.github.io/spring-security-1/">Spring Security(ä¸€)â€“Architecture Overview</a></p><h2 id="äºŒã€DeepLearning"><a href="#äºŒã€DeepLearning" class="headerlink" title="äºŒã€DeepLearning"></a>äºŒã€DeepLearning</h2><h3 id="2-1-Authentication"><a href="#2-1-Authentication" class="headerlink" title="2.1 Authentication"></a>2.1 Authentication</h3><p>å…ˆçœ‹ä¸€ä¸‹ <strong>Authentication</strong> çš„ç›¸å…³å®ç°ç±»</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201013084521.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201013084521.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201013084517460"></p><p>æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Authentication</span> <span class="keyword">extends</span> <span class="title">Principal</span>, <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    Collection&lt;? extends GrantedAuthority&gt; getAuthorities();</span><br><span class="line"></span><br><span class="line">    <span class="function">Object <span class="title">getCredentials</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Object <span class="title">getDetails</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Object <span class="title">getPrincipal</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isAuthenticated</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setAuthenticated</span><span class="params">(<span class="keyword">boolean</span> var1)</span> <span class="keyword">throws</span> IllegalArgumentException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ul><li>getAuthorities()ï¼šæƒé™ä¿¡æ¯åˆ—è¡¨ï¼Œé»˜è®¤æ˜¯ GrantedAuthority æ¥å£çš„ä¸€äº›å®ç°ç±»ï¼Œé€šå¸¸æ˜¯ä»£è¡¨æƒé™ä¿¡æ¯çš„ä¸€ç³»åˆ—å­—ç¬¦ä¸²ã€‚</li><li>getCredentials()ï¼šå¯†ç ä¿¡æ¯ï¼Œç”¨æˆ·è¾“å…¥çš„å¯†ç å­—ç¬¦ä¸²ï¼Œåœ¨è®¤è¯è¿‡åé€šå¸¸ä¼šè¢«ç§»é™¤ï¼Œç”¨äºä¿éšœå®‰å…¨ã€‚</li><li>getDetails()ï¼šç»†èŠ‚ä¿¡æ¯ï¼Œweb åº”ç”¨ä¸­çš„å®ç°æ¥å£é€šå¸¸ä¸º WebAuthenticationDetailsï¼Œå®ƒè®°å½•äº†è®¿é—®è€…çš„ ip åœ°å€å’Œ sessionId çš„å€¼ã€‚</li><li>getPrincipal()ï¼šæœ€é‡è¦çš„èº«ä»½ä¿¡æ¯ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿”å›çš„æ˜¯ UserDetails æ¥å£çš„å®ç°ç±»ï¼Œä¹Ÿæ˜¯æ¡†æ¶ä¸­çš„å¸¸ç”¨æ¥å£ä¹‹ä¸€ã€‚UserDetails æ¥å£å°†ä¼šåœ¨ä¸‹é¢çš„å°èŠ‚é‡ç‚¹ä»‹ç»ã€‚</li></ul></blockquote><p>åœ¨å®ç°ç±»ä¸­éå¸¸é‡è¦çš„å°±æ˜¯ <strong>UsernamePasswordAuthenticationToken</strong> ï¼Œå†çœ‹ä¸€ä¸‹å…¶ä¸­çš„å±æ€§å’Œæ–¹æ³•</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201013090503.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201013090503.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201013090502537"></p><p>ä»¥åŠå®ƒçš„çˆ¶ç±»ï¼š<strong>AbstractAuthenticationToken</strong> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201013092222.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201013092222.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201013092219226"></p><h3 id="2-2-UsernamePasswordAuthenticationFilter"><a href="#2-2-UsernamePasswordAuthenticationFilter" class="headerlink" title="2.2 UsernamePasswordAuthenticationFilter"></a>2.2 UsernamePasswordAuthenticationFilter</h3><p>åœ¨ Spring Security ä¸­ï¼Œè®¤è¯ä¸æˆæƒçš„ç›¸å…³æ ¡éªŒéƒ½æ˜¯åœ¨ä¸€ç³»åˆ—çš„è¿‡æ»¤å™¨é“¾ä¸­å®Œæˆçš„ï¼Œåœ¨è¿™ä¸€ç³»åˆ—çš„è¿‡æ»¤å™¨é“¾ä¸­ï¼Œå’Œè®¤è¯ç›¸å…³çš„è¿‡æ»¤å™¨å°±æ˜¯ UsernamePasswordAuthenticationFilterï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UsernamePasswordAuthenticationFilter</span> <span class="keyword">extends</span> <span class="title">AbstractAuthenticationProcessingFilter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UsernamePasswordAuthenticationFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(<span class="keyword">new</span> AntPathRequestMatcher(<span class="string">&quot;/login&quot;</span>, <span class="string">&quot;POST&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Authentication <span class="title">attemptAuthentication</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.postOnly &amp;&amp; !request.getMethod().equals(<span class="string">&quot;POST&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AuthenticationServiceException(<span class="string">&quot;Authentication method not supported: &quot;</span> + request.getMethod());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            String username = <span class="keyword">this</span>.obtainUsername(request);</span><br><span class="line">            String password = <span class="keyword">this</span>.obtainPassword(request);</span><br><span class="line">            <span class="keyword">if</span> (username == <span class="keyword">null</span>) &#123;</span><br><span class="line">                username = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (password == <span class="keyword">null</span>) &#123;</span><br><span class="line">                password = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            username = username.trim();</span><br><span class="line">            UsernamePasswordAuthenticationToken authRequest = <span class="keyword">new</span> UsernamePasswordAuthenticationToken(username, password);</span><br><span class="line">            <span class="keyword">this</span>.setDetails(request, authRequest);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.getAuthenticationManager().authenticate(authRequest);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">obtainPassword</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> request.getParameter(<span class="keyword">this</span>.passwordParameter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">obtainUsername</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> request.getParameter(<span class="keyword">this</span>.usernameParameter);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š<strong>UsernamePasswordAuthenticationFilter</strong> æ˜¯ç»§æ‰¿ <strong>AbstractAuthenticationProcessingFilter</strong></p><blockquote><ul><li>é€šè¿‡ obtainUsername å’Œ obtainPassword æ–¹æ³•æå–å‡ºè¯·æ±‚é‡Œè¾¹çš„ç”¨æˆ·å/å¯†ç å‡ºæ¥ï¼Œæå–æ–¹å¼å°±æ˜¯ request.getParameter</li><li>è·å–åˆ°è¯·æ±‚é‡Œä¼ é€’æ¥çš„ç”¨æˆ·å/å¯†ç ä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ„é€ ä¸€ä¸ª UsernamePasswordAuthenticationToken å¯¹è±¡ï¼Œä¼ å…¥ username å’Œ passwordï¼Œusername å¯¹åº”äº† UsernamePasswordAuthenticationToken ä¸­çš„ principal å±æ€§ï¼Œè€Œ password åˆ™å¯¹åº”äº†å®ƒçš„ credentials å±æ€§</li><li>æ¥ä¸‹æ¥ setDetails æ–¹æ³•ç»™ details å±æ€§èµ‹å€¼ï¼ŒUsernamePasswordAuthenticationToken æœ¬èº«æ˜¯æ²¡æœ‰ details å±æ€§çš„ï¼Œè¿™ä¸ªå±æ€§åœ¨å®ƒçš„çˆ¶ç±» AbstractAuthenticationToken ä¸­ã€‚details æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡é‡Œè¾¹æ”¾çš„æ˜¯ WebAuthenticationDetails å®ä¾‹ï¼Œè¯¥å®ä¾‹ä¸»è¦æè¿°äº†ä¸¤ä¸ªä¿¡æ¯ï¼Œè¯·æ±‚çš„ remoteAddress ä»¥åŠè¯·æ±‚çš„ sessionId</li><li>æœ€åè°ƒç”¨ authenticate æ–¹æ³•å»åšæ ¡éªŒäº†</li></ul></blockquote><p>ä»”ç»†æ¥ç»†è¯´ä¸€ä¸‹ä¸Šé¢ä»£ç ä¸­çš„æœ€åä¸€ä¸ªæ–¹æ³•ä¸­çš„æ ¡éªŒï¼š<strong>authenticate</strong> </p><p>æ ¡éªŒæ“ä½œé¦–å…ˆè¦è·å–åˆ°ä¸€ä¸ª AuthenticationManagerï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201013100829.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201013100829.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201013100826654"></p><p>è¿™é‡Œæ‹¿åˆ°çš„æ˜¯ ProviderManager ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¿›å…¥åˆ° ProviderManager çš„ authenticate æ–¹æ³•ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Authentication <span class="title">authenticate</span><span class="params">(Authentication authentication)</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">   Class&lt;? extends Authentication&gt; toTest = authentication.getClass();</span><br><span class="line">   AuthenticationException lastException = <span class="keyword">null</span>;</span><br><span class="line">   AuthenticationException parentException = <span class="keyword">null</span>;</span><br><span class="line">   Authentication result = <span class="keyword">null</span>;</span><br><span class="line">   Authentication parentResult = <span class="keyword">null</span>;</span><br><span class="line">   <span class="keyword">boolean</span> debug = logger.isDebugEnabled();</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> (AuthenticationProvider provider : getProviders()) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!provider.supports(toTest)) &#123;</span><br><span class="line">         <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (debug) &#123;</span><br><span class="line">         logger.debug(<span class="string">&quot;Authentication attempt using &quot;</span></span><br><span class="line">               + provider.getClass().getName());</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">         result = provider.authenticate(authentication);</span><br><span class="line"></span><br><span class="line">         <span class="keyword">if</span> (result != <span class="keyword">null</span>) &#123;</span><br><span class="line">            copyDetails(authentication, result);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">catch</span> (AccountStatusException | InternalAuthenticationServiceException e) &#123;</span><br><span class="line">         prepareException(e, authentication);</span><br><span class="line">         <span class="keyword">throw</span> e;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (AuthenticationException e) &#123;</span><br><span class="line">         lastException = e;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (result == <span class="keyword">null</span> &amp;&amp; parent != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">         result = parentResult = parent.authenticate(authentication);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">catch</span> (ProviderNotFoundException e) &#123;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">catch</span> (AuthenticationException e) &#123;</span><br><span class="line">         lastException = parentException = e;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (result != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (eraseCredentialsAfterAuthentication</span><br><span class="line">            &amp;&amp; (result <span class="keyword">instanceof</span> CredentialsContainer)) &#123;</span><br><span class="line">         ((CredentialsContainer) result).eraseCredentials();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (parentResult == <span class="keyword">null</span>) &#123;</span><br><span class="line">         eventPublisher.publishAuthenticationSuccess(result);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">      ......</span><br><span class="line"></span><br><span class="line">   <span class="keyword">throw</span> lastException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ul><li>é¦–å…ˆè·å– authentication çš„ Classï¼Œåˆ¤æ–­å½“å‰ provider æ˜¯å¦æ”¯æŒè¯¥ authentication</li><li>å¦‚æœæ”¯æŒï¼Œåˆ™è°ƒç”¨ provider çš„ authenticate æ–¹æ³•å¼€å§‹åšæ ¡éªŒï¼Œæ ¡éªŒå®Œæˆåï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Authentication</li><li>è¿™é‡Œçš„ provider å¯èƒ½æœ‰å¤šä¸ªï¼Œå¦‚æœ provider çš„ authenticate æ–¹æ³•æ²¡èƒ½æ­£å¸¸è¿”å›ä¸€ä¸ª Authenticationï¼Œåˆ™è°ƒç”¨ provider çš„ parent çš„ authenticate æ–¹æ³•ç»§ç»­æ ¡éªŒ</li><li>copyDetails æ–¹æ³•åˆ™ç”¨æ¥æŠŠæ—§çš„ Token çš„ details å±æ€§æ‹·è´åˆ°æ–°çš„ Token ä¸­æ¥</li><li>æ¥ä¸‹æ¥ä¼šè°ƒç”¨ eraseCredentials æ–¹æ³•æ“¦é™¤å‡­è¯ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ä½ çš„å¯†ç ï¼Œè¿™ä¸ªæ“¦é™¤æ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å°† Token ä¸­çš„ credentials å±æ€§ç½®ç©º</li><li>æœ€åé€šè¿‡ publishAuthenticationSuccess æ–¹æ³•å°†ç™»å½•æˆåŠŸçš„äº‹ä»¶å¹¿æ’­å‡ºå»</li></ul></blockquote><p>åœ¨å…·ä½“è¯´ä¸€ä¸‹è°ƒç”¨ provider çš„ authenticate æ–¹æ³•çš„è¿‡ç¨‹ï¼š</p><ul><li>åœ¨ for å¾ªç¯ä¸­ï¼Œç¬¬ä¸€æ¬¡æ‹¿åˆ°çš„ provider æ˜¯ä¸€ä¸ª AnonymousAuthenticationProviderï¼Œè¿™ä¸ª provider å‹æ ¹å°±ä¸æ”¯æŒ UsernamePasswordAuthenticationTokenï¼Œä¹Ÿå°±æ˜¯ä¼šç›´æ¥åœ¨ provider.supports æ–¹æ³•ä¸­è¿”å› falseï¼Œç»“æŸ for å¾ªç¯</li><li>ç„¶åä¼šè¿›å…¥åˆ°ä¸‹ä¸€ä¸ª if ä¸­ï¼Œç›´æ¥è°ƒç”¨ parent çš„ authenticate æ–¹æ³•è¿›è¡Œæ ¡éªŒã€‚è€Œ parent å°±æ˜¯ ProviderManagerï¼Œæ‰€ä»¥ä¼šå†æ¬¡å›åˆ°è¿™ä¸ª authenticate æ–¹æ³•ä¸­ã€‚å†æ¬¡å›åˆ° authenticate æ–¹æ³•ä¸­ï¼Œprovider ä¹Ÿå˜æˆäº† DaoAuthenticationProviderï¼Œè¿™ä¸ª provider æ˜¯æ”¯æŒ UsernamePasswordAuthenticationToken çš„</li><li>æ‰€ä»¥ä¼šé¡ºåˆ©è¿›å…¥åˆ°è¯¥ç±»çš„ authenticate æ–¹æ³•å»æ‰§è¡Œï¼Œè€Œ DaoAuthenticationProvider ç»§æ‰¿è‡ª AbstractUserDetailsAuthenticationProvider å¹¶ä¸”æ²¡æœ‰é‡å†™ authenticate æ–¹æ³•ï¼Œæ‰€ä»¥ æˆ‘ä»¬æœ€ç»ˆæ¥åˆ° AbstractUserDetailsAuthenticationProvider#authenticate æ–¹æ³•ä¸­ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Authentication <span class="title">authenticate</span><span class="params">(Authentication authentication)</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">   Assert.isInstanceOf(UsernamePasswordAuthenticationToken.class, authentication,</span><br><span class="line">         () -&gt; messages.getMessage(</span><br><span class="line">               <span class="string">&quot;AbstractUserDetailsAuthenticationProvider.onlySupports&quot;</span>,</span><br><span class="line">               <span class="string">&quot;Only UsernamePasswordAuthenticationToken is supported&quot;</span>));</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Determine username</span></span><br><span class="line">   String username = (authentication.getPrincipal() == <span class="keyword">null</span>) ? <span class="string">&quot;NONE_PROVIDED&quot;</span></span><br><span class="line">         : authentication.getName();</span><br><span class="line"></span><br><span class="line">   <span class="keyword">boolean</span> cacheWasUsed = <span class="keyword">true</span>;</span><br><span class="line">   UserDetails user = <span class="keyword">this</span>.userCache.getUserFromCache(username);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line">      cacheWasUsed = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">         user = retrieveUser(username,</span><br><span class="line">               (UsernamePasswordAuthenticationToken) authentication);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">catch</span> (UsernameNotFoundException notFound) &#123;</span><br><span class="line">         logger.debug(<span class="string">&quot;User &#x27;&quot;</span> + username + <span class="string">&quot;&#x27; not found&quot;</span>);</span><br><span class="line"></span><br><span class="line">         <span class="keyword">if</span> (hideUserNotFoundExceptions) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> BadCredentialsException(messages.getMessage(</span><br><span class="line">                  <span class="string">&quot;AbstractUserDetailsAuthenticationProvider.badCredentials&quot;</span>,</span><br><span class="line">                  <span class="string">&quot;Bad credentials&quot;</span>));</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> notFound;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      Assert.notNull(user,</span><br><span class="line">            <span class="string">&quot;retrieveUser returned null - a violation of the interface contract&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">      preAuthenticationChecks.check(user);</span><br><span class="line">      additionalAuthenticationChecks(user,</span><br><span class="line">            (UsernamePasswordAuthenticationToken) authentication);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">catch</span> (AuthenticationException exception) &#123;</span><br><span class="line">      <span class="keyword">if</span> (cacheWasUsed) &#123;</span><br><span class="line">         cacheWasUsed = <span class="keyword">false</span>;</span><br><span class="line">         user = retrieveUser(username,</span><br><span class="line">               (UsernamePasswordAuthenticationToken) authentication);</span><br><span class="line">         preAuthenticationChecks.check(user);</span><br><span class="line">         additionalAuthenticationChecks(user,</span><br><span class="line">               (UsernamePasswordAuthenticationToken) authentication);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="keyword">throw</span> exception;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   postAuthenticationChecks.check(user);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (!cacheWasUsed) &#123;</span><br><span class="line">      <span class="keyword">this</span>.userCache.putUserInCache(user);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   Object principalToReturn = user;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (forcePrincipalAsString) &#123;</span><br><span class="line">      principalToReturn = user.getUsername();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> createSuccessAuthentication(principalToReturn, authentication, user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ul><li>é¦–å…ˆä» Authentication æå–å‡ºç™»å½•ç”¨æˆ·å</li><li>ç„¶åé€šè¿‡æ‹¿ç€ username å»è°ƒç”¨ retrieveUser æ–¹æ³•å»è·å–å½“å‰ç”¨æˆ·å¯¹è±¡ï¼Œè¿™ä¸€æ­¥ä¼šè°ƒç”¨æˆ‘ä»¬è‡ªå·±åœ¨ç™»å½•æ—¶å€™çš„å†™çš„ loadUserByUsername æ–¹æ³•ï¼Œæ‰€ä»¥è¿™é‡Œè¿”å›çš„ user å…¶å®å°±æ˜¯ä½ çš„ç™»å½•å¯¹è±¡</li><li>æ¥ä¸‹æ¥è°ƒç”¨ preAuthenticationChecks.check æ–¹æ³•å»æ£€éªŒ user ä¸­çš„å„ä¸ªè´¦æˆ·çŠ¶æ€å±æ€§æ˜¯å¦æ­£å¸¸ï¼Œä¾‹å¦‚è´¦æˆ·æ˜¯å¦è¢«ç¦ç”¨ã€è´¦æˆ·æ˜¯å¦è¢«é”å®šã€è´¦æˆ·æ˜¯å¦è¿‡æœŸç­‰ç­‰</li><li>additionalAuthenticationChecks æ–¹æ³•åˆ™æ˜¯åšå¯†ç æ¯”å¯¹çš„</li><li>æœ€ååœ¨ postAuthenticationChecks.check æ–¹æ³•ä¸­æ£€æŸ¥å¯†ç æ˜¯å¦è¿‡æœŸ</li><li>æ¥ä¸‹æ¥æœ‰ä¸€ä¸ª forcePrincipalAsString å±æ€§ï¼Œè¿™ä¸ªæ˜¯æ˜¯å¦å¼ºåˆ¶å°† Authentication ä¸­çš„ principal å±æ€§è®¾ç½®ä¸ºå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå±æ€§æˆ‘ä»¬ä¸€å¼€å§‹åœ¨ UsernamePasswordAuthenticationFilter ç±»ä¸­å…¶å®å°±æ˜¯è®¾ç½®ä¸ºå­—ç¬¦ä¸²çš„ï¼ˆå³ usernameï¼‰ï¼Œä½†æ˜¯é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åï¼Œ è¿™ä¸ªå±æ€§çš„å€¼å°±å˜æˆå½“å‰ç”¨æˆ·è¿™ä¸ªå¯¹è±¡äº†ã€‚ä¹‹æ‰€ä»¥ä¼šè¿™æ ·ï¼Œå°±æ˜¯å› ä¸º forcePrincipalAsString é»˜è®¤ä¸º falseï¼Œä¸è¿‡è¿™å—å…¶å®ä¸ç”¨æ”¹ï¼Œå°±ç”¨ falseï¼Œè¿™æ ·åœ¨åæœŸè·å–å½“å‰ç”¨æˆ·ä¿¡æ¯çš„æ—¶å€™åè€Œæ–¹ä¾¿å¾ˆå¤š</li><li>æœ€åï¼Œé€šè¿‡ createSuccessAuthentication æ–¹æ³•æ„å»ºä¸€ä¸ªæ–°çš„ UsernamePasswordAuthenticationToken</li></ul></blockquote><p>æ•´ä½“æµç¨‹å¤§æ¦‚å¦‚ä¸‹ï¼š</p><img src="http://dandandeshangni.oss-cn-beijing.aliyuncs.com/github/Spring%20Security/core-service-Sequence.png" class="lazyload" data-srcset="http://dandandeshangni.oss-cn-beijing.aliyuncs.com/github/Spring%20Security/core-service-Sequence.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img1" style="zoom:200%;" /><p>å›¾æºï¼š<a href="https://niocoder.com/2018/01/02/Spring-Security%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B8%80-Spring-Security%E8%AE%A4%E8%AF%81%E8%BF%87%E7%A8%8B/#%E6%A6%82%E8%BF%B0">Spring Securityè®¤è¯è¿‡ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Spring Security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0019.Remove Nth Node From End of List</title>
      <link href="2020/10/12/0019-Remove-Nth-Node-From-End-of-List/"/>
      <url>2020/10/12/0019-Remove-Nth-Node-From-End-of-List/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="19-åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹-Medium"><a href="#19-åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹-Medium" class="headerlink" title="19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹ Medium"></a><a href="https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/">19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹</a> <font color="#fd9016" size=5>Medium</font></h2><p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ <em>n</em> ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç»™å®šä¸€ä¸ªé“¾è¡¨: 1-&gt;2-&gt;3-&gt;4-&gt;5, å’Œ n &#x3D; 2.</span><br><span class="line"></span><br><span class="line">å½“åˆ é™¤äº†å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹åï¼Œé“¾è¡¨å˜ä¸º 1-&gt;2-&gt;3-&gt;5.</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜ï¼š</strong></p><p>ç»™å®šçš„ <em>n</em> ä¿è¯æ˜¯æœ‰æ•ˆçš„ã€‚</p><p><strong>è¿›é˜¶ï¼š</strong></p><p>ä½ èƒ½å°è¯•ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®ç°å—ï¼Ÿ</p><h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><p>é¦–å…ˆå›å¿†ä¸€ä¸‹å¦‚ä½•åˆ é™¤ä¸€ä¸ªç»“ç‚¹ï¼Œå¯ä»¥å‚è€ƒ<a href="http://wangba.me/2020/10/03/LinkedList/">è¿™ä¸ª</a>ï¼Œä¸»è¦å°±æ˜¯æ‰¾åˆ°è¦åˆ é™¤å‰é¢çš„é‚£ä¸ªç»“ç‚¹</p><h3 id="æ€è·¯ä¸€ï¼šæš´åŠ›æ³•"><a href="#æ€è·¯ä¸€ï¼šæš´åŠ›æ³•" class="headerlink" title="æ€è·¯ä¸€ï¼šæš´åŠ›æ³•"></a>æ€è·¯ä¸€ï¼šæš´åŠ›æ³•</h3><p>ç›´æ¥ä¸¤æ¬¡éå†å³å¯ï¼Œç¬¬ä¸€éæ‰¾åˆ°è¿™ä¸ªé“¾è¡¨çš„é•¿åº¦ï¼Œç¬¬äºŒéåªéœ€è¦èµ°é“¾è¡¨é•¿åº¦å‡å»è¿™ä¸ª**<em>n**</em>å°±è¡Œäº†</p><h3 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">removeNthFromEnd</span><span class="params">(ListNode head, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">    ListNode l = head;</span><br><span class="line">    <span class="keyword">while</span> (l != <span class="keyword">null</span>) &#123;</span><br><span class="line">        length++;</span><br><span class="line">        l = l.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (length == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    l = head;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> sub = length - n;</span><br><span class="line">    <span class="keyword">if</span> (sub == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (sub &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        l = l.next;</span><br><span class="line">        sub--;</span><br><span class="line">    &#125;</span><br><span class="line">    l.next = l.next.next;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è™½ç„¶éå†äº†ä¸¤æ¬¡ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯ O(n)ï¼Œçº¿æ€§é•¿åº¦</p><p>ç©ºé—´å¤æ‚åº¦ä¸º O(1)</p></blockquote><h3 id="æ€è·¯äºŒï¼šç›¸å¯¹ä½ç§»æ³•"><a href="#æ€è·¯äºŒï¼šç›¸å¯¹ä½ç§»æ³•" class="headerlink" title="æ€è·¯äºŒï¼šç›¸å¯¹ä½ç§»æ³•"></a>æ€è·¯äºŒï¼šç›¸å¯¹ä½ç§»æ³•</h3><p>è¿™ä¸ªæ€è·¯ä¹Ÿå¾ˆç®€å•ï¼Œå¯¹æ¯”ä¸Šé¢çš„æ€è·¯å¥½å¤„æ˜¯ï¼šåªéœ€è¦éå†ä¸€éå°±è¡Œäº†</p><p>åŒæŒ‡é’ˆï¼Œè®© A æŒ‡é’ˆå…ˆèµ° <strong><em>n</em></strong>æ­¥ï¼Œéšåå†è®© B æŒ‡é’ˆå’Œ A æŒ‡é’ˆä¸€èµ·èµ°ï¼Œè¿™æ ·å°±ä¼šæœ‰é•¿åº¦ä¸º n çš„ç›¸å¯¹ä½ç§»ï¼Œç›´åˆ°è®© A æŒ‡é’ˆèµ°åˆ°ç»ˆç‚¹ï¼Œæ­¤æ—¶ B æŒ‡é’ˆä¹Ÿå°±è·ç»ˆç‚¹ n çš„é•¿åº¦äº†</p><h3 id="ä»£ç ï¼š-1"><a href="#ä»£ç ï¼š-1" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">removeNthFromEnd</span><span class="params">(ListNode head, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    ListNode fast = head, slow = head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">        fast = fast.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (fast == <span class="keyword">null</span>) <span class="keyword">return</span> head.next;</span><br><span class="line">    <span class="keyword">while</span> (fast.next != <span class="keyword">null</span>)&#123;</span><br><span class="line">        fast = fast.next;</span><br><span class="line">        slow = slow.next;</span><br><span class="line">    &#125;</span><br><span class="line">    slow.next = slow.next.next;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Array </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0160. Intersection of Two Linked Lists</title>
      <link href="2020/10/12/0160-Intersection-of-Two-Linked-Lists/"/>
      <url>2020/10/12/0160-Intersection-of-Two-Linked-Lists/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="160-ç›¸äº¤é“¾è¡¨-Easy"><a href="#160-ç›¸äº¤é“¾è¡¨-Easy" class="headerlink" title="160. ç›¸äº¤é“¾è¡¨  Easy"></a><a href="https://leetcode-cn.com/problems/intersection-of-two-linked-lists/">160. ç›¸äº¤é“¾è¡¨</a>  <font color="#49b666" size=5>Easy</font></h2><p>ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ‰¾åˆ°ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹ã€‚</p><p>å¦‚ä¸‹é¢çš„ä¸¤ä¸ªé“¾è¡¨<strong>ï¼š</strong></p><p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_statement.png" class="lazyload" data-srcset="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_statement.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>åœ¨èŠ‚ç‚¹ c1 å¼€å§‹ç›¸äº¤ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_example_1.png" class="lazyload" data-srcset="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_example_1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šintersectVal &#x3D; 8, listA &#x3D; [4,1,8,4,5], listB &#x3D; [5,0,1,8,4,5], skipA &#x3D; 2, skipB &#x3D; 3</span><br><span class="line">è¾“å‡ºï¼šReference of the node with value &#x3D; 8</span><br><span class="line">è¾“å…¥è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 8 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [4,1,8,4,5]ï¼Œé“¾è¡¨ B ä¸º [5,0,1,8,4,5]ã€‚åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 2 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ã€‚</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_example_2.png" class="lazyload" data-srcset="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_example_2.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šintersectVal &#x3D; 2, listA &#x3D; [0,9,1,2,4], listB &#x3D; [3,2,4], skipA &#x3D; 3, skipB &#x3D; 1</span><br><span class="line">è¾“å‡ºï¼šReference of the node with value &#x3D; 2</span><br><span class="line">è¾“å…¥è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 2 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [0,9,1,2,4]ï¼Œé“¾è¡¨ B ä¸º [3,2,4]ã€‚åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 1 ä¸ªèŠ‚ç‚¹ã€‚</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_example_3.png" class="lazyload" data-srcset="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_example_3.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šintersectVal &#x3D; 0, listA &#x3D; [2,6,4], listB &#x3D; [1,5], skipA &#x3D; 3, skipB &#x3D; 2</span><br><span class="line">è¾“å‡ºï¼šnull</span><br><span class="line">è¾“å…¥è§£é‡Šï¼šä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [2,6,4]ï¼Œé“¾è¡¨ B ä¸º [1,5]ã€‚ç”±äºè¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œæ‰€ä»¥ intersectVal å¿…é¡»ä¸º 0ï¼Œè€Œ skipA å’Œ skipB å¯ä»¥æ˜¯ä»»æ„å€¼ã€‚</span><br><span class="line">è§£é‡Šï¼šè¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œå› æ­¤è¿”å› nullã€‚</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>å¦‚æœä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰äº¤ç‚¹ï¼Œè¿”å› <code>null</code>.</li><li>åœ¨è¿”å›ç»“æœåï¼Œä¸¤ä¸ªé“¾è¡¨ä»é¡»ä¿æŒåŸæœ‰çš„ç»“æ„ã€‚</li><li>å¯å‡å®šæ•´ä¸ªé“¾è¡¨ç»“æ„ä¸­æ²¡æœ‰å¾ªç¯ã€‚</li><li>ç¨‹åºå°½é‡æ»¡è¶³ O(<em>n</em>) æ—¶é—´å¤æ‚åº¦ï¼Œä¸”ä»…ç”¨ O(<em>1</em>) å†…å­˜ã€‚</li></ul><h3 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h3><h4 id="æ€è·¯ä¸€ï¼šæš´åŠ›æ³•"><a href="#æ€è·¯ä¸€ï¼šæš´åŠ›æ³•" class="headerlink" title="æ€è·¯ä¸€ï¼šæš´åŠ›æ³•"></a>æ€è·¯ä¸€ï¼šæš´åŠ›æ³•</h4><p>éå†é“¾è¡¨ A çš„æ—¶å€™ï¼Œæ¯éå†ä¸€ä¸ªç»“ç‚¹éƒ½å®Œæ•´éå†ä¸€ä¸‹é“¾è¡¨ Bï¼Œåˆ¤æ–­æŒ‡å‘çš„ç»“ç‚¹æ˜¯å¦ä¸ºåŒä¸€ä¸ªï¼Œè¿™æ ·æ—¶é—´å¤æ‚åº¦ä¸º O(mn)</p><h4 id="æ€è·¯äºŒï¼š-HashMap"><a href="#æ€è·¯äºŒï¼š-HashMap" class="headerlink" title="æ€è·¯äºŒï¼š+ HashMap"></a>æ€è·¯äºŒï¼š+ HashMap</h4><p>åœ¨æ€è·¯ä¸€çš„åŸºç¡€ä¸Šï¼Œå…ˆå°†é“¾è¡¨ A çš„æ‰€æœ‰ç»“ç‚¹å…ˆæ”¾å…¥ HashMap ä¸­ï¼Œéå†é“¾è¡¨ B çš„æ—¶å€™æ¯”è¾ƒæ¯ä¸ªèŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ HashMap ä¸­ï¼Œæ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œä½†æ˜¯ç©ºé—´å¤æ‚åº¦ä¸º O(n)</p><h4 id="æ€è·¯ä¸‰ï¼š"><a href="#æ€è·¯ä¸‰ï¼š" class="headerlink" title="æ€è·¯ä¸‰ï¼š"></a>æ€è·¯ä¸‰ï¼š</h4><p>åœ¨ä¸Šé¢çš„å›¾ä¸­å¯ä»¥çœ‹è§ï¼Œåœ¨æœ‰äº¤ç‚¹çš„æƒ…å†µä¸‹ï¼Œæ— éå°±ä¸‰ç§æƒ…å†µï¼šç”±äºåœ¨äº¤ç‚¹å(åŒ…æ‹¬äº¤ç‚¹)çš„æ‰€æœ‰ç»“ç‚¹éƒ½ç›¸åŒ</p><ul><li>é“¾è¡¨ A çš„é•¿åº¦ &gt; é“¾è¡¨ B çš„é•¿åº¦</li><li>é“¾è¡¨ A çš„é•¿åº¦ = é“¾è¡¨ B çš„é•¿åº¦</li><li>é“¾è¡¨ A çš„é•¿åº¦ &lt; é“¾è¡¨ B çš„é•¿åº¦</li></ul><p>å¦‚æœæˆ‘ä»¬èƒ½ç®—å‡ºè¿™ä¸ªé•¿åº¦å·®ï¼Œç„¶åè®©é•¿çš„é‚£ä¸ªé“¾è¡¨å…ˆèµ°è¿™ä¸ªé•¿åº¦å·®ï¼Œå†è®©ä¸¤ä¸ªé“¾è¡¨ä¸€èµ·èµ°ï¼Œç›´åˆ°èµ°åˆ°ç›¸äº¤ç‚¹</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201012093913.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201012093913.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201012093912222"></p><blockquote><ul><li>é“¾è¡¨ A é•¿åº¦ = 6ï¼›é“¾è¡¨ B é•¿åº¦ = 4ï¼›é“¾è¡¨å·® = 2</li><li>è®©é•¿åº¦é•¿çš„é“¾è¡¨(A)å…ˆèµ°é“¾è¡¨å·®ï¼Œå³ pointerA å…ˆèµ° 2 ä¸ªç»“ç‚¹</li><li>pointerA ä¸ pointerB ä¸€èµ·éå†ï¼Œç›´åˆ°éå†åˆ°ç›¸åŒç»“ç‚¹</li></ul></blockquote><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">getIntersectionNode</span><span class="params">(ListNode headA, ListNode headB)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (headA == <span class="keyword">null</span> || headB == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ListNode a = headA;</span><br><span class="line">    ListNode b = headB;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é“¾è¡¨A å’Œ é“¾è¡¨B çš„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">int</span> la = <span class="number">0</span>, lb = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (a.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">        la++;</span><br><span class="line">        a = a.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (b.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">        lb++;</span><br><span class="line">        b = b.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­¤æ—¶è¯´æ˜ç›´åˆ° é“¾è¡¨A å’Œ é“¾è¡¨B çš„æœ€åä¸€ä¸ªç»“ç‚¹éƒ½è¿˜æ²¡ç›¸äº¤</span></span><br><span class="line">    <span class="keyword">if</span> (a != b) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é“¾è¡¨A çš„é•¿åº¦å¤§äº é“¾è¡¨B</span></span><br><span class="line">    <span class="keyword">if</span> (la &gt; lb) &#123;</span><br><span class="line">        <span class="keyword">int</span> sub = la - lb;</span><br><span class="line">        <span class="keyword">while</span> (sub &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            headA = headA.next;</span><br><span class="line">            sub--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é“¾è¡¨A çš„é•¿åº¦å°äº é“¾è¡¨B</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">int</span> sub = lb - la;</span><br><span class="line">        <span class="keyword">while</span> (sub &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            headB = headB.next;</span><br><span class="line">            sub--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (headA != headB) &#123;</span><br><span class="line">        headA = headA.next;</span><br><span class="line">        headB = headB.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> headA;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦å¤–ä¸€ç§ç®€æ´çš„å†™æ³•ï¼Œæ€è·¯ä¸€æ ·</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">getIntersectionNode</span><span class="params">(ListNode headA, ListNode headB)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(headA == <span class="keyword">null</span> || headB == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    ListNode a = headA;</span><br><span class="line">    ListNode b = headB;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>( a != b)&#123;</span><br><span class="line">        a = a == <span class="keyword">null</span>? headB : a.next;</span><br><span class="line">        b = b == <span class="keyword">null</span>? headA : b.next;    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœæ²¡æœ‰é‡åˆéƒ¨åˆ†ï¼Œé‚£ä¹ˆ <code>a</code> å’Œ <code>b</code> åœ¨æŸä¸€æ—¶é—´ç‚¹ ä¸€å®šä¼šåŒæ—¶èµ°åˆ° <code>null</code>ï¼Œä»è€Œç»“æŸå¾ªç¯ï¼›</li><li>å¦‚æœæœ‰é‡åˆéƒ¨åˆ†ï¼Œåˆ†ä¸¤ç§æƒ…å†µï¼š<ul><li>é•¿åº¦ç›¸åŒçš„è¯ï¼Œ <code>a</code> å’Œ <code>b</code> ä¸€å®šæ˜¯åŒæ—¶åˆ°è¾¾ç›¸é‡ç‚¹ï¼Œç„¶åè¿”å›ï¼›</li><li>é•¿åº¦ä¸åŒçš„è¯ï¼Œè¾ƒçŸ­çš„é“¾è¡¨å…ˆåˆ°è¾¾ç»“å°¾ï¼Œç„¶åæŒ‡é’ˆè½¬å‘è¾ƒé•¿çš„é“¾è¡¨ã€‚æ­¤åˆ»ï¼Œè¾ƒé•¿çš„é“¾è¡¨ç»§ç»­å‘æœ«å°¾èµ°ï¼Œå¤šèµ°çš„è·ç¦»åˆšå¥½å°±æ˜¯æœ€å¼€å§‹ä»‹ç»çš„è§£æ³•ï¼Œé“¾è¡¨çš„é•¿åº¦å·®ï¼Œèµ°å®Œä¹‹åæŒ‡é’ˆè½¬å‘è¾ƒçŸ­çš„é“¾è¡¨ã€‚ç„¶åç»§ç»­èµ°çš„è¯ï¼Œç›¸é‡çš„ä½ç½®å°±åˆšå¥½æ˜¯ç›¸é‡ç‚¹äº†ã€‚</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Array </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆSpring Security(å…­)</title>
      <link href="2020/10/10/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E5%85%AD/"/>
      <url>2020/10/10/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E5%85%AD/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>â€‹        åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œä½¿ç”¨äº†ç¬¬ä¸€ç§æ–¹å¼ï¼šJDBC è¿æ¥æ•°æ®åº“ã€‚è¿™ä¸€èŠ‚ä¸­å°†ä½¿ç”¨ Spring Data JPA è¿›è¡Œæ•°æ®åº“æ“ä½œã€‚å¦‚æœå¯¹ JPA çš„ç¯å¢ƒå’Œæ“ä½œæ²¡äº†è§£è¿‡çš„ï¼Œå¯ä»¥é€‚å½“å‚è€ƒ<a href="http://wangba.me/2020/09/10/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%B8%80/">è¿™ä¸ª</a>ã€‚</p><p>åœ¨ä¸Šä¸€èŠ‚ä¹Ÿæåˆ° Spring Security æ”¯æŒå¤šç§æ•°æ®æºï¼Œè¿™äº›ä¸åŒæ¥æºçš„æ•°æ®è¢«å…±åŒå°è£…æˆäº†ä¸€ä¸ª UserDetailService æ¥å£</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010091947.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010091947.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010091945655"></p><p>â€‹        åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œè¿˜æ˜¯è¿™ä¸ªæ€è·¯ï¼Œè¿™ä¸€æ¬¡ä¸ç”¨ Spring Security æä¾›çš„ç±», å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªç±»å»å®ç° UserDetailService </p><h2 id="äºŒã€ç¯å¢ƒæ­å»º"><a href="#äºŒã€ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€ç¯å¢ƒæ­å»º"></a>äºŒã€ç¯å¢ƒæ­å»º</h2><p><code>æ€è·¯æ¸…æ™°ï¼Œå…ˆçœ‹ä¾èµ–</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010133402.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010133402.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010133400947"></p><p><code>application.properties</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string"></span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/security?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line"></span><br><span class="line"><span class="meta">spring.jpa.database</span>=<span class="string">mysql</span></span><br><span class="line"><span class="meta">spring.jpa.database-platform</span>=<span class="string">mysql</span></span><br><span class="line"><span class="meta">spring.jpa.hibernate.ddl-auto</span>=<span class="string">update</span></span><br><span class="line"><span class="meta">spring.jpa.show-sql</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.jpa.properties.hibernate.dialect</span>=<span class="string">org.hibernate.dialect.MySQL8Dialect</span></span><br></pre></td></tr></table></figure><p><strong>å®ä½“ç±»</strong></p><p><code>User</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity(name = &quot;t_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">UserDetails</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> accountNonExpired;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> accountNonLocked;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> credentialsNonExpired;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> enabled;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// User å’Œ Role æ˜¯å¤šå¯¹å¤šå…³ç³»</span></span><br><span class="line">    <span class="meta">@ManyToMany(fetch = FetchType.EAGER,cascade = CascadeType.PERSIST)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Role&gt; roles;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›ç”¨æˆ·æƒé™</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;? extends GrantedAuthority&gt; getAuthorities() &#123;</span><br><span class="line">        List&lt;SimpleGrantedAuthority&gt; authorities = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Role role : getRoles()) &#123;</span><br><span class="line">            authorities.add(<span class="keyword">new</span> SimpleGrantedAuthority(role.getName()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> authorities;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·æ˜¯å¦è¿‡æœŸ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAccountNonExpired</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accountNonExpired;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·æ˜¯å¦è¢«é”</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAccountNonLocked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accountNonLocked;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯†ç æ˜¯å¦è¿‡æœŸ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isCredentialsNonExpired</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> credentialsNonExpired;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è´¦æˆ·æ˜¯å¦å¯ç”¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEnabled</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> enabled;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// set get çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šè¿™é‡Œä¸ºä»€ä¹ˆ User è¦å®ç° UserDetails ? ä¸»è¦æ˜¯ç”±äºåœ¨è‡ªå®šä¹‰ç±»å®ç° UserDetailServiceï¼Œå…¶ä¸­åªæœ‰å”¯ä¸€çš„æŠ½è±¡æ–¹æ³•<code>loadUserByUsername</code>ï¼Œè€Œè¯¥æ–¹æ³•å°±æ˜¯è¿”å›çš„ UserDetails</p></blockquote><p><code>Role</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity(name = &quot;t_role&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Role</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String nameZh;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>UserDao</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">User</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡ç”¨æˆ·åæ‰¾åˆ°ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username ç”¨æˆ·å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="doctag">@link</span> User&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">User <span class="title">findAllByUsername</span><span class="params">(String username)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸æ‡‚ä¸ºå•¥è¿™ä¹ˆå†™çš„å¯ä»¥å‚è€ƒä¸€ä¸‹ <a href="http://wangba.me/2020/09/10/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%B8%80/">JPA çš„ CRUD æ“ä½œ</a></p><p><code>UserService</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> <span class="keyword">implements</span> <span class="title">UserDetailsService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDao</span><span class="params">(UserDao userDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDetails <span class="title">loadUserByUsername</span><span class="params">(String s)</span> <span class="keyword">throws</span> UsernameNotFoundException </span>&#123;</span><br><span class="line">        User user = userDao.findAllByUsername(s);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(user)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> UsernameNotFoundException(<span class="string">&quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿å­˜ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="doctag">@link</span> User&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">User <span class="title">save</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.save(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><ul><li>å®ç°äº† UserDetailsServiceï¼Œé‡å†™å…¶ä¸­çš„ <code>loadUserByUsername</code> æ–¹æ³•ï¼šé€šè¿‡ä¼ å…¥çš„ç”¨æˆ·åæŸ¥æ‰¾ç”¨æˆ·ä¿¡æ¯</li><li><code>save</code> æ–¹æ³•æ˜¯ä¸ºäº†åé¢å†™å…¥ä¸åŒè§’è‰²ç”¨æˆ·</li></ul></blockquote><p><code>UserController</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserService</span><span class="params">(UserService userService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userService = userService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">save</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userService.save(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°† <code>SecurityConfig</code> ä¸­ configure æ–¹æ³•æ”¹ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserService</span><span class="params">(UserService userService)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.userService = userService;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    auth.userDetailsService(userService);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€Test"><a href="#ä¸‰ã€Test" class="headerlink" title="ä¸‰ã€Test"></a>ä¸‰ã€Test</h2><p><code>Postman</code></p><p>ç”±äºåœ¨æœªç™»å½•çš„æƒ…å†µä¸‹ï¼Œç›´æ¥è°ƒç”¨ localhost:8080/save æ¥å£ä¼šå¤±è´¥ï¼Œæ‰€ä»¥å…ˆåœ¨æ•°æ®åº“ä¸­æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªæ•°æ®ï¼š</p><p><strong>user è¡¨ï¼š</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010155708.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010155708.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010155707544"></p><p><strong>role è¡¨ï¼š</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010155728.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010155728.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010155725922"></p><p><strong>user_role å…³ç³»è¡¨ï¼š</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010155743.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010155743.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010155742141"></p><p><strong>ä½¿ç”¨ä¸Šè¿°å¢åŠ çš„ç”¨æˆ·ç™»å½•ï¼š</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160125.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160125.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010160123372"></p><p><strong>å¢åŠ ä¸åŒè§’è‰²ç”¨æˆ·ï¼š</strong></p><p><code>user ç”¨æˆ·</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160317.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160317.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010160316590"></p><p><code>adminç”¨æˆ·</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160436.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160436.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010160434975"></p><p><strong>çœ‹ä¸‹æ•°æ®åº“ï¼š</strong></p><p><code>userè¡¨</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160556.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160556.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010160555645"></p><p><code>roleè¡¨</code></p><p>![image-20201010160613255](/Users/wangdechao/Library/Application Support/typora-user-images/image-20201010160613255.png)</p><p><code>user_role å…³ç³»è¡¨</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160630.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160630.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010160628692"></p><p>æ­¤æ—¶åœ¨åˆ†åˆ«ä½¿ç”¨ user ç”¨æˆ·å’Œ admin ç”¨æˆ·ç™»å½•ï¼Œçœ‹ä¸€ä¸‹ä¸åŒç”¨æˆ·çš„æƒé™ï¼š</p><p><code>userç”¨æˆ·</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160850.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160850.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010160849245"></p><p><code>useræƒé™æ¥å£</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160933.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010160933.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010160932135"></p><p><code>adminæƒé™æ¥å£</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010161013.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010161013.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010161012247"></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Spring Security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆSpring Security(äº”)</title>
      <link href="2020/10/10/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%BA%94/"/>
      <url>2020/10/10/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%BA%94/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>â€‹        åœ¨<a href="http://wangba.me/tags/Spring-Security/">å‰é¢å‡ èŠ‚</a>ä¸­éƒ½ä½¿ç”¨çš„æ˜¯å†…å­˜æ•°æ®ï¼Œå¹¶æ²¡æœ‰è¿æ¥æ•°æ®åº“ï¼Œè¿™ä¸€ç« å°†ä»‹ç» Spring Security æ•´åˆ JDBC </p><p>â€‹        åœ¨ä¸Šä¸€èŠ‚ä¸­å…ˆæ˜¯ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼å°†ä¿¡æ¯æ”¾åœ¨å†…å­˜ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    auth.inMemoryAuthentication()</span><br><span class="line">            .withUser(<span class="string">&quot;wangba&quot;</span>)</span><br><span class="line">            .password(<span class="string">&quot;guigui&quot;</span>)</span><br><span class="line">            .roles(<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">            .and()</span><br><span class="line">            .withUser(<span class="string">&quot;wangyi&quot;</span>)</span><br><span class="line">            .password(<span class="string">&quot;1111&quot;</span>)</span><br><span class="line">            .roles(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦å¤–æ–¹å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> UserDetailsService <span class="title">userDetailsService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    InMemoryUserDetailsManager manager = <span class="keyword">new</span> InMemoryUserDetailsManager();</span><br><span class="line">  manager.createUser(User.withUsername(<span class="string">&quot;wangba&quot;</span>).password(<span class="string">&quot;guigui&quot;</span>).roles(<span class="string">&quot;admin&quot;</span>).build());</span><br><span class="line">    manager.createUser(User.withUsername(<span class="string">&quot;wangyi&quot;</span>).password(<span class="string">&quot;1111&quot;</span>).roles(<span class="string">&quot;user&quot;</span>).build());</span><br><span class="line">    <span class="keyword">return</span> manager;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äº Spring Security æ”¯æŒå¤šç§æ•°æ®æºï¼Œä¾‹å¦‚å†…å­˜ã€æ•°æ®åº“ã€LDAP ç­‰ï¼Œè¿™äº›ä¸åŒæ¥æºçš„æ•°æ®è¢«å…±åŒå°è£…æˆäº†ä¸€ä¸ª UserDetailService æ¥å£ï¼Œä»»ä½•å®ç°äº†è¯¥æ¥å£çš„å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºè®¤è¯æ•°æ®æºã€‚</p><p>é¦–å…ˆçœ‹ä¸€ä¸‹ç±»ç»§æ‰¿å’Œå®ç°æƒ…å†µï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010091947.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010091947.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010091945655"></p><p>è¿™æ—¶å€™å°±èƒ½çœ‹å‡ºæ¥ä¸ºä»€ä¹ˆä¸Šé¢ç¬¬äºŒç§æ–¹å¼ä¸­ï¼Œä½¿ç”¨çš„æ˜¯ InMemoryUserDetailsManager å®ä¾‹äº†ï¼Œè¿™ä¸ªå°±æ˜¯åŸºäºå†…å­˜çš„ã€‚è¿˜å¯ä»¥å‘ç° JdbcUserDetailsManager åº”è¯¥å°±æ˜¯åŸºäºæ•°æ®åº“çš„å®ä¾‹äº†ã€‚</p><h2 id="äºŒã€ç¯å¢ƒæ­å»º"><a href="#äºŒã€ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€ç¯å¢ƒæ­å»º"></a>äºŒã€ç¯å¢ƒæ­å»º</h2><h3 id="2-1-å‡†å¤‡æ•°æ®åº“"><a href="#2-1-å‡†å¤‡æ•°æ®åº“" class="headerlink" title="2.1 å‡†å¤‡æ•°æ®åº“"></a>2.1 å‡†å¤‡æ•°æ®åº“</h3><p>åœ¨ org/springframework/security/core/userdetails/jdbc ä¸­åº”è¯¥å­˜å‚¨ç€ JdbcUserDetailsManager è‡ªå·±æä¾›çš„æ•°æ®åº“è„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><p><code>users.ddl</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">users</span>(username varchar_ignorecase(<span class="number">50</span>) <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span>,<span class="keyword">password</span> varchar_ignorecase(<span class="number">500</span>) <span class="keyword">not</span> <span class="literal">null</span>,enabled <span class="built_in">boolean</span> <span class="keyword">not</span> <span class="literal">null</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> authorities (username varchar_ignorecase(<span class="number">50</span>) <span class="keyword">not</span> <span class="literal">null</span>,authority varchar_ignorecase(<span class="number">50</span>) <span class="keyword">not</span> <span class="literal">null</span>,<span class="keyword">constraint</span> fk_authorities_users <span class="keyword">foreign</span> <span class="keyword">key</span>(username) <span class="keyword">references</span> <span class="keyword">users</span>(username));</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> ix_auth_username <span class="keyword">on</span> authorities (username,authority);</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ•°æ®åº“è„šæœ¬é€‚ç”¨äº <code>HSQLDB</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010093026.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010093026.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010093022924"></p><p>ä¸ºäº†è®©ä»–é€‚ç”¨äº Mysql ï¼Œå°†å…¶æ”¹ä¸ºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">users</span>(username <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span>,<span class="keyword">password</span> <span class="built_in">varchar</span>(<span class="number">500</span>) <span class="keyword">not</span> <span class="literal">null</span>,enabled <span class="built_in">boolean</span> <span class="keyword">not</span> <span class="literal">null</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> authorities (username <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">not</span> <span class="literal">null</span>,authority <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">not</span> <span class="literal">null</span>,<span class="keyword">constraint</span> fk_authorities_users <span class="keyword">foreign</span> <span class="keyword">key</span>(username) <span class="keyword">references</span> <span class="keyword">users</span>(username));</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> ix_auth_username <span class="keyword">on</span> authorities (username,authority);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œè„šæœ¬å¯ä»¥çœ‹è§ï¼šusers è¡¨å’Œ authorities è¡¨</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010094259.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010094259.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010094258373"></p><p><code>userè¡¨</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010094606.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010094606.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010094605554"></p><p><code>authoritiesè¡¨</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010094633.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010094633.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010094632304"></p><p>ä¸¤å¼ è¡¨æ˜¯é€šè¿‡ <code>username</code> å…³è”èµ·æ¥</p><h3 id="2-2-å¢åŠ ä¸åŒè§’è‰²ç”¨æˆ·"><a href="#2-2-å¢åŠ ä¸åŒè§’è‰²ç”¨æˆ·" class="headerlink" title="2.2 å¢åŠ ä¸åŒè§’è‰²ç”¨æˆ·"></a>2.2 å¢åŠ ä¸åŒè§’è‰²ç”¨æˆ·</h3><p>å°†ä¸Šè¿°çš„ç¬¬äºŒç§åŸºäºå†…å­˜çš„æ–¹å¼ä¿®æ”¹ä¸ºåŸºäºæ•°æ®åº“æ–¹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> DataSource dataSource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDataSource</span><span class="params">(DataSource dataSource)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.dataSource = dataSource;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> UserDetailsService <span class="title">userDetailsService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    JdbcUserDetailsManager manager = <span class="keyword">new</span> JdbcUserDetailsManager();</span><br><span class="line">    manager.setDataSource(dataSource);</span><br><span class="line">    <span class="keyword">if</span> (!manager.userExists(<span class="string">&quot;wangba&quot;</span>)) &#123;</span><br><span class="line">        manager.createUser(User.withUsername(<span class="string">&quot;wangba&quot;</span>).password(<span class="string">&quot;guigui&quot;</span>).roles(<span class="string">&quot;admin&quot;</span>).build());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!manager.userExists(<span class="string">&quot;wangyi&quot;</span>)) &#123;</span><br><span class="line">        manager.createUser(User.withUsername(<span class="string">&quot;wangyi&quot;</span>).password(<span class="string">&quot;1111&quot;</span>).roles(<span class="string">&quot;user&quot;</span>).build());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> manager;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œé¡¹ç›®å¯ä»¥çœ‹è§å·²ç»å°†ç”¨æˆ·å†™å…¥æ•°æ®åº“äº†</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010101049.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010101049.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010101048293"></p><p>è¿›å…¥ JdbcUserDetailsManager çš„ createUser æ–¹æ³•ä¸­çœ‹çœ‹</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010101931.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010101931.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010101928042"></p><p>å¯ä»¥çœ‹åˆ° createUserSql å±æ€§ï¼Œå…·ä½“çœ‹ä¸€ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010102103.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010102103.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010102101750"></p><p>å¯ä»¥çœ‹åˆ°å®é™…ä¸Šå°±æ˜¯ä¸€æ¡ Sql è¯­å¥ï¼Œç„¶åæŠŠæˆ‘ä»¬çš„ç”¨æˆ·æ•°æ®å†™åˆ°æ•°æ®åº“ä¸­</p><h2 id="ä¸‰ã€Test"><a href="#ä¸‰ã€Test" class="headerlink" title="ä¸‰ã€Test"></a>ä¸‰ã€Test</h2><p><code>ç™»å½• user</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010102755.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010102755.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010102752531"></p><p><code>è®¿é—® user</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010102911.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010102911.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010102909970"></p><p><code>è®¿é—® admin</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010102851.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201010102851.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201010102850231"></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Spring Security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆSpring Security (å››)</title>
      <link href="2020/10/09/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E5%9B%9B/"/>
      <url>2020/10/09/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E5%9B%9B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>åœ¨æœ¬èŠ‚ä¸­ä¸»è¦å®ç°ä¸€ä¸‹æˆæƒåŠŸèƒ½ï¼Œå³éœ€æ±‚æ—¶ï¼š</p><blockquote><p>admin: èƒ½è®¿é—®æ‰€æœ‰çš„é¡µé¢ï¼Œä¸ä»…ä»…æ˜¯ /admin/ ä¸‹çš„é¡µé¢ï¼Œä¹Ÿå¯ä»¥è®¿é—® /user/ ä¸‹çš„é¡µé¢</p><p>user: åªèƒ½è®¿é—® /user/ ä¸‹æ‰€æœ‰é¡µé¢</p><p>hello: /hello æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥è®¿é—®</p></blockquote><p>å¯ä»¥ç†è§£ä¸ºï¼šadmin æƒé™æ¯” user é«˜</p><h2 id="äºŒã€ç¯å¢ƒæ­å»º"><a href="#äºŒã€ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€ç¯å¢ƒæ­å»º"></a>äºŒã€ç¯å¢ƒæ­å»º</h2><p>ç¯å¢ƒå‚è€ƒ<a href="http://wangba.me/tags/Spring-Security/">å‰é¢å‡ èŠ‚</a>ï¼Œç”±äºç›®å‰å¹¶æ²¡æœ‰è¿æ¥æ•°æ®åº“ï¼Œæ‰€ä»¥å°±åŸºäºå†…å­˜è¿›è¡Œæµ‹è¯•</p><p><code>SecurityConfig</code></p><p>åœ¨é‡å†™çš„ configure æ–¹æ³•ä¸­å¢åŠ ä¸€ä¸ª user ç”¨æˆ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    auth.inMemoryAuthentication()</span><br><span class="line">            .withUser(<span class="string">&quot;wangba&quot;</span>)</span><br><span class="line">            .password(<span class="string">&quot;guigui&quot;</span>)</span><br><span class="line">            .roles(<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">            .and()</span><br><span class="line">            .withUser(<span class="string">&quot;wangyi&quot;</span>)</span><br><span class="line">            .password(<span class="string">&quot;1111&quot;</span>)</span><br><span class="line">            .roles(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨é‡å†™çš„ configure æ–¹æ³•ä¸­å¢åŠ æ‹¦æˆªè§„åˆ™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .antMatchers(<span class="string">&quot;/admin/**&quot;</span>).hasRole(<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">            .antMatchers(<span class="string">&quot;/user/**&quot;</span>).hasRole(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">            <span class="comment">// çœç•¥</span></span><br><span class="line">    ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šè§„åˆ™æ˜¯æœ‰é¡ºåºçš„ï¼Œå³é“¾å¼æ“ä½œ</p><p>å¦‚æœæŠŠ anyRequest() æ”¾åœ¨å‰é¢ï¼Œé¦–å…ˆå°±ä¼šè®©æ‰€æœ‰è¯·æ±‚é€šè¿‡ï¼Œç„¶åå†è¿›è¡Œæ‹¦æˆªï¼Œè¿™æ ·æ‹¦æˆªè§„åˆ™å°±æ²¡æœ‰ä»€ä¹ˆç”¨äº†</p></blockquote><p><code>SecurityController</code> </p><p>åœ¨è§†å›¾å±‚å¢åŠ ä¸€äº›è¯·æ±‚æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">hello0</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/user/hello&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">hello1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;user&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/admin/hello&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">hello2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;admin&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­ï¼š</p><p>/hello è¯·æ±‚ï¼šå…è®¸ç™»å½•åçš„ä»»ä½•äººè®¿é—®</p><p>/user/hello è¯·æ±‚ï¼šå…è®¸æ‹¥æœ‰ user è§’è‰²çš„ç”¨æˆ·ç™»å½•ï¼›å…è®¸æ‹¥æœ‰ admin è§’è‰²çš„ç”¨æˆ·ç™»å½•</p><p>/admin/hello è¯·æ±‚ï¼šåªå…è®¸æ‹¥æœ‰ admin è§’è‰²çš„ç”¨æˆ·ç™»å½•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .antMatchers(<span class="string">&quot;/admin/**&quot;</span>).hasRole(<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">            .antMatchers(<span class="string">&quot;/user/**&quot;</span>).hasRole(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">            <span class="comment">// çœç•¥</span></span><br><span class="line">    ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€æµ‹è¯•"><a href="#ä¸‰ã€æµ‹è¯•" class="headerlink" title="ä¸‰ã€æµ‹è¯•"></a>ä¸‰ã€æµ‹è¯•</h2><p><code>Postman</code></p><p>é¦–å…ˆç™»å½• user ç”¨æˆ·ï¼šwangyi</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009150448.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009150448.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201009150447961"></p><p>æŒ‰ç…§ä¸Šé¢çš„ç†è®ºæ¥è¯´ï¼šuser å¯ä»¥è®¿é—® <code>/hello</code> å’Œ <code>/user/hello</code> ï¼Œä¸èƒ½è®¿é—® <code>/admin/hello</code></p><p> <code>/hello</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009150703.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009150703.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201009150702237"></p><p> <code>/user/hello</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009150746.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009150746.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201009150745738"></p><p> <code>/admin/hello</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009150851.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009150851.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201009150850902"></p><p>å¯ä»¥çœ‹è§ï¼Œè®¿é—®è¯¥æ¥å£è¢«é™æ­¢äº†</p><p>åŒæ ·ï¼Œç™»å½• admin ç”¨æˆ·ï¼šwangba</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009151043.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009151043.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201009151042154"></p><p> <code>/hello</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009151239.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009151239.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201009151238430"></p><p> <code>/admin/hello</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009151145.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009151145.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201009151144433"></p><p> <code>/user/hello</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009151212.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009151212.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201009151210955"></p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬å‰é¢è¦æ±‚å®ç°çš„æ˜¯ admin å¯ä»¥è®¿é—®æ‰€æœ‰é¡µé¢ï¼Œæ‰€ä»¥è¿›è¡Œæ”¹è¿›ï¼Œå³è¿›è¡Œ<code>è§’è‰²ç»§æ‰¿</code></p><p><code>SecurityConfig</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function">RoleHierarchy <span class="title">roleHierarchy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    RoleHierarchyImpl roleHierarchy = <span class="keyword">new</span> RoleHierarchyImpl();</span><br><span class="line">    roleHierarchy.setHierarchy(<span class="string">&quot;ROLE_admin &gt; ROLE_user&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> roleHierarchy;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šä¸Šè¿°é…ç½®è¡¨è¾¾<code>ROLE_admin</code> è‡ªåŠ¨å…·å¤‡ <code>ROLE_user</code> çš„æƒé™ã€‚</p></blockquote><p>æ­¤æ—¶é‡å¯é¡¹ç›®ï¼Œå†æ¬¡ç™»å½• wangbaï¼Œå¹¶è®¿é—® <code>/user/hello</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009152023.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201009152023.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201009152022118"></p><p>å¯ä»¥çœ‹è§æ­¤æ—¶ admin è§’è‰²å¯ä»¥è®¿é—®ä»»ä½•é¡µé¢äº†</p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Spring Security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0206. Reverse Linked List</title>
      <link href="2020/10/09/0206-Reverse-Linked-List/"/>
      <url>2020/10/09/0206-Reverse-Linked-List/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="206-åè½¬é“¾è¡¨-Easy"><a href="#206-åè½¬é“¾è¡¨-Easy" class="headerlink" title="206. åè½¬é“¾è¡¨ Easy"></a><a href="https://leetcode-cn.com/problems/reverse-linked-list/">206. åè½¬é“¾è¡¨</a> <font color="#49b666" size=5>Easy</font></h2><p>åè½¬ä¸€ä¸ªå•é“¾è¡¨ã€‚</p><p><strong>ç¤ºä¾‹:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL</span><br><span class="line">è¾“å‡º: 5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL</span><br></pre></td></tr></table></figure><p><strong>è¿›é˜¶:</strong><br>ä½ å¯ä»¥è¿­ä»£æˆ–é€’å½’åœ°åè½¬é“¾è¡¨ã€‚ä½ èƒ½å¦ç”¨ä¸¤ç§æ–¹æ³•è§£å†³è¿™é“é¢˜ï¼Ÿ</p><h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h2><p>å†™é“¾è¡¨çš„ä»£ç é¢˜ï¼Œä¸€å®šè¦è€ƒè™‘å‘¨å…¨ï¼Œå¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è€ƒè™‘ï¼š</p><ul><li><p>æ˜¯å¦ä¸ºç©ºé“¾è¡¨</p></li><li><p>æ˜¯å¦åªå‰©ä¸€ä¸ªç»“ç‚¹</p></li><li><p>å‰©ä½™ä¸¤ä¸ªç»“ç‚¹æ€ä¹ˆæ ·</p></li><li><p>åœ¨å¤„ç†å¤´ç»“ç‚¹å’Œå°¾ç»“ç‚¹æ—¶ï¼Œé€»è¾‘ä¸Šæ˜¯å¦å¯ä»¥é€šè¿‡</p></li></ul><h3 id="è¿­ä»£è§£æ³•ï¼š"><a href="#è¿­ä»£è§£æ³•ï¼š" class="headerlink" title="è¿­ä»£è§£æ³•ï¼š"></a>è¿­ä»£è§£æ³•ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">     <span class="comment">// è¿­ä»£æ³•</span></span><br><span class="line">    ListNode pre = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (head != <span class="keyword">null</span>) &#123;</span><br><span class="line">        ListNode next = head.next;</span><br><span class="line">        head.next = pre;</span><br><span class="line">        pre = head;</span><br><span class="line">        head = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pre;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯åœ¨<a href="http://wangba.me/2020/10/03/LinkedList/">é“¾è¡¨</a>ä¸­è¯´åˆ°çš„å“¨å…µï¼Œè¿™æ ·æœ€å¤§çš„ç›®çš„å°±æ˜¯ä¸ºäº†è®©å¯¹æ•´ä¸ªé“¾è¡¨çš„æ“ä½œè¿›è¡Œç»Ÿä¸€åŒ–</p><h3 id="é€’å½’è§£æ³•ï¼š"><a href="#é€’å½’è§£æ³•ï¼š" class="headerlink" title="é€’å½’è§£æ³•ï¼š"></a>é€’å½’è§£æ³•ï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// é€’å½’æ³•</span></span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    ListNode listNode = reverseList(head.next);</span><br><span class="line">    head.next.next = head;</span><br><span class="line">    head.next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> listNode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿›è¡Œé€’å½’æ“ä½œä¸­ï¼Œä¸€å®šè¦æ³¨æ„çš„ç‚¹ï¼š<code>å‡ºå£</code> </p><p>ä¹Ÿå°±æ˜¯è¯´ä¸€å®šè¦æœ‰æœ€å°æ¡ä»¶ï¼Œè€Œè¿™ä¸ªæ¡ä»¶æ˜¯å¯ä»¥è·³å‡ºæœ€åä¸€ä¸ªé€’å½’è°ƒç”¨çš„ï¼Œç„¶åå°†ç»“æœæ”¾åˆ°å€’æ•°ç¬¬äºŒä¸ªé€’å½’è°ƒç”¨ä¸­</p><p>åœ¨è¿™é‡Œé¢å‡ºå£å°±æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€æ—¦æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œå°±å¯ä»¥è§¦å‘æ‰€æœ‰é€’å½’è°ƒç”¨çš„ç»“æŸ</p>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Array </tag>
            
            <tag> LinkedList </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinkedList</title>
      <link href="2020/10/03/LinkedList/"/>
      <url>2020/10/03/LinkedList/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003182532.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003182532.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201003182530832"></p><p>å¿«é€Ÿé¢„è§ˆï¼š</p><ul><li>é¦–å…ˆè¦å’Œ<a href="http://wangba.me/2020/10/02/Array/">ä¸Šä¸€èŠ‚</a>çš„æ•°ç»„è¿›è¡Œæ¨ªå‘å¯¹æ¯”ï¼Œæ¥çœ‹ä¸€ä¸‹é“¾è¡¨ç‹¬æœ‰çš„ç‰¹æ€§</li><li>ç¬¬äºŒå°èŠ‚ä¼šä»‹ç»ä¸€ä¸‹å¸¸è§çš„å‡ ç§é“¾è¡¨ï¼Œä»¥åŠä¸ºä»€ä¹ˆè¦è¡ç”Ÿå‡ºè¿™äº›é“¾è¡¨</li><li>ç¬¬ä¸‰å°èŠ‚ä¸»è¦å…³æ³¨äºé“¾è¡¨çš„åŸºæ“ï¼Œ<del>(å‹¿6)</del> ä»¥åŠåœ¨é“¾è¡¨ä¸­çš„ä¸€äº›æ³¨æ„äº‹é¡¹ï¼Œå¦‚ä½•ä¿æŒé“¾è¡¨ä¸æ–­é“¾ï¼Œä¸ºä»€ä¹ˆè¦å¼•å…¥å“¨å…µ</li><li>æœ€åä¸€ä¸ªå°èŠ‚ä¸»è¦ç»“åˆ Java ä¸­çš„é“¾è¡¨ LinkedList æ¥åŠ æ·±å¯¹é“¾è¡¨çš„ç†è§£</li></ul><h2 id="äºŒã€ç‰¹æ€§"><a href="#äºŒã€ç‰¹æ€§" class="headerlink" title="äºŒã€ç‰¹æ€§"></a>äºŒã€ç‰¹æ€§</h2><p>åœ¨<a href="http://wangba.me/2020/10/02/Array/">ä¸Šä¸€èŠ‚</a>ä¸­å·²ç»ä»‹ç»è¿‡æ•°ç»„äº†ï¼Œå¯ä»¥å°†æ•°ç»„å’Œé“¾è¡¨åœ¨ç»“æ„ä¸Šè¿›è¡Œå¯¹æ¯”ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003201159.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003201159.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201003201157816"></p><ul><li>åœ¨æ•°ç»„ä¸­ï¼Œæ˜¯éœ€è¦ä¸€å—<code>è¿ç»­ä¸”è¶³å¤Ÿå­˜å‚¨æ‰€æœ‰æ•°æ®</code>çš„å†…å­˜ç©ºé—´ã€‚å¦‚æœä½ çš„æ•°æ®å¤§å°æ˜¯ 1MBï¼Œä½†æ˜¯ä½ çš„å†…å­˜ç©ºé—´ä¸­å¯èƒ½åªæœ‰ä¸¤ä¸ªå¤§å†…å­˜å—ï¼Œä¸”å¤§å°åˆ†åˆ«ä¸º 512 KBï¼Œè¿˜æœ‰è‹¥å¹²å°å†…å­˜å—ï¼Œé‚£ä¹ˆè¿™å—æ•°æ®æ˜¯ä¸èƒ½å­˜å‚¨åœ¨å†…å­˜ä¸­çš„</li><li>åœ¨é“¾è¡¨ä¸­ï¼Œæ˜¯é€šè¿‡ next æŒ‡é’ˆå°†<code>ç¦»æ•£çš„å†…å­˜ç©ºé—´</code>å…¨éƒ¨åˆ©ç”¨èµ·æ¥ï¼Œä¾‹å¦‚ä¸Šé¢çš„æƒ…å†µä¸­ï¼Œå°±å¯ä»¥å°†è¿™ 1MB å¤§å°çš„æ•°æ®å…¨éƒ¨è£…å…¥å†…å­˜ä¸­</li></ul><blockquote><p>æ³¨ï¼šåœ¨å®é™…çš„åº”ç”¨å±‚å¼€å‘ä¸­ï¼Œæ˜¯ä¸ç”¨åœ¨ä¹é‚£ä¸€ç‚¹çš„ç©ºé—´æ¢æ—¶é—´ï¼›ä½†æ˜¯åœ¨åº•å±‚å¼€å‘ä¸­ï¼Œè¿™ç§å¯¹ç©ºé—´è¦æ±‚éå¸¸é«˜çš„å¼€å‘ä¸­ï¼Œå°±è¦è€ƒè™‘åˆ°å¤šæ–¹é¢äº†</p></blockquote><p><code>å¯¹æ¯”ï¼š</code></p><table><thead><tr><th>æ—¶é—´å¤æ‚åº¦</th><th>æ•°ç»„</th><th>é“¾è¡¨</th></tr></thead><tbody><tr><td>æŸ¥è¯¢</td><td>O(1)</td><td>O(n)</td></tr><tr><td>æ’å…¥ã€åˆ é™¤</td><td>O(n)</td><td>O(1)</td></tr></tbody></table><h2 id="ä¸‰ã€å‡ ç§å¸¸è§„é“¾è¡¨"><a href="#ä¸‰ã€å‡ ç§å¸¸è§„é“¾è¡¨" class="headerlink" title="ä¸‰ã€å‡ ç§å¸¸è§„é“¾è¡¨"></a>ä¸‰ã€å‡ ç§å¸¸è§„é“¾è¡¨</h2><h3 id="3-1-å•é“¾è¡¨"><a href="#3-1-å•é“¾è¡¨" class="headerlink" title="3.1 å•é“¾è¡¨"></a>3.1 å•é“¾è¡¨</h3><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003214902.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003214902.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201003214901489"></p><ul><li>æŒ‡å‘ w çš„ç»“ç‚¹çš„ç»“ç‚¹ç§°ä¸º<code>å¤´ç»“ç‚¹</code></li><li>æŒ‡å‘ NULL çš„ç»“ç‚¹ g ç§°ä¸º<code>å°¾ç»“ç‚¹</code></li><li>æ¯ä¸€ä¸ªç»“ç‚¹éœ€è¦é¢å¤–çš„ç©ºé—´å­˜å‚¨ä¸‹ä¸€ä¸ªç»“ç‚¹çš„åœ°å€</li></ul><h3 id="3-2-å¾ªç¯é“¾è¡¨"><a href="#3-2-å¾ªç¯é“¾è¡¨" class="headerlink" title="3.2 å¾ªç¯é“¾è¡¨"></a>3.2 å¾ªç¯é“¾è¡¨</h3><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003214214.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003214214.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201003214213008"></p><ul><li>ä¸ä»…å…·æœ‰å•é“¾è¡¨çš„ç‰¹ç‚¹ï¼Œä¸”åŠ ä¸Šå®ƒçš„å°¾ç»“ç‚¹æŒ‡å‘çš„ä¸æ˜¯ NULLï¼Œè€Œæ˜¯æŒ‡å‘äº†å¤´ç»“ç‚¹</li><li>ç›¸æ¯”å•é“¾è¡¨çš„ä¼˜ç‚¹ï¼šå¯ä»¥é€šè¿‡å°¾ç»“ç‚¹æ‰¾åˆ°å¤´ç»“ç‚¹</li></ul><h3 id="3-3-åŒå‘é“¾è¡¨"><a href="#3-3-åŒå‘é“¾è¡¨" class="headerlink" title="3.3 åŒå‘é“¾è¡¨"></a>3.3 åŒå‘é“¾è¡¨</h3><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003214232.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003214232.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201003214231020"></p><ul><li>æ¯ä¸€ä¸ªç»“ç‚¹é™¤äº†éœ€è¦é¢å¤–çš„ç©ºé—´å­˜å‚¨ä¸‹ä¸€ä¸ªç»“ç‚¹çš„åœ°å€ï¼Œè¿˜éœ€è¦é¢å¤–çš„ç©ºé—´æŒ‡å‘å‰ä¸€ä¸ªç»“ç‚¹çš„åœ°å€</li><li>ç›¸æ¯”å•é“¾è¡¨çš„ä¼˜ç‚¹ï¼šå¯ä»¥é€šè¿‡ä»»ä¸€ç»“ç‚¹å¯ä»¥æ‰¾åˆ°ä¸Šä¸€ä¸ªç»“ç‚¹å’Œä¸‹ä¸€ä¸ªç»“ç‚¹</li></ul><h3 id="3-4-åŒå‘å¾ªç¯é“¾è¡¨"><a href="#3-4-åŒå‘å¾ªç¯é“¾è¡¨" class="headerlink" title="3.4 åŒå‘å¾ªç¯é“¾è¡¨"></a>3.4 åŒå‘å¾ªç¯é“¾è¡¨</h3><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003214248.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003214248.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201003214247489"></p><ul><li>ä¸ä»…å…·æœ‰åŒå‘é“¾è¡¨çš„ç‰¹ç‚¹ï¼Œä¸”åŠ ä¸Šå¤´ç»“ç‚¹çš„ pre æŒ‡é’ˆæŒ‡å‘å°¾ç»“ç‚¹ï¼Œå°¾ç»“ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘å¤´ç»“ç‚¹</li><li>ç›¸æ¯”åŒå‘é“¾è¡¨çš„ä¼˜ç‚¹ï¼šå¯ä»¥é€šè¿‡å¤´ç»“ç‚¹æ‰¾åˆ°å°¾ç»“ç‚¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å°¾ç»“ç‚¹æ‰¾åˆ°å¤´ç»“ç‚¹</li></ul><h2 id="å››ã€é“¾è¡¨çš„åŸºæ“å’Œæ³¨æ„äº‹é¡¹"><a href="#å››ã€é“¾è¡¨çš„åŸºæ“å’Œæ³¨æ„äº‹é¡¹" class="headerlink" title="å››ã€é“¾è¡¨çš„åŸºæ“å’Œæ³¨æ„äº‹é¡¹"></a>å››ã€é“¾è¡¨çš„åŸºæ“å’Œæ³¨æ„äº‹é¡¹</h2><p>è¿™é‡Œå¯¹äºé“¾è¡¨çš„æ“ä½œåªåœ¨å•é“¾è¡¨ä¸­è¿›è¡Œï¼Œå…¶ä½™çš„é“¾è¡¨åŒç†ï¼š</p><p><code>å¢</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003221952.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003221952.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201003221950242"></p><p>å‰æï¼šåœ¨ a ç»“ç‚¹åé¢å¢åŠ ä¸€ä¸ª x ç»“ç‚¹ï¼Œp æŒ‡å‘ a ç»“ç‚¹</p><ul><li>ç¬¬ä¸€æ­¥ï¼šx â€“&gt; next = p â€“&gt; next</li><li>ç¬¬äºŒæ­¥ï¼šp â€“&gt; next = x</li></ul><blockquote><p>æ³¨ï¼š</p><p>æ­¤æ—¶å°±è¦æ³¨æ„ â€œé“¾ä¸æ–­â€ ç†è®ºï¼šåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å°±æ˜¯ï¼Œç¬¬ä¸€æ­¥å’Œç¬¬äºŒæ­¥çš„é¡ºåºä¸èƒ½é¢ å€’ï¼Œä¸ç„¶å°±ä¼šå‡ºç°ä¸‹é¢è¿™ç§æƒ…å†µï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼šp â€“&gt; next = x</li><li>ç¬¬äºŒæ­¥ï¼šx â€“&gt; next = p â€“&gt; next</li></ul><p>å¦‚æœ p â€“&gt; next æŒ‡å‘äº† xï¼Œé‚£ä¹ˆåœ¨ç¬¬äºŒæ­¥ä¸­ï¼Œx â€“&gt; next æŒ‡å‘äº†è‡ªå·±</p></blockquote><p><code>åˆ </code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003223435.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201003223435.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201003223434117"></p><p>åˆ é™¤æ“ä½œçš„è¯ï¼Œå°±åªéœ€è¦ï¼šp â€“&gt; next = p â€“&gt; next â€“&gt; next å³å¯</p><blockquote><p>æ³¨ï¼šåˆ é™¤ç»“ç‚¹è¦è®°å¾—é‡Šæ”¾å†…å­˜ï¼Œé™¤äº†ä¸€äº›è‡ªå¸¦åƒåœ¾å›æ”¶çš„è¯­è¨€å¤–ï¼Œä¾‹å¦‚ Javaã€pythonã€Goç­‰</p></blockquote><p><code>å“¨å…µæ¨¡å¼</code></p><p>æ—¢ç„¶åœ¨é“¾è¡¨ä¸­å‡ºç°äº†è¿™ä¸ªæ¨¡å¼ï¼Œé‚£å¿…ç„¶æ˜¯æœ‰è¿ç”¨çš„åœºæ™¯çš„ï¼Œçœ‹ä¸ªä¾‹å­ï¼š</p><p>åœ¨ä¸Šé¢å•é“¾è¡¨ä¸­å¢åŠ ä¸€ä¸ªç»“ç‚¹æ—¶</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201004085305.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201004085305.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201004085304248"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x --&gt; next = p --&gt; next</span><br><span class="line">p --&gt; next = x</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç°ä¸‹é¢å‡ ç§æƒ…å†µï¼š</p><ul><li>ç©ºé“¾è¡¨ï¼Œæ’å…¥ç¬¬ä¸€ä¸ªç»“ç‚¹</li><li>åˆ é™¤æœ€åä¸€ä¸ªç»“ç‚¹</li><li>åˆæˆ–æ˜¯ p æŒ‡é’ˆæŒ‡å‘çš„æ˜¯ä¸¤ä¸ªç»“ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹ (åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­æ˜¯ a)ï¼Œä½†æ˜¯å¦‚æœå‡ºç°è¦æ’å…¥çš„æ˜¯å¤´ç»“ç‚¹å‰é¢ (ä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰å‰é¢é‚£ä¸ªç»“ç‚¹äº†) å‘¢ï¼Ÿ</li></ul><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201004090747.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201004090747.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201004090746697"></p><p>æ­¤æ—¶å°±å¯ä»¥å‘ç°ï¼Œp æŒ‡é’ˆæ— å¤„å¯æŒ‡ï¼Œè¿™æ—¶å€™å°±å¯ä»¥å¼•å…¥â€å“¨å…µâ€äº†ã€‚(è™½ç„¶åœ¨åŒå‘é“¾è¡¨ä¸­å¯ä»¥è½»æ˜“è§£å†³è¿™ä¸ªé—®é¢˜)</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201004113804.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201004113804.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201004100823076"></p><p>ä¹Ÿå°±æ˜¯è¯´ä¸ç®¡åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œéƒ½æœ‰ä¸€ä¸ªå“¨å…µçš„å­˜åœ¨ï¼Œå…¶ä¸»è¦ç›®çš„å°±æ˜¯ç®€åŒ–ä»£ç ï¼Œä¸éœ€è¦è€ƒè™‘å¸¦å¾ˆå¤šæƒ…å†µï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><p>é¦–å…ˆéœ€è¦çš„å‰æå°±æ˜¯ï¼šhead æŒ‡é’ˆæ˜¯æ°¸è¿œæŒ‡å‘å“¨å…µçš„</p><ul><li>ç©ºé“¾è¡¨ä¸­æ’å…¥ç¬¬ä¸€ä¸ªç»“ç‚¹ï¼Œå°±å¯ä»¥ï¼š</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (head -&gt; next == null) &#123;</span><br><span class="line">  p = head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªéœ€è¦åˆ¤æ–­å“¨å…µæŒ‡é’ˆçš„ next æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºçš„çš„è¯ï¼Œåªéœ€è¦å°† p = headï¼Œå°±å¯ä»¥è¿›è¡Œå’Œä¸Šé¢ä¸€æ ·çš„æ’å…¥ä»£ç äº†</p><h2 id="å››ã€Javaä¸­çš„é“¾è¡¨"><a href="#å››ã€Javaä¸­çš„é“¾è¡¨" class="headerlink" title="å››ã€Javaä¸­çš„é“¾è¡¨"></a>å››ã€Javaä¸­çš„é“¾è¡¨</h2><p>â€‹        é¦–å…ˆæ¥å›å¿†ä¸€ä¸‹åœ¨ Java ä¸­å¯¹æ•°ç»„çš„æ“ä½œï¼Œç›´æ¥åˆ†é…ä¸€å—è¿ç»­çš„å†…å­˜ç»™æ•°ç»„ï¼Œè¿™ç§æƒ…å†µçš„ä¸å¥½ä¹‹å¤„å°±æ˜¯éœ€è¦è¿ç»­ä¸”å†…å­˜è¶³å¤Ÿçš„ç©ºé—´ï¼›éšååˆæå‡ºäº† Java ä¸­åŠ¨æ€æ•°ç»„ ArrayList ï¼Œè¿™ä¸ªç±»çš„ç¡®å¯ä»¥è¿›è¡ŒåŠ¨æ€çš„è‡ªåŠ¨æ‰©å®¹ï¼Œä½†æ˜¯å®ƒä¸èƒ½è¿›è¡Œè‡ªåŠ¨ç¼©å®¹ (æ³¨ï¼šArrayList æ˜¯æ”¯æŒæ‰‹åŠ¨æ‰©å®¹ã€ç¼©å®¹)ï¼Œè€Œä¸”å®ƒçš„æ‰©å®¹æ˜¯å°†åŸæ¥æ‰€æœ‰çš„æ•°æ®å¤åˆ¶ä¸€ä»½åˆ°å·²ç»è¿›è¡Œæ‰©å®¹åˆ°åŸæ¥ 1.5 å€çš„æ–°æ•°ç»„ä¸­ï¼Œå½“æ•°æ®é‡è¿‡å¤§æ—¶ï¼Œè¿™ç§æ“ä½œå¯èƒ½å°±éœ€è¦å¤§é‡æ—¶é—´æ¥è¿›è¡Œäº†</p><p>â€‹        è€Œåœ¨è¿™ä¸€å°èŠ‚ä¸­ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ï¼Œåœ¨ Java ä¸­é“¾è¡¨ç±»ï¼š<code>LinkedList</code>ï¼Œå®ƒçš„åº•å±‚æ˜¯åŸºäºåŒå‘é“¾è¡¨çš„ï¼Œæ—¥å¸¸å¼€å‘å¾ˆå°‘ä½¿ç”¨</p><p>é¦–å…ˆçœ‹ä¸€ä¸‹ï¼Œç»§æ‰¿å…³ç³»ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201004123939.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201004123939.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201004123937678"></p><p>å¯ä»¥å’Œ<a href="http://wangba.me/2020/10/02/Array/">ä¸Šä¸€èŠ‚</a> ArrayList ç±»çš„ç»§æ‰¿å›¾è¿›è¡Œå¯¹æ¯”ï¼Œå¯ä»¥å‘ç°ï¼š</p><ul><li>å°‘äº†ï¼šLinkedList å°‘å®ç°äº† RandomAccess æ¥å£ï¼Œå…·ä½“çœ‹å‚è€ƒ<a href="https://juejin.im/post/6844903519066193927">RandomAccess è¿™ä¸ªç©ºæ¶å­æœ‰ä½•ç”¨ï¼Ÿ</a></li><li>æ”¹äº†ï¼šArrayList æ˜¯ç»§æ‰¿äº† AbstractListï¼Œè€Œ LinkedList ç»§æ‰¿äº† AbstractSequentialList (å®ƒæ˜¯ AbstractList çš„å­ç±»)</li><li>å¤šäº†ï¼šLinkedList è¿˜å®ç°äº† Deque æ¥å£  ====&gt;  å› ä¸ºå®ç° Deque å³å¯ä»¥ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ ˆä½¿ç”¨ã€‚å½“ç„¶ï¼Œä½œä¸ºåŒç«¯é˜Ÿåˆ—ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</li></ul><p>ç”±äºæºç è¿‡å¤šï¼Œæ­¤å†…å®¹å°†æ”¾åœ¨ JDK æºç åˆ†æç³»åˆ—ä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é‡å­¦ç®—æ³•ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Array</title>
      <link href="2020/10/02/Array/"/>
      <url>2020/10/02/Array/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>æ€ç»´å¯¼å›¾ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002093205.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002093205.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002093203544">        </p><h2 id="äºŒã€ç‰¹æ€§"><a href="#äºŒã€ç‰¹æ€§" class="headerlink" title="äºŒã€ç‰¹æ€§"></a>äºŒã€ç‰¹æ€§</h2><p>æ•°ç»„åº”è¯¥æ˜¯æ‰€æœ‰ç¨‹åºå‘˜ä¸­æœ€ç†Ÿæ‚‰çš„æ•°æ®ç»“æ„äº†ï¼Œå¦‚æœä½ ç®€å•çš„å›å¿†ä¸€ä¸‹æ•°ç»„çš„å…·ä½“å«ä¹‰ï¼Œä½ å¯ä»¥å¾—åˆ°å·²ç»å‡ ä¸ªé‡è¦çš„ç»“è®ºï¼š</p><ul><li>ğŸ· çº¿æ€§ç»“æ„</li><li>ğŸ¢ è¿ç»­å†…å­˜</li><li>ğŸ­ å­˜å‚¨ç›¸åŒç±»å‹</li></ul><h3 id="2-1-çº¿æ€§ç»“æ„"><a href="#2-1-çº¿æ€§ç»“æ„" class="headerlink" title="2.1 çº¿æ€§ç»“æ„"></a>2.1 çº¿æ€§ç»“æ„</h3><p>é¡¾åæ€ä¹‰ï¼Œçº¿æ€§ç»“æ„å°±æ˜¯è¿™ä¸ªç»“æ„åƒçº¿æ€§ä¸€æ ·ï¼Œè€Œéæ˜¯å…¶å®ƒç»“æ„ï¼Œè¿™æ ·è¯´çš„ç¡®æœ‰ç‚¹æŠ½è±¡ï¼Œå¯ä»¥ä»ä¸‹é¢å‡ ä¸ªä¾‹å­æ¥çœ‹ä¸€ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002101432.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002101432.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002101430898"></p><blockquote><p>æ³¨ï¼š</p><ul><li>è¿™é‡Œçš„ <strong>Array</strong> æ˜¯ä½¿ç”¨ <strong>Java</strong> ä¸­çš„å†…å­˜æ¨¡å‹ï¼Œå³ <strong>char</strong> ä¸º 2 ä¸ªå­—èŠ‚</li><li>é“¾è¡¨æ²¡æœ‰ä½¿ç”¨å“¨å…µæ¨¡å¼ (åé¢ä¼šæåˆ°)</li></ul></blockquote><h3 id="2-2-è¿ç»­å†…å­˜å’Œç›¸åŒæ•°æ®ç±»å‹"><a href="#2-2-è¿ç»­å†…å­˜å’Œç›¸åŒæ•°æ®ç±»å‹" class="headerlink" title="2.2 è¿ç»­å†…å­˜å’Œç›¸åŒæ•°æ®ç±»å‹"></a>2.2 è¿ç»­å†…å­˜å’Œç›¸åŒæ•°æ®ç±»å‹</h3><p>æ­£å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„æ•°ç»„ä¸€æ ·ï¼Œåœ¨è¿™ä¸ªæ•°ç»„ä¸­ï¼Œå®ƒä»¬çš„åœ°å€æ˜¯è¿ç»­çš„ï¼Œä¸”æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ char ç±»å‹ï¼Œæ­£æ˜¯ç”±äºè¿™ä¸¤ä¸ªç‰¹æ€§ï¼Œè®©æ•°ç»„å®ç°äº†è¿™ä¸€ç”Ÿä¸­æœ€é‡è¦çš„æ“ä½œï¼šå¿«é€ŸæŸ¥è¯¢ï¼Œå®ƒå¯ä»¥è¾¾åˆ° <strong>O(1)</strong> çš„é€Ÿåº¦ï¼Œå½“ç„¶è¦å¯¹è¿™é‡Œè¿›è¡Œé™åˆ¶æ¡ä»¶ï¼Œå³å‡†ç¡®çš„è¡¨è¾¾åº”è¯¥æ˜¯æŒ‰ç…§<code>ä¸‹æ ‡</code>è¿›è¡ŒæŸ¥è¯¢ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦å¯ä»¥è¾¾åˆ° <strong>O(1)</strong> ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ç»å¸¸è¯´çš„æ ¹æ®æŸä¸ªå€¼æ¥ç¡®å®šå®ƒçš„ä½ç½®ç­‰ï¼Œè¿™æ ·çš„æŸ¥è¯¢æ–¹å¼ (å·²ç»æ’å¥½åº) æœ€å¿«ä¹Ÿæ˜¯ <strong>O(logn)</strong> </p><p>å…ˆæ¥çœ‹ä¸€ä¸‹æ˜¯å¦‚ä½•å®ç°æ ¹æ®ä¸‹æ ‡æ¥è¿›è¡Œæ—¶é—´å¤æ‚åº¦ä¸º <strong>O(1)</strong> çš„æ“ä½œï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002112308.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002112308.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002112307187"></p><p>æˆ‘ä»¬å¾ˆå®¹æ˜“å°±å‘ç°è¿™æ ·çš„è§„å¾‹ï¼š</p><p>å‰æï¼šchar[] charList = new char[6]</p><p>ç»“è®ºï¼š<code>address = baseAddress + i * charSize</code></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ä»¥ä¸‹æ¡ä»¶å°±è¡Œï¼š</p><ul><li>è¯¥æ•°ç»„çš„èµ·å§‹åœ°å€ baseAddressï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„ 1000</li><li>è¯¥æ•°ç»„æ˜¯ä»€ä¹ˆç±»å‹ï¼Œè¿™é‡Œæ˜¯ Java çš„ char ç±»å‹ï¼Œå­—èŠ‚æ•°ä¸º 2</li></ul><p>å°±è¿™æ ·ï¼Œå¯ä»¥é€šè¿‡ä¸Šé¢æ¡ä»¶æ±‚å‡ºè¿™é‡Œä»»æ„ä¸€ä¸ªå…ƒç´ çš„åœ°å€ã€‚</p><h4 id="å‡çŸ¥è¯†ï¼š"><a href="#å‡çŸ¥è¯†ï¼š" class="headerlink" title="å‡çŸ¥è¯†ï¼š"></a>å‡çŸ¥è¯†ï¼š</h4><p>å¦‚æœï¼Œèµ·å§‹åœ°å€ä» 1 å¼€å§‹çš„è¯ï¼Œæ¥è®¡ç®—ä¸€ä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ</p><p>è®¡ç®—å…¬å¼æ˜¯ä¸æ˜¯è¦å˜ä¸ºï¼š<code>address = baseAddress + (i - 1) * charSize</code> </p><p>ä½ æƒ³ï¼Œä½ ç»†æƒ³ï¼Œæ˜¯ä¸æ˜¯æ¯æ¬¡éƒ½è¦å¤šè¿›è¡Œä¸€æ¬¡<strong>å‡æ³•</strong>æ“ä½œï¼Œè¿™æ · <code>åŠ æ³•å™¨</code> (åœ¨è®¡ç»„ä¸­æ˜¯æ²¡æœ‰å‡æ³•å™¨å­˜åœ¨çš„ï¼Œé€šè¿‡è½¬æ¢ä¸ºåŠ æ³•æ¥è®¡ç®—)æ˜¯ä¸æ˜¯å°±è¦å¤šè¿›è¡Œä¸€æ¬¡è®¡ç®—</p><p>è¿™ä¼šä¸ä¼šå°±æ˜¯å½“å¹´å®šä¹‰æ•°ç»„ä» 0 å¼€å§‹çš„é‚£ä½ç¨‹åºå‘˜çš„ idea å‘¢ï¼Ÿ(<del>å¼ºè€…å¦‚æ–¯</del>) å½“ç„¶ä¸æ˜¯ï¼Œè¿™ä»…ä»…æ˜¯ä¸€ç§è§„å®šè€Œå·²ï¼Œä¸Šé¢çš„ä¸€ç³»åˆ—çŒœæµ‹ï¼Œä»…ä»…æ˜¯ä¸ºäº†çŒœè€ŒçŒœ</p><h3 id="2-3-æ’å…¥å’Œåˆ é™¤"><a href="#2-3-æ’å…¥å’Œåˆ é™¤" class="headerlink" title="2.3 æ’å…¥å’Œåˆ é™¤"></a>2.3 æ’å…¥å’Œåˆ é™¤</h3><p><strong>One coin has two sides</strong>ï¼Œæœ‰åˆ©è‡ªç„¶æœ‰å¼Šã€‚åœ¨ä¸Šé¢å·²ç»è¯´è¿‡äº†æ•°ç»„çš„æŸ¥è¯¢ï¼Œä¹Ÿæ˜¯æ•°ç»„çš„æœ€å¤§ä¼˜ç‚¹ï¼›å½“ç„¶æ•°ç»„åœ¨æ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›ä¼˜åŒ–çš„å° tipsã€‚</p><p><code>æ’å…¥</code></p><p>ä¸ºä»€ä¹ˆè¯´æ•°ç»„ä¸­æ’å…¥ï¼Œä¼šæ˜¯æ—¶é—´å¤æ‚åº¦å˜é«˜å‘¢ï¼Ÿä¸»è¦æ˜¯æ•°ç»„æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œå¦‚æœåªæ˜¯åœ¨æœ€åä¸€ä¸ªå…ƒç´ æ’å…¥ä¸€ä¸ªæ–°çš„å…ƒç´ ï¼Œé‚£ä¹ˆæ²¡ä»€ä¹ˆå¤§ä¸äº†ï¼›ä½†æ˜¯ä½ è¦æ˜¯åœ¨ç¬¬ä¸€ä¸ªå…ƒç´ åé¢æ’å…¥ä¸€ä¸ªæ–°çš„å…ƒç´ ï¼Œé‚£å°±è¦æŠŠåŸæœ¬çš„ç¬¬äºŒä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ å…¨éƒ¨å‘åç§»åŠ¨ä¸€ä¸ª typeSizeï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002153520.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002153520.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002153518082"></p><p>ç”±ä¸Šé¢çš„å›¾ï¼Œå¯ä»¥è½»æ˜“çœ‹å‡ºæ’å…¥æ–°çš„å…ƒç´ åœ¨æœ€åï¼šå‰é¢å…ƒç´ çš„ä½ç½®éƒ½æœªå˜ï¼›æ’å…¥åœ¨ç¬¬äºŒä¸ªä½ç½®ï¼šç¬¬äºŒä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®éƒ½ <strong>+ 1</strong> äº†</p><p>å¹³å‡çš„æ—¶é—´å¤æ‚åº¦å°±ä¸ºï¼š<strong>O(n)</strong></p><p>å½“ç„¶è¿™æ ·åšæ˜¯æœ‰å‰æçš„ï¼šå°±æ˜¯æ˜¯è¦æœ‰åºçš„ã€‚å¦‚æœå¯¹æ’åºæ²¡æœ‰è¦æ±‚çš„ï¼Œå¯ä»¥å¦‚ä¸‹æ“ä½œï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002155752.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002155752.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002155750878"></p><p>æ­¤æ—¶åªéœ€è¦æŠŠåŸæœ¬åœ¨ 1 ä½ç½®çš„å…ƒç´ <strong>å¤åˆ¶</strong>åˆ°æ–°æ‰©å±•çš„ä½ç½®ï¼ŒæŠŠ 1 ä¸­çš„å…ƒç´ æ¢æˆæ–°çš„å…ƒç´ ï¼Œåœ¨ä¸Šè¿°çš„ä¾‹å­ä¸­å¯¹åº”çš„å°±æ˜¯ï¼šå°† n å¤åˆ¶åˆ°ä½ç½® 5 ä¸Šï¼Œç„¶åå°†ä½ç½® 1 çš„å…ƒç´ è¦†ç›–ä¸ºæ–°å…ƒç´  a</p><p><code>åˆ é™¤</code></p><p>åˆ é™¤æ•°ç»„ä¸­çš„å…ƒç´ ä¸æ’å…¥æ“ä½œç±»ä¼¼ï¼šä¸»è¦æ˜¯ä¸ºäº†ä¿è¯å†…å­˜çš„è¿ç»­æ€§ï¼Œå¦‚æœåˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œé‚£æ²¡ä»€ä¹ˆé—®é¢˜ï¼›å¦‚æœæ˜¯åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªå…ƒç´ åé¢çš„æ‰€æœ‰å…ƒç´ éƒ½è¦å‘å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚</p><p>åˆ™å¹³å‡çš„æ—¶é—´å¤æ‚åº¦å°±ä¸ºï¼š<strong>O(n)</strong></p><p>ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹çš„åˆ é™¤ï¼šå¦‚æœå¯¹æ²¡æœ‰ç«‹é©¬å¯¹åˆ é™¤å…ƒç´ è¿›è¡Œåƒåœ¾å›æ”¶çš„æ“ä½œï¼Œæœ‰ä»€ä¹ˆæ¯”è¾ƒå¥½çš„æ–¹å¼ï¼Ÿ</p><p>åœ¨ JVM è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ç®—æ³•ï¼š</p><ul><li>æ ‡è®° - æ¸…é™¤ç®—æ³•</li><li>å¤åˆ¶ç®—æ³•</li><li>æ ‡è®° - æ•´ç†ç®—æ³•</li><li>åˆ†ä»£æ”¶é›†ç®—æ³•</li></ul><p>åœ¨è¿™é‡Œä¸»è¦ä»‹ç»ä¸€ä¸‹ <strong>æ ‡è®° - æ¸…é™¤ç®—æ³•</strong>ï¼Œç®€å•æ¥è¯´ï¼š</p><p>åœ¨ JVM è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œä¸ç«‹é©¬è¿›è¡Œå›æ”¶ï¼Œåªæ˜¯å¯¹è¦è¿›è¡Œå›æ”¶çš„å…ƒç´ è¿›è¡Œæ ‡è®°ï¼Œç­‰åˆ°ç§¯ç´¯åˆ°ä¸€å®šé‡å†è¿›è¡Œä¸€æ¬¡æ‰¹å¤„ç†ï¼Œä¾‹å­å¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002163730.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002163730.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002163729145"></p><p>å¯ä»¥çœ‹è§ï¼Œåªéœ€è¦å¯¹è¦åˆ é™¤çš„å…ƒç´ è¿›è¡Œæ ‡è®°ï¼Œéšååˆ°æœ€åä¸€æ¬¡æ€§è¿›è¡Œå›æ”¶</p><p>ä½†æ˜¯è¿™æ ·ä¹Ÿä¼šå¸¦æ¥å¾ˆå¤šé—®é¢˜ï¼Œå¦‚æ•ˆç‡é—®é¢˜å’Œç©ºé—´é—®é¢˜ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002163919.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002163919.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002163917519"></p><p>å¦‚æœæ˜¯åˆ é™¤çš„å…ƒç´ æ˜¯ä¸€æ®µä¸€æ®µçš„ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿå¤§é‡çš„ç©ºé—´ç¢ç‰‡ï¼Œæ‰€ä»¥ JVM åé¢è¿˜æœ‰å¾ˆå¤šå…¶ä½™çš„å›æ”¶ç®—æ³•</p><h3 id="2-4-å…³äºæ•°ç»„è¶Šç•Œçš„é—®é¢˜"><a href="#2-4-å…³äºæ•°ç»„è¶Šç•Œçš„é—®é¢˜" class="headerlink" title="2.4 å…³äºæ•°ç»„è¶Šç•Œçš„é—®é¢˜"></a>2.4 å…³äºæ•°ç»„è¶Šç•Œçš„é—®é¢˜</h3><p>æˆ‘ä»¬å°è¯•åœ¨ Ubuntu 18.04 64bit ä¸­è¿è¡Œä¸‹é¢è¿™æ®µ C ä»£ç ï¼š</p><p><code>OverFlow.c</code> </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> arr[<span class="number">3</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(; i&lt;=<span class="number">3</span>; i++)&#123;</span><br><span class="line">        arr[i] = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;hello world\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŒ‰ç…§æ­£å¸¸æƒ³æ³•èµ°ä¸‹å»ï¼šä¼šæ‰“å°ä¸‰è¡Œ hello worldï¼Œå°±ä¼šè¿è¡Œå®Œæ¯•</p><p>è®©æˆ‘ä»¬è¿›è¡Œæµ‹è¯•å§ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002172344.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002172344.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002172343083"></p><p>ä½ å°±ä¼šçœ‹åˆ°æ§åˆ¶å°å¼€å§‹æ— é™æ‰“å° hello world äº†ï¼š</p><p>![image-20201002172557103](/Users/wangdechao/Library/Application Support/typora-user-images/image-20201002172557103.png)</p><p>åªè¦åœ¨å†…å­˜è¶³å¤Ÿçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç¨‹åºå°±ä¼šä¸€ç›´è¿è¡Œä¸‹å»ï¼Œè¿™å°±æ˜¯å…¸å‹çš„ StackOverFlow é—®é¢˜</p><p>ç®€å•çš„å°±å¯ä»¥ç†è§£æˆå¦‚ä¸‹ç»“æ„ï¼š</p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002184829.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002184829.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002184827040" style="zoom:50%;" /><p>è¿™ä¸ªæ ˆçš„ç»“æ„å…·ä½“å¯ä»¥å‚è€ƒã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹ï¼Œè¿™é‡Œå‡ºç°ä¸Šè¿°æƒ…å†µçš„ä¸»è¦åŸå› ï¼š</p><ul><li>C è¯­è¨€ä¸­æ˜¯æ‰€æœ‰çš„å†…å­˜éƒ½æ˜¯å¯ä»¥è®¿é—® (é™¤äº†å—é™å†…å­˜ä»¥å¤–)</li><li>åœ¨ä¸Šè¿°ä»£ç ä¸­ i &lt;=3ï¼Œè¯´æ˜ a[3] = 0 åœ¨å†…å­˜çš„æŸä¸ªåœ°å€ä¸Š</li><li>è€Œè¿™ä¸ªåœ°å€æœ¬èº«æ˜¯ <code>åŸæ¥çš„ i çš„åœ°å€</code> ï¼Œæ‰€ä»¥å°±ç›¸å½“äº i = 3 åˆè¢«èµ‹å€¼ä¸º i = 0ï¼Œç„¶åç»§ç»­ä¸æ–­å¾ªç¯</li></ul><p>å¦‚æœæƒ³çŸ¥é“è¿™ä¸ªæ ˆæº¢å‡ºæ˜¯å¦‚ä½•å…·ä½“å®ç°çš„è¯ï¼Œå¯ä»¥æ˜¯ç”¨ objdump å‘½ä»¤è¿›è¡Œåç¼–è¯‘ï¼Œå†è¿›è¡Œåˆ†æï¼Œå…¶ä¸­ä¸»è¦çš„æ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼šå…¶ä¸­å…³é”®è¡Œåº”è¯¥ä¸º 65fã€67eã€682ã€661</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">000000000000063a &lt;main&gt;:</span><br><span class="line"> 63a:    55                       push   %rbp</span><br><span class="line"> 63b:    48 89 e5                 mov    %rsp,%rbp</span><br><span class="line"> 63e:    48 83 ec 20              sub    $0x20,%rsp</span><br><span class="line"> 642:    89 7d ec                 mov    %edi,-0x14(%rbp)</span><br><span class="line"> 645:    48 89 75 e0              mov    %rsi,-0x20(%rbp)</span><br><span class="line"> 649:    c7 45 fc 00 00 00 00     movl   $0x0,-0x4(%rbp)</span><br><span class="line"> 650:    48 c7 45 f0 00 00 00     movq   $0x0,-0x10(%rbp)</span><br><span class="line"> 657:    00 </span><br><span class="line"> 658:    c7 45 f8 00 00 00 00     movl   $0x0,-0x8(%rbp)</span><br><span class="line"> 65f:    eb 1d                    jmp    67e &lt;main+0x44&gt;</span><br><span class="line"> 661:    8b 45 fc                 mov    -0x4(%rbp),%eax</span><br><span class="line"> 664:    48 98                    cltq   </span><br><span class="line"> 666:    c7 44 85 f0 00 00 00     movl   $0x0,-0x10(%rbp,%rax,4)</span><br><span class="line"> 66d:    00 </span><br><span class="line"> 66e:    48 8d 3d 9f 00 00 00     lea    0x9f(%rip),%rdi        # 714 &lt;_IO_stdin_used+0x4&gt;</span><br><span class="line"> 675:    e8 96 fe ff ff           callq  510 &lt;puts@plt&gt;</span><br><span class="line"> 67a:    83 45 fc 01              addl   $0x1,-0x4(%rbp)</span><br><span class="line"> 67e:    83 7d fc 03              cmpl   $0x3,-0x4(%rbp)</span><br><span class="line"> 682:    7e dd                    jle    661 &lt;main+0x27&gt;</span><br><span class="line"> 684:    b8 00 00 00 00           mov    $0x0,%eax</span><br><span class="line"> 689:    c9                       leaveq </span><br><span class="line"> 68a:    c3                       retq   </span><br><span class="line"> 68b:    0f 1f 44 00 00           nopl   0x0(%rax,%rax,1)</span><br></pre></td></tr></table></figure><p>å…¶å®ï¼Œåœ¨è¿™ä¸ªå·¨å¤§æ¼æ´å‡ºæ¥åï¼Œç°åœ¨çš„å†…å­˜å·²ç»åŠ äº†é‡‘ä¸é›€ä¿æŠ¤ (canary) äº†ï¼Œä¸ºäº†è®©è¿™ä¸ªæ¼æ´å¤ç°ï¼Œåœ¨ä¸Šé¢ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œå·²ç»ä½¿ç”¨ <strong>-fno-stack-protector</strong> å°†ä¿æŠ¤å…³é—­äº†</p><p>è€Œå¦‚æœè¯¥ç¨‹åºåœ¨ Java ä¸­å¤ç°ï¼Œåœ¨ç¼–è¯‘æ—¶å°±ä¼šæŠ›å‡º <strong>ArrayIndexOutOfBoundsException</strong> çš„å¼‚å¸¸äº†</p><h2 id="ä¸‰ã€Java-ä¸­çš„æ•°ç»„"><a href="#ä¸‰ã€Java-ä¸­çš„æ•°ç»„" class="headerlink" title="ä¸‰ã€Java ä¸­çš„æ•°ç»„"></a>ä¸‰ã€Java ä¸­çš„æ•°ç»„</h2><p>åœ¨ Java ä¸­ï¼Œå¯¹äºæ•°ç»„æ²¡æœ‰ä»€ä¹ˆå¥½äº†è§£çš„ï¼Œé¡¶å¤šå°±ä¸€ä¸ªåŸºæœ¬è¯­æ³•ï¼›ä½†æ˜¯åœ¨ Java ä¸­æœ‰ä¸€ä¸ªé›†åˆç±»ï¼Œæ˜¯æ¯ä¸ª Java ç¨‹åºå‘˜åº”è¯¥æ¯å¤©éƒ½ä¼šç”¨åˆ°çš„ï¼Œå®ƒå°±æ˜¯ <code>ArrayList</code> </p><p>å…ˆçœ‹ä¸€ä¸‹å®ƒçš„ç»§æ‰¿å’Œå®ç°å…³ç³»</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002213613.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002213613.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002213610816"></p><ul><li>å®ƒç»§æ‰¿äº† <strong>AbstractList</strong> ï¼Œå®ç°äº† <strong>List</strong>    ====&gt;    å®ƒæ˜¯ä¸€ä¸ªæ•°ç»„é˜Ÿåˆ—ï¼Œæä¾›äº†ç›¸å…³çš„æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€éå†ç­‰åŠŸèƒ½</li><li>å®ƒå®ç°äº†<strong>RandomAccess æ¥å£</strong>    ====&gt;    å®ç°è¿™ä¸ªè¿™ä¸ªæ¥å£çš„ List é›†åˆæ˜¯æ”¯æŒ<strong>å¿«é€Ÿéšæœºè®¿é—®</strong></li><li>å®ƒå®ç° <strong>java.io.Serializable æ¥å£</strong>    ====&gt;    ArrayList <strong>æ”¯æŒåºåˆ—åŒ–</strong>ï¼Œ<strong>èƒ½é€šè¿‡åºåˆ—åŒ–å»ä¼ è¾“</strong></li><li>å¹¶ä¸”è¦æ³¨æ„ï¼Œåœ¨å•çº¿ç¨‹ä¸­ä½¿ç”¨å®ƒï¼Œåœ¨å¤šçº¿ç¨‹ä½¿ç”¨ <strong>Vector(å°‘)</strong> æˆ–è€… <strong>CopyOnWriteArrayList(å¤š)**ï¼Œå°½é‡è¿˜æ˜¯ä½¿ç”¨åè€…è¾ƒå¤šï¼Œå‰è€…ä¸»è¦æ˜¯åŸºäº **synchronized</strong> å…³é”®å­—ï¼Œåè€…æ˜¯åŸºäº <strong>ReentrantLock</strong> æ“ä½œçš„</li></ul><p>å®ƒä¸ Java è‡ªå¸¦çš„æ™®é€šæ•°ç»„æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼šå®ƒæ˜¯<code>åŠ¨æ€</code>çš„</p><p>è¿™é‡Œä¸»è¦åŸºäºæºç åˆ†æä¸€ä¸‹åŠ¨æ€æ‰©å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ensureCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (minCapacity &gt; <span class="keyword">this</span>.elementData.length &amp;&amp; (<span class="keyword">this</span>.elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA || minCapacity &gt; <span class="number">10</span>)) &#123;</span><br><span class="line">        ++<span class="keyword">this</span>.modCount;</span><br><span class="line">        <span class="keyword">this</span>.grow(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Object[] grow(<span class="keyword">int</span> minCapacity) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.elementData = Arrays.copyOf(<span class="keyword">this</span>.elementData, <span class="keyword">this</span>.newCapacity(minCapacity));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Object[] grow() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.grow(<span class="keyword">this</span>.size + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">newCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> oldCapacity = <span class="keyword">this</span>.elementData.length;</span><br><span class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">            <span class="keyword">return</span> Math.max(<span class="number">10</span>, minCapacity);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (minCapacity &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> minCapacity;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> newCapacity - <span class="number">2147483639</span> &lt;= <span class="number">0</span> ? newCapacity : hugeCapacity(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><ul><li>å¯¹äºå˜é•¿æ•°æ®ç»“æ„ï¼Œå½“ç»“æ„ä¸­æ²¡æœ‰ç©ºä½™ç©ºé—´å¯ä¾›ä½¿ç”¨æ—¶ï¼Œå°±éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚åœ¨ ArrayList ä¸­ï¼Œå½“ç©ºé—´ç”¨å®Œï¼Œå…¶ä¼šæŒ‰ç…§åŸæ•°ç»„ç©ºé—´çš„1.5å€è¿›è¡Œæ‰©å®¹ã€‚</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> é‡å­¦ç®—æ³•ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm</title>
      <link href="2020/10/01/Algorithm/"/>
      <url>2020/10/01/Algorithm/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>â€‹            æœ€è¿‘å®ä¹ åå‘ç°è‡ªå·±çš„ç®—æ³•èƒ½åŠ›æ€¥å‰§ä¸‹é™ï¼Œ<del>CRUD åªæ˜¯ä¸‹é™ï¼Œç®—æ³•æ‰æ˜¯ä¸Šé™</del>ï¼Œå†³å®šé‡æ–°å¼€ä¸€ä¸ªç³»åˆ—ï¼Œå°†æ•°æ®ç»“æ„ä¸ç®—æ³•é‡æ–°å­¦ä¸€éã€‚è¿™æ¬¡ä¸»è¦å‚è€ƒçš„è¯¾ç¨‹æ˜¯ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ã€‹å’Œã€Šç®—æ³•é¢è¯•é€šå…³40è®²ã€‹ã€‚è¿™é‡Œå°±ä¸åƒã€Šç®—æ³•å¯¼è®ºã€‹é‚£æ ·æ¯”è¾ƒç†è®ºåŒ–ï¼Œåº”è¯¥ä¼šæ›´åå‘äºã€Šç®—æ³•ã€‹è¿™æœ¬ä¹¦çš„ç±»å‹ã€‚</p><p>å¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™äº›æœ‰è¶£çš„ç‚¹ï¼š</p><ul><li>ğŸ· å°½é‡åˆ©ç”¨å›¾ + æ–‡å­—ï¼Œæ¸…æ™°çš„è¡¨è¾¾æ„æ€</li><li>ğŸ¢ ä¸€å®šè¦ç»“åˆ Leetcode ä¸Šçš„é¢˜ç›®</li><li>ğŸ­ å°½é‡ä»‹ç»ä¸€äº›<del>æ²¡ç”¨</del>æœ‰è¶£çš„å° Tips</li><li>ğŸ¦ ä½¿ç”¨ Java æ¥å®ç°æ‰€æœ‰çš„ç®—æ³•</li></ul><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201123141316.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201123141316.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201123141309869"></p>]]></content>
      
      
      <categories>
          
          <category> é‡å­¦ç®—æ³•ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆSpring Security (ä¸‰)</title>
      <link href="2020/09/30/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%B8%89/"/>
      <url>2020/09/30/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%B8%89/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>â€‹        åœ¨å‰åç«¯ä¸åˆ†ç¦»æ—¶ä»£ï¼Œå¯èƒ½ä½¿ç”¨çš„å°±æ˜¯<a href="http://wangba.me/2020/09/28/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%BA%8C/">ä¸Šä¸€èŠ‚</a>ä¸­è¿™ç§æ–¹æ³•ï¼›åœ¨ç°åœ¨è¿™ç§å‰åç«¯åˆ†ç¦»éåœ°èµ°çš„æƒ…å†µä¸‹ï¼Œå·²ç»ä¸å†æ¨èä½¿ç”¨ä¼ ç»Ÿçš„ session ï¼Œè€Œæ˜¯ä½¿ç”¨ç°åœ¨æ¯”è¾ƒæµè¡Œçš„ JWT è¿™ç§ token çš„æ–¹å¼è§£å†³</p><p>â€‹        å¯¹æ¯”åˆ†æä¸€ä¸‹ï¼š</p><table><thead><tr><th></th><th>æœ‰çŠ¶æ€ç™»å½•</th><th>æ— çŠ¶æ€ç™»å½•</th></tr></thead><tbody><tr><td>å®šä¹‰</td><td>æœåŠ¡ç«¯éœ€è¦è®°å½•æ¯æ¬¡ä¼šè¯çš„å®¢æˆ·ç«¯ä¿¡æ¯ï¼Œä»è€Œè¯†åˆ«å®¢æˆ·ç«¯èº«ä»½ï¼Œæ ¹æ®ç”¨æˆ·èº«ä»½è¿›è¡Œè¯·æ±‚çš„å¤„ç†</td><td>æœåŠ¡ç«¯ä¸ä¿å­˜ä»»ä½•å®¢æˆ·ç«¯è¯·æ±‚è€…ä¿¡æ¯ï¼›å®¢æˆ·ç«¯çš„æ¯æ¬¡è¯·æ±‚å¿…é¡»å…·å¤‡è‡ªæè¿°ä¿¡æ¯ï¼Œé€šè¿‡è¿™äº›ä¿¡æ¯è¯†åˆ«å®¢æˆ·ç«¯èº«ä»½</td></tr><tr><td>ä¼˜ç‚¹</td><td>æ¯”è¾ƒæ–¹ä¾¿ï¼Œä¸éœ€è¦åšå¤šä½™çš„å¤„ç†</td><td>ä½¿ç”¨ token å¾ˆçµæ´»ï¼›æœåŠ¡ç«¯ä¸éœ€è¦å­˜æ•°æ®ï¼›å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥å‘é€ç»™å¤šä¸ªæœåŠ¡å™¨</td></tr><tr><td>ç¼ºç‚¹</td><td>åªèƒ½æ˜¯ç½‘é¡µç«¯ï¼Œåœ¨ IOSã€Androidä¸è¡Œï¼›æœåŠ¡ç«¯ä¿å­˜å¤§é‡æ•°æ®ï¼›é›†ç¾¤åŒ–ä¸å¤ªè¡Œ</td><td>é…ç½®ç¨å¾®å¤æ‚(å…¶å®åœ¨æ¡†æ¶çš„åŠ æˆä¸‹ï¼Œä¸å¤æ‚)</td></tr></tbody></table><p><code>æœ‰çŠ¶æ€ç™»å½•</code></p><ul><li>ğŸŒ°ï¼šåœ¨ Tomcat ä¸­ï¼Œç”¨æˆ·ç™»å½•åï¼Œéœ€è¦æŠŠç”¨æˆ·çš„ä¿¡æ¯ä¿å­˜åœ¨æœåŠ¡å™¨çš„ session ä¸­ï¼Œç„¶åå‘é€ç»™ç”¨æˆ·ä¸€ä¸ª Cookie å€¼ï¼Œè®°å½•å¯¹åº”çš„ session å€¼ï¼Œç­‰ç”¨æˆ·ä¸‹ä¸€æ¬¡å†æ¬¡è®¿é—®è¯¥æœåŠ¡å™¨æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å¸¦ä¸Šè¿™ä¸ª Cookie å€¼ï¼ŒæœåŠ¡ç«¯å†è¯†åˆ«å…¶ä¸­çš„ session å€¼ï¼Œè¿›è¡Œåˆ¤æ–­</li></ul><p><code>æ— çŠ¶æ€ç™»å½•</code></p><ul><li>ğŸŒ°ï¼šå®¢æˆ·ç«¯å‘é€è´¦æˆ·å¯†ç åˆ°æœåŠ¡ç«¯è¿›è¡ŒéªŒè¯ï¼›è®¤è¯åæœåŠ¡ç«¯å‘é€ä¸€ä¸ª token ç»™å®¢æˆ·ç«¯ï¼›ä»¥åå®¢æˆ·ç«¯æ¯æ¬¡å‘é€è¯·æ±‚éƒ½å°† token æºå¸¦ä¸Šè¿›è¡Œè®¤è¯ï¼Œè¿›è¡Œåˆ¤æ–­</li></ul><h2 id="äºŒã€Test"><a href="#äºŒã€Test" class="headerlink" title="äºŒã€Test"></a>äºŒã€Test</h2><p>â€‹        åœ¨å‰åç«¯åˆ†ç¦»çš„åŸºç¡€ä¸Šï¼Œç°åœ¨å‰ç«¯å’Œåç«¯åªæ˜¯é€šè¿‡ JSON è¿›è¡Œäº¤äº’ï¼Œæ‰€ä»¥ç°åœ¨çš„é¡µé¢è·³è½¬å…¨éƒ¨ç”±å‰ç«¯è¿›è¡Œæ§åˆ¶ï¼Œåç«¯åªæ˜¯è¿”å›ä¸åŒçš„ JSON ç½¢äº†</p><p>é‡å†™<code>SecurityConfig</code>ä¸­çš„ configure æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">            <span class="comment">// ç™»å‡ºé¡µé¢ + ç™»å‡ºæˆåŠŸåé¡µé¢</span></span><br><span class="line">            .logout()</span><br><span class="line">            .logoutUrl(<span class="string">&quot;/logout&quot;</span>)</span><br><span class="line">            .logoutSuccessUrl(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">            .logoutSuccessHandler((httpServletRequest, httpServletResponse, authentication) -&gt; &#123;</span><br><span class="line">                httpServletResponse.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                PrintWriter out = httpServletResponse.getWriter();</span><br><span class="line">                out.write(<span class="string">&quot;æ³¨é”€æˆåŠŸ&quot;</span>);</span><br><span class="line">                out.flush();</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;)</span><br><span class="line">            .and()</span><br><span class="line">            <span class="comment">// ç™»å½•é¡µé¢ + ç™»å½•æ¥å£</span></span><br><span class="line">            .formLogin().loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">            .loginProcessingUrl(<span class="string">&quot;/securityLogin&quot;</span>)</span><br><span class="line">            .permitAll()</span><br><span class="line">            <span class="comment">// ç™»å½•å¤±è´¥å¤„ç†å™¨</span></span><br><span class="line">            .failureHandler((httpServletRequest, httpServletResponse, e) -&gt; &#123;</span><br><span class="line">                httpServletResponse.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                PrintWriter out = httpServletResponse.getWriter();</span><br><span class="line">                out.write(e.getMessage());</span><br><span class="line">                out.flush();</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="comment">// ç™»å½•æˆåŠŸå¤„ç†å™¨</span></span><br><span class="line">            .successHandler((httpServletRequest, httpServletResponse, authentication) -&gt; &#123;</span><br><span class="line">                Object principal = authentication.getPrincipal();</span><br><span class="line">                httpServletResponse.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                PrintWriter out = httpServletResponse.getWriter();</span><br><span class="line">                out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(principal));</span><br><span class="line">                out.flush();</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;)</span><br><span class="line">            .and()</span><br><span class="line">            .csrf().disable()</span><br><span class="line">    ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>ç™»å½•æ¥å£</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200929172425.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200929172425.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929172423472"></p><blockquote><p>æ³¨ï¼š</p><ul><li>å¯ä»¥çœ‹åˆ°ä½¿ç”¨å‰åç«¯åˆ†ç¦»ï¼Œå°±ä¸éœ€è¦åç«¯æ¥æ§åˆ¶è·³è½¬é¡µé¢ç­‰ï¼Œåªéœ€è¦å°† JSON å‘ç»™å‰ç«¯å°±è¡Œ</li><li>è¿™é‡Œé¢çš„ password ä¸ºç©ºï¼Œæ˜¯æ¡†æ¶åšçš„ï¼Œå…·ä½“å¯ä»¥çœ‹è¿™é‡Œ</li></ul></blockquote><p><code>ç™»å½•å¤±è´¥</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930092635.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930092635.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200930092629637"></p><blockquote><p>æ³¨ï¼š</p><ul><li>æ— è®ºæ˜¯ç”¨æˆ·åå’Œå¯†ç å…¶ä¸­ä¸€ä¸ªé”™è¯¯ï¼Œå°±ä¼šè¿”å› Bad credentials æç¤ºï¼Œä¸»è¦ä¹Ÿæ˜¯ä¸ºäº†å®‰å…¨ç€æƒ³ï¼Œå…·ä½“æµç¨‹å¯ä»¥çœ‹ä¸‹é¢çš„ 3.1 å°èŠ‚</li></ul></blockquote><p><code>æ³¨é”€ç™»å½•</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930093600.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930093600.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200930093559635"></p><h2 id="ä¸‰ã€Deep-Learning"><a href="#ä¸‰ã€Deep-Learning" class="headerlink" title="ä¸‰ã€Deep Learning"></a>ä¸‰ã€Deep Learning</h2><h3 id="3-1-æ·±å…¥äº†è§£ç™»å½•å¤±è´¥"><a href="#3-1-æ·±å…¥äº†è§£ç™»å½•å¤±è´¥" class="headerlink" title="3.1 æ·±å…¥äº†è§£ç™»å½•å¤±è´¥"></a>3.1 æ·±å…¥äº†è§£ç™»å½•å¤±è´¥</h3><p>â€‹        åœ¨ä¸Šé¢æˆ‘ä»¬æåˆ°äº†æ— è®ºæ˜¯ç”¨æˆ·åå’Œå¯†ç å…¶ä¸­ä¸€ä¸ªé”™è¯¯ï¼Œå°±ä¼šè¿”å› Bad credentialsï¼Œå®åˆ™åœ¨å…¶ä¸­è¿˜æœ‰å¾ˆå¤šç§é”™è¯¯ï¼Œè€Œä¸”ç”¨æˆ·åæ˜¯æœ‰ç”¨æˆ·åé”™è¯¯ï¼Œåªæ˜¯æœ€ç»ˆè¢« Bad credentials è¦†ç›–äº†ï¼Œç¨å¾®åˆ†æä¸€ä¸‹ï¼š</p><p><code>AbstractUserDetailsAuthenticationProvider</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Authentication <span class="title">authenticate</span><span class="params">(Authentication authentication)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">    Assert.isInstanceOf(UsernamePasswordAuthenticationToken.class, authentication, () -&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.messages.getMessage(<span class="string">&quot;AbstractUserDetailsAuthenticationProvider.onlySupports&quot;</span>, <span class="string">&quot;Only UsernamePasswordAuthenticationToken is supported&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    String username = authentication.getPrincipal() == <span class="keyword">null</span> ? <span class="string">&quot;NONE_PROVIDED&quot;</span> : authentication.getName();</span><br><span class="line">    <span class="keyword">boolean</span> cacheWasUsed = <span class="keyword">true</span>;</span><br><span class="line">    UserDetails user = <span class="keyword">this</span>.userCache.getUserFromCache(username);</span><br><span class="line">    <span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line">        cacheWasUsed = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            user = <span class="keyword">this</span>.retrieveUser(username, (UsernamePasswordAuthenticationToken)authentication);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UsernameNotFoundException var6) &#123;</span><br><span class="line">            <span class="keyword">this</span>.logger.debug(<span class="string">&quot;User &#x27;&quot;</span> + username + <span class="string">&quot;&#x27; not found&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.hideUserNotFoundExceptions) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> BadCredentialsException(<span class="keyword">this</span>.messages.getMessage(<span class="string">&quot;AbstractUserDetailsAuthenticationProvider.badCredentials&quot;</span>, <span class="string">&quot;Bad credentials&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">          <span class="comment">// çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œè¿›è¡Œè°ƒè¯•å¯ä»¥çœ‹è§ï¼š</p><ul><li>ä¼šå…ˆåœ¨ç¼“å­˜ä¸­æŸ¥è¯¢ä¸€ä¸‹æ˜¯å¦æœ‰è¿‡</li><li>å†è°ƒç”¨ retrieveUser æ¥è¿›è¡Œåˆ¤æ–­</li><li>ä¸€æ—¦æŠ›å‡º UsernameNotFoundException ï¼Œå°±çœ‹ hideUserNotFoundExceptions çš„å€¼äº†ï¼Œå¦‚æœä¸º trueï¼Œå°±ä¼šæŠ›å‡º Bad credentials</li></ul><p>è¿›è¡Œæ–­ç‚¹è°ƒè¯•ï¼šè¾“é”™ç”¨æˆ·åï¼Œå¹¶æ‰“ä¸Šæ–­ç‚¹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930135354.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930135354.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200930135352906"></p><p>é€šè¿‡ä¸Šå›¾å°±èƒ½çœ‹å‡ºï¼ŒhideUserNotFoundExceptions é»˜è®¤å€¼æ˜¯ true çš„</p><h3 id="3-2-æœªè®¤è¯å¤„ç†"><a href="#3-2-æœªè®¤è¯å¤„ç†" class="headerlink" title="3.2 æœªè®¤è¯å¤„ç†"></a>3.2 æœªè®¤è¯å¤„ç†</h3><p>åœ¨å‰åç«¯åˆ†ç¦»ï¼Œå¦‚æœå‡ºç°æœªè®¤è¯çš„çŠ¶æ€ï¼Œä¸å¯èƒ½æ§åˆ¶å‰ç«¯æ¥è·³è½¬é¡µé¢ç­‰ï¼Œåªèƒ½ç»™å‰ç«¯è¿”å›ç›¸åº”çš„ä¿¡æ¯å³å¯ï¼š</p><p>åœ¨ <code>AuthenticationEntryPoint</code> æ¥å£ä¸­æœ‰ä¸€ä¸ªæ–¹æ³•ï¼š<code>commence</code></p><p>åœ¨ <code>LoginUrlAuthenticationEntryPoint</code> ä¸­å®ç°æ–¹å¼ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">commence</span><span class="params">(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">    String redirectUrl = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.useForward) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.forceHttps &amp;&amp; <span class="string">&quot;http&quot;</span>.equals(request.getScheme())) &#123;</span><br><span class="line">            redirectUrl = <span class="keyword">this</span>.buildHttpsRedirectUrlForRequest(request);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (redirectUrl == <span class="keyword">null</span>) &#123;</span><br><span class="line">            String loginForm = <span class="keyword">this</span>.determineUrlToUseForThisRequest(request, response, authException);</span><br><span class="line">            <span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class="line">                logger.debug(<span class="string">&quot;Server side forward to: &quot;</span> + loginForm);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            RequestDispatcher dispatcher = request.getRequestDispatcher(loginForm);</span><br><span class="line">            dispatcher.forward(request, response);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        redirectUrl = <span class="keyword">this</span>.buildRedirectUrlToLoginPage(request, response, authException);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.redirectStrategy.sendRedirect(request, response, redirectUrl);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ä¸­æœ€ä¸»è¦çš„æ˜¯çœ‹ä¸€ä¸‹ <strong>useForward</strong> çš„é»˜è®¤å€¼ï¼Œå¦‚æœæ˜¯ <strong>true</strong>ï¼Œé‚£ä¹ˆé»˜è®¤å°±æ˜¯èµ°è½¬å‘ï¼›å¦‚æœæ˜¯ <strong>false</strong>ï¼Œé‚£ä¹ˆé»˜è®¤èµ°çš„å°±æ˜¯é‡å®šå‘</p><p>ä½¿å‡ºæ–­ç‚¹è°ƒè¯•å¤§æ³•ï¼š</p><ul><li>åœ¨ <strong>Postman</strong> ä¸­ç›´æ¥ä½¿ç”¨ <strong>GET</strong> æ–¹å¼è¯·æ±‚ï¼šlocalhost:8080/security</li></ul><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930141616.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930141616.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200930141614962"></p><p>æ­¤æ–¹æ³•åœ¨ç¬¬ä¸€èŠ‚ä¸­å·²ç»å†™è¿‡äº†ï¼Œå°±æ˜¯è¾“å‡ºä¸€ä¸ª <strong>Spring Security</strong></p><ul><li>åœ¨æ–¹æ³•å†…æ‰“ä¸Šæ–­ç‚¹</li></ul><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930141514.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930141514.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200930141512452"></p><p>ä»ä¸Šé¢çš„å›¾å°±å¯ä»¥çœ‹è§ï¼Œ<strong>useForward</strong> çš„é»˜è®¤å€¼æ˜¯ <strong>false</strong>ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç¡®å®šæ˜¯èµ°çš„é‡å®šå‘</p><p>åªéœ€è¦é‡å†™è¯¥æ–¹æ³•è¦†ç›–å®ƒå°±è¡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.exceptionHandling()</span><br><span class="line">.authenticationEntryPoint((req, resp, authException) -&gt; &#123;</span><br><span class="line">    resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">    PrintWriter out = resp.getWriter();</span><br><span class="line">    out.write(<span class="string">&quot;å°šæœªç™»å½•ï¼Œè¯·å…ˆç™»å½•&quot;</span>);</span><br><span class="line">    out.flush();</span><br><span class="line">    out.close();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930164934.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930164934.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200930143626120"></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Spring Security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆSpring Security (äºŒ)</title>
      <link href="2020/09/28/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%BA%8C/"/>
      <url>2020/09/28/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€Test"><a href="#ä¸€ã€Test" class="headerlink" title="ä¸€ã€Test"></a>ä¸€ã€Test</h2><p>ç¯å¢ƒä¸<a href="http://wangba.me/2020/09/27/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%B8%80/">ä¸Šä¸€èŠ‚</a>çš„ç¯å¢ƒä¸€è‡´ï¼Œè¿™ä¸€èŠ‚ä¸»è¦æ¥è¿›è¡Œè‡ªå®šä¹‰æ“ä½œ</p><p>åœ¨ <code>SecurityConfig</code>  ä¸­é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(WebSecurity web)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    web.ignoring().antMatchers(<span class="string">&quot;/js/**&quot;</span>, <span class="string">&quot;/css/**&quot;</span>,<span class="string">&quot;/images/**&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">            .formLogin().loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">            .permitAll()</span><br><span class="line">            .and()</span><br><span class="line">            .csrf().disable()</span><br><span class="line">    ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡ªè¡Œå†™ä¸€ä¸ªç™»å½•é¡µé¢ï¼š</p><p><code>login.html</code> ä¸­çš„æ ¸å¿ƒä»£ç </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/login.html&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;name&quot;</span>&gt;</span>ç”¨æˆ·å<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;spin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;pass&quot;</span>&gt;</span>å¯†ç <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pass&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;spin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;button login&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-check&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ä¸»è¦æ³¨æ„ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><p>form çš„è¯·æ±‚åœ°å€æ˜¯ /login.htmlï¼Œæ–¹æ³•æ˜¯ post</p><p>ç”¨æˆ·åå’Œå¯†ç çš„å±æ€§å€¼åˆ†åˆ«æ˜¯ username å’Œ password</p></blockquote><h2 id="äºŒã€Deep-Learning"><a href="#äºŒã€Deep-Learning" class="headerlink" title="äºŒã€Deep Learning"></a>äºŒã€Deep Learning</h2><p> ğŸ¢ä¹‹ç–‘é—®ä¸€ï¼šä¸ºå•¥é»˜è®¤çš„ç™»å½•é¡µé¢å’Œç™»å½•æ¥å£æ˜¯ä¸€æ ·çš„ï¼Ÿè‡ªå®šä¹‰é¡µé¢åˆæ˜¯å¦‚ä½•è¦†ç›–é»˜è®¤é¡µé¢çš„å‘¢ï¼Ÿ</p><p><code>é»˜è®¤ç™»å½•é¡µé¢</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200928133405.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200928133405.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200928133357601"></p><p>å…³äºé¡µé¢çš„ç™»å½•çš„é…ç½®éƒ½åœ¨ï¼š<code>FormLoginConfigurer</code> </p><p>å…¶ä¸­è¿™ä¸ªç±»åˆæ˜¯ç»§æ‰¿ <code>AbstractAuthenticationFilterConfigurer</code> ç±»çš„</p><p>åˆ™åœ¨ <code>FormLoginConfigurer</code> åˆå§‹åŒ–çš„æ—¶å€™ï¼Œ<code>AbstractAuthenticationFilterConfigurer</code> çš„æ„é€ æ–¹æ³•ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="title">AbstractAuthenticationFilterConfigurer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   setLoginPage(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¦‚æœæ²¡æœ‰è‡ªå®šä¹‰ç™»å½•é¡µé¢ï¼Œå°±ä¼šæ˜¯ <code>é¡¹ç›®åœ°å€/login</code> è¿™ä¸ªåœ°å€</p><p>å†çœ‹ä¸€ä¸‹ <code>FormLoginConfigurer</code> ä¸­çš„ init æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(H http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">   <span class="keyword">super</span>.init(http);</span><br><span class="line">   initDefaultLoginFilter(http);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•æ˜¯è°ƒç”¨äº†çˆ¶ç±»çš„ init æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(B http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">   updateAuthenticationDefaults();</span><br><span class="line">   updateAccessDefaults(http);</span><br><span class="line">   registerDefaultAuthenticationEntryPoint(http);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨çˆ¶ç±»çš„ init æ–¹æ³•ä¸­è°ƒç”¨äº† <code>updateAuthenticationDefaults()</code> æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">updateAuthenticationDefaults</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="comment">// æœªè‡ªå®šä¹‰é¡µé¢ï¼Œå°±ä¼šå’Œ loginPage åœ°å€ä¸€æ ·</span></span><br><span class="line">   <span class="keyword">if</span> (loginProcessingUrl == <span class="keyword">null</span>) &#123;</span><br><span class="line">      loginProcessingUrl(loginPage);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (failureHandler == <span class="keyword">null</span>) &#123;</span><br><span class="line">      failureUrl(loginPage + <span class="string">&quot;?error&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">final</span> LogoutConfigurer&lt;B&gt; logoutConfigurer = getBuilder().getConfigurer(</span><br><span class="line">         LogoutConfigurer.class);</span><br><span class="line">   <span class="keyword">if</span> (logoutConfigurer != <span class="keyword">null</span> &amp;&amp; !logoutConfigurer.isCustomLogoutSuccess()) &#123;</span><br><span class="line">      logoutConfigurer.logoutSuccessUrl(loginPage + <span class="string">&quot;?logout&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å°±èƒ½çœ‹åˆ°ï¼šå¦‚æœæˆ‘ä»¬æ²¡æœ‰è‡ªå®šä¹‰ç™»å½•æ¥å£ï¼Œé‚£ä¹ˆç™»å½•æ¥å£çš„åœ°å€å°±ä¼šè¢«è®¾ç½®ä¸ºå’Œç™»å½•é¡µé¢ä¸€è‡´</p><p><code>è‡ªå®šä¹‰ç™»å½•é¡µé¢</code></p><p>å¦‚æœè‡ªå®šä¹‰äº†é¡µé¢åœ°å€ï¼Œé¦–å…ˆä¼šåˆ° <code>FormLoginConfigurer</code> ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> FormLoginConfigurer&lt;H&gt; <span class="title">loginPage</span><span class="params">(String loginPage)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">super</span>.loginPage(loginPage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œé¢è°ƒç”¨äº†çˆ¶ç±»çš„ <code>loginPage</code> æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> T <span class="title">loginPage</span><span class="params">(String loginPage)</span> </span>&#123;</span><br><span class="line">   setLoginPage(loginPage);</span><br><span class="line">   updateAuthenticationDefaults();</span><br><span class="line">   <span class="keyword">this</span>.customLoginPage = <span class="keyword">true</span>;</span><br><span class="line">   <span class="keyword">return</span> getSelf();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™é‡Œé¢ set å®Œ <code>loginPage</code> åï¼ŒåˆåŒè°ƒç”¨äº† <code>updateAuthenticationDefaults()</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨ â˜ï¸ æœ‰</p><p>å¦‚æœè‡ªå®šä¹‰äº†ç™»å½•æ¥å£ <code>loginProcessingUrl</code> ï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥è¿™ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">loginProcessingUrl</span><span class="params">(String loginProcessingUrl)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.loginProcessingUrl = loginProcessingUrl;</span><br><span class="line">   authFilter</span><br><span class="line">         .setRequiresAuthenticationRequestMatcher(createLoginProcessingUrlMatcher(loginProcessingUrl));</span><br><span class="line">   <span class="keyword">return</span> getSelf();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ğŸ¢ä¹‹ç–‘é—®äºŒï¼šåœ¨æäº¤çš„è¡¨å•ä¸­ï¼Œå‚æ•°åˆ†åˆ«ä¸º username å’Œ passwordï¼Œå¯ä¸å¯ä»¥è‡ªå®šä¹‰å‘¢ï¼Ÿ</p><p>é¦–å…ˆè¿˜æ˜¯å» <code>FormLoginConfigurer</code> ç±»ä¸­çœ‹çœ‹æ„é€ æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">FormLoginConfigurer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">super</span>(<span class="keyword">new</span> UsernamePasswordAuthenticationFilter(), <span class="keyword">null</span>);</span><br><span class="line">   usernameParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">   passwordParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ super æ ¹æ® ğŸ‘† çš„ç»§æ‰¿å…³ç³»ï¼Œå°±å¯ä»¥çŸ¥é“æ˜¯ <code>AbstractAuthenticationFilterConfigurer</code> ä¸­çš„æ„é€ ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="title">AbstractAuthenticationFilterConfigurer</span><span class="params">(F authenticationFilter,</span></span></span><br><span class="line"><span class="function"><span class="params">      String defaultLoginProcessingUrl)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">this</span>();</span><br><span class="line">   <span class="comment">// å°†ä¼ è¿›æ¥çš„å‚æ•°èµ‹å€¼ç»™è¿™ä¸ªç±»çš„ authFilter</span></span><br><span class="line">   <span class="keyword">this</span>.authFilter = authenticationFilter;</span><br><span class="line">   <span class="keyword">if</span> (defaultLoginProcessingUrl != <span class="keyword">null</span>) &#123;</span><br><span class="line">      loginProcessingUrl(defaultLoginProcessingUrl);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šè¿™é‡Œä¸ºä»€ä¹ˆèƒ½ä¼ å‚ï¼Œæ˜¯ç”±äº </p><p>UsernamePasswordAuthenticationFilter ç»§æ‰¿ AbstractAuthenticationProcessingFilter</p><p>ä¸” F extends AbstractAuthenticationProcessingFilter</p></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200928160656.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200928160656.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200928160655402"></p><p>æ­¤æ—¶å·²ç»æœ‰äº† <code>UsernamePasswordAuthenticationFilter</code> çš„å®ä¾‹äº†ï¼Œæ¥ç€æ‰§è¡Œ <code>usernameParameter</code> å’Œ <code>passwordParameter</code> æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> FormLoginConfigurer&lt;H&gt; <span class="title">usernameParameter</span><span class="params">(String usernameParameter)</span> </span>&#123;</span><br><span class="line">   getAuthenticationFilter().setUsernameParameter(usernameParameter);</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> FormLoginConfigurer&lt;H&gt; <span class="title">passwordParameter</span><span class="params">(String passwordParameter)</span> </span>&#123;</span><br><span class="line">   getAuthenticationFilter().setPasswordParameter(passwordParameter);</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>getAuthenticationFilter</code> æ˜¯çˆ¶ç±»çš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> F <span class="title">getAuthenticationFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> authFilter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œå°±å¾ˆæ˜ç¡®äº†ï¼Œå°±æ˜¯å°†åˆšæ‰çš„ new UsernamePasswordAuthenticationFilter() æ”¾åˆ°è¿™é‡Œé¢åˆ†åˆ«è°ƒç”¨ <code>setUsernameParameter</code> å’Œ <code>setPasswordParameter</code> æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsernameParameter</span><span class="params">(String usernameParameter)</span> </span>&#123;</span><br><span class="line">    Assert.hasText(usernameParameter, <span class="string">&quot;Username parameter must not be empty or null&quot;</span>);</span><br><span class="line">    <span class="keyword">this</span>.usernameParameter = usernameParameter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPasswordParameter</span><span class="params">(String passwordParameter)</span> </span>&#123;</span><br><span class="line">    Assert.hasText(passwordParameter, <span class="string">&quot;Password parameter must not be empty or null&quot;</span>);</span><br><span class="line">    <span class="keyword">this</span>.passwordParameter = passwordParameter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼ŒusernameParameter å’Œ passwordParameter å°±å·²ç»è¢«èµ‹å¥½å€¼äº†</p><p>å†é€šè¿‡è¿™ä¸ªç±» (<code>UsernamePasswordAuthenticationFilter</code>) ä¸­çš„è¿™ä¸¤ä¸ªæ–¹æ³•ä»ç™»å½•è¯·æ±‚ä¸­æ‹¿åˆ°è¿™ä¸¤ä¸ªå€¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> String <span class="title">obtainPassword</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request.getParameter(<span class="keyword">this</span>.passwordParameter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> String <span class="title">obtainUsername</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request.getParameter(<span class="keyword">this</span>.usernameParameter);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆè‡ªå®šä¹‰å°±å¾ˆç®€å•äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">            .formLogin().loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">                  <span class="comment">// åªéœ€è¦è®¾ç½®ä»¥ä¸‹ä¸¤é¡¹å°±è¡Œ</span></span><br><span class="line">            .usernameParameter(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">            .passwordParameter(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">            .permitAll()</span><br><span class="line">            .and()</span><br><span class="line">            .csrf().disable()</span><br><span class="line">    ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ğŸ¢ä¹‹ç–‘é—®ä¸‰ï¼šç™»å½•æˆåŠŸ or å¤±è´¥åçš„é‡å®šå‘çš„åœ°å€ï¼Œæ³¨é”€ç™»å½•çš„åœ°å€å¦‚ä½•è‡ªå®šä¹‰ï¼Ÿ</p><table><thead><tr><th>ç™»å½•æˆåŠŸ</th><th>ç™»å½•å¤±è´¥</th></tr></thead><tbody><tr><td>defaultSuccessUrl</td><td>failureForwardUrl</td></tr><tr><td>successForwardUrl</td><td>failureUrl</td></tr></tbody></table><p>åŒºåˆ«ç®€å•æ¥è¯´å°±æ˜¯ï¼š</p><p><code>defaultSuccessUrl </code> å¯èƒ½ä½ è®¿é—®çš„åœ°å€æ˜¯ <a href="http://localhost:8080/security">http://localhost:8080/security</a> ä½†æ˜¯ä½ æ²¡ç™»å½•ï¼Œæ‰€ä»¥ä½ å°±è·³è½¬åˆ° <a href="http://localhost:8080/login">http://localhost:8080/login</a> é¡µé¢ä¸‹ï¼Œå¦‚æœä½ ç™»å½•æˆåŠŸï¼Œé‚£ä¹ˆå°±ä¼šå›åˆ° /security é¡µé¢</p><p><code>successForwardUrl</code> ä¸ç®¡æ˜¯ä»€ä¹ˆé¡µé¢ï¼Œç™»å½•æˆåŠŸä¸€å¾‹æ˜¯ä½ è®¾ç½®çš„é¡µé¢</p><p>ç™»å½•å¤±è´¥åŒç†</p><p><code>æ³¨é”€ç™»å½•</code> </p><p>çœ‹ä¸‹é¢çš„ä»£ç </p><p>logoutUrlï¼šç”¨æ¥æ³¨é”€çš„åœ°å€ï¼Œé»˜è®¤ä¸º â€œ/logoutâ€</p><p>logoutRequestMatcherï¼šæ”¹å˜æ³¨é”€åœ°å€ï¼Œè¿˜æœ‰è¯·æ±‚æ–¹å¼</p><p>logoutSuccessUrlï¼šæ³¨é”€ç™»å½•æˆåŠŸåï¼Œè¦è·³è½¬çš„åœ°å€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">      </span><br><span class="line">                  <span class="comment">// æ³¨é”€ç™»å½•è®¾ç½®</span></span><br><span class="line">            .logout()</span><br><span class="line">            .logoutUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">            .logoutRequestMatcher(<span class="keyword">new</span> AntPathRequestMatcher(<span class="string">&quot;/logout&quot;</span>,<span class="string">&quot;POST&quot;</span>))</span><br><span class="line">            .logoutSuccessUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">      </span><br><span class="line">                 <span class="comment">// ç™»å½•è®¾ç½®</span></span><br><span class="line">            .and()</span><br><span class="line">            .formLogin().loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">            .usernameParameter(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">            .passwordParameter(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">      </span><br><span class="line">                  <span class="comment">// ä¸‹é¢ä¸¤ä¸ªåªéœ€è¦ä¸€ä¸ª</span></span><br><span class="line">            .defaultSuccessUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">            .successForwardUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">      </span><br><span class="line">                  <span class="comment">// ä¸‹é¢ä¸¤ä¸ªåªéœ€è¦ä¸€ä¸ª</span></span><br><span class="line">            .failureForwardUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">            .failureUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">      </span><br><span class="line">            .permitAll()</span><br><span class="line">            .and()</span><br><span class="line">            .csrf().disable()</span><br><span class="line">    ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Spring Security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆSpring Security (ä¸€)</title>
      <link href="2020/09/27/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%B8%80/"/>
      <url>2020/09/27/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>Java ä¸­æƒé™ç®¡ç†æœ€å¸¸ç”¨çš„æŠ€æœ¯åº”è¯¥å°±æ˜¯ï¼šSpring Security å’Œ Shiroã€‚</p><p>è™½ç„¶ Shiro ç”¨å®ƒè½»é‡ã€ç®€å•ã€æ˜“äºé›†æˆå æ®ä¸€å¸­ä¹‹åœ°ï¼Œä½†éšç€ SpringBoot çš„æµè¡Œï¼ŒSpring Security ä¹Ÿè·Ÿç€é¸¡çŠ¬å‡å¤©ï¼Œå°±ç›®å‰çš„è¶‹åŠ¿æ¥çœ‹ï¼ŒSpring Security ç»“åˆ Oauth2ã€JWT ç­‰æ›´åŠ æ–¹ä¾¿ã€‚</p><p>è¿™æ¬¡å…ˆå°è¯•ç‰›åˆ€ä¸€ä¸‹ï¼Œå¿«é€Ÿå…¥é—¨â€¦â€¦</p><h2 id="äºŒã€Environment"><a href="#äºŒã€Environment" class="headerlink" title="äºŒã€Environment"></a>äºŒã€Environment</h2><p><code>ä¸æƒ³ error ï¼Œå…ˆçœ‹ä¾èµ–</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927100536.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927100536.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927100528688"></p><blockquote><p>æ²¡çœ‹é”™ï¼Œå°±åªéœ€è¦è¿™ä¸¤ä¸ªä¾èµ–å°±è¡Œ</p></blockquote><p><code>pom.xml</code> </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--security--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--web--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>SecurityController</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/security&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;spring security&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€Test"><a href="#ä¸‰ã€Test" class="headerlink" title="ä¸‰ã€Test"></a>ä¸‰ã€Test</h2><p>å¯åŠ¨é¡¹ç›®å¯ä»¥çœ‹è§ï¼Œåœ¨æ§åˆ¶å°å¤šäº†ä¸€è¡Œï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927101458.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927101458.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927101455744"></p><p><code>Postman</code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927101707.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927101707.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927101705136"></p><blockquote><p>å¯ä»¥çœ‹è§æŠ¥é”™ï¼š401ï¼Œæ²¡æœ‰è¿›è¡Œè®¤è¯</p></blockquote><p><code>åŠ ä¸Šè®¤è¯</code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927101924.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927101924.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927101922872"></p><blockquote><p>å¯ä»¥çœ‹è§ï¼ŒåŠ ä¸Š Basic Authï¼š</p><p>å…¶ä¸­ç”¨æˆ·åä¸º userï¼Œå¯†ç ä¸ºåˆšæ‰æ§åˆ¶å°æ˜¾ç¤ºçš„å³å¯</p></blockquote><h2 id="å››ã€Deep-Learning"><a href="#å››ã€Deep-Learning" class="headerlink" title="å››ã€Deep Learning"></a>å››ã€Deep Learning</h2><p>ğŸ¢ä¹‹ç–‘é—®ï¼šä¸ºå•¥ç”¨æˆ·åæ˜¯ userï¼Œå¯†ç å°±æ˜¯æ§åˆ¶å°æ˜¾ç¤ºçš„é‚£ä¸ªï¼Ÿ</p><p>åˆ†ææ€è·¯ï¼š</p><p>ç”¨æˆ·åå’Œå¯†ç è‚¯å®šåœ¨ä¸€èµ·ï¼Œè¿™ä¸ªå¯†ç åˆæ˜¯ UUID å½¢å¼ï¼ŒæŸä¸ªåœ°æ–¹è‚¯å®šç”¨äº† UUID.randomUUID().toString()</p><p>æŒ‰ç…§æˆ‘ä»¬å¯¹ SpringBoot çš„ç‰¹æ€§ï¼Œè‚¯å®šåœ¨ XXXAutoConfiguration å’Œ XXXProperties ä¸­å­˜åœ¨ï¼Œæœç„¶åœ¨ SecurityProperties ä¸­çœ‹åˆ°äº†ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927104212.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927104212.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927104210784"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦å»æ‰¾ä¸€æ‰¾ï¼Œåœ¨å“ªé‡Œæœ‰è°ƒç”¨ getPassword çš„è¿™ä¸ªæ–¹æ³•çš„ç±»ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927104415.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927104415.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927104411301"></p><p>çœ‹åå­—åº”è¯¥å°±æ˜¯ï¼š<code>UserDetailsServiceAutoConfiguration</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">getOrDeducePassword</span><span class="params">(SecurityProperties.User user, PasswordEncoder encoder)</span> </span>&#123;</span><br><span class="line">   String password = user.getPassword();</span><br><span class="line">   <span class="keyword">if</span> (user.isPasswordGenerated()) &#123;</span><br><span class="line">      logger.info(String.format(<span class="string">&quot;%n%nUsing generated security password: %s%n&quot;</span>, user.getPassword()));</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (encoder != <span class="keyword">null</span> || PASSWORD_ALGORITHM_PATTERN.matcher(password).matches()) &#123;</span><br><span class="line">      <span class="keyword">return</span> password;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> NOOP_PASSWORD_PREFIX + password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­ï¼š</p><p>user.isPasswordGenerated() å¦‚æœä¸º trueï¼Œåˆ™æ‰“å°è¯¥ä¿¡æ¯</p></blockquote><p>å†å» ==user.isPasswordGenerated()== æ–¹æ³•ä¸­æ¢ç©¶ä¸€ä¸‹ï¼Œå›åˆ°äº†==SecurityProperties== ç±»ä¸­äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> passwordGenerated = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">      .......</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPasswordGenerated</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.passwordGenerated;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼špasswordGenerated å°±æ˜¯ä¸º true</p></blockquote><p>ğŸ¢ä¹‹ç–‘é—®ï¼šæ¯æ¬¡å¯åŠ¨éƒ½è¦è¾“å…¥æ–°çš„çš„å¯†ç ï¼Œå¤ªéº»çƒ¦äº†ï¼Œæˆ‘éœ€è¦è‡ªå®šä¹‰</p><p><code>ç¬¬ä¸€ç§æ–¹æ³•ï¼š</code></p><p>æŒ‰ç…§ SpringBoot çš„ç‰¹æ€§ï¼Œå¿…ç„¶å·²ç»ç»™ä½ å®‰æ’å¥½äº†ï¼Œè‚¯å®šæœ‰ä¸€ç§æ–¹æ³•æ˜¯åœ¨ properties æ–‡ä»¶ä¸­ç›´æ¥è¿›è¡Œï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927110312.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927110312.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927110311399"></p><p><code>idea</code> å·²ç»é€šè¿‡æç¤ºæ˜¾ç¤ºå‡ºæ¥äº†, <strong>idea yyds !</strong></p><p>ç›´æ¥ç‚¹è¿›å»çœ‹ä¸€ä¸‹ï¼Œå›è·³åˆ°å“ªä¸ªç±»ä¸­ï¼Œä¸å‡ºğŸ¢ğŸ¢çš„æ‰€æ–™ï¼Œåº”è¯¥å°±æ˜¯ ==SecurityProperties== ç±»ä¸­ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927112809.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927112809.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927112805908"></p><p>æœä¸å…¶ç„¶ï¼Œåˆ†åˆ«è·³åˆ°äº†</p><p><code>setName</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>setPassword</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (!StringUtils.hasLength(password)) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">this</span>.passwordGenerated = <span class="keyword">false</span>;</span><br><span class="line">   <span class="keyword">this</span>.password = password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šå¦‚æœåœ¨è¿™é‡Œè‡ªå®šä¹‰äº†å¯†ç ï¼Œå°±ä¼šå°† ==passwordGenerated== è®¾ç½®ä¸º falseï¼Œé‚£ä¹ˆåœ¨ ==isPasswordGenerated== å°±æ˜¯ false äº†ï¼Œåœ¨ ==UserDetailsServiceAutoConfiguration== ä¸­å°±ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆå¯†ç äº†</p></blockquote><p><code>application.properties</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.security.user.name</span>=<span class="string">wangba</span></span><br><span class="line"><span class="meta">spring.security.user.password</span>=<span class="string">8888</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927112305.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927112305.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927112303555"></p><p><code>ç¬¬äºŒç§æ–¹æ³•ï¼š</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä¸å¯¹å¯†ç è¿›è¡Œä»»ä½•ç¼–ç æ–¹å¼</span></span><br><span class="line">        <span class="keyword">return</span> NoOpPasswordEncoder.getInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        auth.inMemoryAuthentication()</span><br><span class="line">                .withUser(<span class="string">&quot;wangba&quot;</span>)</span><br><span class="line">                .password(<span class="string">&quot;guigui&quot;</span>)</span><br><span class="line">                .roles(<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">        ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927160833.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927160833.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927160832690"></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Spring Security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆSession</title>
      <link href="2020/09/22/SpringBoot%E6%95%B4%E5%90%88Session/"/>
      <url>2020/09/22/SpringBoot%E6%95%B4%E5%90%88Session/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><blockquote><p>Spring Session has the simple goal of free up session management from the limitations of the HTTP session stored in the server.</p><p>The solution makes it easy to share session data between services in the cloud without being tied to a single container (i.e. Tomcat). Additionally, it supports multiple sessions in the same browser and sending sessions in a header.</p></blockquote><p>ç®€å•åœ°æ¥è¯´ï¼šç”±æ¶æ„å¯¼è‡´äº†è¿™ç§æƒ…å†µçš„å‘ç”Ÿ</p><p><code>present</code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922201419.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922201419.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922201418003"></p><p>æœ€æ—©çš„æ¶æ„å°±æ˜¯å¾ˆç®€å•çš„å•æœåŠ¡å™¨çŠ¶æ€ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¿å­˜ç”¨æˆ·çŠ¶æ€ï¼Œé‚£ä¹ˆåªéœ€è¦ä¸€ä¸ª session å°±è¡Œäº†</p><p><code>now</code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922200615.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922200615.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922200614157"></p><p>ç°åœ¨çš„æ¶æ„éƒ½æ˜¯é›†ç¾¤å¼äº†ï¼šå¯ä»¥å‡è®¾è¿™æ ·çš„æƒ…æ™¯ï¼Œå¦‚æœæˆ‘åœ¨å·²ç»ç™»å½•çš„çŠ¶æ€ï¼Œæˆ‘é¦–å…ˆè¦çœ‹è§†é¢‘ (è¿™ä¸ªæœåŠ¡å‡å¦‚åœ¨ A æœåŠ¡å™¨ä¸Š)ï¼Œç„¶åæˆ‘åˆæµè§ˆå›¾ç‰‡ (è¿™ä¸ªæœåŠ¡å‡å¦‚åœ¨ B æœåŠ¡å™¨ä¸Š)ï¼Œå¦‚æœä¸å…±äº« session çš„è¯ï¼Œé‚£ä¹ˆæˆ‘é€‰æ‹©çš„æœåŠ¡ä¸åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šå°±è¦é‡æ–°ç™»å½•äº†ï¼Œè¿™å¯¹ç”¨æˆ·ä¹Ÿå¤ªä¸å‹å¥½äº†ã€‚</p><p><code>è§£å†³æ–¹æ¡ˆ </code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922200856.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922200856.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922200847137"></p><p>ä¸»æµçš„è§£å†³æ–¹æ¡ˆï¼šå°† seesion å­˜åˆ° redis ä¸­ï¼Œæ¯æ¬¡ server è¦å‘ session ä¸­å†™æ•°æ®ï¼Œæˆ–è€…è¦è¯» session çš„æ•°æ®æ—¶ï¼Œéƒ½æ˜¯å¯¹ redis ä¸­çš„ session è¿›è¡Œæ“ä½œã€‚</p><h2 id="äºŒã€ç¯å¢ƒæ­å»º"><a href="#äºŒã€ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€ç¯å¢ƒæ­å»º"></a>äºŒã€ç¯å¢ƒæ­å»º</h2><p><code>ä¸æƒ³ error ï¼Œå…ˆçœ‹ä¾èµ–</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922202750.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922202750.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922202748557"></p><p><code>pom.xml</code> </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--redis--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--web--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--spring session--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.session<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-session-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>application.properties</code> </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># redis åŸºæœ¬é…ç½®</span></span><br><span class="line"><span class="comment"># åœ°å€</span></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">10.2.10.115</span></span><br><span class="line"><span class="comment"># ç«¯å£å·  é»˜è®¤å°±æ˜¯ 6379</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="comment"># å¯†ç </span></span><br><span class="line"><span class="meta">spring.redis.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="comment"># ç¬¬å‡ ä¸ªæ•°æ®åº“  é»˜è®¤å°±æ˜¯ç¬¬0å·æ•°æ®åº“</span></span><br><span class="line"><span class="meta">spring.redis.database</span>=<span class="string">0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8080</span></span><br></pre></td></tr></table></figure><p><code>SessionController</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span></span><br><span class="line">    Integer port;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/set&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">set</span><span class="params">(HttpSession session)</span> </span>&#123;</span><br><span class="line">        session.setAttribute(<span class="string">&quot;wangba&quot;</span>, <span class="string">&quot;8888&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(port);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/get&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">(HttpSession session)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> session.getAttribute(<span class="string">&quot;user&quot;</span>) + <span class="string">&quot;:&quot;</span> + port;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€æµ‹è¯•"><a href="#ä¸‰ã€æµ‹è¯•" class="headerlink" title="ä¸‰ã€æµ‹è¯•"></a>ä¸‰ã€æµ‹è¯•</h2><p>è®¿é—®ï¼š<a href="http://localhost:8080/set">http://localhost:8080/set</a></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922210637.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922210637.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922210635181"></p><p>æ­¤æ—¶æ‰“å¼€ redis çœ‹ä¸€ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922212207.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922212207.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922212205673"></p><p>å†è®¿é—®ï¼š<a href="http://localhost:8081/get">http://localhost:8081/get</a></p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922212407.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922212407.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922212405236" style="zoom:150%;" /><p>å¯ä»¥çœ‹åˆ°æ­¤æ—¶ï¼Œåœ¨ä¸åŒçš„æœåŠ¡ä¸Šå¯ä»¥é€šè¿‡å…±äº« session </p><blockquote><p>æ³¨ï¼šè¿™è¾¹å¯ä»¥é€šè¿‡ nginx è¿›è¡Œè´Ÿè½½å‡è¡¡</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Session </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆRedis</title>
      <link href="2020/09/16/SpringBoot%E6%95%B4%E5%90%88Redis/"/>
      <url>2020/09/16/SpringBoot%E6%95%B4%E5%90%88Redis/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>é¢è¯•å®˜ï¼šredis çŸ¥é“å—</p><p>ğŸ¢ï¼šä¸çŸ¥é“</p><p>é¢è¯•å®˜ï¼šä½ å›å»ç­‰é€šçŸ¥å§</p><blockquote><p><strong>Redis</strong>æ˜¯ä¸€ä¸ªä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/ANSI_C">ANSI C</a>ç¼–å†™çš„<a href="https://zh.wikipedia.org/wiki/%E5%BC%80%E6%BA%90">å¼€æº</a>ã€æ”¯æŒ<a href="https://zh.wikipedia.org/wiki/%E7%94%B5%E8%84%91%E7%BD%91%E7%BB%9C">ç½‘ç»œ</a>ã€åŸºäº<a href="https://zh.wikipedia.org/wiki/%E5%86%85%E5%AD%98">å†…å­˜</a>ã€å¯é€‰<a href="https://zh.wikipedia.org/w/index.php?title=%E6%8C%81%E4%B9%85%E6%80%A7_(%E6%95%B0%E6%8D%AE%E5%BA%93)&action=edit&redlink=1">æŒä¹…æ€§</a>çš„<a href="https://zh.wikipedia.org/wiki/%E9%94%AE%E5%80%BC-%E5%80%BC%E6%95%B0%E6%8D%AE%E5%BA%93">é”®å€¼å¯¹å­˜å‚¨æ•°æ®åº“</a>ã€‚ä»2015å¹´6æœˆå¼€å§‹ï¼ŒRedisçš„å¼€å‘ç”±<a href="https://zh.wikipedia.org/w/index.php?title=Redis_Labs&action=edit&redlink=1">Redis Labs</a>èµåŠ©ï¼Œè€Œ2013å¹´5æœˆè‡³2015å¹´6æœˆæœŸé—´ï¼Œå…¶å¼€å‘ç”±<a href="https://zh.wikipedia.org/wiki/Pivotal">Pivotal</a>èµåŠ©ã€‚åœ¨2013å¹´5æœˆä¹‹å‰ï¼Œå…¶å¼€å‘ç”±<a href="https://zh.wikipedia.org/wiki/VMware">VMware</a>èµåŠ©ã€‚<a href="https://zh.wikipedia.org/wiki/Redis#cite_note-5)%E6%A0%B9%E6%8D%AE%E6%9C%88%E5%BA%A6%E6%8E%92%E8%A1%8C%E7%BD%91%E7%AB%99DB-Engines.com%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8CRedis%E6%98%AF%E6%9C%80%E6%B5%81%E8%A1%8C%E7%9A%84%E9%94%AE%E5%80%BC%E5%AF%B9%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%82">https://zh.wikipedia.org/wiki/Redis#cite_note-5)æ ¹æ®æœˆåº¦æ’è¡Œç½‘ç«™DB-Engines.comçš„æ•°æ®ï¼ŒRedisæ˜¯æœ€æµè¡Œçš„é”®å€¼å¯¹å­˜å‚¨æ•°æ®åº“ã€‚</a>                                                           â€”â€”â€“ç»´åŸºç™¾ç§‘</p></blockquote><p>æˆ‘è®°å¾—æˆ‘çœ‹è¿‡ä¸€ç¯‡è®²çš„éå¸¸å¥½çš„ NoSQL çš„æ–‡ç« ï¼Œä¸‹æ¬¡æ‰¾åˆ°åŠ è¿›æ¥ã€‚</p><p>å¢åŠ ï¼š<a href="https://www.cnblogs.com/xrq730/p/11039384.html">å…³ç³»å‹æ•°æ®åº“ä¸éå…³ç³»å‹æ•°æ®åº“</a></p><h2 id="äºŒã€ç¯å¢ƒæ­å»º"><a href="#äºŒã€ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€ç¯å¢ƒæ­å»º"></a>äºŒã€ç¯å¢ƒæ­å»º</h2><p><code>Redis</code></p><p>é¦–å…ˆå‡†å¤‡å¥½ redis çš„ç¯å¢ƒï¼Œæ­¤æ¬¡ redis æ˜¯å®‰è£…åœ¨ Ubuntu 18.04 ä¸Šçš„ï¼Œä¸»è¦é…ç½®å¦‚ä¸‹ï¼š</p><p>å¯ä»¥ä½¿ç”¨ <code>sudo vi /etc/redis/redis.conf</code> å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  è¯¥æŒ‡ä»¤å…è®¸æ‚¨å£°æ˜ä¸€ä¸ªinitç³»ç»Ÿæ¥ç®¡ç†Redisä½œä¸ºæœåŠ¡ï¼Œä»è€Œä¸ºæ‚¨æä¾›å¯¹å…¶æ“ä½œçš„æ›´å¤šæ§åˆ¶</span></span><br><span class="line">supervised systemd</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºäº†å±€åŸŸç½‘èƒ½è¿æ¥ä¸Š</span></span><br><span class="line"><span class="built_in">bind</span> 127.0.0.1 ::1</span><br><span class="line">    æ”¹ä¸º</span><br><span class="line"><span class="built_in">bind</span> 0.0.0.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºäº†å±€åŸŸç½‘èƒ½è¿æ¥ä¸Š</span></span><br><span class="line">protected-mode yes</span><br><span class="line">    æ”¹ä¸º</span><br><span class="line">protected-mode no</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹å¯†ç ï¼Œéå¿…é¡»</span></span><br><span class="line">requirepass 123456</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹ redis é…ç½®</span></span><br><span class="line">sudo vi /etc/redis/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯ redis æœåŠ¡</span></span><br><span class="line">sudo service redis restart</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨ redis æœåŠ¡</span></span><br><span class="line">sudo service redis start</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­ redis æœåŠ¡</span></span><br><span class="line">sudo service redis stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨ redis å®¢æˆ·ç«¯ï¼Œå…¶ä¸­ -p æŒ‡å®šç«¯å£ï¼Œ-a è¡¨ç¤ºè®¤è¯å³å¯†ç </span></span><br><span class="line">redis-cli -p 6379 -a 123456</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨ redis é‡Œé¢çš„ä¸€äº›å‘½ä»¤</span></span><br><span class="line">127.0.0.1:6379&gt; ping</span><br><span class="line">PONG</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">127.0.0.1:6379&gt; get keyçš„åå­—</span><br></pre></td></tr></table></figure><p><code>pom.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>application.properties</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># redis åŸºæœ¬é…ç½®</span></span><br><span class="line"><span class="comment"># åœ°å€</span></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">10.2.10.108</span></span><br><span class="line"><span class="comment"># ç«¯å£å·  é»˜è®¤å°±æ˜¯ 6379</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="comment"># å¯†ç </span></span><br><span class="line"><span class="meta">spring.redis.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="comment"># ç¬¬å‡ ä¸ªæ•°æ®åº“  é»˜è®¤å°±æ˜¯ç¬¬0å·æ•°æ®åº“</span></span><br><span class="line"><span class="meta">spring.redis.database</span>=<span class="string">0</span></span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€æµ‹è¯•"><a href="#ä¸‰ã€æµ‹è¯•" class="headerlink" title="ä¸‰ã€æµ‹è¯•"></a>ä¸‰ã€æµ‹è¯•</h2><p><code>RedisController</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStringRedisTemplate</span><span class="params">(StringRedisTemplate stringRedisTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.stringRedisTemplate = stringRedisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/put&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">(String key, String value)</span> </span>&#123;</span><br><span class="line">        ValueOperations&lt;String, String&gt; ops = stringRedisTemplate.opsForValue();</span><br><span class="line">        ops.set(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/get&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test2</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        ValueOperations&lt;String, String&gt; ops = stringRedisTemplate.opsForValue();</span><br><span class="line">        <span class="keyword">return</span> ops.get(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Postman</code></p><p>é¦–å…ˆå°† redis æ¸…ç©ºï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213048.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213048.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200916213040993"></p><p><strong>æ’å…¥ï¼š</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213139.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213139.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200916213138474"></p><p>çœ‹ä¸‹ redis ä¸­ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213216.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213216.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200916213213677"></p><p><strong>æŸ¥è¯¢ï¼š</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213252.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213252.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200916213251374"></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
            <tag> NoSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é“æ°ç‹æœæ»¡æ±‰å…¨å¸­ 919</title>
      <link href="2020/09/15/%E9%93%81%E6%B0%8F%E7%8E%8B%E6%9C%9D%E6%BB%A1%E6%B1%89%E5%85%A8%E5%B8%AD-919/"/>
      <url>2020/09/15/%E9%93%81%E6%B0%8F%E7%8E%8B%E6%9C%9D%E6%BB%A1%E6%B1%89%E5%85%A8%E5%B8%AD-919/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 align=center>919 é“æ°ç‹æœæ»¡æ±‰å…¨å¸­ v1.3</h1><h2 id="æ¸…è’¸å¤§é—¸èŸ¹-5åª"><a href="#æ¸…è’¸å¤§é—¸èŸ¹-5åª" class="headerlink" title="æ¸…è’¸å¤§é—¸èŸ¹  5åª"></a>æ¸…è’¸å¤§é—¸èŸ¹  5åª</h2><blockquote><p>ææ–™ï¼š</p></blockquote><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>é˜³æ¾„æ¹–å¤§é—¸èŸ¹</td><td><a href="https://www.douguo.com/caipu/%E7%94%9F%E5%A7%9C">ç”Ÿå§œ</a></td></tr><tr><td><a href="https://www.douguo.com/caipu/%E8%92%9C%E7%93%A3">è’œç“£</a></td><td><a href="https://www.douguo.com/caipu/%E9%A6%99%E8%91%B1">é¦™è‘±</a></td></tr><tr><td><a href="https://www.douguo.com/caipu/%E7%B4%AB%E8%8B%8F">ç´«è‹</a></td><td><a href="https://www.douguo.com/caipu/%E7%94%9F%E6%8A%BD">ç”ŸæŠ½</a></td></tr><tr><td><a href="https://www.douguo.com/caipu/%E9%A6%99%E9%86%8B">é¦™é†‹</a></td><td><a href="https://www.douguo.com/caipu/%E6%96%99%E9%85%92">æ–™é…’</a></td></tr><tr><td><a href="https://www.douguo.com/caipu/%E9%A6%99%E6%B2%B9">é¦™æ²¹</a></td><td><a href="https://www.douguo.com/caipu/%E9%B8%A1%E7%B2%BE">é¸¡ç²¾</a></td></tr><tr><td><a href="https://www.douguo.com/caipu/%E7%B3%96">ç³–</a></td><td></td></tr></tbody></table><h2 id="å¯ä¹é¸¡ç¿…"><a href="#å¯ä¹é¸¡ç¿…" class="headerlink" title="å¯ä¹é¸¡ç¿…"></a>å¯ä¹é¸¡ç¿…</h2><blockquote><p>ææ–™ï¼š</p></blockquote><table><thead><tr><th><a href="https://www.douguo.com/caipu/%E9%B8%A1%E7%BF%85">é¸¡ç¿…</a>10ä¸ª</th><th><a href="https://www.douguo.com/caipu/%E5%8F%AF%E4%B9%90">å¯ä¹</a>300æ¯«å‡</th></tr></thead><tbody><tr><td><a href="https://www.douguo.com/caipu/%E8%80%81%E6%8A%BD">è€æŠ½</a>1å‹º</td><td>ç›ï¼Œé¸¡ç²¾é€‚é‡</td></tr><tr><td>è‘±å§œï¼Œå…«è§’é€‚é‡</td><td></td></tr></tbody></table><h2 id="ç³–é†‹æ’éª¨"><a href="#ç³–é†‹æ’éª¨" class="headerlink" title="ç³–é†‹æ’éª¨"></a>ç³–é†‹æ’éª¨</h2><blockquote><p>ææ–™ï¼š</p></blockquote><table><thead><tr><th><a href="https://www.douguo.com/caipu/%E7%8C%AA%E8%82%8B%E6%8E%92">çŒªè‚‹æ’</a>500å…‹</th><th><a href="https://www.douguo.com/caipu/%E8%91%B1">è‘±</a>é€‚é‡</th></tr></thead><tbody><tr><td><a href="https://www.douguo.com/caipu/%E5%A7%9C">å§œ</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E5%85%AB%E8%A7%92">å…«è§’</a>2ä¸ª</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E8%80%81%E6%8A%BD">è€æŠ½</a>2å‹º</td><td><a href="https://www.douguo.com/caipu/%E7%94%9F%E6%8A%BD">ç”ŸæŠ½</a>2å‹º</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E7%99%BD%E7%B3%96">ç™½ç³–</a>3å‹º</td><td><a href="https://www.douguo.com/caipu/%E9%A6%99%E9%86%8B">é¦™é†‹</a>4å‹º</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E6%96%99%E9%85%92">æ–™é…’</a>5å‹º</td><td><a href="https://www.douguo.com/caipu/%E7%86%9F%E7%99%BD%E8%8A%9D%E9%BA%BB">ç†Ÿç™½èŠéº»</a>é€‚é‡</td></tr></tbody></table><h2 id="éº»è¾£å°é¾™è™¾"><a href="#éº»è¾£å°é¾™è™¾" class="headerlink" title="éº»è¾£å°é¾™è™¾"></a>éº»è¾£å°é¾™è™¾</h2><blockquote><p>ææ–™ï¼š</p></blockquote><table><thead><tr><th><a href="https://www.douguo.com/caipu/%E5%B0%8F%E9%BE%99%E8%99%BE">å°é¾™è™¾</a>30æ–¤</th><th><a href="https://www.douguo.com/caipu/%E9%A6%99%E8%91%B1">é¦™è‘±</a>é€‚é‡</th></tr></thead><tbody><tr><td><a href="https://www.douguo.com/caipu/%E5%A7%9C">å§œ</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E8%92%9C">è’œ</a>é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E5%A4%A7%E8%91%B1">å¤§è‘±</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E6%A1%82%E7%9A%AE">æ¡‚çš®</a>é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E5%85%AB%E8%A7%92">å…«è§’</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E9%A6%99%E5%8F%B6">é¦™å¶</a>é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E7%B4%AB%E8%8B%8F">ç´«è‹</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E5%B0%8F%E7%B1%B3%E6%A4%92">å°ç±³æ¤’</a>é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E5%86%B0%E7%B3%96">å†°ç³–</a>é€‚é‡</td><td>è—•æ¡é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E9%9D%92%E6%A4%92">é’æ¤’</a>é€‚é‡</td><td>çº¢æ²¹ç«é”…åº•æ–™é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E8%B1%86%E7%93%A3%E9%85%B1">è±†ç“£é…±</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E6%B7%80%E7%B2%89">æ·€ç²‰</a>é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E7%99%BD%E8%8A%9D%E9%BA%BB">ç™½èŠéº»</a>é€‚é‡</td><td></td></tr></tbody></table><h2 id="èŠå£«åŸ¹æ ¹æ³¡èœå·"><a href="#èŠå£«åŸ¹æ ¹æ³¡èœå·" class="headerlink" title="èŠå£«åŸ¹æ ¹æ³¡èœå·"></a>èŠå£«åŸ¹æ ¹æ³¡èœå·</h2><blockquote><p>ææ–™ï¼š</p></blockquote><h2 id="è’œè“‰é‡‘é’ˆè‡"><a href="#è’œè“‰é‡‘é’ˆè‡" class="headerlink" title="è’œè“‰é‡‘é’ˆè‡"></a>è’œè“‰é‡‘é’ˆè‡</h2><blockquote><p>ææ–™ï¼š</p></blockquote><table><thead><tr><th><a href="https://www.douguo.com/caipu/%E9%87%91%E9%92%88%E8%8F%87">é‡‘é’ˆè‡</a>1æŠŠ</th><th><a href="https://www.douguo.com/caipu/%E8%92%9C">è’œ</a>ä¸€å¤´</th></tr></thead><tbody><tr><td><a href="https://www.douguo.com/caipu/%E9%A3%9F%E7%94%A8%E6%B2%B9">é£Ÿç”¨æ²¹</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E9%85%B1%E6%B2%B9">é…±æ²¹</a>4å‹º</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E8%9A%9D%E6%B2%B9">èšæ²¹</a>2å‹º</td><td><a href="https://www.douguo.com/caipu/%E5%B0%8F%E8%91%B1">å°è‘±</a>4æ ¹</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E9%B8%A1%E7%B2%BE">é¸¡ç²¾</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E7%B3%96">ç³–</a></td></tr><tr><td><a href="https://www.douguo.com/caipu/%E7%9B%90">ç›</a></td><td></td></tr></tbody></table><h2 id="é…’é…¿å°æ±¤åœ†å†²é¸¡è›‹"><a href="#é…’é…¿å°æ±¤åœ†å†²é¸¡è›‹" class="headerlink" title="é…’é…¿å°æ±¤åœ†å†²é¸¡è›‹"></a>é…’é…¿å°æ±¤åœ†å†²é¸¡è›‹</h2><blockquote><p>ææ–™ï¼š</p></blockquote><h2 id="å§œæ’å¥¶"><a href="#å§œæ’å¥¶" class="headerlink" title="å§œæ’å¥¶"></a>å§œæ’å¥¶</h2><blockquote><p>ææ–™ï¼š</p></blockquote><table><thead><tr><th><a href="https://www.douguo.com/caipu/%E8%80%81%E5%A7%9C">è€å§œ</a>1å¤§å—</th><th><a href="https://www.douguo.com/caipu/%E7%BA%AF%E7%89%9B%E5%A5%B6">çº¯ç‰›å¥¶</a>200æ¯«å‡</th></tr></thead><tbody><tr><td><a href="https://www.douguo.com/caipu/%E7%BB%86%E7%A0%82%E7%B3%96">ç»†ç ‚ç³–</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E8%94%93%E8%B6%8A%E8%8E%93%E5%B9%B2">è”“è¶Šè“å¹²</a>å°‘è®¸</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> WangBa&#39;s CookBook </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CookBook </tag>
            
            <tag> Life </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆSpring Data JPA ä¹‹å¤šæ¡ä»¶æœç´¢å·¥å…·ç±»</title>
      <link href="2020/09/14/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%B9%8B%E5%A4%9A%E6%9D%A1%E4%BB%B6%E6%90%9C%E7%B4%A2%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
      <url>2020/09/14/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%B9%8B%E5%A4%9A%E6%9D%A1%E4%BB%B6%E6%90%9C%E7%B4%A2%E5%B7%A5%E5%85%B7%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>â€‹        åœ¨å‰é¢å·²ç»ä»‹ç»è¿‡äº† <a href="http://wangba.me/2020/09/10/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%BA%8C/">SpringBoot æ•´åˆ JPA </a>äº†ï¼Œä½†æ˜¯ä¸€èˆ¬åœ¨å…¬å¸ä¸šåŠ¡ä¸­ï¼Œå¦‚æœå‡ºç°å¾ˆå¤šæ¬¡å¤šæ¡ä»¶æœç´¢æŸ¥è¯¢çš„æƒ…å†µï¼Œé‚£ä¹ˆå°±ä¼šç”¨å¤§é‡å†—ä½™ä»£ç äº†ï¼›å†ç»“åˆæ³¨è§£çš„æ€æƒ³ã€‚æœ¬æ¬¡å°†å…¬å…±éƒ¨åˆ†æå–å‡ºæ¥ï¼Œå¹¶ç”¨æ³¨è§£çš„æ–¹å¼è¿›è¡Œæ“ä½œï¼Œå¯ä»¥å‚è€ƒå‰é¢ä½¿ç”¨<a href="http://wangba.me/2020/09/03/SpringBoot%E6%95%B4%E5%90%88AOP/">æ³¨è§£è¿›è¡Œ AOP å¤„ç†æ—¥å¿—</a>ï¼Œä¹Ÿç¬¦åˆäº† SpringBoot çš„æ€æƒ³ã€‚</p><h2 id="äºŒã€BaseQuery"><a href="#äºŒã€BaseQuery" class="headerlink" title="äºŒã€BaseQuery"></a>äºŒã€BaseQuery</h2><p><code>QueryWord</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.FIELD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> QueryWord &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ•°æ®åº“ä¸­å­—æ®µå,é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²,åˆ™Queryç±»ä¸­çš„å­—æ®µè¦ä¸æ•°æ®åº“ä¸­å­—æ®µä¸€è‡´</span></span><br><span class="line">    <span class="function">String <span class="title">column</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// equal, like, gt, lt...</span></span><br><span class="line">    <span class="function">MatchType <span class="title">func</span><span class="params">()</span> <span class="keyword">default</span> MatchType.equal</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// objectæ˜¯å¦å¯ä»¥ä¸ºnull</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">nullable</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">false</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­—ç¬¦ä¸²æ˜¯å¦å¯ä¸ºç©º</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">empty</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">false</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// between...and... æŸ¥è¯¢è¯­å¥æ ‡è¯†ï¼Œ 0æ—¶é—´  1æ•°å­—ç±»å‹</span></span><br><span class="line">    <span class="function">BetweenType <span class="title">type</span><span class="params">()</span> <span class="keyword">default</span> BetweenType.datetime</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šæ³¨è§£ç±»ï¼Œåªè¦åœ¨è¦æŸ¥è¯¢çš„å±æ€§ä¸ŠåŠ ä¸Šç›¸åº”çš„æ³¨è§£å³å¯</p></blockquote><p><code>MatchType</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> MatchType &#123;</span><br><span class="line"></span><br><span class="line">    equal,                 <span class="comment">// filed = value</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸‹é¢å››ä¸ªç”¨äºNumberç±»å‹çš„æ¯”è¾ƒ</span></span><br><span class="line">    gt,                     <span class="comment">// filed &gt; value</span></span><br><span class="line">    ge,                     <span class="comment">// field &gt;= value</span></span><br><span class="line">    lt,                     <span class="comment">// field &lt; value</span></span><br><span class="line">    le,                     <span class="comment">// field &lt;= value</span></span><br><span class="line"></span><br><span class="line">    notEqual,               <span class="comment">// field != value</span></span><br><span class="line">    like,                   <span class="comment">// field like value</span></span><br><span class="line">    notLike,                <span class="comment">// field not like value</span></span><br><span class="line">    between,                <span class="comment">// between value1 and value2 ,Type is Date</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸‹é¢å››ä¸ªç”¨äºå¯æ¯”è¾ƒç±»å‹(Comparable)çš„æ¯”è¾ƒ</span></span><br><span class="line">    greaterThan,            <span class="comment">// field &gt; value</span></span><br><span class="line">    greaterThanOrEqualTo,   <span class="comment">// field &gt;= value</span></span><br><span class="line">    lessThan,               <span class="comment">// field &lt; value</span></span><br><span class="line">    lessThanOrEqualTo       <span class="comment">// field &lt;= value</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šæšä¸¾ç±»ï¼Œå¯ä»¥å¯¹æ¯”æ³¨é‡Šè¿›è¡Œç†è§£</p></blockquote><p><code>BetweenType</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span>  BetweenType &#123;</span><br><span class="line"></span><br><span class="line">    datetime,</span><br><span class="line">    number_long,</span><br><span class="line">    number_integer</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šå¯¹åº”ä¸Šé¢ <code>QueryWord</code>ä¸­çš„ BetweenType ï¼Œå¯ä»¥å¯¹æ—¶é—´æˆ–æ•°å­—ä¹‹é—´çš„å±æ€§è¿›è¡Œæ³¨è§£</p></blockquote><p><code>BaseQuery</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseQuery</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¬¬å¤šå°‘é¡µ + é¡µå¤§å°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pageNum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pageSize = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Class, List&lt;Field&gt;&gt; fieldCache = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŠ¨æ€æŸ¥è¯¢</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Specification&lt;T&gt; <span class="title">toSpec</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ†é¡µ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pageable <span class="title">toPageable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> PageRequest.of(pageNum, pageSize);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ†é¡µ + æ’åº</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pageable <span class="title">toPageable</span><span class="params">(Sort sort)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> PageRequest.of(pageNum, pageSize, sort);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŠ¨æ€æŸ¥è¯¢ and è¿æ¥</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Specification&lt;T&gt; <span class="title">toSpecWithAnd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.toSpecWithLogicType(<span class="string">&quot;and&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åŠ¨æ€æŸ¥è¯¢ or è¿æ¥</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Specification&lt;T&gt; <span class="title">toSpecWithOr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.toSpecWithLogicType(<span class="string">&quot;or&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// logicType = or ï½œ and</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&#123; &quot;rawtypes&quot;, &quot;unchecked&quot; &#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Specification&lt;T&gt; <span class="title">toSpecWithLogicType</span><span class="params">(<span class="keyword">final</span> String logicType)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> BaseQuery outerThis = <span class="keyword">this</span>;</span><br><span class="line">        <span class="comment">// å°è£…æ¡ä»¶æŸ¥è¯¢å¯¹è±¡ Specification</span></span><br><span class="line">        Specification&lt;T&gt; specification = <span class="keyword">new</span> Specification&lt;T&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="comment">// Root ç”¨äºè·å–å±æ€§å­—æ®µï¼ŒCriteriaQueryå¯ä»¥ç”¨äºç®€å•æ¡ä»¶æŸ¥è¯¢ï¼ŒCriteriaBuilder ç”¨äºæ„é€ å¤æ‚æ¡ä»¶æŸ¥è¯¢</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Predicate <span class="title">toPredicate</span><span class="params">(Root&lt;T&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb)</span> </span>&#123;</span><br><span class="line">                Class clazz = outerThis.getClass();</span><br><span class="line">                <span class="comment">// åˆ¤æ–­ç¼“å­˜ä¸­æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå­˜åœ¨ä¸éœ€è¦å†æ¬¡ç”Ÿæˆï¼Œä¸å­˜åœ¨éœ€è¦é‡æ–°ç”Ÿæˆ</span></span><br><span class="line">                List&lt;Field&gt; fields = fieldCache.get(clazz);</span><br><span class="line">                <span class="keyword">if</span> (fields == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// è·å–æŸ¥è¯¢ç±»Queryçš„æ‰€æœ‰å­—æ®µ,åŒ…æ‹¬çˆ¶ç±»å­—æ®µ</span></span><br><span class="line">                    fields = getAllFieldsWithRoot(clazz);</span><br><span class="line">                    fieldCache.put(clazz, fields);</span><br><span class="line">                &#125;</span><br><span class="line">                List&lt;Predicate&gt; predicates = <span class="keyword">new</span> ArrayList&lt;&gt;(fields.size());</span><br><span class="line">                <span class="keyword">for</span> (Field field : fields) &#123;</span><br><span class="line">                    <span class="comment">// è·å–å­—æ®µä¸Šçš„ @QueryWord æ³¨è§£</span></span><br><span class="line">                    QueryWord qw = field.getAnnotation(QueryWord.class);</span><br><span class="line">                    <span class="keyword">if</span> (qw == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// è·å–å­—æ®µå</span></span><br><span class="line">                    String column = qw.column();</span><br><span class="line">                    <span class="comment">//å¦‚æœä¸»æ³¨è§£ä¸Š column ä¸ºé»˜è®¤å€¼&quot;&quot;,åˆ™ä»¥ field ä¸ºå‡†</span></span><br><span class="line">                    <span class="keyword">if</span> (column.equals(<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">                        column = field.getName();</span><br><span class="line">                    &#125;</span><br><span class="line">                    field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="comment">// nullable</span></span><br><span class="line">                        Object value = field.get(outerThis);</span><br><span class="line">                        <span class="comment">// å¦‚æœå€¼ä¸º null,æ³¨è§£æœªæ ‡æ³¨ nullable,è·³è¿‡</span></span><br><span class="line">                        <span class="keyword">if</span> (value == <span class="keyword">null</span> &amp;&amp; !qw.nullable()) &#123;</span><br><span class="line">                            <span class="keyword">continue</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// can be empty</span></span><br><span class="line">                        <span class="keyword">if</span> (value != <span class="keyword">null</span> &amp;&amp; String.class.isAssignableFrom(value.getClass())) &#123;</span><br><span class="line">                            String s = (String) value;</span><br><span class="line">                            <span class="comment">//å¦‚æœå€¼ä¸º&quot;&quot;,ä¸”æ³¨è§£æœªæ ‡æ³¨ empty ,è·³è¿‡</span></span><br><span class="line">                            <span class="keyword">if</span> (s.equals(<span class="string">&quot;&quot;</span>) &amp;&amp; !qw.empty()) &#123;</span><br><span class="line">                                <span class="keyword">continue</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">//é€šè¿‡æ³¨è§£ä¸Š func å±æ€§,æ„å»ºè·¯å¾„è¡¨è¾¾å¼</span></span><br><span class="line">                        Path path = root.get(column);</span><br><span class="line">                        <span class="keyword">switch</span> (qw.func()) &#123;</span><br><span class="line">                            <span class="keyword">case</span> equal:</span><br><span class="line">                                predicates.add(cb.equal(path, value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> like:</span><br><span class="line">                                predicates.add(cb.like(path, <span class="string">&quot;%&quot;</span> + value + <span class="string">&quot;%&quot;</span>));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> gt:</span><br><span class="line">                                predicates.add(cb.gt(path, (Number) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> lt:</span><br><span class="line">                                predicates.add(cb.lt(path, (Number) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> ge:</span><br><span class="line">                                predicates.add(cb.ge(path, (Number) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> le:</span><br><span class="line">                                predicates.add(cb.le(path, (Number) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> notEqual:</span><br><span class="line">                                predicates.add(cb.notEqual(path, value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> notLike:</span><br><span class="line">                                predicates.add(cb.notLike(path, <span class="string">&quot;%&quot;</span> + value + <span class="string">&quot;%&quot;</span>));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> greaterThan:</span><br><span class="line">                                predicates.add(cb.greaterThan(path, (Comparable) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> greaterThanOrEqualTo:</span><br><span class="line">                                predicates.add(cb.greaterThanOrEqualTo(path, (Comparable) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> lessThan:</span><br><span class="line">                                predicates.add(cb.lessThan(path, (Comparable) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> lessThanOrEqualTo:</span><br><span class="line">                                predicates.add(cb.lessThanOrEqualTo(path, (Comparable) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> between:</span><br><span class="line">                                <span class="keyword">switch</span> (qw.type()) &#123;</span><br><span class="line">                                    <span class="keyword">case</span> datetime:</span><br><span class="line">                                        List&lt;Date&gt; dateList = (List&lt;Date&gt;) value;</span><br><span class="line">                                        predicates.add(cb.between(path, dateList.get(<span class="number">0</span>), dateList.get(<span class="number">1</span>)));</span><br><span class="line">                                        <span class="keyword">break</span>;</span><br><span class="line">                                    <span class="keyword">case</span> number_long:</span><br><span class="line">                                        List&lt;Long&gt; longList = (List&lt;Long&gt;) value;</span><br><span class="line">                                        predicates.add(cb.between(path, longList.get(<span class="number">0</span>), longList.get(<span class="number">1</span>)));</span><br><span class="line">                                        <span class="keyword">break</span>;</span><br><span class="line">                                    <span class="keyword">case</span> number_integer:</span><br><span class="line">                                        List&lt;Integer&gt; integerList = (List&lt;Integer&gt;) value;</span><br><span class="line">                                        predicates.add(cb.between(path, integerList.get(<span class="number">0</span>), integerList.get(<span class="number">1</span>)));</span><br><span class="line">                                        <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                Predicate p = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">if</span> (logicType == <span class="keyword">null</span> || logicType.equals(<span class="string">&quot;&quot;</span>) || logicType.equals(<span class="string">&quot;and&quot;</span>)) &#123;</span><br><span class="line">                    p = cb.and(predicates.toArray(<span class="keyword">new</span> Predicate[predicates.size()])); <span class="comment">// and è¿æ¥</span></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (logicType.equals(<span class="string">&quot;or&quot;</span>)) &#123;</span><br><span class="line">                    p = cb.or(predicates.toArray(<span class="keyword">new</span> Predicate[predicates.size()]));  <span class="comment">// or è¿æ¥</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> p;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> specification;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–ç±» clazz çš„æ‰€æœ‰ Fieldï¼ŒåŒ…æ‹¬å…¶çˆ¶ç±»çš„ Field</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;Field&gt; <span class="title">getAllFieldsWithRoot</span><span class="params">(Class&lt;?&gt; clazz)</span> </span>&#123;</span><br><span class="line">        List&lt;Field&gt; fieldList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Field[] dFields = clazz.getDeclaredFields(); <span class="comment">//è·å–æœ¬ç±»æ‰€æœ‰å­—æ®µ</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != dFields &amp;&amp; dFields.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            fieldList.addAll(Arrays.asList(dFields));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è‹¥çˆ¶ç±»æ˜¯ Objectï¼Œåˆ™ç›´æ¥è¿”å›å½“å‰ Field åˆ—è¡¨</span></span><br><span class="line">        Class&lt;?&gt; superClass = clazz.getSuperclass();</span><br><span class="line">        <span class="keyword">if</span> (superClass == Object.class) &#123;</span><br><span class="line">            <span class="keyword">return</span> Arrays.asList(dFields);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é€’å½’æŸ¥è¯¢çˆ¶ç±»çš„ Field åˆ—è¡¨</span></span><br><span class="line">        List&lt;Field&gt; superFields = getAllFieldsWithRoot(superClass);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != superFields &amp;&amp; !superFields.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Field field : superFields) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!fieldList.contains(field)) &#123;</span><br><span class="line">                    fieldList.add(field);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fieldList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPageIndex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pageNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPageIndex</span><span class="params">(<span class="keyword">int</span> pageIndex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pageNum = pageIndex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPageSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pageSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPageSize</span><span class="params">(<span class="keyword">int</span> pageSize)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pageSize = pageSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šæœ€å…³é”®çš„ç±»</p><ul><li>æ‰€æœ‰åé¢è¦æŸ¥è¯¢çš„ç±»éƒ½è¦ç»§æ‰¿å®ƒ</li><li>ç®€å•çš„ç†è§£ï¼šé€šè¿‡åå°„è·å–æ³¨è§£ä¸Šçš„å­—æ®µä¿¡æ¯ï¼Œæ„é€ ç›¸åº”çš„æœç´¢æ¡ä»¶</li></ul></blockquote><h2 id="ä¸‰ã€Test"><a href="#ä¸‰ã€Test" class="headerlink" title="ä¸‰ã€Test"></a>ä¸‰ã€Test</h2><p><code>StudentQuery</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentQuery</span> <span class="keyword">extends</span> <span class="title">BaseQuery</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@QueryWord(column = &quot;id&quot;, func = MatchType.equal)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@QueryWord(func = MatchType.like)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// çœç•¥ set / get</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Specification <span class="title">toSpec</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.toSpecWithOr();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼Œä½¿ç”¨çš„æ˜¯ or æŸ¥è¯¢ï¼Œæµ‹è¯•ç±»å¦‚ä¸‹ï¼š</p><p><code>Test</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">find8</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    StudentQuery studentQuery = <span class="keyword">new</span> StudentQuery();</span><br><span class="line">    studentQuery.setId(<span class="number">1L</span>);</span><br><span class="line">    studentQuery.setName(<span class="string">&quot;er&quot;</span>);</span><br><span class="line">    studentQuery.setPageIndex(<span class="number">0</span>);</span><br><span class="line">    studentQuery.setPageSize(<span class="number">10</span>);</span><br><span class="line">    Page page = studentRepository.findAll(studentQuery.toSpec(), studentQuery.toPageable());</span><br><span class="line">    <span class="keyword">for</span> (Object o : page.getContent()) &#123;</span><br><span class="line">        System.out.println(o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šæ„é€ çš„æ¡ä»¶æ˜¯ id = 1çš„ï¼Œæˆ–è€… name = ? er ? çš„ student</p></blockquote><p><code>ç»“æœ</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200914200804.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200914200804.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200914200754861"></p><p>é€šè¿‡è¿™ä¸ªä¾‹å­ç®€å•æ‹ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹ï¼š</p><ol><li>é€šè¿‡ studentQuery.toSpec() è°ƒç”¨çˆ¶ç±» BaseQueryï¼›</li><li>åœ¨ BaseQuery ä¸­ï¼Œé€šè¿‡åå°„è·å¾—æ‰“äº†ç›¸åº”æ³¨è§£ä¸Šçš„å­—æ®µä¿¡æ¯ï¼›</li><li>å°†å­—æ®µä¿¡æ¯åŠ åˆ°æœç´¢æ¡ä»¶ä¸­ï¼Œè¿›è¡Œ or æˆ–è€… and è¿æ¥</li></ol><blockquote><p>æ³¨ï¼šå¦‚æœä½ çš„ä¸šåŠ¡ä¸­åªç”¨äº†å¾ˆå°‘çš„æ¡ä»¶æˆ–è€…åªç”¨æä¸ªåˆ«çš„å¤šæ¡ä»¶æŸ¥è¯¢ï¼Œå¯ä»¥ä¸ç”¨è¿™ä¸ªå·¥å…·ç±»</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆSpring Data JPA(äºŒ)</title>
      <link href="2020/09/10/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%BA%8C/"/>
      <url>2020/09/10/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>â€‹        åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»äº†ä¸€ä¸‹ Spring Data JPA çš„ä¸€ä¸‹ç®€å•çš„ CRUDï¼Œä½†æ˜¯åœ¨å…¬å¸ä¸šåŠ¡ä¸­ï¼Œä¸å¯èƒ½è¿™ä¹ˆç®€å•ï¼›ä¸”åœ¨ä¸šåŠ¡ä¸­å¤§éƒ¨åˆ†éƒ½æ˜¯æŸ¥è¯¢ä¸šåŠ¡ï¼Œå…·ä½“ç‚¹å°±æ˜¯åŠ¨æ€æŸ¥è¯¢ï¼Œä»€ä¹ˆå•è¡¨å¤šæ¡ä»¶æŸ¥è¯¢ã€å¤šè¡¨å¤šæ¡ä»¶æŸ¥è¯¢ç­‰ç­‰â€¦â€¦    </p><blockquote><p>æ³¨ï¼šä½¿ç”¨ç¯å¢ƒè¿˜æ˜¯å’Œä¸Šä¸€ç¯‡ä¸€æ ·</p></blockquote><h2 id="äºŒã€è‡ªå®šä¹‰SQLæŸ¥è¯¢"><a href="#äºŒã€è‡ªå®šä¹‰SQLæŸ¥è¯¢" class="headerlink" title="äºŒã€è‡ªå®šä¹‰SQLæŸ¥è¯¢"></a>äºŒã€è‡ªå®šä¹‰SQLæŸ¥è¯¢</h2><p>å¦‚æœæƒ³å’Œè¿™é‡Œé¢å†™åŸç”Ÿçš„ SQL è¯­å¥ï¼Œåªè¦åœ¨ <strong>repository</strong> ä¸­è¿™æ ·å†™å°±è¡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Query(nativeQuery = true,</span></span><br><span class="line"><span class="meta">        value = &quot;select * from Student where id = ?1&quot;)</span></span><br><span class="line"><span class="function">Student <span class="title">catchAllById</span><span class="params">(Long id)</span></span>;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><ul><li>å¦‚æœè¦å†™åŸç”Ÿ SQLï¼Œ@Query æ³¨è§£ä¸­çš„ nativeQuery è¦è®¾ç½®ä¸º trueï¼Œé»˜è®¤ä¸º false</li><li>å‡½æ•°åè®¾ç½®çš„ä¸èƒ½ä¸è‡ªå¸¦çš„å†²çªï¼Œä¾‹å¦‚ï¼šfindByIdï¼Œå¦‚æœè®¾ç½®äº†ä¸€æ ·ï¼Œå°±ä¼šå¯¼è‡´ä½¿ç”¨çš„è‡ªå¸¦çš„ API è¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œä¸æ˜¯è‡ªå®šä¹‰çš„ï¼Œå¦‚æœçœŸçš„æƒ³ä½¿ç”¨è‡ªå®šä¹‰è¦†ç›–è‡ªå¸¦çš„ï¼Œå¯ä»¥åœ¨å®ä½“ç±»ä¸Šä½¿ç”¨ @NamedQueries æ³¨è§£</li></ul></blockquote><p>åœ¨è¿™é‡Œæˆ‘ä»¬å°±ä½¿ç”¨ @Test è¿›è¡Œæµ‹è¯•ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911110259.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911110259.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911110257151"></p><p>è¿˜æœ‰ä¸€ç§ä½¿ç”¨ JPQL è¯­æ³•çš„æŸ¥è¯¢æ–¹å¼ï¼š</p><p><code>repository:</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Query(value = &quot;select s from Student s where s.name = ?1&quot;)</span></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">catchByName</span><span class="params">(String name)</span></span>;</span><br></pre></td></tr></table></figure><p><code>Test:</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911111044.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911111044.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911111044489"></p><p>å…³äº JPQLï¼šå’Œåœ¨ SQL ä¸­ä¸€æ ·ï¼ŒJPQL ä¸­çš„ select è¯­å¥ç”¨äºæ‰§è¡ŒæŸ¥è¯¢ã€‚å…¶è¯­æ³•å¯è¡¨ç¤ºä¸ºï¼š<br><code>select_clause form_clause [where_clause] [groupby_clause] [having_clause] [orderby_clause]</code></p><p>å…¶ä¸­ï¼š</p><ol><li>from å­å¥æ˜¯æŸ¥è¯¢è¯­å¥çš„å¿…é€‰å­å¥ã€‚</li><li>select ç”¨æ¥æŒ‡å®šæŸ¥è¯¢è¿”å›çš„ç»“æœå®ä½“æˆ–å®ä½“çš„æŸäº›å±æ€§ã€‚</li><li>from å­å¥å£°æ˜æŸ¥è¯¢æºå®ä½“ç±»ï¼Œå¹¶æŒ‡å®šæ ‡è¯†ç¬¦å˜é‡ï¼ˆç›¸å½“äºSQLè¡¨çš„åˆ«åï¼‰ã€‚</li><li>å¦‚æœä¸å¸Œæœ›è¿”å›é‡å¤å®ä½“ï¼Œå¯ä½¿ç”¨å…³é”®å­— distinct ä¿®é¥°ã€‚selectã€from éƒ½æ˜¯ JPQL çš„å…³é”®å­—ï¼Œé€šå¸¸å…¨å¤§å†™æˆ–å…¨å°å†™ï¼Œå»ºè®®ä¸è¦å¤§å°å†™æ··ç”¨ã€‚</li></ol><p>åœ¨ JPQL ä¸­ï¼ŒæŸ¥è¯¢æ‰€æœ‰å®ä½“çš„ JPQL æŸ¥è¯¢è¯­å¥å¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š<br><code>select o from Order o æˆ– select o from Order as o</code><br>è¿™é‡Œå…³é”®å­— as å¯ä»¥çœå»ï¼Œæ ‡è¯†ç¬¦å˜é‡çš„å‘½åè§„èŒƒä¸ Java æ ‡è¯†ç¬¦ç›¸åŒï¼Œä¸”åŒºåˆ†å¤§å°å†™</p><p>æ›´å¤šå‚è€ƒï¼š<a href="https://docs.oracle.com/html/E13946_04/ejb3_langref.html">å®˜ç½‘æ–‡æ¡£</a></p><h2 id="ä¸‰ã€è‡ªå®šä¹‰ç®€å•æŸ¥è¯¢"><a href="#ä¸‰ã€è‡ªå®šä¹‰ç®€å•æŸ¥è¯¢" class="headerlink" title="ä¸‰ã€è‡ªå®šä¹‰ç®€å•æŸ¥è¯¢"></a>ä¸‰ã€è‡ªå®šä¹‰ç®€å•æŸ¥è¯¢</h2><p>åœ¨ Spring Data JPA çš„<a href="https://docs.spring.io/spring-data/jpa/docs/2.3.3.RELEASE/reference/html/#jpa.named-parameters">å®˜ç½‘</a>ä¹Ÿä»‹ç»äº†è¿™ç§æ–¹å¼ï¼Œä¸€èˆ¬è¿™ç§æ–¹å¼åœ¨ä¸€äº›å°é¡¹ç›®ä¸­ä¹Ÿç»å¸¸ä½¿ç”¨ï¼š</p><table><thead><tr><th align="center">Keyword</th><th align="center">Sample</th><th align="center">JPQL snippet</th></tr></thead><tbody><tr><td align="center"><code>And</code></td><td align="center"><code>findByLastnameAndFirstname</code></td><td align="center"><code>â€¦ where x.lastname = ?1 and x.firstname = ?2</code></td></tr><tr><td align="center"><code>Or</code></td><td align="center"><code>findByLastnameOrFirstname</code></td><td align="center"><code>â€¦ where x.lastname = ?1 or x.firstname = ?2</code></td></tr><tr><td align="center"><code>Is</code>, <code>Equals</code></td><td align="center"><code>findByFirstname</code>,<code>findByFirstnameIs</code>,<code>findByFirstnameEquals</code></td><td align="center"><code>â€¦ where x.firstname = ?1</code></td></tr><tr><td align="center"><code>Between</code></td><td align="center"><code>findByStartDateBetween</code></td><td align="center"><code>â€¦ where x.startDate between ?1 and ?2</code></td></tr><tr><td align="center"><code>LessThan</code></td><td align="center"><code>findByAgeLessThan</code></td><td align="center"><code>â€¦ where x.age &lt; ?1</code></td></tr><tr><td align="center"><code>LessThanEqual</code></td><td align="center"><code>findByAgeLessThanEqual</code></td><td align="center"><code>â€¦ where x.age &lt;= ?1</code></td></tr><tr><td align="center"><code>GreaterThan</code></td><td align="center"><code>findByAgeGreaterThan</code></td><td align="center"><code>â€¦ where x.age &gt; ?1</code></td></tr><tr><td align="center"><code>GreaterThanEqual</code></td><td align="center"><code>findByAgeGreaterThanEqual</code></td><td align="center"><code>â€¦ where x.age &gt;= ?1</code></td></tr><tr><td align="center"><code>After</code></td><td align="center"><code>findByStartDateAfter</code></td><td align="center"><code>â€¦ where x.startDate &gt; ?1</code></td></tr><tr><td align="center"><code>Before</code></td><td align="center"><code>findByStartDateBefore</code></td><td align="center"><code>â€¦ where x.startDate &lt; ?1</code></td></tr><tr><td align="center"><code>IsNull</code>, <code>Null</code></td><td align="center"><code>findByAge(Is)Null</code></td><td align="center"><code>â€¦ where x.age is null</code></td></tr><tr><td align="center"><code>IsNotNull</code>, <code>NotNull</code></td><td align="center"><code>findByAge(Is)NotNull</code></td><td align="center"><code>â€¦ where x.age not null</code></td></tr><tr><td align="center"><code>Like</code></td><td align="center"><code>findByFirstnameLike</code></td><td align="center"><code>â€¦ where x.firstname like ?1</code></td></tr><tr><td align="center"><code>NotLike</code></td><td align="center"><code>findByFirstnameNotLike</code></td><td align="center"><code>â€¦ where x.firstname not like ?1</code></td></tr><tr><td align="center"><code>StartingWith</code></td><td align="center"><code>findByFirstnameStartingWith</code></td><td align="center"><code>â€¦ where x.firstname like ?1</code> (parameter bound with appended <code>%</code>)</td></tr><tr><td align="center"><code>EndingWith</code></td><td align="center"><code>findByFirstnameEndingWith</code></td><td align="center"><code>â€¦ where x.firstname like ?1</code> (parameter bound with prepended <code>%</code>)</td></tr><tr><td align="center"><code>Containing</code></td><td align="center"><code>findByFirstnameContaining</code></td><td align="center"><code>â€¦ where x.firstname like ?1</code> (parameter bound wrapped in <code>%</code>)</td></tr><tr><td align="center"><code>OrderBy</code></td><td align="center"><code>findByAgeOrderByLastnameDesc</code></td><td align="center"><code>â€¦ where x.age = ?1 order by x.lastname desc</code></td></tr><tr><td align="center"><code>Not</code></td><td align="center"><code>findByLastnameNot</code></td><td align="center"><code>â€¦ where x.lastname &lt;&gt; ?1</code></td></tr><tr><td align="center"><code>In</code></td><td align="center"><code>findByAgeIn(Collection&lt;Age&gt; ages)</code></td><td align="center"><code>â€¦ where x.age in ?1</code></td></tr><tr><td align="center"><code>NotIn</code></td><td align="center"><code>findByAgeNotIn(Collection&lt;Age&gt; ages)</code></td><td align="center"><code>â€¦ where x.age not in ?1</code></td></tr><tr><td align="center"><code>True</code></td><td align="center"><code>findByActiveTrue()</code></td><td align="center"><code>â€¦ where x.active = true</code></td></tr><tr><td align="center"><code>False</code></td><td align="center"><code>findByActiveFalse()</code></td><td align="center"><code>â€¦ where x.active = false</code></td></tr><tr><td align="center"><code>IgnoreCase</code></td><td align="center"><code>findByFirstnameIgnoreCase</code></td><td align="center"><code>â€¦ where UPPER(x.firstame) = UPPER(?1)</code></td></tr></tbody></table><p>åŸç†å¤§æ¦‚å¦‚ä¸‹ï¼š</p><p><strong>å‡å¦‚åˆ›å»ºå¦‚ä¸‹çš„æŸ¥è¯¢ï¼š<code>findByUserDepUuid()</code>ï¼Œæ¡†æ¶åœ¨è§£æè¯¥æ–¹æ³•æ—¶ï¼Œé¦–å…ˆå‰”é™¤ findByï¼Œç„¶åå¯¹å‰©ä¸‹çš„å±æ€§è¿›è¡Œè§£æ</strong></p><ol><li>å…ˆåˆ¤æ–­ userDepUuid ï¼ˆæ ¹æ® POJO è§„èŒƒï¼Œé¦–å­—æ¯å˜ä¸ºå°å†™ï¼‰æ˜¯å¦ä¸ºæŸ¥è¯¢å®ä½“çš„ä¸€ä¸ªå±æ€§ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¡¨ç¤ºæ ¹æ®è¯¥å±æ€§è¿›è¡ŒæŸ¥è¯¢ï¼›å¦‚æœæ²¡æœ‰è¯¥å±æ€§ï¼Œç»§ç»­ç¬¬äºŒæ­¥ï¼›</li><li>ä»å³å¾€å·¦æˆªå–ç¬¬ä¸€ä¸ªå¤§å†™å­—æ¯å¼€å¤´çš„å­—ç¬¦ä¸²æ­¤å¤„ä¸ºUuidï¼‰ï¼Œç„¶åæ£€æŸ¥å‰©ä¸‹çš„å­—ç¬¦ä¸²æ˜¯å¦ä¸ºæŸ¥è¯¢å®ä½“çš„ä¸€ä¸ªå±æ€§ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¡¨ç¤ºæ ¹æ®è¯¥å±æ€§è¿›è¡ŒæŸ¥è¯¢ï¼›å¦‚æœæ²¡æœ‰è¯¥å±æ€§ï¼Œåˆ™é‡å¤ç¬¬äºŒæ­¥ï¼Œç»§ç»­ä»å³å¾€å·¦æˆªå–ï¼›æœ€åå‡è®¾userä¸ºæŸ¥è¯¢å®ä½“çš„ä¸€ä¸ªå±æ€§ï¼›</li><li>æ¥ç€å¤„ç†å‰©ä¸‹éƒ¨åˆ†ï¼ˆDepUuidï¼‰ï¼Œå…ˆåˆ¤æ–­ user æ‰€å¯¹åº”çš„ç±»å‹æ˜¯å¦æœ‰depUuidå±æ€§ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è¡¨ç¤ºè¯¥æ–¹æ³•æœ€ç»ˆæ˜¯æ ¹æ® <code>Doc.user.depUuid</code> çš„å–å€¼è¿›è¡ŒæŸ¥è¯¢ï¼›å¦åˆ™ç»§ç»­æŒ‰ç…§æ­¥éª¤ 2 çš„è§„åˆ™ä»å³å¾€å·¦æˆªå–ï¼Œæœ€ç»ˆè¡¨ç¤ºæ ¹æ® <code>Doc.user.dep.uuid</code> çš„å€¼è¿›è¡ŒæŸ¥è¯¢ã€‚</li><li>å¯èƒ½ä¼šå­˜åœ¨ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚ DocåŒ…å«ä¸€ä¸ª user çš„å±æ€§ï¼Œä¹Ÿæœ‰ä¸€ä¸ª userDep å±æ€§ï¼Œæ­¤æ—¶ä¼šå­˜åœ¨æ··æ·†ã€‚å¯ä»¥æ˜ç¡®åœ¨å±æ€§ä¹‹é—´åŠ ä¸Š â€œ_â€ ä»¥æ˜¾å¼è¡¨è¾¾æ„å›¾ï¼Œæ¯”å¦‚ <code>findByUser_DepUuid()</code> æˆ–è€… <code>findByUserDep_uuid()</code></li></ol><p><code>repository:</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByName</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByNameAndPwd</span><span class="params">(String name, String pwd)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByNameStartingWith</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByNameEndingWith</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByNameContaining</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByNameContainingOrderByIdDesc</span><span class="params">(String name)</span></span>;</span><br></pre></td></tr></table></figure><p><code>test:</code></p><p><strong>findByName</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112401.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112401.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911112401002"></p><p><strong>findByNameAndPwd</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112633.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112633.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911112633532"></p><p><strong>findByNameStartingWith</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112706.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112706.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911112706325"></p><p><strong>findByNameEndingWith</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112749.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112749.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911112749472"></p><p><strong>findByNameContaining</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112818.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112818.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911112818300"></p><p><strong>findByNameContainingOrderByIdDesc</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911120538.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911120538.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911120538084"></p><h2 id="å››ã€åˆ†é¡µæŸ¥è¯¢"><a href="#å››ã€åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="å››ã€åˆ†é¡µæŸ¥è¯¢"></a>å››ã€åˆ†é¡µæŸ¥è¯¢</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†é¡µ + æ’åº</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">find6</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Sort sort = Sort.by(Sort.Direction.DESC, <span class="string">&quot;id&quot;</span>);</span><br><span class="line">    PageRequest pageRequest = PageRequest.of(<span class="number">0</span>, <span class="number">2</span>, sort);</span><br><span class="line">    Page&lt;Student&gt; studentPage = studentRepository.findAll(pageRequest);</span><br><span class="line">    <span class="keyword">for</span> (Student student : studentPage.getContent()) &#123;</span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><ul><li>Sort.by(æ’åºæ–¹å¼, æ’åºå­—æ®µ)</li><li>PageRequest.of(ç¬¬å¤šå°‘é¡µï¼Œé¡µå¤§å°)    â€”â€”â€“&gt;     ä¸€èˆ¬æ˜¯å†™ä¸€ä¸ª PageUtils</li></ul></blockquote><p><code>Test</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911142717.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911142717.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911142717361"></p><h2 id="äº”ã€åŠ¨æ€æŸ¥è¯¢"><a href="#äº”ã€åŠ¨æ€æŸ¥è¯¢" class="headerlink" title="äº”ã€åŠ¨æ€æŸ¥è¯¢"></a>äº”ã€åŠ¨æ€æŸ¥è¯¢</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†é¡µ + æ’åº + æœç´¢</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">find7</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    PageRequest pageRequest = PageRequest.of(<span class="number">0</span>, <span class="number">2</span>, Sort.by(Sort.Direction.DESC, <span class="string">&quot;id&quot;</span>));</span><br><span class="line">    Specification&lt;Student&gt; specification = <span class="keyword">new</span> Specification&lt;Student&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Predicate <span class="title">toPredicate</span><span class="params">(Root&lt;Student&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// å¢åŠ æœç´¢æ¡ä»¶: id &lt;= 5</span></span><br><span class="line">            Predicate predicate = criteriaBuilder.lessThanOrEqualTo(root.get(<span class="string">&quot;id&quot;</span>), <span class="number">5</span>);</span><br><span class="line">            <span class="keyword">return</span> predicate;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Page&lt;Student&gt; studentPage = studentRepository.findAll(specification, pageRequest);</span><br><span class="line">    <span class="keyword">for</span> (Student student : studentPage.getContent()) &#123;</span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><ul><li><p>root: ä»£è¡¨æŸ¥è¯¢çš„å®ä½“ç±»</p></li><li><p>query: å¯ä»¥ä»ä¸­å¾—åˆ° Root å¯¹è±¡</p></li><li><p>criteriaBuilder: ç”¨äºåˆ›å»º Criteria ç›¸å…³å¯¹è±¡çš„å·¥å‚</p></li><li><p>Predicate: ä»£è¡¨ä¸€ä¸ªæŸ¥è¯¢æ¡ä»¶</p></li></ul></blockquote><p><code>Test:</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911143430.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911143430.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911143430602"></p><p><code>å¤šæ¡ä»¶ï¼š</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†é¡µ + æ’åº + æœç´¢</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">find7</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    PageRequest pageRequest = PageRequest.of(<span class="number">0</span>, <span class="number">10</span>, Sort.by(Sort.Direction.DESC, <span class="string">&quot;id&quot;</span>));</span><br><span class="line">    List&lt;Predicate&gt; predicateList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    Specification&lt;Student&gt; specification = <span class="keyword">new</span> Specification&lt;Student&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Predicate <span class="title">toPredicate</span><span class="params">(Root&lt;Student&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder)</span> </span>&#123;</span><br><span class="line">            predicateList.add(criteriaBuilder.lessThanOrEqualTo(root.get(<span class="string">&quot;id&quot;</span>), <span class="number">5</span>));</span><br><span class="line">            predicateList.add(criteriaBuilder.like(root.get(<span class="string">&quot;name&quot;</span>), <span class="string">&quot;%&quot;</span> + <span class="string">&quot;er&quot;</span>));</span><br><span class="line">            <span class="keyword">return</span> criteriaBuilder.and(predicateList.toArray(<span class="keyword">new</span> Predicate[predicateList.size()]));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Page&lt;Student&gt; studentPage = studentRepository.findAll(specification, pageRequest);</span><br><span class="line">    <span class="keyword">for</span> (Student student : studentPage.getContent()) &#123;</span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Test:</code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911150134.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911150134.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911150134356"></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆSpring Data JPA(ä¸€)</title>
      <link href="2020/09/10/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%B8%80/"/>
      <url>2020/09/10/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><blockquote><p>JPA(Java Persistence API)æ˜¯Sunå®˜æ–¹æå‡ºçš„JavaæŒä¹…åŒ–è§„èŒƒã€‚å®ƒä¸ºJavaå¼€å‘äººå‘˜æä¾›äº†ä¸€ç§å¯¹è±¡/å…³è”æ˜ å°„å·¥å…·æ¥ç®¡ç†Javaåº”ç”¨ä¸­çš„å…³ç³»æ•°æ®ã€‚</p></blockquote><p>Spring Data JPA æ˜¯ Spring åŸºäº ORM æ¡†æ¶ã€JPA è§„èŒƒçš„åŸºç¡€ä¸Šå°è£…çš„ä¸€å¥—JPAåº”ç”¨æ¡†æ¶ï¼Œå¯ä½¿å¼€å‘è€…ç”¨æç®€çš„ä»£ç å³å¯å®ç°å¯¹æ•°æ®çš„è®¿é—®å’Œæ“ä½œã€‚å®ƒæä¾›äº†åŒ…æ‹¬å¢åˆ æ”¹æŸ¥ç­‰åœ¨å†…çš„å¸¸ç”¨åŠŸèƒ½ï¼Œä¸”æ˜“äºæ‰©å±•ï¼å­¦ä¹ å¹¶ä½¿ç”¨ Spring Data JPA å¯ä»¥æå¤§æé«˜å¼€å‘æ•ˆç‡ï¼</p><blockquote><p>spring data jpaè®©æˆ‘ä»¬è§£è„±äº†DAOå±‚çš„æ“ä½œï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰CRUDéƒ½å¯ä»¥ä¾èµ–äºå®ƒæ¥å®ç°</p></blockquote><h2 id="äºŒã€ç¯å¢ƒæ­å»º"><a href="#äºŒã€ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€ç¯å¢ƒæ­å»º"></a>äºŒã€ç¯å¢ƒæ­å»º</h2><p><code>pom.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>application.properties</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/jpa</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string"></span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line"><span class="meta">spring.jpa.database</span>=<span class="string">mysql</span></span><br><span class="line"><span class="comment"># æ˜¯å¦åœ¨æ§åˆ¶å°æ‰“å° sql è¯­å¥</span></span><br><span class="line"><span class="meta">spring.jpa.show-sql</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨ InnoDB ä½œä¸ºå¼•æ“ </span></span><br><span class="line"><span class="meta">spring.jpa.database-platform</span>=<span class="string">org.hibernate.dialect.MySQL5InnoDBDialect</span></span><br><span class="line"><span class="comment"># æ¯æ¬¡å¯åŠ¨éƒ½ä¼šæ›´æ–°æ•°æ®åº“ï¼Œå¦‚ï¼šå¢åŠ å­—æ®µç­‰ï¼Œä½†æ˜¯å¯¹æŸä¸ªå­—æ®µè¿›è¡Œæ”¹é€ æ˜¯è¯†åˆ«ä¸å‡ºæ¥</span></span><br><span class="line"><span class="meta">spring.jpa.hibernate.ddl-auto</span>=<span class="string">update</span></span><br></pre></td></tr></table></figure><p><code>entiy</code></p><p><strong>Student</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;student&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;id&quot;, columnDefinition = &quot;INT UNSIGNED COMMENT &#x27;è‡ªå¢ä¸»é”®&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;name&quot;, columnDefinition = &quot;VARCHAR(50) NOT NULL COMMENT &#x27;ç”¨æˆ·å&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;pwd&quot;, columnDefinition = &quot;VARCHAR(100) DEFAULT NULL COMMENT &#x27;å¯†ç &#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// çœç•¥ set get</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Grade</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;grade&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Grade</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;id&quot;, columnDefinition = &quot;INT UNSIGNED COMMENT &#x27;è‡ªå¢ä¸»é”®&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;subject&quot;, columnDefinition = &quot;VARCHAR(50) NOT NULL COMMENT &#x27;å­¦ç§‘&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subject;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;score&quot;, columnDefinition = &quot;TINYINT UNSIGNED NOT NULL COMMENT &#x27;æˆç»©&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String score;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœç•¥ set get</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šè¿™æ¬¡ä½¿ç”¨ä¸¤ä¸ªè¡¨ï¼Œä¸ºäº†åé¢è¿›è¡Œå¤æ‚æŸ¥è¯¢å‡†å¤‡ï¼Œè¿™é‡Œçš„å°†ä¸¤ä¸ªè¡¨çš„è‡ªå¢ id å…³è”åœ¨ä¸€èµ·ï¼Œå°±ä¸è€ƒè™‘å¤šå¯¹å¤šäº†</p></blockquote><p><code>repository</code></p><p><strong>StudentRepository</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Student</span>, <span class="title">Long</span>&gt;, <span class="title">JpaSpecificationExecutor</span>&lt;<span class="title">Student</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>GradeRepository</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">GradeRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Grade</span>, <span class="title">Long</span>&gt;, <span class="title">JpaSpecificationExecutor</span>&lt;<span class="title">Grade</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ä¸Šæ¬¡ aop é‚£é‡Œé¢å°±æè¿‡ï¼Œç”±äºç»§æ‰¿çš„æœ‰ CRUD çš„ repository å’Œä¸€äº›å…¶ä»–çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸Šé¢æåˆ°çš„è§£æ”¾ DAO å±‚çš„æ“ä½œï¼Œå…·ä½“çš„å¯ä»¥çœ‹ä¸‹å›¾</p></blockquote><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910145019.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910145019.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910145019869" style="zoom:150%;" /><h2 id="ä¸‰ã€CRUD"><a href="#ä¸‰ã€CRUD" class="headerlink" title="ä¸‰ã€CRUD"></a>ä¸‰ã€CRUD</h2><p><code>controller</code></p><p><strong>GradeController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/grade&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GradeController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> GradeRepository gradeRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGradeRepository</span><span class="params">(GradeRepository gradeRepository)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.gradeRepository = gradeRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Grade <span class="title">add</span><span class="params">(<span class="meta">@RequestBody</span> Grade grade)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> gradeRepository.save(grade);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/query&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Grade&gt; <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> gradeRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Grade <span class="title">update</span><span class="params">(<span class="meta">@RequestBody</span> Grade grade)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> gradeRepository.save(grade);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="meta">@RequestParam</span> Long id)</span> </span>&#123;</span><br><span class="line">        gradeRepository.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>StudentController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/student&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> StudentRepository studentRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStudentRepository</span><span class="params">(StudentRepository studentRepository)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.studentRepository = studentRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">add</span><span class="params">(<span class="meta">@RequestBody</span> Student student)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentRepository.save(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/query&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">update</span><span class="params">(<span class="meta">@RequestBody</span> Student student)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentRepository.save(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="meta">@RequestParam</span> Long id)</span> </span>&#123;</span><br><span class="line">        studentRepository.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><ul><li><p>Spring å»ºè®®åœ¨è¿™é‡Œçš„æ³¨å…¥æ–¹å¼æ˜¯ set æˆ–è€… æ„é€ æ³¨å…¥ï¼Œä¸è¦ç›´æ¥æ³¨è§£æ³¨å…¥</p></li><li><p>ä¸ºäº†æ–¹ä¾¿ï¼Œåœ¨è¿™é‡Œè¿˜æ˜¯çœç•¥äº† Service å±‚çš„æ“ä½œ</p></li></ul></blockquote><p><code>Postmanæµ‹è¯•</code></p><p><code>å¢</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150238.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150238.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150238245"></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150312.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150312.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150312117"></p><p><code>æŸ¥</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150428.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150428.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150428435"></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150520.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150520.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150520147"></p><p><code>æ”¹</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150633.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150633.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150633346"></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150752.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150752.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150751979"></p><p><code>åˆ </code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150920.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150920.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150920385"></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910151023.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910151023.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910151023629"></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆMyBatis</title>
      <link href="2020/09/09/SpringBoot%E6%95%B4%E5%90%88MyBatis/"/>
      <url>2020/09/09/SpringBoot%E6%95%B4%E5%90%88MyBatis/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>â€‹    åœ¨ä¸Šç¯‡æ–‡ç« ä¸­å·²ç»ç®€å•çš„å†™è¿‡ SpringBoot æ•´åˆ JDBCTemplate äº†ï¼Œä½†æ˜¯ç°åœ¨çš„å…¬å¸åº”è¯¥å¾ˆå°‘æœ‰ç”¨ JDBCTemplateï¼Œå›½å†…ä¸€èˆ¬éƒ½æ˜¯ MyBatis æˆ–è€…æ˜¯ Spring Data JPAï¼Œåœ¨æœ¬ç¯‡æ–‡ç« ä¸­å°±æ¥æ•´åˆä¸€ä¸‹ MyBatisã€‚</p><h2 id="äºŒã€ç¯å¢ƒæ­å»º"><a href="#äºŒã€ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€ç¯å¢ƒæ­å»º"></a>äºŒã€ç¯å¢ƒæ­å»º</h2><p>æ–°å»º SpringBoot é¡¹ç›®ï¼Œé€‰ä¸Š Webã€MySQLï¼Œåœ¨ pom.xml  ä¸­é…ç½®ä¸€ä¸‹æ•°æ®åº“è¿æ¥æ± ï¼š</p><p><code>pom.xml:</code>  </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.23<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>application.properties:</code> </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.type</span>=<span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/test</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string"></span></span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€CRUD"><a href="#ä¸‰ã€CRUD" class="headerlink" title="ä¸‰ã€CRUD"></a>ä¸‰ã€CRUD</h2><p><code>UserMapper:</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">      <span class="comment">// å¢</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into mybatis(name, password) values(#&#123;name&#125;, #&#123;password&#125;)&quot;)</span></span><br><span class="line">    <span class="meta">@SelectKey(statement = &quot;select last_insert_id()&quot;, keyProperty = &quot;id&quot;, before = false, resultType = Long.class)</span></span><br><span class="line">    <span class="function">Integer <span class="title">insert</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// æŸ¥</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from mybatis&quot;)</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">queryAllUser</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">            @Result(property = &quot;id&quot;, column = &quot;i&quot;),</span></span><br><span class="line"><span class="meta">            @Result(property = &quot;name&quot;, column = &quot;n&quot;),</span></span><br><span class="line"><span class="meta">            @Result(property = &quot;password&quot;, column = &quot;p&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="meta">@Select(&quot;select id as i, name as n, password as p from mybatis where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">User <span class="title">queryById</span><span class="params">(Long id)</span></span>;</span><br><span class="line">    </span><br><span class="line">   <span class="comment">// æ”¹</span></span><br><span class="line">    <span class="meta">@Update(&quot;update mybatis set name = #&#123;name&#125;, password = #&#123;password&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">Integer <span class="title">update</span><span class="params">(User user)</span></span>;</span><br><span class="line">    </span><br><span class="line">   <span class="comment">// åˆ </span></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from mybatis where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">Integer <span class="title">delete</span><span class="params">(Long id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><ul><li><p>å¦‚æœä¸ä½¿ç”¨æ³¨è§£çš„æ–¹å¼ï¼Œå°±è¦ä½¿ç”¨ xml çš„æ–¹å¼ï¼Œæ³¨æ„å…¶ä¸­çš„èµ„æºè§£æé—®é¢˜ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p><code>å¢åŠ </code> </p><ul><li>statementæ˜¯è¦è¿è¡Œçš„SQLè¯­å¥ï¼Œå®ƒçš„è¿”å›å€¼é€šè¿‡resultTypeæ¥æŒ‡å®š</li><li>beforeè¡¨ç¤ºæŸ¥è¯¢è¯­å¥statementè¿è¡Œçš„æ—¶æœº</li><li>keyPropertyè¡¨ç¤ºæŸ¥è¯¢ç»“æœèµ‹å€¼ç»™ä»£ç ä¸­çš„å“ªä¸ªå¯¹è±¡ï¼ŒkeyColumnè¡¨ç¤ºå°†æŸ¥è¯¢ç»“æœèµ‹å€¼ç»™æ•°æ®åº“è¡¨ä¸­å“ªä¸€åˆ—</li><li>keyPropertyå’ŒkeyColumnéƒ½ä¸æ˜¯å¿…éœ€çš„ï¼Œæœ‰æ²¡æœ‰éƒ½å¯ä»¥</li><li>before=trueï¼Œæ’å…¥ä¹‹å‰è¿›è¡ŒæŸ¥è¯¢ï¼Œå¯ä»¥å°†æŸ¥è¯¢ç»“æœèµ‹ç»™keyPropertyå’ŒkeyColumnï¼Œèµ‹ç»™keyColumnç›¸å½“äºæ›´æ”¹æ•°æ®åº“</li><li>befaore=falseï¼Œå…ˆæ’å…¥ï¼Œå†æŸ¥è¯¢ï¼Œè¿™æ—¶åªèƒ½å°†ç»“æœèµ‹ç»™keyProperty</li><li>èµ‹å€¼ç»™keyPropertyç”¨æ¥â€œè¯»â€æ•°æ®åº“ï¼Œèµ‹å€¼ç»™keyColumnç”¨æ¥å†™æ•°æ®åº“</li><li>selectKeyçš„ä¸¤å¤§ä½œç”¨ï¼š1ã€ç”Ÿæˆä¸»é”®ï¼›2ã€è·å–åˆšåˆšæ’å…¥æ•°æ®çš„ä¸»é”®ã€‚</li><li>ä½¿ç”¨selectKeyï¼Œå¹¶ä¸”ä½¿ç”¨MySQLçš„last_insert_id()å‡½æ•°æ—¶ï¼Œbeforeå¿…ä¸ºfalseï¼Œä¹Ÿå°±æ˜¯è¯´å¿…é¡»å…ˆæ’å…¥ç„¶åæ‰§è¡Œlast_insert_id()æ‰èƒ½è·å¾—åˆšåˆšæ’å…¥æ•°æ®çš„IDã€‚</li><li>å‚è€ƒé“¾æ¥ï¼š<a href="https://www.cnblogs.com/weiyinfu/p/6835301.html#3">@SelectKeyæ³¨è§£</a></li></ul><p><code>æŸ¥</code></p><ul><li>@Resultsæ³¨è§£ç±»ä¼¼äºXMLä¸­çš„ResultMapæ˜ å°„æ–‡ä»¶</li></ul></blockquote><p><code>UserController:</code> ä¸ºäº†æ–¹ä¾¿å°±ä¸å†å†™ Service å±‚äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserMapper</span><span class="params">(UserMapper userMapper)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userMapper = userMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/insert&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.insert(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/query&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">queryAllUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.queryAllUser();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/query1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.queryById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.update(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">delete</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.delete(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Postman æµ‹è¯•ï¼š</code> </p><p>å¢åŠ ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152447.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152447.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909152436340"></p><p>æŸ¥è¯¢æ‰€æœ‰ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152617.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152617.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909152617644"></p><p>é€šè¿‡ id æŸ¥è¯¢ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152702.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152702.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909152702160"></p><p>æ›´æ–°ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152910.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152910.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909152910165"></p><p>æŸ¥çœ‹ä¸€ä¸‹æ•°æ®åº“ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152940.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152940.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909152940948"></p><p>åˆ é™¤ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909153038.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909153038.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909153032470"></p><p>æŸ¥çœ‹ä¸€ä¸‹æ•°æ®åº“ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909153131.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909153131.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909153131838"></p><blockquote><p>ä½¿ç”¨æ³¨è§£è¿›è¡ŒåŠ¨æ€æŸ¥è¯¢å…·ä½“å¯ä»¥å‚è€ƒï¼š<a href="https://mybatis.org/mybatis-3/zh/java-api.html">æ³¨è§£ç‰ˆåŠ¨æ€æŸ¥è¯¢</a></p><p>ä½¿ç”¨ xml æ–¹å¼è¿›è¡ŒåŠ¨æ€æŸ¥è¯¢å¯ä»¥å‚è€ƒï¼š<a href="https://mybatis.org/mybatis-3/zh/dynamic-sql.html">xml ç‰ˆåŠ¨æ€æŸ¥è¯¢</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆJDBCTemplate</title>
      <link href="2020/09/08/SpringBoot%E6%95%B4%E5%90%88JDBCTemplate/"/>
      <url>2020/09/08/SpringBoot%E6%95%B4%E5%90%88JDBCTemplate/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€ç¯å¢ƒæ­å»º"><a href="#ä¸€ã€ç¯å¢ƒæ­å»º" class="headerlink" title="ä¸€ã€ç¯å¢ƒæ­å»º"></a>ä¸€ã€ç¯å¢ƒæ­å»º</h2><h3 id="1-å¼•å…¥ä¾èµ–"><a href="#1-å¼•å…¥ä¾èµ–" class="headerlink" title="1. å¼•å…¥ä¾èµ–"></a>1. å¼•å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">// WEB</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//  JDBC </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨ Swagger è¿›è¡Œæ¥å£æµ‹è¯•</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// mysql</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span></span><br><span class="line">// druid</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.23<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-æ•°æ®åº“è„šæœ¬"><a href="#2-æ•°æ®åº“è„šæœ¬" class="headerlink" title="2.æ•°æ®åº“è„šæœ¬"></a>2.æ•°æ®åº“è„šæœ¬</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`sys_user`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`sys_user`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">&#x27;ç¼–å·&#x27;</span>,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">  <span class="string">`nick_name`</span> <span class="built_in">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æ˜µç§°&#x27;</span>,</span><br><span class="line">  <span class="string">`avatar`</span> <span class="built_in">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;å¤´åƒ&#x27;</span>,</span><br><span class="line">  <span class="string">`password`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">  <span class="string">`salt`</span> <span class="built_in">varchar</span>(<span class="number">40</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;åŠ å¯†ç›&#x27;</span>,</span><br><span class="line">  <span class="string">`email`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;é‚®ç®±&#x27;</span>,</span><br><span class="line">  <span class="string">`mobile`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æ‰‹æœºå·&#x27;</span>,</span><br><span class="line">  <span class="string">`status`</span> <span class="built_in">tinyint</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;çŠ¶æ€  0ï¼šç¦ç”¨   1ï¼šæ­£å¸¸&#x27;</span>,</span><br><span class="line">  <span class="string">`dept_id`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æœºæ„ID&#x27;</span>,</span><br><span class="line">  <span class="string">`create_by`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;åˆ›å»ºäºº&#x27;</span>,</span><br><span class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="string">`last_update_by`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æ›´æ–°äºº&#x27;</span>,</span><br><span class="line">  <span class="string">`last_update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="string">`del_flag`</span> <span class="built_in">tinyint</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æ˜¯å¦åˆ é™¤  -1ï¼šå·²åˆ é™¤  0ï¼šæ­£å¸¸&#x27;</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`name`</span> (<span class="string">`name`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">34</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8 <span class="keyword">COMMENT</span>=<span class="string">&#x27;ç”¨æˆ·ç®¡ç†&#x27;</span>;</span><br></pre></td></tr></table></figure><p><code>application.properties:</code> </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.type</span>=<span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/test</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">******</span></span><br></pre></td></tr></table></figure><h2 id="äºŒã€CRUD"><a href="#äºŒã€CRUD" class="headerlink" title="äºŒã€CRUD"></a>äºŒã€CRUD</h2><h3 id="1-ç¼–å†™å¯¹åº”çš„å®ä½“ç±»"><a href="#1-ç¼–å†™å¯¹åº”çš„å®ä½“ç±»" class="headerlink" title="1.ç¼–å†™å¯¹åº”çš„å®ä½“ç±»"></a>1.ç¼–å†™å¯¹åº”çš„å®ä½“ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysUser</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String nickName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String avatar;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String salt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String mobile;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Byte status;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long deptId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String createBy;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String lastUpdateBy;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date lastUpdateTime;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Byte delFlag;</span><br><span class="line">  </span><br><span class="line">   <span class="comment">// set å’Œ get çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-ç¼–å†™å¯¹åº”çš„-CRUD-Repository"><a href="#2-ç¼–å†™å¯¹åº”çš„-CRUD-Repository" class="headerlink" title="2.ç¼–å†™å¯¹åº”çš„ CRUD Repository"></a>2.ç¼–å†™å¯¹åº”çš„ CRUD Repository</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysUserRepository</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert</span><span class="params">(SysUser user)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;insert into sys_user(id, name, password) values(?,?,?)&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.update(sql, user.getId(), user.getName(), user.getPassword());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert1</span><span class="params">(SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;insert into sys_user(id, name, password) values(:id, :name, :password)&quot;</span>;</span><br><span class="line">        NamedParameterJdbcTemplate namedParameterJdbcTemplate = <span class="keyword">new</span> NamedParameterJdbcTemplate(<span class="keyword">this</span>.jdbcTemplate.getDataSource());</span><br><span class="line">        <span class="keyword">return</span> namedParameterJdbcTemplate.update(sql, <span class="keyword">new</span> BeanPropertySqlParameterSource(sysUser));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå¯ä»¥ä¸ç”¨ä¼ æ‰€æœ‰çš„å‚æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert2</span><span class="params">(SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;insert into sys_user(id, name, password) values(:id, :name, :password)&quot;</span>;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">        map.put(<span class="string">&quot;id&quot;</span>, sysUser.getId());</span><br><span class="line">        map.put(<span class="string">&quot;name&quot;</span>, sysUser.getName());</span><br><span class="line">        map.put(<span class="string">&quot;password&quot;</span>, sysUser.getPassword());</span><br><span class="line">        NamedParameterJdbcTemplate namedParameterJdbcTemplate = <span class="keyword">new</span> NamedParameterJdbcTemplate(<span class="keyword">this</span>.jdbcTemplate.getDataSource());</span><br><span class="line">        <span class="keyword">return</span> namedParameterJdbcTemplate.update(sql, map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">update</span><span class="params">(SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;update sys_user set name = ?, password = ? where id = ?&quot;</span>;</span><br><span class="line">        Object[] args = &#123;sysUser.getName(), sysUser.getPassword(), sysUser.getId()&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] argTypes = &#123;Types.VARCHAR, Types.VARCHAR, Types.BIGINT&#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.jdbcTemplate.update(sql, args, argTypes);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; queryAllListMap() &#123;</span><br><span class="line">        String sql = <span class="string">&quot;select * from sys_user&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.jdbcTemplate.queryForList(sql);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// è¿™é‡Œè¦å†™ä¸€ä¸ª SysUserMapper å®ç° RowMapper</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SysUser <span class="title">queryById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;select * from sys_user where id = ?&quot;</span>;</span><br><span class="line">        Object[] args = &#123;id&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] argTypes = &#123;Types.BIGINT&#125;;</span><br><span class="line">        List&lt;SysUser&gt; list = <span class="keyword">this</span>.jdbcTemplate.query(sql, args, argTypes, <span class="keyword">new</span> SysUserMapper());</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(list)) &#123;</span><br><span class="line">            <span class="keyword">return</span> list.get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">deleteById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;delete from sys_user where id = ?&quot;</span>;</span><br><span class="line">        Object[] args = &#123; id &#125;;</span><br><span class="line">        <span class="keyword">int</span>[] argTypes = &#123; Types.BIGINT &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.jdbcTemplate.update(sql, args, argTypes);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-å¯¹åº”çš„-Controller-å±‚"><a href="#3-å¯¹åº”çš„-Controller-å±‚" class="headerlink" title="3.å¯¹åº”çš„ Controller å±‚"></a>3.å¯¹åº”çš„ Controller å±‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysUserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SysUserRepository sysUserRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/insert&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert</span><span class="params">(<span class="meta">@RequestBody</span> SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = sysUserRepository.insert(sysUser);</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/insert1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert1</span><span class="params">(<span class="meta">@RequestBody</span> SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = sysUserRepository.insert1(sysUser);</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/insert2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert2</span><span class="params">(<span class="meta">@RequestBody</span> SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = sysUserRepository.insert2(sysUser);</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">update</span><span class="params">(<span class="meta">@RequestBody</span> SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = sysUserRepository.update(sysUser);</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; queryAllListMap() &#123;</span><br><span class="line">        <span class="keyword">return</span> sysUserRepository.queryAllListMap();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/id1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SysUser <span class="title">queryById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sysUserRepository.queryById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/id3&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">deleteById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sysUserRepository.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šä¸ºäº†å›¾æ–¹ä¾¿ï¼Œå°±ä¸å†æ­¤å†™ Service å±‚äº†</p></blockquote><h3 id="4-ä½¿ç”¨-Swagger-è¿›è¡Œæµ‹è¯•"><a href="#4-ä½¿ç”¨-Swagger-è¿›è¡Œæµ‹è¯•" class="headerlink" title="4.ä½¿ç”¨ Swagger è¿›è¡Œæµ‹è¯•"></a>4.ä½¿ç”¨ Swagger è¿›è¡Œæµ‹è¯•</h3><p><code>å¢åŠ </code> </p><p>ç¬¬ä¸€ç§æ–¹å¼ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210508.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210508.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908210503256"></p><p>ç¬¬äºŒç§æ–¹å¼ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210645.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210645.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908210645484"></p><p>ç¬¬ä¸‰ç§æ–¹å¼ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210805.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210805.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908210804954"></p><p>çœ‹ä¸€ä¸‹æ•°æ®åº“æ˜¯å¦æœ‰ä¸‰æ¡æ•°æ®ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210847.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210847.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908210846969"></p><p><code>ä¿®æ”¹</code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908211258.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908211258.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908211258932"></p><p><code>æŸ¥æ‰¾</code>  </p><p>æŸ¥æ‰¾æ‰€æœ‰ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908211934.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908211934.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908211934284"></p><p><code>åˆ é™¤</code>  </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908212720.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908212720.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908212720578"></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0076.Minimum Window Substring</title>
      <link href="2020/09/04/0076-Minimum-Window-Substring/"/>
      <url>2020/09/04/0076-Minimum-Window-Substring/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="76-æœ€å°è¦†ç›–å­ä¸²-Hard"><a href="#76-æœ€å°è¦†ç›–å­ä¸²-Hard" class="headerlink" title="76. æœ€å°è¦†ç›–å­ä¸²  Hard"></a><a href="https://leetcode-cn.com/problems/minimum-window-substring/">76. æœ€å°è¦†ç›–å­ä¸²</a>  <font color="#e82f34" size=5>Hard</font></h2><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² Sã€ä¸€ä¸ªå­—ç¬¦ä¸² T ã€‚è¯·ä½ è®¾è®¡ä¸€ç§ç®—æ³•ï¼Œå¯ä»¥åœ¨ O(n) çš„æ—¶é—´å¤æ‚åº¦å†…ï¼Œä»å­—ç¬¦ä¸² S é‡Œé¢æ‰¾å‡ºï¼šåŒ…å« T æ‰€æœ‰å­—ç¬¦çš„æœ€å°å­ä¸²ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šS &#x3D; &quot;ADOBECODEBANC&quot;, T &#x3D; &quot;ABC&quot;</span><br><span class="line">è¾“å‡ºï¼š&quot;BANC&quot;</span><br></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li>å¦‚æœ S ä¸­ä¸å­˜è¿™æ ·çš„å­ä¸²ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸² <code>&quot;&quot;</code>ã€‚</li><li>å¦‚æœ S ä¸­å­˜åœ¨è¿™æ ·çš„å­ä¸²ï¼Œæˆ‘ä»¬ä¿è¯å®ƒæ˜¯å”¯ä¸€çš„ç­”æ¡ˆã€‚</li></ul><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><p>â€‹        è¿™é¢˜åœ¨ 0003 é¢˜ä¸­å°±å·²ç»æè¿‡äº†çš„æš—å·ï¼Œå°±æ˜¯æ´’æ´’æ°´çš„ä½¿ç”¨ä¸€ä¸‹ <code>Sliding Window</code> å°±å¯ä»¥äº†ï¼Œæ€è·¯è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼šå…ˆä¸æ–­çš„æ‰©å¼ çª—å£å³è¾¹ï¼Œç›´åˆ°å°†æ‰€æœ‰çš„è¦åŒ…å«çš„çŸ­å­—ç¬¦ä¸²ï¼›ç„¶åå¼€å§‹å°±ç§»åŠ¨çª—å£çš„å·¦è¾¹ï¼Œç›´åˆ°å·¦è¾¹å‹ç¼©åˆ°ä¸èƒ½å†å®¹çº³è¿™ä¸ªçŸ­å­—ç¬¦ä¸²äº†ï¼Œå†è¿›è¡Œä¸æ–­æ¯”è¾ƒï¼Œå°±å¯ä»¥å¾—åˆ°æœ€ç»ˆç»“æœäº†ã€‚<br>â€‹        è¿™ç§æ—¶å€™å°±éœ€è¦å‡ºç° <strong>ä½†æ˜¯</strong> è¿™ä¸ªè¯è¯­ï¼Œæœç„¶åœ¨å®ç°çš„æ—¶å€™å°±éœ€è¦æ³¨æ„å¾ˆå¤šé—®é¢˜äº†ï¼Œå¯¹äºè¿™ç§æŠ½è±¡é—®é¢˜ï¼Œå…ˆæ¥ä¸ªğŸŒ°ï¼šç»™çš„ä¾‹å­å®åœ¨æ˜¯å¤ªæ™®é€šäº†ï¼Œåº”è¯¥ç”¨é‚£ç§å¸¦ç‚¹ç‰¹æ®Šæ€§çš„ä¾‹å­</p><blockquote><p>S = â€œABANCDBâ€     T = â€œABCâ€</p></blockquote><p>å¯¹ç€ä»£ç æ‹ä¸€éåº”è¯¥å°±æ‡‚äº†ï¼š<br>ç¬¬ä¸€éè¿‡åå¯ä»¥çœ‹è§ï¼šâ€ABANCâ€ æ˜¯ä¸€ä¸ªæ»‘åŠ¨çª—å£ï¼Œmap çš„å€¼ä¹Ÿå˜ä¸ºäº†ï¼š</p><table><thead><tr><th align="center"></th><th align="center">A</th><th align="center">B</th><th align="center">C</th></tr></thead><tbody><tr><td align="center">åˆå§‹å€¼</td><td align="center">1</td><td align="center">1</td><td align="center">1</td></tr><tr><td align="center">éå†åˆ° A</td><td align="center">0</td><td align="center">1</td><td align="center">1</td></tr><tr><td align="center">éå†åˆ° B</td><td align="center">0</td><td align="center">0</td><td align="center">1</td></tr><tr><td align="center">éå†åˆ° A</td><td align="center">-1</td><td align="center">0</td><td align="center">1</td></tr><tr><td align="center">éå†åˆ° N</td><td align="center">-1</td><td align="center">0</td><td align="center">1</td></tr><tr><td align="center">éå†åˆ° C</td><td align="center">-1</td><td align="center">0</td><td align="center">0</td></tr></tbody></table><p>æ­¤æ—¶çš„ count == t çš„é•¿åº¦äº†ï¼Œè¿™æ ·æ‰©å¼ çª—å£å°±å®Œæˆäº† ======&gt;   min = 5</p><p>æ¥ä¸‹æ¥å°±æ˜¯æ”¶ç¼©çª—å£ï¼Œå…¶æ ¹æœ¬åŸå› å°±æ˜¯è¿™æ ·å·¦è¾¹å‡ºç°é‡å¤å…ƒç´ ï¼Œå¯ä»¥å»æ‰å½¢æˆæœ€å°çš„çª—å£ï¼š</p><p>å¦‚æœåœ¨ map ä¸­çš„å€¼æ˜¯ç­‰äº 0 çš„ï¼Œè¯´æ˜å®ƒæ˜¯åˆšåˆšå¥½çš„ï¼Œå¦‚æœæŠŠè¿™ä¸ªæ’é™¤çš„è¯ï¼Œè¿™ä¸ªçª—å£å°±ä¸å†æˆç«‹äº†ï¼Œè¦ç»§ç»­æ‰©å¼ </p><p>çª—å£äº†ï¼›å¦‚æœ map ä¸­çš„å€¼ å°äº 0 çš„ï¼Œè¯´æ˜å®ƒæ˜¯å¤šä½™çš„ï¼Œä½†æ˜¯è¦çœ‹å®ƒçš„ä½ç½®äº†ï¼Œå¯ä»¥çœ‹ä¸‹ğŸŒ°ï¼š</p><p>â€œABANCâ€ è¿™ä¸ª A å°±å¯ä»¥å»æ‰ï¼›â€BAANCâ€ è¿™ä¸ª A å°±ä¸å¯ä»¥å»æ‰ï¼Œæ­¤æ—¶å°±è¦æ‰©å¼ çª—å£äº†</p><p><del>åå¤æ¨ªè·³</del> ï¼Œå®Œæˆâœ…</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">minWindow</span><span class="params">(String s, String t)</span> </span>&#123;</span><br><span class="line">        Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">                <span class="comment">// ä½¿ç”¨ hashmap å°† t ä¸­çš„å­—ç¬¦å­˜å…¥</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; t.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">char</span> c = t.charAt(i);</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(c)) &#123;</span><br><span class="line">                <span class="keyword">int</span> tmp = map.get(c);</span><br><span class="line">                map.put(c, tmp + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                map.put(c, <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ç”¨æ¥åˆ¤æ–­è¿™ä¸ªçª—å£æ˜¯å¦åŒ…å«äº† t</span></span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">      <span class="comment">// ä¸€ä¸ªçª—å£çš„å·¦å³</span></span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = <span class="number">0</span>;  </span><br><span class="line">        <span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">      <span class="comment">// é•¿åº¦æœ€å°çš„çª—å£çš„å·¦å³</span></span><br><span class="line">        <span class="keyword">int</span> minLeft = <span class="number">0</span>, minRight = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (; right &lt; s.length(); right++) &#123;</span><br><span class="line">            <span class="keyword">char</span> temp = s.charAt(right);</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(temp)) &#123;</span><br><span class="line">                count = map.get(temp) &gt; <span class="number">0</span> ? count + <span class="number">1</span> : count;</span><br><span class="line">                map.put(temp, map.get(temp) - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (count == t.length()) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((right - left) &lt; min) &#123;</span><br><span class="line">                    min = right - left;</span><br><span class="line">                    minLeft = left;</span><br><span class="line">                    minRight = right;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">char</span> c = s.charAt(left);</span><br><span class="line">              <span class="comment">// å·¦è¾¹çš„é‡å¤å­—ç¬¦å¯ä»¥ä¸ç”¨</span></span><br><span class="line">                <span class="keyword">if</span> (map.containsKey(c)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (map.get(c) &gt;= <span class="number">0</span>)</span><br><span class="line">                        count--;</span><br><span class="line">                    map.put(c, map.get(c) + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> min == Integer.MAX_VALUE ? <span class="string">&quot;&quot;</span> : s.substring(minLeft, minRight + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> String </tag>
            
            <tag> Sliding Window </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆAOP</title>
      <link href="2020/09/03/SpringBoot%E6%95%B4%E5%90%88AOP/"/>
      <url>2020/09/03/SpringBoot%E6%95%B4%E5%90%88AOP/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€èƒŒæ™¯"><a href="#ä¸€ã€èƒŒæ™¯" class="headerlink" title="ä¸€ã€èƒŒæ™¯"></a>ä¸€ã€èƒŒæ™¯</h2><p>â€‹        åœ¨å…¬å¸å†™ä¸šåŠ¡çš„æ—¶å€™ï¼Œéƒ½ä¼šæœ‰ä¿å­˜æ—¥å¿—çš„æ“ä½œï¼Œæ–¹ä¾¿å‡ºé”™çš„æ—¶å€™è¿›è¡Œæ’æŸ¥ï¼›ä¸€èˆ¬ä¸ä»…ä»…åœ¨æ•°æ®åº“ä¸­ä¿å­˜æ—¥å¿—ï¼Œ</p><p>ä¹Ÿä¼šåœ¨åç«¯æ§åˆ¶å°æ‰“å°ä¸€äº›éœ€è¦çš„ä¿¡æ¯ã€‚åœ¨è¿™é‡Œï¼Œä¸€èˆ¬ä½¿ç”¨ AOP ç»‡å…¥çš„æ–¹å¼å°†æ—¥å¿—ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œä½¿ç”¨ä¸€äº›æ—¥</p><p>å¿—åŒ…å°†æŸäº› Controller å±‚çš„ä¿¡æ¯æ‰“å°åœ¨æ§åˆ¶å°ã€‚</p><h2 id="äºŒã€å‡†å¤‡"><a href="#äºŒã€å‡†å¤‡" class="headerlink" title="äºŒã€å‡†å¤‡"></a>äºŒã€å‡†å¤‡</h2><h3 id="Entiy"><a href="#Entiy" class="headerlink" title="Entiy:"></a>Entiy:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;log&quot;)</span></span><br><span class="line"><span class="meta">@EntityListeners(AuditingEntityListener.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Log</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY )</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;title&quot;, columnDefinition = &quot;VARCHAR(100) COMMENT &#x27;æ ‡é¢˜&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;author&quot;, columnDefinition = &quot;VARCHAR(255) COMMENT &#x27;ä½œè€…&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;content&quot;, columnDefinition = &quot;TEXT COMMENT &#x27;å†…å®¹&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// get å’Œ set çœç•¥</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨: è¿™é‡Œæ˜¯ä½¿ç”¨ Spring Data JPA è‡ªåŠ¨ç”Ÿæˆçš„æ•°æ®åº“å¯¹åº”å®ä½“ï¼Œå¯¼å…¥ç›¸å…³ä¾èµ–åï¼Œå¯ä»¥å…ˆè¿è¡Œä¸€éï¼Œçœ‹æ•°æ®åº“</p><p>æ˜¯å¦ç”Ÿæˆå¯¹åº”å®ä½“ï¼›ç„¶åè‡ªè¡Œåœ¨æ•°æ®åº“ä¸­æ’å…¥å‡ æ¡æ•°æ®ã€‚</p></blockquote><h3 id="Repository"><a href="#Repository" class="headerlink" title="Repository:"></a>Repository:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">LogRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Log</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨: è¿™é‡Œåªè¦ç»§æ‰¿ <code>JpaRepository</code> ï¼Œè¿™ä¸ª repository ä¹Ÿç»§æ‰¿äº†åˆ«çš„ repositoryï¼ˆé‡Œé¢æœ‰ä¸€äº›å¸¸è§çš„æ–¹æ³•å¯ä»¥</p><p>è°ƒç”¨ï¼‰</p></blockquote><h3 id="Service"><a href="#Service" class="headerlink" title="Service:"></a>Service:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LogRepository logRepository;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Log&gt; <span class="title">getAllLog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Log&gt; logs = logRepository.findAll();</span><br><span class="line">        <span class="keyword">return</span> logs;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨: è¿™é‡Œå°±ä¸å†™æ¥å£ï¼Œå†å»å®ç°äº†</p></blockquote><h3 id="Controller"><a href="#Controller" class="headerlink" title="Controller:"></a>Controller:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LogService logService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Log&gt; <span class="title">getAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Log&gt; logs = logService.getAllLog();</span><br><span class="line">        <span class="keyword">return</span> logs;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†ä½¿ç”¨ <strong>Postman</strong> ç­‰å·¥å…·è¿›è¡Œä¸€æ¬¡æµ‹è¯•å°±è¡Œ</p><h2 id="ä¸‰ã€ä½¿ç”¨æ³¨è§£çš„æ–¹å¼è¿›è¡Œ-AOP"><a href="#ä¸‰ã€ä½¿ç”¨æ³¨è§£çš„æ–¹å¼è¿›è¡Œ-AOP" class="headerlink" title="ä¸‰ã€ä½¿ç”¨æ³¨è§£çš„æ–¹å¼è¿›è¡Œ AOP"></a>ä¸‰ã€ä½¿ç”¨æ³¨è§£çš„æ–¹å¼è¿›è¡Œ AOP</h2><p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ–¹æ³•çº§åˆ«çš„ <code>@Log</code> æ³¨è§£ï¼Œç”¨äºæ ‡æ³¨éœ€è¦ç›‘æ§çš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Log &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰ä¸€ä¸ªLogAspectç±»ï¼Œä½¿ç”¨ <code>@Aspect</code> æ ‡æ³¨è®©å…¶æˆä¸ºä¸€ä¸ªåˆ‡é¢ï¼Œåˆ‡ç‚¹ä¸ºä½¿ç”¨ <code>@Log</code> æ³¨è§£æ ‡æ³¨çš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogAspec</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Logger logger  = LoggerFactory.getLogger(LogAspec.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(org.wangba.springboot013aop.antoation.Log)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pointcut</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;pointcut()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doBefore</span><span class="params">(JoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;Start Time: &#123;&#125;&quot;</span>, System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@After(&quot;pointcut()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfter</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;End Time: &#123;&#125;&quot;</span>, System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†åœ¨ <code>Controller</code> å±‚çš„æ–¹æ³•ä¸ŠåŠ ä¸Š <code>@Log</code> æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LogService logService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Log(&quot;è·å¾—æ‰€æœ‰æ–‡ç« &quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Article&gt; <span class="title">getAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Article&gt; articles = logService.getAllLog();</span><br><span class="line">        <span class="keyword">return</span> articles;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å†åœ¨ <strong>Postman</strong> ä¸­æµ‹è¯•ä¸€æ¬¡ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°æ§åˆ¶å°ä¼šæ‰“å°å¦‚ä¸‹ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200903214650.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200903214650.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200903214650730"></p><blockquote><p>åœ¨å…¬å¸ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯åœ¨  <code>@Before</code> è¿›è¡Œä¸€äº›è¯·æ±‚ä¿¡æ¯ç­‰ï¼Œ <code> @After</code> åœ¨æ§åˆ¶å°æ‰“å°ä¸€äº›ä¿¡æ¯ï¼Œå¹¶å°†ç»“</p><p>æœç›´æ¥å­˜åˆ°æ•°æ®åº“ä¸­çš„æ—¥å¿—è¡¨ä¸­ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootä¸­ç±»å‹è½¬æ¢</title>
      <link href="2020/09/02/SpringBoot%E4%B8%AD%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"/>
      <url>2020/09/02/SpringBoot%E4%B8%AD%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€é—®é¢˜"><a href="#ä¸€ã€é—®é¢˜" class="headerlink" title="ä¸€ã€é—®é¢˜"></a>ä¸€ã€é—®é¢˜</h2><p>å¦‚æœå‰ç«¯ä¼ æ¥ä¸€ä¸ªæ—¥æœŸå‚æ•°ï¼Œæ˜¯ç”¨ String ç±»å‹çš„ï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨åç«¯è¿›è¡Œä¼ å‚å‘¢ï¼Ÿ</p><p>ä¹Ÿå³å¦‚ä¸‹è¿™ç§æƒ…å†µï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">(Date date)</span> </span>&#123;</span><br><span class="line">        System.out.println(date);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨è¾“å…¥ï¼š<a href="http://localhost:8080/hello?date=2020-01-01">http://localhost:8080/hello?date=2020-01-01</a></p><p>å¯ä»¥åœ¨åå°çœ‹åˆ°  <code>WARN</code> ï¼š</p><blockquote><p>Failed to convert value of type â€˜java.lang.Stringâ€™ to required type â€˜java.util.Dateâ€™</p></blockquote><h2 id="äºŒã€è§£å†³"><a href="#äºŒã€è§£å†³" class="headerlink" title="äºŒã€è§£å†³"></a>äºŒã€è§£å†³</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringTransDate</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">Date</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SimpleDateFormat simpleDateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s != <span class="keyword">null</span> &amp;&amp; !<span class="string">&quot;&quot;</span>.equals(s)) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> simpleDateFormat.parse(s);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šè¦å°†è¯¥ç±»ä½¿ç”¨ @Component æ³¨å…¥</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0003.Longest Substring Without Repeating Characters</title>
      <link href="2020/09/01/0003-Longest-Substring-Without-Repeating-Characters/"/>
      <url>2020/09/01/0003-Longest-Substring-Without-Repeating-Characters/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="0003-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²-Medium"><a href="#0003-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²-Medium" class="headerlink" title="0003. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² Medium"></a><a href="https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/">0003. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</a> <font color="#fd9016" size=5>Medium</font></h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ <strong>æœ€é•¿å­ä¸²</strong> çš„é•¿åº¦ã€‚</p><p><strong>ç¤ºä¾‹ 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;abcabcbb&quot;</span><br><span class="line">è¾“å‡º: 3 </span><br><span class="line">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;abc&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;bbbbb&quot;</span><br><span class="line">è¾“å‡º: 1</span><br><span class="line">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;b&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;pwwkew&quot;</span><br><span class="line">è¾“å‡º: 3</span><br><span class="line">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;wke&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br><span class="line"></span><br><span class="line">è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ&quot;pwke&quot; æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚</span><br></pre></td></tr></table></figure><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><p> ğŸ·ï¼šç¬¬ä¸€ä¸ªæƒ³æ³•å°±æ˜¯è¿™ä¸ªæ˜¯ä¸æ˜¯å’Œ KMP ç®—æ³•æœ‰é‚£ä¹ˆä¸€ç‚¹ç‚¹åƒçš„</p><p> åŠ›æ‰£ï¼šè®©ä½ è§è¯†ä¸€ä¸‹ï¼Œå€¼å¾—æˆ‘ä»¬å®˜ç½‘æœ‰ä¸€ä¸ªæ ‡ç­¾çš„æ€æƒ³ â€”â€”â€”&gt;  <code>Sliding Window</code> </p><p>ğŸ·ï¼šè¯´äººè¯</p><p>åŠ›æ‰£ï¼šå°±æ˜¯ <code>æ»‘åŠ¨çª—å£</code> å¤§æ³•ï¼Œä½ åé¢ä¼šçœ‹åˆ°å¾ˆå¤šæ¬¡è¿™ç§æ€æƒ³ï¼Œæƒ³ç»§ç»­çœ‹è¿™æ ·çš„é¢˜ï¼Œç‚¹<a href="https://leetcode-cn.com/tag/sliding-window/">è¿™é‡Œ</a>ï¼Œè¿˜æœ‰ä¸€äº›æš—å·ï¼š76ã€</p><p>438ã€567</p><blockquote><p>æ»‘åŠ¨çª—å£æ€æƒ³ï¼š</p><p>æ»‘åŠ¨çª—å£çš„å³è¾¹ç•Œä¸æ–­çš„å³ç§»ï¼Œåªè¦æ²¡æœ‰é‡å¤çš„å­—ç¬¦ï¼Œå°±æŒç»­å‘å³æ‰©å¤§çª—å£è¾¹ç•Œã€‚ä¸€æ—¦å‡ºç°äº†é‡å¤å­—ç¬¦ï¼Œå°±éœ€è¦ç¼©å°å·¦è¾¹ç•Œï¼Œç›´åˆ°é‡å¤çš„å­—ç¬¦ç§»å‡ºäº†å·¦è¾¹ç•Œï¼Œç„¶åç»§ç»­ç§»åŠ¨æ»‘åŠ¨çª—å£çš„å³è¾¹ç•Œã€‚ä»¥æ­¤ç±»æ¨ï¼Œæ¯æ¬¡ç§»åŠ¨éœ€è¦è®¡ç®—å½“å‰é•¿åº¦ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°æœ€å¤§é•¿åº¦ï¼Œæœ€ç»ˆæœ€å¤§çš„å€¼å°±æ˜¯é¢˜ç›®ä¸­çš„æ‰€æ±‚ã€‚</p></blockquote><p>ğŸ·ï¼šåº”è¯¥å°±æ˜¯åŒæŒ‡é’ˆçš„å˜å½¢ç‰ˆäº†â€¦â€¦..</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(s.charAt(i)))</span><br><span class="line">                j = Math.max(j, map.get(s.charAt(i)) + <span class="number">1</span>);</span><br><span class="line">            map.put(s.charAt(i), i);</span><br><span class="line">            max = Math.max(max, i - j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> String </tag>
            
            <tag> Sliding Window </tag>
            
            <tag> Two pointer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootä¸­çš„è·¯å¾„æ˜ å°„</title>
      <link href="2020/09/01/SpringBoot%E4%B8%AD%E7%9A%84%E8%B7%AF%E5%BE%84%E6%98%A0%E5%B0%84/"/>
      <url>2020/09/01/SpringBoot%E4%B8%AD%E7%9A%84%E8%B7%AF%E5%BE%84%E6%98%A0%E5%B0%84/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€åœ¨-SpringBootä¸­ä½¿ç”¨-SSM-æ¡†æ¶ä¸­çš„æ˜ å°„"><a href="#ä¸€ã€åœ¨-SpringBootä¸­ä½¿ç”¨-SSM-æ¡†æ¶ä¸­çš„æ˜ å°„" class="headerlink" title="ä¸€ã€åœ¨ SpringBootä¸­ä½¿ç”¨ SSM æ¡†æ¶ä¸­çš„æ˜ å°„"></a>ä¸€ã€åœ¨ SpringBootä¸­ä½¿ç”¨ SSM æ¡†æ¶ä¸­çš„æ˜ å°„</h2><p>å†™ä¸‹å¦‚ä¸‹çš„ Controllerï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¹¶åœ¨ <code>resources/templates</code> ä¸­æ–°å»º <code>hello.html</code> </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, Spring Boot<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šåœ¨ SpringBoot ä¸­ï¼Œé»˜è®¤çš„é™æ€èµ„æºæ˜¯æ”¾åœ¨ä»¥ä¸‹å‡ ä¸ªä½ç½®ï¼š</p><ol><li>classpath:/META-INF/resources/</li><li>classpath:/resources/</li><li>classpath:/static/</li><li>classpath:/public/</li><li>/</li></ol><p>å…¶ä¸­ç¬¬ 5 ä¸ªè¡¨ç¤º webapp ç›®å½•ä¸­çš„é™æ€èµ„æºä¹Ÿä¸è¢«æ‹¦æˆª</p></blockquote><p>æ‰€ä»¥åœ¨è¿™é‡Œè¿™ä¸æ˜¯ä¸€ä¸ªé™æ€èµ„æºï¼Œæˆ‘ä»¬ä»¥å‰çš„åšæ³•å°±æ˜¯ç›´æ¥è¿”å›è¿™ä¸ªé¡µé¢ï¼Œæ²¡å†™ä¸Šé¢çš„ Controller ç›´æ¥ä½¿ç”¨ <a href="http://localhost:8080/hello">http://localhost:8080/hello</a> æ˜¯è®¿é—®ä¸åˆ°è¯¥é¡µé¢çš„</p><h2 id="äºŒã€åœ¨-SpringBoot-ä¸­è¿›è¡Œè·¯å¾„æ˜ å°„"><a href="#äºŒã€åœ¨-SpringBoot-ä¸­è¿›è¡Œè·¯å¾„æ˜ å°„" class="headerlink" title="äºŒã€åœ¨ SpringBoot ä¸­è¿›è¡Œè·¯å¾„æ˜ å°„"></a>äºŒã€åœ¨ SpringBoot ä¸­è¿›è¡Œè·¯å¾„æ˜ å°„</h2><p>åªéœ€è¦è¿›è¡Œå¦‚ä¸‹é…ç½®å°±å¯ä»¥è¿›è¡Œè·¯å¾„æ˜ å°„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;wangba&quot;</span>).setViewName(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æ¬¡è®¿é—®ï¼š<a href="http://localhost:8080/wangba">http://localhost:8080/wangba</a></p><p>ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200901203239.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200901203239.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200901203234294"></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0001.Two Sum</title>
      <link href="2020/08/31/0001-Two-Sum/"/>
      <url>2020/08/31/0001-Two-Sum/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="0001-ä¸¤æ•°ä¹‹å’Œ-Easy"><a href="#0001-ä¸¤æ•°ä¹‹å’Œ-Easy" class="headerlink" title="0001. ä¸¤æ•°ä¹‹å’Œ  Easy"></a><a href="https://leetcode-cn.com/problems/two-sum/">0001. ä¸¤æ•°ä¹‹å’Œ</a>  <font color="green" size=5>Easy</font></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªç›®æ ‡å€¼ <code>target</code>ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ <strong>ä¸¤ä¸ª</strong> æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚</p><p><strong>ç¤ºä¾‹:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç»™å®š nums &#x3D; [2, 7, 11, 15], target &#x3D; 9</span><br><span class="line"></span><br><span class="line">å› ä¸º nums[0] + nums[1] &#x3D; 2 + 7 &#x3D; 9</span><br><span class="line">æ‰€ä»¥è¿”å› [0, 1]</span><br></pre></td></tr></table></figure><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><blockquote><p>å‚»ç“œå¼æƒ³æ³•ï¼šéå†ä¸¤æ¬¡ï¼Œæ±‚å’Œï¼ˆå»é™¤é‡å¤çš„å…ƒç´ ï¼Œä½ç½®ä¸åŒçš„ç›¸ç­‰å…ƒç´ å¯ä»¥è¿›è¡Œè®¡ç®—ï¼‰</p><p>åŠ›æ‰£å†…å¿ƒOSï¼šä½ è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦èƒ½è¿‡ç®—æˆ‘è¾“ï¼ï¼ï¼</p><p>ğŸ˜¯ï¼šå°±è¿™ï¼Œç•¥æ–½å°è®¡ï¼š<code>ç©ºé—´æ¢æ—¶é—´ä¹‹æœ¯</code> </p></blockquote><p>é¦–å…ˆï¼Œéå†ä¸€éæ•°ç»„å°†æ•°ç»„çš„å€¼æ”¾å…¥ Map ä¸­ï¼Œç„¶åå†éå†ä¸€æ¬¡ï¼Œå°† target - å–åˆ°çš„å€¼ï¼Œä½†æ˜¯è¦æ³¨æ„ä¸èƒ½ä»…ä»…åˆ¤æ–­æ˜¯</p><p>å¦å­˜åœ¨è¿™ä¸ªå€¼ï¼Œå› ä¸ºå¯èƒ½ä¼šå‡ºç°ä¸‹é¢è¿™ç§æƒ…å†µï¼štarget = 4ï¼Œè¯¥æ•°ç»„ä¸­å°±åªæœ‰ä¸€ä¸ª 2ï¼Œè¿™æ ·å°±ä¼šå‡ºé”™ã€‚æ‰€ä»¥è¿˜è¦åˆ¤æ–­</p><p>å–åˆ°çš„å€¼è¿˜ä¸èƒ½æ˜¯ç¬¬ä¸€æ¬¡çš„å…ƒç´ ã€‚</p><h2 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">        HashMap&lt;Integer, Integer&gt; hashMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            hashMap.put(nums[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> temp = target - nums[i];</span><br><span class="line">            <span class="keyword">if</span> (hashMap.containsKey(temp) &amp;&amp; hashMap.get(temp) != i) &#123;</span><br><span class="line">                res[<span class="number">0</span>] = hashMap.get(temp);</span><br><span class="line">                res[<span class="number">1</span>] = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCodeçœŸçš„éš¾ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode </tag>
            
            <tag> Array </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootä¸­çš„Servletã€Filterã€Listener</title>
      <link href="2020/08/31/SpringBoot%E4%B8%AD%E7%9A%84Servlet%E3%80%81Filter%E3%80%81Listener/"/>
      <url>2020/08/31/SpringBoot%E4%B8%AD%E7%9A%84Servlet%E3%80%81Filter%E3%80%81Listener/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€Servlet"><a href="#ä¸€ã€Servlet" class="headerlink" title="ä¸€ã€Servlet"></a>ä¸€ã€Servlet</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/MyServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyServlet&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>@WebServlet(urlPatterns = â€œ/MyServletâ€)ï¼šæŒ‡å®šServletæŒ‡å®šçš„ URL</p></blockquote><h2 id="äºŒã€Filter"><a href="#äºŒã€Filter" class="headerlink" title="äºŒã€Filter"></a>äºŒã€Filter</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter(&quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyFilter&quot;</span>);</span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>@WebFilter(â€œ/*â€)ï¼šæŒ‡å®šè·¯å¾„è¿›è¡Œè¿‡æ»¤</p></blockquote><h2 id="ä¸‰ã€Listener"><a href="#ä¸‰ã€Listener" class="headerlink" title="ä¸‰ã€Listener"></a>ä¸‰ã€Listener</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyListener</span> <span class="keyword">implements</span> <span class="title">ServletRequestListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestInitialized</span><span class="params">(ServletRequestEvent sre)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;requestInitialized.............&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestDestroyed</span><span class="params">(ServletRequestEvent sre)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;requestDestroyed................&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>@WebListenerï¼šæ ‡æ³¨ä¸ºç›‘å¬å™¨</p></blockquote><p><code>å¯ä»¥è‡ªè¡Œæµ‹è¯•ä¿®æ”¹è·¯ç”±è·¯å¾„ç­‰è¿›è¡Œæµ‹è¯•</code></p><h2 id="å››ã€åŒºåˆ«"><a href="#å››ã€åŒºåˆ«" class="headerlink" title="å››ã€åŒºåˆ«"></a>å››ã€åŒºåˆ«</h2><p>å¯åŠ¨ç»“æœï¼š<a href="http://localhost:8080/MyServlet">http://localhost:8080/MyServlet</a></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200831195105.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200831195105.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200831195100184"></p><p>é…åˆå®˜æ–¹å›¾è§£é‡Šä¸€ä¸‹ï¼š</p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200831195155.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200831195155.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200831195155569" style="zoom: 50%;" /><p>é¦–å…ˆæ˜¯ <strong><code>Listener</code></strong> ==&gt; <strong><code>Filter</code></strong> ==&gt; <strong><code>Servlet</code></strong> </p><p>ä¸‹é¢è¿˜æœ‰ä¸€æ¬¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MyFilter</span><br><span class="line">requestDestroyed................</span><br></pre></td></tr></table></figure><p>å†æµè§ˆå™¨æ‰“å¼€æ§åˆ¶å°ï¼Œå¼ºåˆ¶åˆ·æ–°ä¸€ä¸‹ï¼šmacOS(å¿«æ·é”®ï¼šcommand + shift + R)ï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200831195932.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200831195932.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200831195932817" style="zoom: 200%;" /><p>æœ€ä¸‹é¢çš„é‚£ä¸ªæ˜¯æˆ‘çš„æµè§ˆå™¨æ‰©å±•åŠ è½½çš„è„šæœ¬</p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootä¸­å®šä¹‰ç³»ç»Ÿå¯åŠ¨ä»»åŠ¡</title>
      <link href="2020/08/22/SpringBoot%E4%B8%AD%E5%AE%9A%E4%B9%89%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%E4%BB%BB%E5%8A%A1/"/>
      <url>2020/08/22/SpringBoot%E4%B8%AD%E5%AE%9A%E4%B9%89%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€CommandLineRunner"><a href="#ä¸€ã€CommandLineRunner" class="headerlink" title="ä¸€ã€CommandLineRunner"></a>ä¸€ã€CommandLineRunner</h2><p>é€šè¿‡å®ç° <code>CommandLineRunner</code> æ¥å®šä¹‰å¯åŠ¨ä»»åŠ¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCommandLineRunner</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Order(1):&quot;</span> + Arrays.toString(args));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order(2)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCommandLineRunner01</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Order(2):&quot;</span> + Arrays.toString(args));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><blockquote><ul><li><strong>@Order</strong> æ³¨è§£ä¸ºä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼›</li><li><strong>args</strong> ä¸ºå¯åŠ¨ç±»ä¸­çš„ String[] argsï¼›</li><li><strong>args</strong> å‚æ•°å¯ä»¥åœ¨é…ç½®é‡Œé¢çš„ Program argumens è¿›è¡Œé…ç½®ï¼Œä¹Ÿå¯ä»¥æ‰“æˆ jar åŒ…çš„æ—¶å€™ï¼Œä½¿ç”¨å‘½ä»¤è¿›è¡Œè®¾ç½®</li></ul></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200821142114.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200821142114.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200821142109335"></p><p>æœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200821142416.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200821142416.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200821142416869"></p><blockquote><p>å¯ä»¥çœ‹åˆ° Order(1) çš„ä¼˜å…ˆçº§é«˜äº Order(2)</p></blockquote><h2 id="äºŒã€ApplicationRunner"><a href="#äºŒã€ApplicationRunner" class="headerlink" title="äºŒã€ApplicationRunner"></a>äºŒã€ApplicationRunner</h2><p>é€šè¿‡å®ç° <code>ApplicationRunner</code> æ¥å®šä¹‰å¯åŠ¨ä»»åŠ¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order(3)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplicationRunner</span> <span class="keyword">implements</span> <span class="title">ApplicationRunner</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(ApplicationArguments args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Order3:&quot;</span>);</span><br><span class="line">        String[] sourceArgs = args.getSourceArgs();</span><br><span class="line">        System.out.println(<span class="string">&quot;sourceArg:&quot;</span> + Arrays.toString(sourceArgs));</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°&quot;</span>);</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; nonOptionArgs = args.getNonOptionArgs();</span><br><span class="line">        System.out.println(<span class="string">&quot;nonOptionArgs:&quot;</span> + nonOptionArgs);</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Set&lt;String&gt; optionNames = args.getOptionNames();</span><br><span class="line">        <span class="keyword">for</span> (String optionName : optionNames) &#123;</span><br><span class="line">            System.out.println(optionName + args.getOptionValues(optionName));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order(4)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplicationRunner01</span> <span class="keyword">implements</span> <span class="title">ApplicationRunner</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(ApplicationArguments args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Order4&quot;</span>);</span><br><span class="line">        String[] sourceArgs = args.getSourceArgs();</span><br><span class="line">        System.out.println(<span class="string">&quot;sourceArg:&quot;</span> + Arrays.toString(sourceArgs));</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°&quot;</span>);</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; nonOptionArgs = args.getNonOptionArgs();</span><br><span class="line">        System.out.println(<span class="string">&quot;nonOptionArgs:&quot;</span> + nonOptionArgs);</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Set&lt;String&gt; optionNames = args.getOptionNames();</span><br><span class="line">        <span class="keyword">for</span> (String optionName : optionNames) &#123;</span><br><span class="line">            System.out.println(optionName + args.getOptionValues(optionName));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ol><li>args.getNonOptionArgs()ï¼šå¯ä»¥ç”¨æ¥è·å–å‘½ä»¤è¡Œä¸­çš„æ— keyå‚æ•°ï¼›</li><li>args.getOptionNames()ï¼šå¯ä»¥ç”¨æ¥è·å–æ‰€æœ‰key/valueå½¢å¼çš„å‚æ•°çš„keyï¼›</li><li>args.getOptionValues(key))ï¼šå¯ä»¥æ ¹æ®keyè·å–key/value å½¢å¼çš„å‚æ•°çš„valueï¼›</li><li>args.getSourceArgs();ï¼šåˆ™è¡¨ç¤ºè·å–å‘½ä»¤è¡Œä¸­çš„æ‰€æœ‰å‚æ•°ã€‚</li></ol></blockquote><p>å‚æ•°é…ç½®ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200821150447.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200821150447.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200821150447765"></p><p>æœ€ç»ˆç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200821150509.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200821150509.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200821150509271"></p><blockquote><p>æ³¨ï¼š<code>CommandLineRunner</code> å’Œ <code>ApplicationRunner</code> æ˜¯å¯ä»¥ä¸€èµ·ç”¨çš„ï¼Œä¼˜å…ˆçº§è¿˜æ˜¯é€šè¿‡ <code>@Order</code> è¿›è¡Œæ’åº</p></blockquote><p>ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200821150916.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200821150916.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200821150916948"></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆè¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨</title>
      <link href="2020/08/20/SpringBoot%E6%95%B4%E5%90%88%E8%BF%87%E6%BB%A4%E5%99%A8%E5%92%8C%E6%8B%A6%E6%88%AA%E5%99%A8/"/>
      <url>2020/08/20/SpringBoot%E6%95%B4%E5%90%88%E8%BF%87%E6%BB%A4%E5%99%A8%E5%92%8C%E6%8B%A6%E6%88%AA%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€è¿‡æ»¤å™¨"><a href="#ä¸€ã€è¿‡æ»¤å™¨" class="headerlink" title="ä¸€ã€è¿‡æ»¤å™¨"></a>ä¸€ã€è¿‡æ»¤å™¨</h2><p>æ–°å»ºå¦‚ä¸‹çš„ Controllerï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;user/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">        System.out.println(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿‡æ»¤å™¨çš„å®ç°ï¼šå®šä¹‰ä¸€ä¸ªç±»å®ç° <code>Filter</code> ï¼Œå¹¶é‡å†™å…¶ä¸­çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@WebFilter(urlPatterns = &quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Initialization&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;++++++++ Start ++++++++&quot;</span>);</span><br><span class="line">        Long start = <span class="keyword">new</span> Date().getTime();</span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">        System.out.println(<span class="string">&quot;Filter costs: &quot;</span>);</span><br><span class="line">        System.out.println(<span class="keyword">new</span> Date().getTime() - start);</span><br><span class="line">        System.out.println(<span class="string">&quot;++++++++ End ++++++++&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Filter is over&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>init æ–¹æ³•ï¼šæ˜¯å¯¹é¡¹ç›®å¯åŠ¨æ—¶ï¼Œè¿›è¡Œçš„åˆå§‹åŒ–</p><p>doFilter æ–¹æ³•ï¼šå½“æ‰§è¡Œä¸€ä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œè¿›è¡Œè¿‡æ»¤</p><p>destroy æ–¹æ³•ï¼šå½“è¿™ä¸ªé¡¹ç›®å…³é—­æ—¶ï¼Œè¯¥è¿‡æ»¤å™¨ä¹Ÿè¢«é”€æ¯äº†</p></blockquote><p>æµè§ˆå™¨è¿è¡Œï¼š<a href="http://localhost:8080/user/666">http://localhost:8080/user/666</a></p><p>ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820151800.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820151800.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200820151800190"></p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å‡ºç°äº†ä¸€ç‚¹é—®é¢˜ï¼š</p><p>å½“æˆ‘ä»¬è¿›è¡Œä¸‹é¢è¿™ç§è¿‡æ»¤ä¸€éƒ¨åˆ†çš„æƒ…å†µä¸‹ï¼š</p><p><code>TimeFilter</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@WebFilter(urlPatterns = &#123;&quot;/user/*&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        System.out.println(filterConfig.getServletContext().getContextPath());</span><br><span class="line">        System.out.println(<span class="string">&quot;Initialization........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;++++++++ Start ++++++++&quot;</span>);</span><br><span class="line">        Long start = <span class="keyword">new</span> Date().getTime();</span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">        System.out.println(<span class="string">&quot;Filter costs: &quot;</span>);</span><br><span class="line">        System.out.println(<span class="keyword">new</span> Date().getTime() - start);</span><br><span class="line">        System.out.println(<span class="string">&quot;++++++++ End ++++++++&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Filter is over&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>UserController</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;user/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;userIDï¼š&quot;</span> +id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>HelloController</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æˆ‘ä»¬è¿‡æ»¤çš„æ˜¯ <code>/user</code> åé¢æ‰€æœ‰çš„è¯·æ±‚ï¼Œä½†æ˜¯ç»“æœæ˜¯ <code>UserController</code> å’Œ <code>HelloController</code> éƒ½è¿›å…¥äº†è¿‡æ»¤å™¨ä¸­ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820202233.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820202233.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200820194717715"></p><p>æœ€ç»ˆè§£å†³æ–¹æ¡ˆï¼šå»æ‰åœ¨ <code>TimeFilter</code> ä¸­çš„ <strong>@Component</strong> æ³¨è§£ï¼Œåœ¨å¯åŠ¨ç±»ä¸ŠåŠ ä¸Š <strong>@ServletComponentScan</strong> æ³¨è§£å³å¯ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820202230.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820202230.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200820194815278"></p><p>åœ¨ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨äº†æ³¨è§£çš„æ–¹å¼è¿›è¡Œè¿‡æ»¤ï¼š</p><blockquote><p>@WebFilter(urlPatterns = â€œ/*â€)</p></blockquote><p>ç¬¬äºŒç§æ–¹å¼ï¼š</p><p>å»æ‰  <strong>@Component</strong> å’Œ *<em>@WebFilter(urlPatterns = {â€œ/user/</em>â€œ})** æ³¨è§£ï¼Œå¹¶é…ç½®å¦‚ä¸‹çš„é…ç½®ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">timeFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        FilterRegistrationBean filterRegistrationBean = <span class="keyword">new</span> FilterRegistrationBean();</span><br><span class="line">        TimeFilter timeFilter = <span class="keyword">new</span> TimeFilter();</span><br><span class="line">        filterRegistrationBean.setFilter(timeFilter);</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; urlList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        urlList.add(<span class="string">&quot;/user/*&quot;</span>);</span><br><span class="line"></span><br><span class="line">        filterRegistrationBean.setUrlPatterns(urlList);</span><br><span class="line">        <span class="keyword">return</span> filterRegistrationBean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒã€æ‹¦æˆªå™¨"><a href="#äºŒã€æ‹¦æˆªå™¨" class="headerlink" title="äºŒã€æ‹¦æˆªå™¨"></a>äºŒã€æ‹¦æˆªå™¨</h2><p>ç¼–å†™ä¸€ä¸ªæ‹¦æˆªå™¨ç±»å®ç° <code>HandlerInterceptor</code> ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¤„ç†æ‹¦æˆªä¹‹å‰&quot;</span>);</span><br><span class="line">        request.setAttribute(<span class="string">&quot;startTime&quot;</span>, <span class="keyword">new</span> Date().getTime());</span><br><span class="line">        System.out.println(((HandlerMethod) handler).getBean().getClass().getName());</span><br><span class="line">        System.out.println(((HandlerMethod) handler).getMethod().getName());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¼€å§‹å¤„ç†æ‹¦æˆª&quot;</span>);</span><br><span class="line">        Long start = (Long) request.getAttribute(<span class="string">&quot;startTime&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€æ‹¦æˆªå™¨ã€‘è€—æ—¶ &quot;</span> + (<span class="keyword">new</span> Date().getTime() - start));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¤„ç†æ‹¦æˆªä¹‹å&quot;</span>);</span><br><span class="line">        Long start = (Long) request.getAttribute(<span class="string">&quot;startTime&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€æ‹¦æˆªå™¨ã€‘è€—æ—¶ &quot;</span> + (<span class="keyword">new</span> Date().getTime() - start));</span><br><span class="line">        System.out.println(<span class="string">&quot;å¼‚å¸¸ä¿¡æ¯ &quot;</span> + ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>preHandle</code> æ–¹æ³•åœ¨å¤„ç†æ‹¦æˆªä¹‹å‰æ‰§è¡Œ</p><p><code>postHandle </code>æ–¹æ³•åªæœ‰å½“è¢«æ‹¦æˆªçš„æ–¹æ³•æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸æˆåŠŸæ—¶æ‰ä¼šå¤„ç†</p><p><code>afterCompletion</code> æ–¹æ³•æ— è®ºè¢«æ‹¦æˆªçš„æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ä¸å¦éƒ½ä¼šæ‰§è¡Œ</p></blockquote><p>å°†æˆ‘ä»¬å†™å¥½çš„æ‹¦æˆªå™¨æ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InterceptorConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    TimeInterceptor timeInterceptor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addInterceptor(timeInterceptor).addPathPatterns(<span class="string">&quot;/user/*&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·åˆ†åˆ«è¿è¡Œï¼š<a href="http://localhost:8080/user/888">http://localhost:8080/user/888</a> å’Œ <a href="http://localhost:8080/hello">http://localhost:8080/hello</a></p><p>å¯ä»¥çœ‹è§ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820202209.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820202209.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200820202151954"></p><p>åªæ˜¯å¯¹ <strong>user/888</strong> è¿›è¡Œæ‹¦æˆªäº†ï¼Œå¯¹ <strong>hello</strong> æ²¡æœ‰è¿›è¡Œæ‹¦æˆª</p><h2 id="ä¸‰ã€è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨çš„å¯¹æ¯”"><a href="#ä¸‰ã€è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨çš„å¯¹æ¯”" class="headerlink" title="ä¸‰ã€è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨çš„å¯¹æ¯”"></a>ä¸‰ã€è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨çš„å¯¹æ¯”</h2><p>æˆ‘ä»¬å†å°†å‰é¢çš„è¿‡æ»¤å™¨åŠ å…¥å…¶ä¸­ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820202751.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820202751.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200820202751525"></p><p>æœ‰ä¸€å¼ å·²ç»æ•´ç†å¥½æ‰§è¡Œé¡ºåºå›¾ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820202854.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820202854.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="32361-20180530095349427-444141538"></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootä¸­è·¨åŸŸé—®é¢˜</title>
      <link href="2020/08/20/SpringBoot%E4%B8%AD%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/"/>
      <url>2020/08/20/SpringBoot%E4%B8%AD%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€åŒæºç­–ç•¥"><a href="#ä¸€ã€åŒæºç­–ç•¥" class="headerlink" title="ä¸€ã€åŒæºç­–ç•¥"></a>ä¸€ã€åŒæºç­–ç•¥</h2><p>â€‹        åŒæºç­–ç•¥æ˜¯ç”± Netscape æå‡ºçš„ä¸€ä¸ªè‘—åçš„å®‰å…¨ç­–ç•¥ï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼Œç°åœ¨æ‰€æœ‰æ”¯æŒ JavaScript çš„æµè§ˆå™¨éƒ½ä¼šä½¿ç”¨è¿™ä¸ªç­–ç•¥ã€‚æ‰€è°“åŒæºæ˜¯æŒ‡åè®®ã€åŸŸåä»¥åŠç«¯å£è¦ç›¸åŒã€‚åŒæºç­–ç•¥æ˜¯åŸºäºå®‰å…¨æ–¹é¢çš„è€ƒè™‘æå‡ºæ¥çš„ï¼Œè¿™ä¸ªç­–ç•¥æœ¬èº«æ²¡é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­ï¼Œç”±äºå„ç§åŸå› åˆç»å¸¸æœ‰è·¨åŸŸçš„éœ€æ±‚ï¼Œä¼ ç»Ÿçš„è·¨åŸŸæ–¹æ¡ˆæ˜¯ JSONPï¼ŒJSONP è™½ç„¶èƒ½è§£å†³è·¨åŸŸä½†æ˜¯æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å±€é™æ€§ï¼Œé‚£å°±æ˜¯åªæ”¯æŒ GET è¯·æ±‚ï¼Œä¸æ”¯æŒå…¶ä»–ç±»å‹çš„è¯·æ±‚ï¼Œè€Œ CORSï¼ˆè·¨åŸŸæºèµ„æºå…±äº«ï¼‰ï¼ˆCORSï¼ŒCross-origin resource sharingï¼‰æ˜¯ä¸€ä¸ª W3C æ ‡å‡†ï¼Œå®ƒæ˜¯ä¸€ä»½æµè§ˆå™¨æŠ€æœ¯çš„è§„èŒƒï¼Œæä¾›äº† Web æœåŠ¡ä»ä¸åŒç½‘åŸŸä¼ æ¥æ²™ç›’è„šæœ¬çš„æ–¹æ³•ï¼Œä»¥é¿å¼€æµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œè¿™æ˜¯ JSONP æ¨¡å¼çš„ç°ä»£ç‰ˆã€‚åœ¨ Spring æ¡†æ¶ä¸­ï¼Œå¯¹äº CORS ä¹Ÿæä¾›äº†ç›¸åº”çš„è§£å†³æ–¹æ¡ˆï¼Œ SpringBoot ä¸­å¦‚ä½•å®ç° CORSã€‚</p><h2 id="äºŒã€å¦‚ä½•å‡ºç°"><a href="#äºŒã€å¦‚ä½•å‡ºç°" class="headerlink" title="äºŒã€å¦‚ä½•å‡ºç°"></a>äºŒã€å¦‚ä½•å‡ºç°</h2><p>å¯åŠ¨ä¸¤ä¸ª SpringBoot é¡¹ç›®ï¼Œåˆ†åˆ«ä»¥ 8080 å’Œ 8081 ç«¯å£å¯åŠ¨ï¼Œåœ¨å…¶ä¸­ä¸€ä¸ªå†™ä¸Šå¦‚ä¸‹çš„ Controllerï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;get hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;post hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å¦ä¸€ä¸ªä¸­å†™å…¥ä¸€ä¸ªé™æ€é¡µé¢ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery-3.5.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;btnClick()&quot;</span> <span class="attr">value</span>=<span class="string">&quot;get_button&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;btnClick2()&quot;</span> <span class="attr">value</span>=<span class="string">&quot;post_button&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">btnClick</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $.get(<span class="string">&#x27;http://localhost:8080/hello&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">&quot;#app&quot;</span>).html(msg);</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">btnClick2</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $.post(<span class="string">&#x27;http://localhost:8080/hello&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">&quot;#app&quot;</span>).html(msg);</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šè®°å¾—å¼•å…¥ Jquery</p></blockquote><p>åœ¨ <a href="http://localhost:8081/hello.html">http://localhost:8081/hello.html</a> ç‚¹å‡»ä»»ä½•è¯·æ±‚ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820133233.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820133233.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200820133227549"></p><p>å¯ä»¥çœ‹åˆ°æ­¤æ—¶å·²ç»å‘ç”Ÿè·¨åŸŸé—®é¢˜</p><h2 id="ä¸‰ã€è§£å†³æ–¹æ¡ˆ"><a href="#ä¸‰ã€è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€è§£å†³æ–¹æ¡ˆ"></a>ä¸‰ã€è§£å†³æ–¹æ¡ˆ</h2><p>ä»åç«¯è§£å†³ï¼Œä¿®æ”¹ Controller ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@CrossOrigin(origins = &quot;http://localhost:8081&quot;)</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;post hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@CrossOrigin(value = &quot;http://localhost:8081&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;get hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­ origins ä¸ value æ•ˆæœä¸€æ ·ï¼Œçœ‹æºç å¯ä»¥çŸ¥é“å®ƒä»¬äº’ç›¸æˆä¸ºå¯¹æ–¹çš„åˆ«å</p></blockquote><p>æ­¤æ—¶å·²ç»ä¸ä¼šå‡ºç°è·¨åŸŸé—®é¢˜</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820134429.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200820134429.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200820134429094"></p><h2 id="å››ã€åŠ å¼ºç‰ˆè§£å†³"><a href="#å››ã€åŠ å¼ºç‰ˆè§£å†³" class="headerlink" title="å››ã€åŠ å¼ºç‰ˆè§£å†³"></a>å››ã€åŠ å¼ºç‰ˆè§£å†³</h2><p>æ­¤æ—¶ï¼Œåœ¨æ¯ä¸€ä¸ªç±»æˆ–è€…æ–¹æ³•ä¸Šéƒ½ä½¿ç”¨è¿™ä¸ªæ³¨è§£ï¼Œæ³•å¤–ç‹‚å¾’å¼ ä¸‰éƒ½è§‰å¾—è¿™ä¸ªå¤ªéº»çƒ¦äº†</p><p>åªéœ€è¦é…ç½®ä¸€ä¸ªå®ç° <code>WebMvcConfigurer</code> é…ç½®ç±»ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CORSConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addMapping(<span class="string">&quot;/**&quot;</span>).allowedOrigins(<span class="string">&quot;http://localhost:8081&quot;</span>)</span><br><span class="line">                .allowedMethods(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">                .allowedHeaders(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š<code>/**</code> è¡¨ç¤ºæœ¬åº”ç”¨çš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šå»å¤„ç†è·¨åŸŸè¯·æ±‚ï¼›allowedMethods è¡¨ç¤ºå…è®¸é€šè¿‡çš„è¯·æ±‚æ•°ï¼›allowedHeaders åˆ™è¡¨ç¤ºå…è®¸çš„è¯·æ±‚å¤´ã€‚</p></blockquote><h2 id="äº”ã€å®‰å…¨é—®é¢˜"><a href="#äº”ã€å®‰å…¨é—®é¢˜" class="headerlink" title="äº”ã€å®‰å…¨é—®é¢˜"></a>äº”ã€å®‰å…¨é—®é¢˜</h2><p>å‡ºç°äº†ä¸€ä¸ªç‹å…«è€æœ¬è¡Œçš„é—®é¢˜ï¼šé€šè¿‡ Ajax å‘é€è·¨åŸŸè¯·æ±‚ï¼Œè™½ç„¶ç”¨æˆ·ä½“éªŒæé«˜äº†ï¼Œä½†æ˜¯ä¹Ÿæœ‰æ½œåœ¨çš„å¨èƒå­˜åœ¨ï¼Œå¸¸è§çš„å°±æ˜¯ CSRFï¼ˆCross-site request forgeryï¼‰è·¨ç«™è¯·æ±‚ä¼ªé€ ã€‚</p><blockquote><p>ä¸€å¥è¯ï¼šåˆ©ç”¨æˆ‘ä»¬è¿˜åœ¨ç™»å½•çš„çŠ¶æ€ï¼Œå³ Cookie æœ‰æ•ˆï¼Œæ‰“å¼€ä¸€ä¸ªæ­£å¸¸ç½‘ç«™ï¼Œè€Œè¿™ä¸ªç½‘ç«™ä¸Šå¯èƒ½æœ‰ä¸€ä¸ªéæ­£å¸¸æ“ä½œ ( å›¾ç‰‡ï¼Œé“¾æ¥ç­‰) ï¼Œé‚£ä½ å°±å¯èƒ½å·²ç»è¢«æ”»å‡»ã€‚</p></blockquote><p>åœ¨ä¿¡æ¯å®‰å…¨ä¸­ï¼Œæˆ‘ä»¬é˜²å¾¡ CSRF çš„æ–¹æ³•ä¸»è¦æ˜¯å¢åŠ  Tokenï¼Œè¿™ä¹Ÿæ˜¯ç°åœ¨å¤§å¤šæ•°é˜²å¾¡ CSRF çš„æ–¹å¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootä¸­è‡ªå®šä¹‰å¼‚å¸¸</title>
      <link href="2020/08/19/SpringBoot%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8/"/>
      <url>2020/08/19/SpringBoot%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€æ­£å¸¸å‡ºç°å¼‚å¸¸"><a href="#ä¸€ã€æ­£å¸¸å‡ºç°å¼‚å¸¸" class="headerlink" title="ä¸€ã€æ­£å¸¸å‡ºç°å¼‚å¸¸"></a>ä¸€ã€æ­£å¸¸å‡ºç°å¼‚å¸¸</h2><p>Controllerï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/diyError&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">error</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">2</span> / <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;diyError&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819140914.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819140914.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200819140914040"></p><blockquote><p>å¯ä»¥çœ‹è§æ­¤é”™è¯¯é¡µæ˜¯ SpringBoot æä¾›çš„ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰æä¾› /error é¡µé¢ï¼Œé¡ºä¾¿å±•ç¤ºæˆ‘ä»¬å‡ºç°çš„é”™è¯¯</p></blockquote><h2 id="äºŒã€é™æ€é¡µé¢å¼‚å¸¸"><a href="#äºŒã€é™æ€é¡µé¢å¼‚å¸¸" class="headerlink" title="äºŒã€é™æ€é¡µé¢å¼‚å¸¸"></a>äºŒã€é™æ€é¡µé¢å¼‚å¸¸</h2><p>åœ¨ <code>static</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>error</code> ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­æ–°å»º 404.html å’Œ 500.htmlï¼š</p><p><code>404.html:</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>404<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code> 500.htmlï¼š</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>500<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡è®¿é—® <a href="http://localhost:8080/diyError">http://localhost:8080/diyError</a></p><p>å¯ä»¥çœ‹è§å·²ç»è¿›å…¥è‡ªå®šä¹‰çš„é™æ€é¡µé¢äº†ï¼š<br><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819142425.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819142425.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200819142425408"></p><p>å†è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„é¡µé¢ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819142448.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819142448.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200819142448711"></p><blockquote><p>æ³¨ï¼šä¹Ÿå¯ä»¥åªå®šä¹‰  4xx.html ä¸ 5xx.html çš„é™æ€é¡µé¢ï¼Œåªè¦å‘ç”Ÿ 400-499 çš„çŠ¶æ€ç æˆ–è€… 500-599 çš„çŠ¶æ€ç å°±å¯¹åº” 4xx.html ä¸ 5xx.html çš„ç»“æœ</p></blockquote><h2 id="ä¸‰ã€åŠ¨æ€é¡µé¢å¼‚å¸¸"><a href="#ä¸‰ã€åŠ¨æ€é¡µé¢å¼‚å¸¸" class="headerlink" title="ä¸‰ã€åŠ¨æ€é¡µé¢å¼‚å¸¸"></a>ä¸‰ã€åŠ¨æ€é¡µé¢å¼‚å¸¸</h2><p>å¼•å…¥ thymeleaf çš„ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>templates</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>error</code> ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­æ–°å»º 404.htmlã€ 500.htmlã€ 4xx.htmlã€5xx.html ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819144108.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819144108.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200819144108160"></p><p>å†æ¬¡è®¿é—® <a href="http://localhost:8080/diyError">http://localhost:8080/diyError</a></p><p>å¯ä»¥çœ‹è§å·²ç»è¿›å…¥è‡ªå®šä¹‰çš„åŠ¨æ€é¡µé¢äº†ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819144234.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819144234.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200819144234652"></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819144308.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819144308.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200819144308646"></p><blockquote><p>ä¼˜å…ˆçº§ï¼š</p><ul><li>å¦‚æœæœ‰ 404 çš„é¡µé¢ï¼Œä¼šå…ˆæ‰¾ 404.htmlï¼›å¦‚æœæ²¡æœ‰å°±ä¼šæ‰¾ 4xx.html</li><li>å¦‚æœåŠ¨æ€é¡µé¢å’Œé™æ€é¡µé¢åŒæ—¶å­˜åœ¨ï¼Œä¼šä¼˜å…ˆä½¿ç”¨åŠ¨æ€é¡µé¢</li></ul><p>å®Œæ•´é¡ºåºå¤§æ¦‚å¦‚ä¸‹ï¼š</p><p>å‘ç”Ÿäº†500é”™è¯¯ â€“&gt; æŸ¥æ‰¾åŠ¨æ€ 500.html é¡µé¢ â€“&gt; æŸ¥æ‰¾é™æ€ 500.html  â€“&gt; æŸ¥æ‰¾åŠ¨æ€ 5xx.html â€“&gt; æŸ¥æ‰¾é™æ€ 5xx.html</p></blockquote><h2 id="å››ã€SpringBoot-æ€ä¹ˆè‡ªåŠ¨é…ç½®"><a href="#å››ã€SpringBoot-æ€ä¹ˆè‡ªåŠ¨é…ç½®" class="headerlink" title="å››ã€SpringBoot æ€ä¹ˆè‡ªåŠ¨é…ç½®"></a>å››ã€SpringBoot æ€ä¹ˆè‡ªåŠ¨é…ç½®</h2><p>å…³é”®ç±»ï¼š<code>ErrorMvcAutoConfiguration</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">DefaultErrorViewResolverConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> ResourceProperties resourceProperties;</span><br><span class="line"></span><br><span class="line">   DefaultErrorViewResolverConfiguration(ApplicationContext applicationContext,</span><br><span class="line">         ResourceProperties resourceProperties) &#123;</span><br><span class="line">      <span class="keyword">this</span>.applicationContext = applicationContext;</span><br><span class="line">      <span class="keyword">this</span>.resourceProperties = resourceProperties;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   <span class="meta">@ConditionalOnBean(DispatcherServlet.class)</span></span><br><span class="line">   <span class="meta">@ConditionalOnMissingBean(ErrorViewResolver.class)</span></span><br><span class="line">  <span class="comment">// é»˜è®¤çš„é”™è¯¯è§†å›¾è§£æå™¨ DefaultErrorViewResolver</span></span><br><span class="line">   <span class="function">DefaultErrorViewResolver <span class="title">conventionErrorViewResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> DefaultErrorViewResolver(<span class="keyword">this</span>.applicationContext, <span class="keyword">this</span>.resourceProperties);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨é»˜è®¤çš„é”™è¯¯è§†å›¾è§£æå™¨ <code>DefaultErrorViewResolver</code> ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveErrorView</span><span class="params">(HttpServletRequest request, HttpStatus status, Map&lt;String, Object&gt; model)</span> </span>&#123;</span><br><span class="line">   ModelAndView modelAndView = resolve(String.valueOf(status.value()), model);</span><br><span class="line">   <span class="keyword">if</span> (modelAndView == <span class="keyword">null</span> &amp;&amp; SERIES_VIEWS.containsKey(status.series())) &#123;</span><br><span class="line">      modelAndView = resolve(SERIES_VIEWS.get(status.series()), model);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœ modelAndView ä¸ºç©ºï¼Œå³æ²¡æ‰¾åˆ°å¯¹åº”çš„å…·ä½“ 404.htmlï¼Œå°±ä¼šç”¨ SERIES_VIEWS.containsKey(status.series())      æ‰¾ 4xx.html </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> ModelAndView <span class="title">resolve</span><span class="params">(String viewName, Map&lt;String, Object&gt; model)</span> </span>&#123;</span><br><span class="line">   String errorViewName = <span class="string">&quot;error/&quot;</span> + viewName;</span><br><span class="line">   TemplateAvailabilityProvider provider = <span class="keyword">this</span>.templateAvailabilityProviders.getProvider(errorViewName,</span><br><span class="line">         <span class="keyword">this</span>.applicationContext);</span><br><span class="line">   <span class="keyword">if</span> (provider != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(errorViewName, model);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> resolveResource(errorViewName, model);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ul><li>åˆ¤æ–­ error æ–‡ä»¶å¤¹ä¸‹é¢æ˜¯å¦æœ‰å¯¹åº”çš„çŠ¶æ€ç çš„æ–‡æ¡£</li><li>å†åˆ¤æ–­æ˜¯å¦æœ‰åŠ¨æ€é¡µé¢ï¼Œå³ TemplateAvailabilityProvider</li><li>å¦‚æœæ˜¯åŠ¨æ€é¡µé¢ï¼Œå°±è¿”å›åŠ¨æ€é¡µé¢ï¼›å¦åˆ™è¿”å›é™æ€é¡µé¢</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> ModelAndView <span class="title">resolveResource</span><span class="params">(String viewName, Map&lt;String, Object&gt; model)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">for</span> (String location : <span class="keyword">this</span>.resourceProperties.getStaticLocations()) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">         Resource resource = <span class="keyword">this</span>.applicationContext.getResource(location);</span><br><span class="line">         resource = resource.createRelative(viewName + <span class="string">&quot;.html&quot;</span>);</span><br><span class="line">         <span class="keyword">if</span> (resource.exists()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(<span class="keyword">new</span> HtmlResourceView(resource), model);</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äº”ã€è‡ªå®šä¹‰å¼‚å¸¸æ•°æ®"><a href="#äº”ã€è‡ªå®šä¹‰å¼‚å¸¸æ•°æ®" class="headerlink" title="äº”ã€è‡ªå®šä¹‰å¼‚å¸¸æ•°æ®"></a>äº”ã€è‡ªå®šä¹‰å¼‚å¸¸æ•°æ®</h2><p>åœ¨ <code>ErrorMvcAutoConfiguration</code> ä¸­ï¼Œå¤„ç†å¼‚å¸¸æ•°æ®çš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(value = ErrorAttributes.class, search = SearchStrategy.CURRENT)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> DefaultErrorAttributes <span class="title">errorAttributes</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> DefaultErrorAttributes();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <code>DefaultErrorAttributes()</code> ä¸­é€šè¿‡è®¾ç½®å‚æ•°å¾—åˆ°ç›¸åº”çš„ç»“æœ</p><p>ä¾‹å¦‚ï¼šå°† error ä¸­çš„ 5xx.html æ”¹ä¸ºï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>5xx<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>path<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;path&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>error<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;error&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>message<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;message&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>timestamp<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;timestamp&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>status<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;status&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>trace<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;trace&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä»”è¿è¡Œç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819162419.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200819162419.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200819162419826"></p><p>å†çœ‹ä¸€ä¸‹ä½¿ <code>DefaultErrorAttributes</code> ç”Ÿæ•ˆçš„æ¡ä»¶ï¼š</p><blockquote><p>@ConditionalOnMissingBean(value = ErrorAttributes.class, search = SearchStrategy.CURRENT)</p></blockquote><p>æ‰€ä»¥åªè¦æˆ‘ä»¬è‡ªå®šä¹‰ <code>ErrorAttributes.class</code> å°±å¯ä»¥å®ç°è‡ªå·±å®šä¹‰çš„å¼‚å¸¸æ•°æ®å¤„ç†</p><p>è‡ªå®šä¹‰ ErrorAttributes æœ‰ä¸¤ç§æ–¹å¼ ï¼š</p><ol><li>ç›´æ¥å®ç° ErrorAttributes æ¥å£</li><li>ç»§æ‰¿ DefaultErrorAttributesï¼ˆæ¨èï¼‰ï¼Œå› ä¸º DefaultErrorAttributes ä¸­å¯¹å¼‚å¸¸æ•°æ®çš„å¤„ç†å·²ç»å®Œæˆï¼Œå¼€å‘è€…å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</li></ol><p>æ–°å»ºä¸€ä¸ªé…ç½®ç±»ç»§æ‰¿ <code>DefaultErrorAttributes</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyErrorConfig</span> <span class="keyword">extends</span> <span class="title">DefaultErrorAttributes</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getErrorAttributes</span><span class="params">(WebRequest webRequest, ErrorAttributeOptions options)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Object&gt; errorAttributes = <span class="keyword">super</span>.getErrorAttributes(webRequest, options);</span><br><span class="line">        errorAttributes.put(<span class="string">&quot;myerror&quot;</span>, <span class="string">&quot;è‡ªå®šä¹‰å¼‚å¸¸&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> errorAttributes;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ 5xx.html ä¸­åŠ å…¥ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>myerror<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;myerror&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼šå¯ä»¥çœ‹åˆ°æ­¤æ—¶çš„è‡ªå®šä¹‰çš„ error å·²ç»åŠ å…¥</p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ•´åˆJSON</title>
      <link href="2020/08/18/SpringBoot%E6%95%B4%E5%90%88JSON/"/>
      <url>2020/08/18/SpringBoot%E6%95%B4%E5%90%88JSON/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€Jackson"><a href="#ä¸€ã€Jackson" class="headerlink" title="ä¸€ã€Jackson"></a>ä¸€ã€Jackson</h2><h3 id="1-ç¯å¢ƒæ­å»º"><a href="#1-ç¯å¢ƒæ­å»º" class="headerlink" title="1. ç¯å¢ƒæ­å»º"></a>1. ç¯å¢ƒæ­å»º</h3><p>åªè¦åŠ å…¥æ™®é€šçš„ Web ä¾èµ–å°±è¡Œï¼Œä¸ºäº†æ–¹ä¾¿ä¾ç„¶å¼•å…¥ Lombok å’Œ çƒ­éƒ¨ç½²</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817142417.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817142417.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200817142417630"></p><p>æ‰“å¼€ Maven ä¾èµ–å¯ä»¥çœ‹è§</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817142731.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817142731.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200817142731779"></p><blockquote><p>SpringBoot è‡ªå¸¦çš„å°±æ˜¯ jackson</p></blockquote><h3 id="2-SpringBootä¸­ä½¿ç”¨"><a href="#2-SpringBootä¸­ä½¿ç”¨" class="headerlink" title="2. SpringBootä¸­ä½¿ç”¨"></a>2. SpringBootä¸­ä½¿ç”¨</h3><p>2.1 å»ºç«‹å®ä½“ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> Date date;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.2  Controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;User&gt; users = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">            User user = <span class="keyword">new</span> User();</span><br><span class="line">            user.setId(i);</span><br><span class="line">            user.setName(<span class="string">&quot;wang&quot;</span> + i);</span><br><span class="line">            user.setAddress(<span class="string">&quot;shanghai&quot;</span> + i);</span><br><span class="line">            user.setDate(<span class="keyword">new</span> Date());</span><br><span class="line">            users.add(user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.3 ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817144557.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817144557.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200817144557760"></p><h3 id="3-æ·±å…¥äº†è§£-Springboot-ä¸­çš„-JSON-è½¬æ¢"><a href="#3-æ·±å…¥äº†è§£-Springboot-ä¸­çš„-JSON-è½¬æ¢" class="headerlink" title="3. æ·±å…¥äº†è§£ Springboot ä¸­çš„ JSON è½¬æ¢"></a>3. æ·±å…¥äº†è§£ Springboot ä¸­çš„ JSON è½¬æ¢</h3><p>æ€è€ƒï¼š</p><ol><li><p>å‰ç«¯ä¼ å…¥çš„ json æ•°æ®å¦‚ä½•è¢«è§£ææˆ Java å¯¹è±¡ä½œä¸º APIå…¥å‚</p></li><li><p>API è¿”å›ç»“æœåˆå¦‚ä½•å°† Java å¯¹è±¡è§£ææˆ json æ ¼å¼æ•°æ®è¿”å›ç»™å‰ç«¯</p></li></ol><p>å…³é”®ç±»ï¼š<code>HttpMessageConverter</code></p><blockquote><p>å®˜æ–¹åŸè¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Strategy interface that specifies a converter that can convert from and to HTTP requests and responses.</span><br></pre></td></tr></table></figure></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817150036.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817150036.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200817150036913"></p><p>ä» Structure ä¸­å¯ä»¥çœ‹è§ä¸€å…±æœ‰äº”ä¸ªæ–¹æ³•ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817150448.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817150448.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200817150448857"></p><p>canReadï¼šæ¥æ”¶åˆ°è¯·æ±‚æ—¶åˆ¤æ–­æ˜¯å¦èƒ½è¯»</p><p>canWriteï¼šè¿”å›ç»“æœæ—¶åˆ¤æ–­æ˜¯å¦èƒ½å†™</p><p>getSupportedMediaTypesï¼šè·å–æ”¯æŒçš„ MediaType</p><p>readï¼šèƒ½è¯»åˆ™è¯»</p><p>writeï¼šèƒ½å†™åˆ™å†™</p><blockquote><p>æ³¨ï¼šåœ¨å‰é¢æˆ‘ä»¬æ²¡æœ‰å†™ä»»ä½•é…ç½®ä¹Ÿèƒ½å®ç°è½¬æ¢ï¼Œæ˜¯ç”±äºå…¶ä¸­æœ‰ç¼ºçœé…ç½®</p><p>å¯ä»¥åœ¨ <code>WebMvcConfigurationSupport </code> ä¸­æŸ¥çœ‹</p></blockquote><h3 id="4-è‡ªå®šä¹‰-JSON-é…ç½®"><a href="#4-è‡ªå®šä¹‰-JSON-é…ç½®" class="headerlink" title="4.è‡ªå®šä¹‰ JSON é…ç½®"></a>4.è‡ªå®šä¹‰ JSON é…ç½®</h3><p>æ–¹å¼ä¸€ï¼šåœ¨éœ€è¦è½¬æ¢çš„å±æ€§ä¸ŠåŠ ä¸Šæ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date date;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817152735.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817152735.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200817152735887"></p><p>æ–¹å¼äºŒï¼š</p><p>é…ç½®ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">MappingJackson2HttpMessageConverter <span class="title">mappingJackson2HttpMessageConverter</span> <span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        MappingJackson2HttpMessageConverter converter = <span class="keyword">new</span> MappingJackson2HttpMessageConverter();</span><br><span class="line">        ObjectMapper objectMapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        objectMapper.setDateFormat(<span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd-HH:mm:ss&quot;</span>));</span><br><span class="line">        converter.setObjectMapper(objectMapper);</span><br><span class="line">        <span class="keyword">return</span> converter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817154209.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817154209.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200817154209854"></p><p>ä½¿ç”¨ä¸‹é¢çš„é…ç½®ç±»ä¹Ÿå¯ä»¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Bean</span></span><br><span class="line"><span class="comment">//    MappingJackson2HttpMessageConverter mappingJackson2HttpMessageConverter () &#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();</span></span><br><span class="line"><span class="comment">//        ObjectMapper objectMapper = new ObjectMapper();</span></span><br><span class="line"><span class="comment">//        objectMapper.setDateFormat(new SimpleDateFormat(&quot;yyyy-MM-dd-HH:mm:ss&quot;));</span></span><br><span class="line"><span class="comment">//        converter.setObjectMapper(objectMapper);</span></span><br><span class="line"><span class="comment">//        return converter;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">ObjectMapper <span class="title">objectMapper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ObjectMapper objectMapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        objectMapper.setDateFormat(<span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> objectMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817154533.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200817154533.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200817154533630"></p><h3 id="5-Gson-å’Œ-Fastjson"><a href="#5-Gson-å’Œ-Fastjson" class="headerlink" title="5.Gson å’Œ Fastjson"></a>5.Gson å’Œ Fastjson</h3><p>å¦‚æœæƒ³è¦å’Œ Jackson ä¸€æ ·è‡ªå®šä¹‰é…ç½®ï¼š</p><p>åªéœ€è¦é…ç½®ï¼š<code>GsonHttpMessageConverter</code> å’Œ <code>FastJsonHttpMessageConverter</code></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> JSON </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ControllerAdviceæ³¨è§£çš„ä½¿ç”¨</title>
      <link href="2020/08/18/ControllerAdvice%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>2020/08/18/ControllerAdvice%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€ç”¨æ³•"><a href="#ä¸€ã€ç”¨æ³•" class="headerlink" title="ä¸€ã€ç”¨æ³•"></a>ä¸€ã€ç”¨æ³•</h2><ol><li>å¤„ç†å…¨å±€å¼‚å¸¸</li><li>é¢„è®¾å…¨å±€æ•°æ®</li><li>è¯·æ±‚å‚æ•°é¢„å¤„ç†</li></ol><h2 id="äºŒã€å¤„ç†å…¨å±€å¼‚å¸¸"><a href="#äºŒã€å¤„ç†å…¨å±€å¼‚å¸¸" class="headerlink" title="äºŒã€å¤„ç†å…¨å±€å¼‚å¸¸"></a>äºŒã€å¤„ç†å…¨å±€å¼‚å¸¸</h2><p>æˆ‘ä»¬åªéœ€è¦åœ¨ <strong>application.properties</strong>ä¸­é…ç½®ï¼šspring.servlet.multipart.max-file-size=1KB</p><p>å°±å¯ä»¥çœ‹è§åœ¨ä¸Šä¼ å›¾ç‰‡æ—¶å°±ä¼šæŠ¥ 500 å¼‚å¸¸ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200818200228.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200818200228.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200818200222467"></p><p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥è‡ªå·±è‡ªå®šä¹‰å¤„ç† è¿™ç§å¼‚å¸¸ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyException</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(MaxUploadSizeExceededException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myException</span><span class="params">(MaxUploadSizeExceededException e, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        PrintWriter writer = response.getWriter();</span><br><span class="line">        writer.write(<span class="string">&quot;ä¸Šä¼ å¤§å°é™åˆ¶ä¸º1KB&quot;</span>);</span><br><span class="line">        writer.flush();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€é¢„è®¾å…¨å±€æ•°æ®"><a href="#ä¸‰ã€é¢„è®¾å…¨å±€æ•°æ®" class="headerlink" title="ä¸‰ã€é¢„è®¾å…¨å±€æ•°æ®"></a>ä¸‰ã€é¢„è®¾å…¨å±€æ•°æ®</h2><p>è®¾ç½®å…¨å±€å˜é‡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalData</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ModelAttribute(value = &quot;data&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">map</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;wangyi&quot;</span>, <span class="string">&quot;ç‹ä¸€&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;wangba&quot;</span>, <span class="string">&quot;ç‹å…«&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å–å‡ºè®¾ç½®çš„å€¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = model.asMap();</span><br><span class="line">        Set&lt;String&gt; set = map.keySet();</span><br><span class="line">        <span class="keyword">for</span> (String s : set) &#123;</span><br><span class="line">            System.out.println(s + <span class="string">&quot;:&quot;</span> + map.get(s));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200818203200.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200818203200.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200818203200239"></p><h2 id="å››ã€è¯·æ±‚å‚æ•°é¢„å¤„ç†"><a href="#å››ã€è¯·æ±‚å‚æ•°é¢„å¤„ç†" class="headerlink" title="å››ã€è¯·æ±‚å‚æ•°é¢„å¤„ç†"></a>å››ã€è¯·æ±‚å‚æ•°é¢„å¤„ç†</h2><p>å®ä½“ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Author</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Controller:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/book&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">book</span><span class="params">(Book book, Author author)</span> </span>&#123;</span><br><span class="line">        System.out.println(book);</span><br><span class="line">        System.out.println(author);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ Postman è¿›è¡Œæµ‹è¯•ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200818204743.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200818204743.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200818204743394"></p><p>å¾—åˆ°æœ€ç»ˆç»“æœä¸ºï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200818204824.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200818204824.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200818204824095"></p><p>å½“å‡ºç°ç›¸åŒå‚æ•°æ—¶ï¼Œå¹¶ä¸èƒ½åˆ†æ¸…æ¥šå‚æ•°å±äºå“ªä¸ªå¯¹è±¡ï¼Œåªèƒ½å°†å‚æ•°èµ‹å€¼ç»™æ¯ä¸€ä¸ªæ‹¥æœ‰ç›¸åŒå‚æ•°çš„å¯¹è±¡</p><p>å¤„ç†ï¼š</p><p>Controllerï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/book&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">book</span><span class="params">(<span class="meta">@ModelAttribute(&quot;b&quot;)</span> Book book,</span></span></span><br><span class="line"><span class="function"><span class="params">                     <span class="meta">@ModelAttribute(&quot;a&quot;)</span> Author author)</span> </span>&#123;</span><br><span class="line">        System.out.println(book);</span><br><span class="line">        System.out.println(author);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚æ•°é…ç½®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalData</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@InitBinder(&quot;a&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initA</span><span class="params">(WebDataBinder binder)</span> </span>&#123;</span><br><span class="line">        binder.setFieldDefaultPrefix(<span class="string">&quot;a.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@InitBinder(&quot;b&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initB</span><span class="params">(WebDataBinder binder)</span> </span>&#123;</span><br><span class="line">        binder.setFieldDefaultPrefix(<span class="string">&quot;b.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ Postman è¿›è¡Œæµ‹è¯•ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200818205810.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200818205810.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200818205810853"></p><p>ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200818205832.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200818205832.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200818205832096"></p>]]></content>
      
      
      <categories>
          
          <category> Spring BootçœŸçš„é¦™ç³»åˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
            <tag> æ³¨è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ElasticSearchå…¥é—¨</title>
      <link href="2020/08/12/ElasticSearch%E5%85%A5%E9%97%A8/"/>
      <url>2020/08/12/ElasticSearch%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€å‚è€ƒé“¾æ¥"><a href="#ä¸€ã€å‚è€ƒé“¾æ¥" class="headerlink" title="ä¸€ã€å‚è€ƒé“¾æ¥"></a>ä¸€ã€å‚è€ƒé“¾æ¥</h2><p><a href="https://www.elastic.co/cn/">01.ESå®˜ç½‘</a></p><p><a href="http://www.iocoder.cn/Spring-Boot/Elasticsearch/">02.Spring Boot Elasticsearch å…¥é—¨</a></p><p><a href="http://www.iocoder.cn/Fight/Schematic-Elasticsearch-principle/">03.å›¾è§£ Elasticsearch åŸç†</a></p><h2 id="äºŒã€ElasticSearchæ¦‚è¿°"><a href="#äºŒã€ElasticSearchæ¦‚è¿°" class="headerlink" title="äºŒã€ElasticSearchæ¦‚è¿°"></a>äºŒã€ElasticSearchæ¦‚è¿°</h2><h2 id="ä¸‰ã€Solrå’ŒElasticSearchçš„å¯¹æ¯”"><a href="#ä¸‰ã€Solrå’ŒElasticSearchçš„å¯¹æ¯”" class="headerlink" title="ä¸‰ã€Solrå’ŒElasticSearchçš„å¯¹æ¯”"></a>ä¸‰ã€Solrå’ŒElasticSearchçš„å¯¹æ¯”</h2><h2 id="å››ã€ElasticSearchå®‰è£…"><a href="#å››ã€ElasticSearchå®‰è£…" class="headerlink" title="å››ã€ElasticSearchå®‰è£…"></a>å››ã€ElasticSearchå®‰è£…</h2><h2 id="äº”ã€Kibanaå®‰è£…"><a href="#äº”ã€Kibanaå®‰è£…" class="headerlink" title="äº”ã€Kibanaå®‰è£…"></a>äº”ã€Kibanaå®‰è£…</h2><h3 id="5-1-ä¸‹è½½"><a href="#5-1-ä¸‹è½½" class="headerlink" title="5.1 ä¸‹è½½"></a>5.1 ä¸‹è½½</h3><blockquote><p><a href="https://www.elastic.co/cn/downloads/kibana">Kibanaå®˜æ–¹ä¸‹è½½åœ°å€</a></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812151628.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812151628.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728094906706"></p><p>æ³¨ï¼šå¯ä»¥åœ¨<a href="https://www.elastic.co/downloads/past-releases#kibana">past releases</a>ä¸‹è½½è€ç‰ˆæœ¬</p></blockquote><h3 id="5-2-è¿è¡Œ"><a href="#5-2-è¿è¡Œ" class="headerlink" title="5.2 è¿è¡Œ"></a>5.2 è¿è¡Œ</h3><p>è§£å‹åè¿›å…¥binç›®å½•è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./kibana</span><br></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨æ‰“å¼€ï¼š</p><p><a href="http://localhost:5601/">http://localhost:5601/</a></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812151656.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812151656.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728095343130"></p><h3 id="5-3-æ±‰åŒ–"><a href="#5-3-æ±‰åŒ–" class="headerlink" title="5.3 æ±‰åŒ–"></a>5.3 æ±‰åŒ–</h3><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812151708.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812151708.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728095941769"></p><p>zh-CN.jsonæ˜¯Kibanaçš„æ±‰åŒ–åŒ…</p><p>å†åˆ° kibana.yml ä¸­åŠ å…¥ï¼š<img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812151717.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812151717.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728100108546"></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812151725.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812151725.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728100208569"></p><h2 id="å…­ã€ElasticSearchæ ¸å¿ƒæ¦‚å¿µ"><a href="#å…­ã€ElasticSearchæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="å…­ã€ElasticSearchæ ¸å¿ƒæ¦‚å¿µ"></a>å…­ã€ElasticSearchæ ¸å¿ƒæ¦‚å¿µ</h2><h3 id="6-1-ä¸å…³ç³»å‹æ•°æ®åº“å¯¹æ¯”"><a href="#6-1-ä¸å…³ç³»å‹æ•°æ®åº“å¯¹æ¯”" class="headerlink" title="6.1 ä¸å…³ç³»å‹æ•°æ®åº“å¯¹æ¯”"></a>6.1 ä¸å…³ç³»å‹æ•°æ®åº“å¯¹æ¯”</h3><blockquote><p><strong>elasticsearchæ˜¯é¢å‘æ–‡æ¡£ï¼Œå…³ç³»å‹æ•°æ®åº“å’Œ elasticsearch å®¢è§‚çš„å¯¹æ¯”ï¼ä¸€åˆ‡éƒ½æ˜¯JSON</strong></p></blockquote><table><thead><tr><th align="center">MySQL</th><th align="center">ElasticSearch</th></tr></thead><tbody><tr><td align="center">æ•°æ®åº“ï¼ˆdatabaseï¼‰</td><td align="center">ç´¢å¼•ï¼ˆindexï¼‰</td></tr><tr><td align="center">è¡¨ï¼ˆtablesï¼‰</td><td align="center">ç±»å‹ï¼ˆtypesï¼‰</td></tr><tr><td align="center">ES</td><td align="center">æ–‡æ¡£ï¼ˆdocumentsï¼‰</td></tr><tr><td align="center">åˆ—ï¼ˆcolumnsï¼‰</td><td align="center">å­—æ®µï¼ˆfieldsï¼‰</td></tr></tbody></table><p><code>æ³¨ï¼š</code>å…¶ä¸­ types é€æ¸è¢«å¼ƒç”¨äº†ï¼Œ8.Xå°†è¢«åˆ é™¤</p><h3 id="6-2-ä¸€ä¸ªğŸŒ°ï¼š"><a href="#6-2-ä¸€ä¸ªğŸŒ°ï¼š" class="headerlink" title="6.2 ä¸€ä¸ªğŸŒ°ï¼š"></a>6.2 ä¸€ä¸ªğŸŒ°ï¼š</h3><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812151826.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812151826.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728102741475"></p><p>å¯¹åº”ä¸Šé¢æ•°æ®åº“ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152319.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152319.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728110933851"></p><h3 id="6-3-è®¾è®¡"><a href="#6-3-è®¾è®¡" class="headerlink" title="6.3 è®¾è®¡"></a>6.3 è®¾è®¡</h3><p>elasticsearch(é›†ç¾¤)ä¸­å¯ä»¥åŒ…å«å¤šä¸ªç´¢å¼•(æ•°æ®åº“)ï¼Œæ¯ä¸ªç´¢å¼•ä¸­å¯ä»¥åŒ…å«å¤šä¸ªç±»å‹(è¡¨)ï¼Œæ¯ä¸ªç±»å‹ä¸‹åˆåŒ…å«å¤šä¸ªæ–‡æ¡£(è¡Œ)ï¼Œæ¯ä¸ªæ–‡æ¡£ä¸­åˆåŒ…å«å¤šä¸ªå­—æ®µ(åˆ—)ã€‚</p><p><strong>ç‰©ç†è®¾è®¡ï¼š</strong></p><p>elasticsearch åœ¨åå°æŠŠæ¯ä¸ªç´¢å¼•åˆ’åˆ†æˆå¤šä¸ªåˆ†ç‰‡ï¼Œæ¯åˆ†åˆ†ç‰‡å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„ä¸åŒæœåŠ¡å™¨é—´è¿ç§» </p><p>ä¸€ä¸ªäººå°±æ˜¯ä¸€ä¸ªé›†ç¾¤ï¼é»˜è®¤çš„é›†ç¾¤åç§°å°±æ˜¯ elaticsearh</p><p>å‚è€ƒä»¥ä¸‹ï¼š</p><ol><li>äº‘ä¸Šçš„é›†ç¾¤<img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152124.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152124.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728104645355"></li><li>é›†ç¾¤é‡Œçš„ç›’å­<img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152218.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152218.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728104717763"></li><li>èŠ‚ç‚¹ä¹‹é—´<img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152227.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152227.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728104728531"></li><li>ç´¢å¼•é‡Œçš„å°æ–¹å—<img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152234.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152234.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728104741324"></li></ol><p>åœ¨ ElasticSearch head ä¸­å¯ä»¥çœ‹è§é»˜è®¤é›†ç¾¤çš„åå­—ä¸ºï¼š<code>elasticsearch</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152244.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152244.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728105040312"></p><p><strong>é€»è¾‘è®¾è®¡ï¼š</strong></p><p>ä¸€ä¸ªç´¢å¼•ç±»å‹ä¸­ï¼ŒåŒ…å«å¤šä¸ªæ–‡æ¡£ï¼Œæ¯”å¦‚è¯´æ–‡æ¡£1ï¼Œæ–‡æ¡£2ã€‚ å½“æˆ‘ä»¬ç´¢å¼•ä¸€ç¯‡æ–‡æ¡£æ—¶ï¼Œå¯ä»¥é€šè¿‡è¿™æ ·çš„é¡ºåºæ‰¾åˆ°å®ƒ: </p><blockquote><p><code>ç´¢å¼• ----&gt; ç±»å‹ ----&gt; æ–‡æ¡£ID </code></p></blockquote><p>é€šè¿‡è¿™ä¸ªç»„åˆæˆ‘ä»¬å°±èƒ½ç´¢å¼•åˆ°æŸä¸ªå…·ä½“çš„æ–‡æ¡£ã€‚ æ³¨æ„ï¼šIDä¸å¿…æ˜¯æ•´æ•°ï¼Œå®é™…ä¸Šå®ƒæ˜¯ä¸ªå­—ç¬¦ä¸²ã€‚</p><h3 id="6-4-æ–‡æ¡£"><a href="#6-4-æ–‡æ¡£" class="headerlink" title="6.4 æ–‡æ¡£"></a>6.4 æ–‡æ¡£</h3><p>å°±æ˜¯æˆ‘ä»¬çš„<code>ä¸€æ¡æ•°æ®</code></p><p>ä¹‹å‰è¯´elasticsearchæ˜¯é¢å‘æ–‡æ¡£çš„ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€ç´¢å¼•å’Œæœç´¢æ•°æ®çš„æœ€å°å•ä½æ˜¯æ–‡æ¡£ï¼Œelasticsearch ä¸­ï¼Œæ–‡æ¡£æœ‰å‡ ä¸ªé‡è¦å±æ€§ :</p><ul><li>è‡ªæˆ‘åŒ…å«ï¼Œä¸€ç¯‡æ–‡æ¡£åŒæ—¶åŒ…å«å­—æ®µå’Œå¯¹åº”çš„å€¼ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶åŒ…å« keyï¼švalueï¼</li><li>å¯ä»¥æ˜¯å±‚æ¬¡å‹çš„ï¼Œä¸€ä¸ªæ–‡æ¡£ä¸­åŒ…å«è‡ªæ–‡æ¡£ï¼Œå¤æ‚çš„é€»è¾‘å®ä½“å°±æ˜¯è¿™ä¹ˆæ¥çš„ï¼å°±æ˜¯ä¸€ä¸ªjsonå¯¹è±¡ï¼</li></ul><p>çµæ´»çš„ç»“æ„ï¼Œæ–‡æ¡£ä¸ä¾èµ–é¢„å…ˆå®šä¹‰çš„æ¨¡å¼ï¼Œæˆ‘ä»¬çŸ¥é“å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œè¦æå‰å®šä¹‰å­—æ®µæ‰èƒ½ä½¿ç”¨ï¼Œ åœ¨elasticsearchä¸­ï¼Œå¯¹äºå­—æ®µæ˜¯éå¸¸çµæ´»çš„ï¼Œæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å¿½ç•¥è¯¥å­—æ®µï¼Œæˆ–è€…åŠ¨æ€çš„æ·»åŠ ä¸€ä¸ªæ–°çš„å­—æ®µã€‚</p><p>å°½ç®¡æˆ‘ä»¬å¯ä»¥éšæ„çš„æ–°å¢æˆ–è€…å¿½ç•¥æŸä¸ªå­—æ®µï¼Œä½†æ˜¯ï¼Œæ¯ä¸ªå­—æ®µçš„ç±»å‹éå¸¸é‡è¦ï¼Œæ¯”å¦‚ä¸€ä¸ªå¹´é¾„å­—æ®µç±»å‹ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯æ•´å‹ã€‚å› ä¸ºelasticsearchä¼šä¿å­˜å­—æ®µå’Œç±»å‹ä¹‹é—´çš„æ˜ å°„åŠå…¶ä»–çš„è®¾ç½®ã€‚è¿™ç§æ˜ å°„å…·ä½“åˆ°æ¯ä¸ªæ˜ å°„çš„æ¯ç§ç±»å‹ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨elasticsearchä¸­ï¼Œç±»å‹æœ‰æ—¶å€™ä¹Ÿç§°ä¸ºæ˜ å°„ç±»å‹ ã€‚</p><h3 id="6-5-ç±»å‹"><a href="#6-5-ç±»å‹" class="headerlink" title="6.5 ç±»å‹"></a>6.5 ç±»å‹</h3><p>â€‹        ç±»å‹æ˜¯æ–‡æ¡£çš„é€»è¾‘å®¹å™¨ï¼Œå°±åƒå…³ç³»å‹æ•°æ®åº“ä¸€æ ·ï¼Œè¡¨æ ¼æ˜¯è¡Œçš„å®¹å™¨ã€‚ ç±»å‹ä¸­å¯¹äºå­—æ®µçš„å®šä¹‰ç§°ä¸ºæ˜ å°„ï¼Œ æ¯”å¦‚ name æ˜ å°„ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚ æˆ‘ä»¬è¯´æ–‡æ¡£æ˜¯æ— æ¨¡å¼çš„ï¼Œå®ƒä»¬ä¸éœ€è¦æ‹¥æœ‰æ˜ å°„ä¸­æ‰€å®šä¹‰çš„æ‰€æœ‰å­—æ®µï¼Œ æ¯”å¦‚æ–°å¢ä¸€ä¸ªå­—æ®µï¼Œé‚£ä¹ˆelasticsearchæ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿelasticsearchä¼šè‡ªåŠ¨çš„å°†æ–°å­—æ®µåŠ å…¥æ˜ å°„ï¼Œä½†æ˜¯è¿™ä¸ªå­—æ®µçš„ä¸ç¡®å®šå®ƒæ˜¯ä»€ä¹ˆç±»å‹ï¼Œelasticsearchå°±å¼€å§‹çŒœï¼Œå¦‚æœè¿™ä¸ªå€¼æ˜¯18ï¼Œé‚£ä¹ˆelasticsearchä¼šè®¤ä¸ºå®ƒæ˜¯æ•´å‹ã€‚ ä½†æ˜¯elasticsearchä¹Ÿå¯èƒ½çŒœä¸å¯¹ï¼Œ æ‰€ä»¥æœ€å®‰å…¨çš„æ–¹å¼å°±æ˜¯æå‰å®šä¹‰å¥½æ‰€éœ€è¦çš„æ˜ å°„ï¼Œè¿™ç‚¹è·Ÿå…³ç³»å‹æ•°æ®åº“æ®Šé€”åŒå½’äº†ï¼Œå…ˆå®šä¹‰å¥½å­—æ®µï¼Œç„¶åå†ä½¿ç”¨ã€‚</p><h3 id="6-6-ç´¢å¼•"><a href="#6-6-ç´¢å¼•" class="headerlink" title="6.6 ç´¢å¼•"></a>6.6 ç´¢å¼•</h3><p>å°±æ˜¯<code>æ•°æ®åº“</code></p><p>ç´¢å¼•æ˜¯æ˜ å°„ç±»å‹çš„å®¹å™¨ï¼Œelasticsearchä¸­çš„ç´¢å¼•æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ–‡æ¡£é›†åˆã€‚ç´¢å¼•å­˜å‚¨äº†æ˜ å°„ç±»å‹çš„å­—æ®µå’Œå…¶ä»–è®¾ç½®ã€‚ ç„¶åå®ƒä»¬è¢«å­˜å‚¨åˆ°äº†å„ä¸ªåˆ†ç‰‡ä¸Šäº†ã€‚ æˆ‘ä»¬æ¥ç ”ç©¶ä¸‹åˆ†ç‰‡æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p>ä¸€ä¸ªé›†ç¾¤è‡³å°‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€Œä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ªelasricsearchè¿›ç¨‹ï¼ŒèŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªç´¢å¼•é»˜è®¤çš„ï¼Œå¦‚æœä½ åˆ›å»ºç´¢å¼•ï¼Œé‚£ä¹ˆç´¢å¼•å°†ä¼šæœ‰ä¸ª5ä¸ªåˆ†ç‰‡ ( primary shard ,åˆç§°ä¸»åˆ†ç‰‡ ) æ„æˆçš„ï¼Œæ¯ä¸€ä¸ªä¸»åˆ†ç‰‡ä¼šæœ‰ä¸€ä¸ªå‰¯æœ¬ ( replica shard ,åˆç§°å¤åˆ¶åˆ†ç‰‡ )</p><p>åœ¨ ElasticSearch head ä¸­å¯ä»¥çœ‹è§åˆšå»ºç«‹çš„ç´¢å¼•æ˜¯5ä¸ªåˆ†ç‰‡ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152341.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152341.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728111430420"></p><h3 id="6-7-å€’æ’"><a href="#6-7-å€’æ’" class="headerlink" title="6.7 å€’æ’"></a>6.7 å€’æ’</h3><p>elasticsearchä½¿ç”¨çš„æ˜¯ä¸€ç§ç§°ä¸ºå€’æ’ç´¢å¼•çš„ç»“æ„ï¼Œé‡‡ç”¨Luceneå€’æ’ç´¢ä½œä¸ºåº•å±‚ã€‚è¿™ç§ç»“æ„é€‚ç”¨äºå¿«é€Ÿçš„å…¨æ–‡æœç´¢ï¼Œ ä¸€ä¸ªç´¢å¼•ç”±æ–‡æ¡£ä¸­æ‰€æœ‰ä¸é‡å¤çš„åˆ—è¡¨æ„æˆï¼Œå¯¹äºæ¯ä¸€ä¸ªè¯ï¼Œéƒ½æœ‰ä¸€ä¸ªåŒ…å«å®ƒçš„æ–‡æ¡£åˆ—è¡¨ã€‚ ä¾‹ å¦‚ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªæ–‡æ¡£ï¼Œ æ¯ä¸ªæ–‡æ¡£åŒ…å«å¦‚ä¸‹å†…å®¹ï¼š</p><blockquote><p>Study every day, good good up to forever           # æ–‡æ¡£1åŒ…å«çš„å†…å®¹<br>To forever, study every day, good good up          # æ–‡æ¡£2åŒ…å«çš„å†…å®¹</p></blockquote><p>ä¸ºäº†åˆ›å»ºå€’æ’ç´¢å¼•ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å°†æ¯ä¸ªæ–‡æ¡£æ‹†åˆ†æˆç‹¬ç«‹çš„è¯(æˆ–ç§°ä¸ºè¯æ¡æˆ–è€…tokens)ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰ä¸é‡ å¤çš„è¯æ¡çš„æ’åºåˆ—è¡¨ï¼Œç„¶ååˆ—å‡ºæ¯ä¸ªè¯æ¡å‡ºç°åœ¨å“ªä¸ªæ–‡æ¡£</p><table><thead><tr><th align="center">term</th><th align="center">doc_1</th><th align="center">doc_2</th></tr></thead><tbody><tr><td align="center">Study</td><td align="center">âˆš</td><td align="center">X</td></tr><tr><td align="center">To</td><td align="center">X</td><td align="center">âˆš</td></tr><tr><td align="center">every</td><td align="center">âˆš</td><td align="center">âˆš</td></tr><tr><td align="center">forever</td><td align="center">âˆš</td><td align="center">âˆš</td></tr><tr><td align="center">day</td><td align="center">âˆš</td><td align="center">âˆš</td></tr><tr><td align="center">study</td><td align="center">X</td><td align="center">âˆš</td></tr><tr><td align="center">good</td><td align="center">âˆš</td><td align="center">âˆš</td></tr><tr><td align="center">every</td><td align="center">âˆš</td><td align="center">âˆš</td></tr><tr><td align="center">to</td><td align="center">âˆš</td><td align="center">X</td></tr><tr><td align="center">up</td><td align="center">âˆš</td><td align="center">âˆš</td></tr></tbody></table><p>ç°åœ¨ï¼Œæˆ‘ä»¬è¯•å›¾æœç´¢ to foreverï¼Œåªéœ€è¦æŸ¥çœ‹åŒ…å«æ¯ä¸ªè¯æ¡çš„æ–‡æ¡£ <code>score</code></p><table><thead><tr><th align="center">term</th><th align="center">doc_1</th><th align="center">doc_2</th></tr></thead><tbody><tr><td align="center">to</td><td align="center">âˆš</td><td align="center">X</td></tr><tr><td align="center">forever</td><td align="center">âˆš</td><td align="center">âˆš</td></tr><tr><td align="center">total</td><td align="center">2</td><td align="center">1</td></tr></tbody></table><p>å¦‚æœæ²¡æœ‰åˆ«çš„æ¡ä»¶ï¼Œç°åœ¨ï¼Œè¿™ä¸¤ä¸ªåŒ…å«å…³é”®å­—çš„æ–‡æ¡£éƒ½å°†è¿”å›ã€‚</p><p>åœ¨elasticsearchä¸­ï¼Œ ç´¢å¼• ï¼ˆåº“ï¼‰è¿™ä¸ªè¯è¢«é¢‘ç¹ä½¿ç”¨ï¼Œè¿™å°±æ˜¯æœ¯è¯­çš„ä½¿ç”¨ã€‚ åœ¨elasticsearchä¸­ï¼Œç´¢å¼•è¢«åˆ†ä¸ºå¤šä¸ªåˆ†ç‰‡ï¼Œæ¯ä»½åˆ†ç‰‡æ˜¯ä¸€ä¸ªLuceneçš„ç´¢å¼•ã€‚æ‰€ä»¥ä¸€ä¸ªelasticsearchç´¢å¼•æ˜¯ç”±å¤šä¸ªLuceneç´¢å¼•ç»„æˆçš„ã€‚åˆ«é—®ä¸ºä»€ä¹ˆï¼Œè°è®©elasticsearchä½¿ç”¨Luceneä½œä¸ºåº•å±‚å‘¢! å¦‚æ— ç‰¹æŒ‡ï¼Œè¯´èµ·ç´¢å¼•éƒ½æ˜¯æŒ‡elasticsearch çš„ç´¢å¼•ã€‚</p><p>å…³ç³»å›¾ï¼š</p><blockquote><p>ä¸€ä¸ª ES ç´¢å¼• â€”â€“&gt; å¤šä¸ªåˆ†ç‰‡(shard)</p><p>â€‹                                       ä¸€ä¸ªåˆ†ç‰‡(shard) â€”â€“&gt; ä¸€ä¸ª Lucene ç´¢å¼•</p><p>ä¸€ä¸ª ES ç´¢å¼• â€”â€“&gt; â€”â€“&gt; å¤šä¸ª Lucene ç´¢å¼•</p></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152359.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152359.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728131631335"></p><h2 id="ä¸ƒã€IKåˆ†è¯å™¨"><a href="#ä¸ƒã€IKåˆ†è¯å™¨" class="headerlink" title="ä¸ƒã€IKåˆ†è¯å™¨"></a>ä¸ƒã€IKåˆ†è¯å™¨</h2><h3 id="7-1-åˆ†è¯"><a href="#7-1-åˆ†è¯" class="headerlink" title="7.1 åˆ†è¯"></a>7.1 åˆ†è¯</h3><p>åˆ†è¯ï¼šå³æŠŠä¸€æ®µä¸­æ–‡æˆ–è€…åˆ«çš„åˆ’åˆ†æˆä¸€ä¸ªä¸ªçš„å…³é”®å­—ï¼Œæˆ‘ä»¬åœ¨æœç´¢æ—¶å€™ä¼šæŠŠè‡ªå·±çš„ä¿¡æ¯è¿›è¡Œåˆ†è¯ï¼Œä¼šæŠŠæ•°æ®åº“ä¸­æˆ–è€…ç´¢å¼•åº“ä¸­çš„æ•°æ®è¿›è¡Œåˆ†è¯ï¼Œç„¶åè¿›è¡Œä¸€ä¸ªåŒ¹é…æ“ä½œï¼Œé»˜è®¤çš„ä¸­æ–‡åˆ†è¯æ˜¯å°†æ¯ä¸ªå­—çœ‹æˆä¸€ä¸ª è¯ï¼Œæ¯”å¦‚ â€œæˆ‘æ˜¯ç‹å…«â€ ä¼šè¢«åˆ†ä¸ºâ€æˆ‘â€ã€â€œæ˜¯â€ã€â€œç‹â€ã€â€œå…«â€ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸ç¬¦åˆè¦æ±‚çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®‰è£…ä¸­æ–‡åˆ†è¯å™¨ IK æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>IK æä¾›äº†ä¸¤ä¸ªåˆ†è¯ç®—æ³•ï¼šik_smart å’Œ ik_max_wordï¼Œå…¶ä¸­ ik_smart ä¸ºæœ€å°‘åˆ‡åˆ†ï¼Œik_max_wordä¸ºæœ€ç»†ç²’åº¦åˆ’åˆ†ï¼</p><h3 id="7-2-ä¸‹è½½å®‰è£…"><a href="#7-2-ä¸‹è½½å®‰è£…" class="headerlink" title="7.2 ä¸‹è½½å®‰è£…"></a>7.2 ä¸‹è½½å®‰è£…</h3><p>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/medcl/elasticsearch-analysis-ik">IK åˆ†è¯å™¨ä¸‹è½½</a></p><p>å®‰è£…ï¼šè§£å‹åæ”¾å…¥ plugins æ–‡ä»¶å¤¹ä¸‹</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152413.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152413.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728133942367"></p><p>é‡å¯ ElasticSearch ï¼šçœ‹åˆ° IK åˆ†è¯å™¨å·²ç»åŠ è½½åˆ° ES é‡Œé¢äº†</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152418.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152418.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728134131159"></p><h3 id="7-3-IK-åˆ†è¯å™¨çš„å°ğŸŒ°ï¼š"><a href="#7-3-IK-åˆ†è¯å™¨çš„å°ğŸŒ°ï¼š" class="headerlink" title="7.3 IK åˆ†è¯å™¨çš„å°ğŸŒ°ï¼š"></a>7.3 IK åˆ†è¯å™¨çš„å°ğŸŒ°ï¼š</h3><p>ä½¿ç”¨ ik_smart ç®—æ³•ï¼š  <code>æœ€å°‘åˆ‡åˆ†</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152424.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152424.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728135216813"></p><p>ä½¿ç”¨ ik_max_word ç®—æ³•ï¼š    <code>æœ€ç»†ç²’åº¦åˆ’åˆ†</code>ï¼šé€šè¿‡å­—å…¸ï¼Œæ‰¾å¯»æ‰€æœ‰ç¬¦åˆçš„æƒ…å†µ</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152432.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152432.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728135308880"></p><h3 id="7-4-è‡ªè¡Œ-DIY-å­—å…¸"><a href="#7-4-è‡ªè¡Œ-DIY-å­—å…¸" class="headerlink" title="7.4 è‡ªè¡Œ DIY å­—å…¸"></a>7.4 è‡ªè¡Œ DIY å­—å…¸</h3><p>åœ¨å‡ºç°ä»¥ä¸‹æƒ…å†µæ—¶ï¼šæˆ‘ä»¬éœ€è¦çš„æ˜¯ <code>ç¥é­”æ‹</code> åº”è¯¥æ˜¯ä¸€ä¸ªè¯è¯­ï¼Œè€Œä¸åº”è¯¥è¢«åˆ†è¯ä¸º <code>ç¥é­”</code> ä¸ <code>æ‹</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152455.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152455.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728140135869"></p><p>åœ¨ IK çš„ config ç›®å½•ä¸‹ï¼Œé…ç½® wangba.dic å’Œ IKAnalyzer.cfg.xml å¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152536.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152536.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728144840034"></p><p><code>IKAnalyzer.cfg.xmlï¼š</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152547.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152547.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728145037806"></p><p><code>wangba.dic:</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152556.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152556.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728145105415"></p><p>é‡å¯ ES å’Œ Kibanaï¼šå·²ç»å¯ä»¥çœ‹è§ wangba.dic å·²ç»åŠ è½½è¿›å»äº†</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152607.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152607.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728144452860"></p><p>æ­¤æ—¶åœ¨Kibanaä¸­å¯ä»¥çœ‹è§ï¼šæ­¤æ—¶ <code>ç¥é­”æ‹</code> å·²ç»æ˜¯ä¸€ä¸ªè¯äº†</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152614.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152614.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728145311150"></p><h2 id="å…«ã€Resté£æ ¼"><a href="#å…«ã€Resté£æ ¼" class="headerlink" title="å…«ã€Resté£æ ¼"></a>å…«ã€Resté£æ ¼</h2><h3 id="8-1-Restå‘½ä»¤è¯´æ˜è¯´æ˜"><a href="#8-1-Restå‘½ä»¤è¯´æ˜è¯´æ˜" class="headerlink" title="8.1 Restå‘½ä»¤è¯´æ˜è¯´æ˜"></a>8.1 Restå‘½ä»¤è¯´æ˜è¯´æ˜</h3><p>ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ï¼Œè€Œä¸æ˜¯æ ‡å‡†ï¼Œåªæ˜¯æä¾›äº†ä¸€ç»„è®¾è®¡åŸåˆ™å’Œçº¦æŸæ¡ä»¶ã€‚å®ƒä¸»è¦ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨äº¤ äº’ç±»çš„è½¯ä»¶ã€‚åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜ç­‰æœºåˆ¶ã€‚</p><p>åŸºæœ¬Restå‘½ä»¤è¯´æ˜ï¼š</p><table><thead><tr><th align="center"><strong>method</strong></th><th align="center">urlåœ°å€</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">PUT</td><td align="center">localhost:9200/ç´¢å¼•åç§°/ç±»å‹åç§°/æ–‡æ¡£id</td><td align="center">åˆ›å»ºæ–‡æ¡£ï¼ˆæŒ‡å®šæ–‡æ¡£idï¼‰</td></tr><tr><td align="center">POST</td><td align="center">localhost:9200/ç´¢å¼•åç§°/ç±»å‹åç§°</td><td align="center">åˆ›å»ºæ–‡æ¡£ï¼ˆéšæœºæ–‡æ¡£idï¼‰</td></tr><tr><td align="center">_update</td><td align="center">localhost:9200/ç´¢å¼•åç§°/ç±»å‹åç§°/æ–‡æ¡£id/_update</td><td align="center">ä¿®æ”¹æ–‡æ¡£</td></tr><tr><td align="center">DELETE</td><td align="center">localhost:9200/ç´¢å¼•åç§°/ç±»å‹åç§°/æ–‡æ¡£id</td><td align="center">åˆ é™¤æ–‡æ¡£</td></tr><tr><td align="center">GET</td><td align="center">localhost:9200/ç´¢å¼•åç§°/ç±»å‹åç§°/æ–‡æ¡£id</td><td align="center">æŸ¥è¯¢æ–‡æ¡£é€šè¿‡æ–‡æ¡£id</td></tr><tr><td align="center">POST</td><td align="center">localhost:9200/ç´¢å¼•åç§°/ç±»å‹åç§°/_search</td><td align="center">æŸ¥è¯¢æ‰€æœ‰æ•°æ®</td></tr></tbody></table><h3 id="8-2-åŸºæœ¬æµ‹è¯•"><a href="#8-2-åŸºæœ¬æµ‹è¯•" class="headerlink" title="8.2 åŸºæœ¬æµ‹è¯•"></a>8.2 åŸºæœ¬æµ‹è¯•</h3><p>åˆ›å»ºç´¢å¼•ï¼š</p><blockquote><p>PUT /ç´¢å¼•åç§°/<del><code>ç±»å‹åç§°</code></del>/æ–‡æ¡£id</p><p>{</p><p>â€‹            è¯·æ±‚ä½“</p><p>}</p><p>æ³¨ï¼šç±»å‹å³å°†è¢«å¼ƒç”¨</p></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152625.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152625.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728151356309"></p><p>åœ¨ ES head ä¸­å¯ä»¥çœ‹è§æ•°æ®å·²ç»æ’å…¥æˆåŠŸï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152637.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152637.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728151727329"></p><h3 id="8-3-ç±»å‹"><a href="#8-3-ç±»å‹" class="headerlink" title="8.3 ç±»å‹"></a>8.3 ç±»å‹</h3><table><thead><tr><th align="center"><strong>å­—ç¬¦ä¸²ç±»å‹</strong></th><th align="center"><strong>text ã€ keyword</strong></th></tr></thead><tbody><tr><td align="center"><strong>æ•°å€¼ç±»å‹</strong></td><td align="center">longã€integerã€ shortã€byteã€doubleã€floatã€half_floatã€ scaled_float</td></tr><tr><td align="center"><strong>æ—¥æœŸç±»å‹</strong></td><td align="center">date</td></tr><tr><td align="center"><strong>å¸ƒå°”å€¼ç±»å‹</strong></td><td align="center">boolean</td></tr><tr><td align="center"><strong>äºŒè¿›åˆ¶ç±»å‹</strong></td><td align="center">binary</td></tr></tbody></table><p>è‡ªå®šä¹‰ç±»å‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152919.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152919.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728153315700"></p><p>é€šè¿‡ GET è¯·æ±‚å¯ä»¥çœ‹è§ test2 ç´¢å¼•çš„ä¿¡æ¯ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152926.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812152926.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728153419852"></p><p>è‡ªåŠ¨åŒ¹é…ç±»å‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153010.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153010.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728154312363"></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153017.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153017.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728154429831"></p><h3 id="8-4-å…³äºç´¢å¼•çš„åŸºæœ¬æ“ä½œ"><a href="#8-4-å…³äºç´¢å¼•çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="8.4 å…³äºç´¢å¼•çš„åŸºæœ¬æ“ä½œ"></a>8.4 å…³äºç´¢å¼•çš„åŸºæœ¬æ“ä½œ</h3><blockquote><p>å¢åŠ ï¼šå¦‚ä¸Š</p><p>æŸ¥è¯¢ï¼šå¦‚ä¸Š</p></blockquote><blockquote><p>ä¿®æ”¹ï¼šå¦‚ä¸‹</p></blockquote><p>æ–¹æ³•ä¸€ï¼šç›´æ¥è¦†ç›–</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153031.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153031.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728155827534"></p><p>å¯ä»¥çœ‹è§ version å‘ç”Ÿäº†æ”¹å˜</p><p>æ–¹æ³•äºŒï¼š</p><blockquote><p>POST /ç´¢å¼•åç§°/_doc/æ–‡æ¡£id/__update</p><p>{</p><p>â€‹            è¯·æ±‚ä½“</p><p>}</p></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153102.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153102.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728160513999"></p><p>å¯ä»¥çœ‹è§ version å†æ¬¡å‘ç”Ÿäº†æ”¹å˜</p><blockquote><p>åˆ é™¤</p></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153148.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153148.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200728161148536"></p><h3 id="8-5-å…³äºæ–‡æ¡£çš„åŸºæœ¬æ“ä½œ"><a href="#8-5-å…³äºæ–‡æ¡£çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="8.5 å…³äºæ–‡æ¡£çš„åŸºæœ¬æ“ä½œ"></a>8.5 å…³äºæ–‡æ¡£çš„åŸºæœ¬æ“ä½œ</h3><p><code>åŸºæœ¬æ“ä½œï¼š</code></p><blockquote><p>å¢åŠ æ•°æ®    PUT</p></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153158.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153158.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729085012520"></p><blockquote><p>æŸ¥è¯¢æ•°æ®    GET</p></blockquote><p>æ–¹å¼ä¸€ï¼šç®€å•çš„ ID æŸ¥è¯¢</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153226.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153226.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729085341564"></p><p>å¯ä»¥çœ‹è§ï¼Œæ¨èä½¿ç”¨ <code>GET /ç´¢å¼•/_doc/æ–‡æ¡£ID</code> æ¥è¿›è¡Œæ“ä½œ</p><p>æ–¹å¼äºŒï¼šç®€å•çš„æ¡ä»¶æŸ¥è¯¢</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153621.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153621.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729091400956"></p><p>å¯ä»¥çœ‹è§ <code>type</code> å·²ç»è¢«ä¸¢å¼ƒäº†</p><blockquote><p>æ›´æ–°æ•°æ®    POST</p></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153609.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153609.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729090204208"></p><p>å¯ä»¥çœ‹è§ï¼Œæ¨èä½¿ç”¨ <code>POST /ç´¢å¼•/_update/æ–‡æ¡£ID</code> æ¥è¿›è¡Œæ“ä½œ</p><blockquote><p><code>å¤æ‚æ“ä½œï¼š</code>select (æ’åºã€åˆ†é¡µã€é«˜äº®ã€æ¨¡ç³ŠæŸ¥è¯¢ã€ç²¾å‡†æŸ¥è¯¢ )</p></blockquote><blockquote><p>æŸ¥è¯¢</p></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153640.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153640.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729092702190"></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153648.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153648.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729093150116"></p><p>ES ä¸­æœ‰ <code>zhangsan</code> å’Œ <code>zhangshan 008</code> ï¼Œé€šè¿‡å…³é”®å­—<code>zhangsan</code> æŸ¥è¯¢ï¼Œä¼šå°†åˆ†è¯åçš„ç»“æœå…¨éƒ¨æŸ¥è¯¢å‡ºæ¥ï¼Œä¸”æ¯ä¸€ä¸ªéƒ½æ˜¯æœ‰ <code>_score</code> çš„ã€‚</p><blockquote><p>hitsï¼šåœ¨Javaå¯ä»¥å¾—åˆ°ç´¢å¼•å’Œæ–‡æ¡£çš„ä¿¡æ¯ã€æŸ¥è¯¢çš„ç»“æœæ€»æ•°ã€å…·ä½“æ–‡æ¡£æ•°æ®ä¿¡æ¯ï¼ˆå¯ä»¥é€šè¿‡éå†å¾—åˆ°å…·ä½“çš„å„ç§ä¿¡æ¯ï¼‰</p></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153700.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153700.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729094426031"></p><blockquote><p>é€šè¿‡ <code>_source</code> æ¥æŒ‡å®šæœ€åçš„è¾“å‡ºç»“æœ</p></blockquote><blockquote><p>æ’åº</p></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153709.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153709.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729095730668"></p><blockquote><p>é€šè¿‡ <code>sort</code> è¿›è¡Œæ’åºï¼Œç”¨ <code>desc</code> å’Œ <code>asc</code> æ¥è¿›è¡Œé™åºå’Œå‡åº</p></blockquote><blockquote><p>åˆ†é¡µ    /search/{current}/{pagesize}</p></blockquote><p>ç¬¬ä¸€é¡µä¸€ä¸ªæ•°æ®</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153722.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153722.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729100357807"></p><p>ç¬¬äºŒé¡µçš„ä¸€ä¸ªæ•°æ®</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153731.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153731.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729100512315"></p><p>ç¬¬ä¸€é¡µçš„ä¸¤ä¸ªæ•°æ®</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153738.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153738.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729100615639"></p><blockquote><p>bool å€¼æŸ¥è¯¢</p></blockquote><p><code>must å‘½ä»¤</code> ==  and</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153749.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153749.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729101211913"></p><p><code>should å‘½ä»¤</code> == or</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153757.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153757.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729102255051"></p><p>ä¸¤ä¸ªéƒ½æŸ¥è¯¢åˆ°äº†</p><p><code>must_not å‘½ä»¤</code> ==  not</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153807.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153807.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729102630406"></p><p><code>filter å‘½ä»¤</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153820.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153820.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729103629498"></p><blockquote><p>gtï¼šå¤§äº  / gteï¼šå¤§äºç­‰äº / ltï¼šå°äº / lteï¼šå°äºç­‰äº</p></blockquote><p><code>åŒ¹é…å¤šä¸ªæ¡ä»¶</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153836.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153836.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729104255294"></p><p>ç›´æ¥åœ¨ <code>tags</code> ä¸­åŠ ç©ºæ ¼</p><p><code>ç²¾ç¡®æŸ¥è¯¢</code></p><p>term æŸ¥è¯¢æ˜¯ç›´æ¥é€šè¿‡å€’æ’ç´¢å¼•æŒ‡å®šçš„è¯æ¡è¿›è¡Œç²¾ç¡®çš„æŸ¥è¯¢</p><ul><li><p>termï¼šç›´æ¥æŸ¥è¯¢ç²¾ç¡®çš„</p></li><li><p>matchï¼šä½¿ç”¨åˆ†è¯å™¨è§£æï¼ˆå…ˆåˆ†ææ–‡æ¡£ï¼Œåœ¨é€šè¿‡åˆ†æçš„æ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢ï¼‰</p></li></ul><p>ä¸¤ä¸ªç±»å‹ï¼š</p><p><code>textï¼š</code> ä¼šè¢«åˆ†è¯è§£æå™¨è§£æ</p><p><code>keywordï¼š </code> ä¸ä¼šè¢«åˆ†è¯è§£æå™¨è§£æ</p><p>ä½¿ç”¨ keywod åˆ†è¯å™¨ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153858.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153858.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729112314281"></p><p>ä½¿ç”¨ standard åˆ†è¯å™¨ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153906.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153906.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729112353845"></p><p><code>textï¼š</code> å¯ä»¥çœ‹è§ä¸‹é¢è¢«åˆ†è¯äº†ï¼Œæ‰€ä»¥å‡ºç°äº†ä¸¤ä¸ªç»“æœ</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153915.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153915.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729112831873"></p><p><code>keywordï¼š </code> å¯ä»¥çœ‹è§ä¸‹é¢æ²¡æœ‰è¢«åˆ†è¯</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153925.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153925.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729113003169"></p><blockquote><p>é«˜äº®æŸ¥è¯¢</p></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153934.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153934.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729122744294"></p><h2 id="ä¹ã€SpringBooté›†æˆElasticSearch"><a href="#ä¹ã€SpringBooté›†æˆElasticSearch" class="headerlink" title="ä¹ã€SpringBooté›†æˆElasticSearch"></a>ä¹ã€SpringBooté›†æˆElasticSearch</h2><p><a href="https://www.elastic.co/guide/en/elasticsearch/client/java-rest/7.6/java-rest-high.html">å®˜æ–¹ ES Client æ–‡æ¡£</a></p><p>1.ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch.client<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch-rest-high-level-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>7.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.æ‰¾å¯¹è±¡</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153948.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812153948.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729134909854"></p><p>3.åˆ†æç±»ä¸­æ–¹æ³•</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812154043.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812154043.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729140717144"></p><p>ES çš„ç‰ˆæœ¬ä¸æœ¬æœºä¸­çš„ç‰ˆæœ¬ä¸ä¸€è‡´ </p><p>è‡ªè¡Œé…ç½® SpringBoot ä¸­çš„ ES ç‰ˆæœ¬</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812154036.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812154036.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729141538339"></p><p><code>RestClientAutoConfiguration</code> å’Œ <code>RestClientProperties</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812154019.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200812154019.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200729143842388"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Source code recreated from a .class file by IntelliJ IDEA</span></span><br><span class="line"><span class="comment">// (powered by Fernflower decompiler)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.springframework.boot.autoconfigure.elasticsearch.rest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.Duration;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpHost;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.auth.AuthScope;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.auth.Credentials;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.auth.UsernamePasswordCredentials;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.CredentialsProvider;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.BasicCredentialsProvider;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.client.RestClient;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.client.RestClientBuilder;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.client.RestHighLevelClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.ObjectProvider;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnClass;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.PropertyMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RestClientConfigurations</span> </span>&#123;</span><br><span class="line">    RestClientConfigurations() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Configuration(</span></span><br><span class="line"><span class="meta">        proxyBeanMethods = false</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">  <span class="comment">// RestClient  æ™®é€šå®¢æˆ·ç«¯</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">RestClientFallbackConfiguration</span> </span>&#123;</span><br><span class="line">        RestClientFallbackConfiguration() &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Bean</span></span><br><span class="line">        <span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">        <span class="function">RestClient <span class="title">elasticsearchRestClient</span><span class="params">(RestClientBuilder builder)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> builder.build();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Configuration(</span></span><br><span class="line"><span class="meta">        proxyBeanMethods = false</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@ConditionalOnClass(&#123;RestHighLevelClient.class&#125;)</span></span><br><span class="line">  <span class="comment">// RestHighLevelClient  é«˜çº§å®¢æˆ·ç«¯</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">RestHighLevelClientConfiguration</span> </span>&#123;</span><br><span class="line">        RestHighLevelClientConfiguration() &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Bean</span></span><br><span class="line">        <span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">        <span class="function">RestHighLevelClient <span class="title">elasticsearchRestHighLevelClient</span><span class="params">(RestClientBuilder restClientBuilder)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> RestHighLevelClient(restClientBuilder);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Bean</span></span><br><span class="line">        <span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">        <span class="function">RestClient <span class="title">elasticsearchRestClient</span><span class="params">(RestClientBuilder builder, ObjectProvider&lt;RestHighLevelClient&gt; restHighLevelClient)</span> </span>&#123;</span><br><span class="line">            RestHighLevelClient client = (RestHighLevelClient)restHighLevelClient.getIfUnique();</span><br><span class="line">            <span class="keyword">return</span> client != <span class="keyword">null</span> ? client.getLowLevelClient() : builder.build();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Configuration(</span></span><br><span class="line"><span class="meta">        proxyBeanMethods = false</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">  <span class="comment">// RestClientBuilder</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">RestClientBuilderConfiguration</span> </span>&#123;</span><br><span class="line">        RestClientBuilderConfiguration() &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Bean</span></span><br><span class="line">        <span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">        <span class="function">RestClientBuilder <span class="title">elasticsearchRestClientBuilder</span><span class="params">(RestClientProperties properties, ObjectProvider&lt;RestClientBuilderCustomizer&gt; builderCustomizers)</span> </span>&#123;</span><br><span class="line">            HttpHost[] hosts = (HttpHost[])properties.getUris().stream().map(HttpHost::create).toArray((x$<span class="number">0</span>) -&gt; &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> HttpHost[x$<span class="number">0</span>];</span><br><span class="line">            &#125;);</span><br><span class="line">            RestClientBuilder builder = RestClient.builder(hosts);</span><br><span class="line">            PropertyMapper map = PropertyMapper.get();</span><br><span class="line">            map.from(properties::getUsername).whenHasText().to((username) -&gt; &#123;</span><br><span class="line">                CredentialsProvider credentialsProvider = <span class="keyword">new</span> BasicCredentialsProvider();</span><br><span class="line">                Credentials credentials = <span class="keyword">new</span> UsernamePasswordCredentials(properties.getUsername(), properties.getPassword());</span><br><span class="line">                credentialsProvider.setCredentials(AuthScope.ANY, credentials);</span><br><span class="line">                builder.setHttpClientConfigCallback((httpClientBuilder) -&gt; &#123;</span><br><span class="line">                    <span class="keyword">return</span> httpClientBuilder.setDefaultCredentialsProvider(credentialsProvider);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">            builder.setRequestConfigCallback((requestConfigBuilder) -&gt; &#123;</span><br><span class="line">                properties.getClass();</span><br><span class="line">                map.from(properties::getConnectionTimeout).whenNonNull().asInt(Duration::toMillis).to(requestConfigBuilder::setConnectTimeout);</span><br><span class="line">                properties.getClass();</span><br><span class="line">                map.from(properties::getReadTimeout).whenNonNull().asInt(Duration::toMillis).to(requestConfigBuilder::setSocketTimeout);</span><br><span class="line">                <span class="keyword">return</span> requestConfigBuilder;</span><br><span class="line">            &#125;);</span><br><span class="line">            builderCustomizers.orderedStream().forEach((customizer) -&gt; &#123;</span><br><span class="line">                customizer.customize(builder);</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">return</span> builder;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åã€ç´¢å¼•ã€æ–‡æ¡£-API-æ“ä½œ"><a href="#åã€ç´¢å¼•ã€æ–‡æ¡£-API-æ“ä½œ" class="headerlink" title="åã€ç´¢å¼•ã€æ–‡æ¡£ API æ“ä½œ"></a>åã€ç´¢å¼•ã€æ–‡æ¡£ API æ“ä½œ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wangba;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.wangba.enity.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.TermQuery;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.util.QueryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.admin.indices.delete.DeleteIndexRequest;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.bulk.BulkRequest;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.bulk.BulkResponse;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.delete.DeleteRequest;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.delete.DeleteResponse;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.get.GetRequest;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.get.GetResponse;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.index.IndexRequest;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.index.IndexResponse;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.search.SearchRequest;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.search.SearchRequestBuilder;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.search.SearchResponse;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.support.master.AcknowledgedResponse;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.update.UpdateRequest;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.update.UpdateResponse;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.client.RequestOptions;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.client.RestHighLevelClient;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.client.indices.CreateIndexRequest;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.client.indices.CreateIndexResponse;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.client.indices.GetIndexRequest;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.common.unit.TimeValue;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.common.xcontent.XContentType;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.index.query.MatchAllQueryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.index.query.QueryBuilders;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.index.query.TermQueryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.search.SearchHit;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.search.builder.SearchSourceBuilder;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.search.fetch.subphase.FetchSourceContext;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.repository.query.Param;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.ls.LSOutput;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpringbootEsApiApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;restHighLevelClient&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> RestHighLevelClient client;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: åˆ›å»ºç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span>: []</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span>: wang ba</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span>: 2020/7/29</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">createIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 1. åˆ›å»ºç´¢å¼•è¯·æ±‚</span></span><br><span class="line">        CreateIndexRequest request = <span class="keyword">new</span> CreateIndexRequest(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">        <span class="comment">// 2. è®©å®¢æˆ·ç«¯æ‰§è¡Œè¯·æ±‚ indicesClient</span></span><br><span class="line">        CreateIndexResponse createIndexResponse = client.indices().create(request, RequestOptions.DEFAULT);</span><br><span class="line"></span><br><span class="line">        System.out.println(createIndexResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: æŸ¥è¯¢ç´¢å¼•</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Param</span>: []</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Author</span>: wang ba</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Date</span>: 2020/7/29</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">existIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        GetIndexRequest request = <span class="keyword">new</span> GetIndexRequest(<span class="string">&quot;test&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> exists = client.indices().exists(request, RequestOptions.DEFAULT);</span><br><span class="line"></span><br><span class="line">      System.out.println(exists);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: åˆ é™¤ç´¢å¼•</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Param</span>: []</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Author</span>: wang ba</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Date</span>: 2020/7/29</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">      DeleteIndexRequest request = <span class="keyword">new</span> DeleteIndexRequest(<span class="string">&quot;test&quot;</span>);</span><br><span class="line"></span><br><span class="line">      AcknowledgedResponse delete = client.indices().delete(request, RequestOptions.DEFAULT);</span><br><span class="line"></span><br><span class="line">      System.out.println(delete);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Description</span>: æ·»åŠ æ–‡æ¡£ PUT test/_doc/1</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Param</span>: []</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span>: wang ba</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span>: 2020/7/29</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">addDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">      <span class="comment">// åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">      User user = <span class="keyword">new</span> User(<span class="string">&quot;wangba&quot;</span>, <span class="number">25</span>);</span><br><span class="line">      <span class="comment">// åˆ›å»ºè¯·æ±‚</span></span><br><span class="line">      IndexRequest request = <span class="keyword">new</span> IndexRequest(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">      <span class="comment">// è§„åˆ™ï¼š  ==&gt;   PUT test/_doc/1</span></span><br><span class="line">      request.id(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">      request.timeout(<span class="string">&quot;1s&quot;</span>);</span><br><span class="line">      <span class="comment">// å°†æˆ‘ä»¬çš„æ•°æ®æ”¾å…¥è¯·æ±‚ä¸­   JSONæ ¼å¼</span></span><br><span class="line">      request.source(JSON.toJSONString(user), XContentType.JSON);</span><br><span class="line">      <span class="comment">// å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œè¿”å›ç»“æœ</span></span><br><span class="line">        IndexResponse indexResponse = client.index(request, RequestOptions.DEFAULT);</span><br><span class="line"></span><br><span class="line">        System.out.println(indexResponse);</span><br><span class="line">        System.out.println(indexResponse.toString());</span><br><span class="line">        System.out.println(indexResponse.status());   <span class="comment">// å¯¹åº”çš„çŠ¶æ€å°±æ˜¯ CREATED ç­‰</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: æ–‡æ¡£æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Param</span>: []</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Author</span>: wang ba</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Date</span>: 2020/7/29</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">existDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// GET test/_doc/1</span></span><br><span class="line">        GetRequest request = <span class="keyword">new</span> GetRequest(<span class="string">&quot;test&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">        <span class="comment">// _source ä¸æ˜¾ç¤ºä¸Šä¸‹æ–‡</span></span><br><span class="line">        request.fetchSourceContext(<span class="keyword">new</span> FetchSourceContext(<span class="keyword">false</span>));</span><br><span class="line">        request.storedFields(<span class="string">&quot;_none_&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> exists = client.exists(request, RequestOptions.DEFAULT);</span><br><span class="line">        System.out.println(exists);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: æŸ¥è¯¢æ–‡æ¡£æ•°æ®  GET test/_doc/1</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Param</span>: []</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Author</span>: wang ba</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Date</span>: 2020/7/29</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        GetRequest request = <span class="keyword">new</span> GetRequest(<span class="string">&quot;test&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        GetResponse documentFields = client.get(request, RequestOptions.DEFAULT);</span><br><span class="line"></span><br><span class="line">        System.out.println(documentFields.getSourceAsString());</span><br><span class="line">        System.out.println(documentFields);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: æ›´æ–°æ–‡æ¡£</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Param</span>: []</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Author</span>: wang ba</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Date</span>: 2020/7/29</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        UpdateRequest request = <span class="keyword">new</span> UpdateRequest(<span class="string">&quot;test&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">&quot;zhansan&quot;</span>, <span class="number">22</span>);</span><br><span class="line">        request.doc(JSON.toJSONString(user), XContentType.JSON);</span><br><span class="line">        UpdateResponse update = client.update(request, RequestOptions.DEFAULT);</span><br><span class="line"></span><br><span class="line">        System.out.println(update);</span><br><span class="line">        System.out.println(update.status());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: åˆ é™¤æ–‡æ¡£  DELETE test/_doc/1</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Param</span>: []</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Author</span>: wang ba</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Date</span>: 2020/7/29</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        DeleteRequest request = <span class="keyword">new</span> DeleteRequest(<span class="string">&quot;test&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        DeleteResponse delete = client.delete(request, RequestOptions.DEFAULT);</span><br><span class="line">        System.out.println(delete);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: æ‰¹å¤„ç†è¯·æ±‚</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Param</span>: []</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Author</span>: wang ba</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Date</span>: 2020/7/29</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addBulkDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        BulkRequest bulkRequest = <span class="keyword">new</span> BulkRequest();</span><br><span class="line">        bulkRequest.timeout(<span class="string">&quot;10s&quot;</span>);</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;User&gt; userArrayList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        userArrayList.add(<span class="keyword">new</span> User(<span class="string">&quot;zhangsan&quot;</span>, <span class="number">5</span>));</span><br><span class="line">        userArrayList.add(<span class="keyword">new</span> User(<span class="string">&quot;lisi&quot;</span>, <span class="number">10</span>));</span><br><span class="line">        userArrayList.add(<span class="keyword">new</span> User(<span class="string">&quot;xiaoxin&quot;</span>, <span class="number">25</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; userArrayList.size(); i++) &#123;</span><br><span class="line">            bulkRequest.add(</span><br><span class="line">                    <span class="keyword">new</span> IndexRequest(<span class="string">&quot;test&quot;</span>)</span><br><span class="line">                    .id(<span class="string">&quot;&quot;</span>+(i+<span class="number">1</span>))</span><br><span class="line">                    .source(JSON.toJSONString(userArrayList.get(i)), XContentType.JSON)</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        BulkResponse bulk = client.bulk(bulkRequest, RequestOptions.DEFAULT);</span><br><span class="line"></span><br><span class="line">        System.out.println(bulk);</span><br><span class="line">        System.out.println(bulk.status());</span><br><span class="line">        System.out.println(bulk.hasFailures());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Description</span>: æŒ‰æ¡ä»¶æœç´¢</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Param</span>: []</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span>: void</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Author</span>: wang ba</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@Date</span>: 2020/7/29</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        æŸ¥è¯¢ï¼š</span></span><br><span class="line"><span class="comment">        SearchRequest          æœç´¢è¯·æ±‚</span></span><br><span class="line"><span class="comment">        SearchSourceBuilder    æ¡ä»¶æ„é€ </span></span><br><span class="line"><span class="comment">        HighlightBuilder       é«˜äº®æ„é€ </span></span><br><span class="line"><span class="comment">        TermQueryBuilder       ç²¾ç¡®æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">        MatchAllQueryBuilder   æ‰€æœ‰æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">        // xxxBuilder</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">searchDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºæœç´¢è¯·æ±‚</span></span><br><span class="line">        SearchRequest searchRequest = <span class="keyword">new</span> SearchRequest(<span class="string">&quot;test&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ„é€ æœç´¢æ¡ä»¶</span></span><br><span class="line">        SearchSourceBuilder searchSourceBuilder = <span class="keyword">new</span> SearchSourceBuilder();</span><br><span class="line">        <span class="comment">// QueryBuilders.termQuery ç²¾ç¡®æŸ¥è¯¢</span></span><br><span class="line">        <span class="comment">// QueryBuilders.matchAllQuery æŸ¥è¯¢æ‰€æœ‰</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//TermQueryBuilder termQueryBuilder = QueryBuilders.termQuery(&quot;age&quot;, &quot;25&quot;);</span></span><br><span class="line">        <span class="comment">//searchSourceBuilder.query(termQueryBuilder);</span></span><br><span class="line"></span><br><span class="line">        MatchAllQueryBuilder matchAllQueryBuilder = QueryBuilders.matchAllQuery();</span><br><span class="line">        searchSourceBuilder.query(matchAllQueryBuilder);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ†é¡µ</span></span><br><span class="line">        <span class="comment">// searchSourceBuilder.from();</span></span><br><span class="line">        <span class="comment">// searchSourceBuilder.size();</span></span><br><span class="line"></span><br><span class="line">        searchSourceBuilder.timeout(<span class="keyword">new</span> TimeValue(<span class="number">60</span>, TimeUnit.SECONDS));</span><br><span class="line"></span><br><span class="line">        searchRequest.source(searchSourceBuilder);</span><br><span class="line"></span><br><span class="line">        SearchResponse search = client.search(searchRequest, RequestOptions.DEFAULT);</span><br><span class="line">        System.out.println(JSON.toJSONString(search.getHits()));</span><br><span class="line">        System.out.println(<span class="string">&quot;+++++++++++++æˆ‘æ˜¯åˆ†å‰²çº¿++++++++++++++&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (SearchHit documentFields : search.getHits().getHits()) &#123;</span><br><span class="line">            System.out.println(documentFields.getSourceAsMap());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åä¸€ã€å®æˆ˜"><a href="#åä¸€ã€å®æˆ˜" class="headerlink" title="åä¸€ã€å®æˆ˜"></a>åä¸€ã€å®æˆ˜</h2>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> ES </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
