<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>wangba&#39;s blogs</title>
  
  
  <link href="http://wangba.me/atom.xml" rel="self"/>
  
  <link href="http://wangba.me/"/>
  <updated>2020-10-02T14:29:22.797Z</updated>
  <id>http://wangba.me/</id>
  
  <author>
    <name>wangba</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Array</title>
    <link href="http://wangba.me/2020/10/02/Array/"/>
    <id>http://wangba.me/2020/10/02/Array/</id>
    <published>2020-10-02T14:35:15.000Z</published>
    <updated>2020-10-02T14:29:22.797Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>æ€ç»´å¯¼å›¾ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002093205.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002093205.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002093203544">        </p><h2 id="äºŒã€ç‰¹æ€§"><a href="#äºŒã€ç‰¹æ€§" class="headerlink" title="äºŒã€ç‰¹æ€§"></a>äºŒã€ç‰¹æ€§</h2><p>æ•°ç»„åº”è¯¥æ˜¯æ‰€æœ‰ç¨‹åºå‘˜ä¸­æœ€ç†Ÿæ‚‰çš„æ•°æ®ç»“æ„äº†ï¼Œå¦‚æœä½ ç®€å•çš„å›å¿†ä¸€ä¸‹æ•°ç»„çš„å…·ä½“å«ä¹‰ï¼Œä½ å¯ä»¥å¾—åˆ°å·²ç»å‡ ä¸ªé‡è¦çš„ç»“è®ºï¼š</p><ul><li>ğŸ· çº¿æ€§ç»“æ„</li><li>ğŸ¢ è¿ç»­å†…å­˜</li><li>ğŸ­ å­˜å‚¨ç›¸åŒç±»å‹</li></ul><h3 id="2-1-çº¿æ€§ç»“æ„"><a href="#2-1-çº¿æ€§ç»“æ„" class="headerlink" title="2.1 çº¿æ€§ç»“æ„"></a>2.1 çº¿æ€§ç»“æ„</h3><p>é¡¾åæ€ä¹‰ï¼Œçº¿æ€§ç»“æ„å°±æ˜¯è¿™ä¸ªç»“æ„åƒçº¿æ€§ä¸€æ ·ï¼Œè€Œéæ˜¯å…¶å®ƒç»“æ„ï¼Œè¿™æ ·è¯´çš„ç¡®æœ‰ç‚¹æŠ½è±¡ï¼Œå¯ä»¥ä»ä¸‹é¢å‡ ä¸ªä¾‹å­æ¥çœ‹ä¸€ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002101432.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002101432.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002101430898"></p><blockquote><p>æ³¨ï¼š</p><ul><li>è¿™é‡Œçš„ <strong>Array</strong> æ˜¯ä½¿ç”¨ <strong>Java</strong> ä¸­çš„å†…å­˜æ¨¡å‹ï¼Œå³ <strong>char</strong> ä¸º 2 ä¸ªå­—èŠ‚</li><li>é“¾è¡¨æ²¡æœ‰ä½¿ç”¨å“¨å…µæ¨¡å¼ (åé¢ä¼šæåˆ°)</li></ul></blockquote><h3 id="2-2-è¿ç»­å†…å­˜å’Œç›¸åŒæ•°æ®ç±»å‹"><a href="#2-2-è¿ç»­å†…å­˜å’Œç›¸åŒæ•°æ®ç±»å‹" class="headerlink" title="2.2 è¿ç»­å†…å­˜å’Œç›¸åŒæ•°æ®ç±»å‹"></a>2.2 è¿ç»­å†…å­˜å’Œç›¸åŒæ•°æ®ç±»å‹</h3><p>æ­£å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„æ•°ç»„ä¸€æ ·ï¼Œåœ¨è¿™ä¸ªæ•°ç»„ä¸­ï¼Œå®ƒä»¬çš„åœ°å€æ˜¯è¿ç»­çš„ï¼Œä¸”æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ char ç±»å‹ï¼Œæ­£æ˜¯ç”±äºè¿™ä¸¤ä¸ªç‰¹æ€§ï¼Œè®©æ•°ç»„å®ç°äº†è¿™ä¸€ç”Ÿä¸­æœ€é‡è¦çš„æ“ä½œï¼šå¿«é€ŸæŸ¥è¯¢ï¼Œå®ƒå¯ä»¥è¾¾åˆ° <strong>O(1)</strong> çš„é€Ÿåº¦ï¼Œå½“ç„¶è¦å¯¹è¿™é‡Œè¿›è¡Œé™åˆ¶æ¡ä»¶ï¼Œå³å‡†ç¡®çš„è¡¨è¾¾åº”è¯¥æ˜¯æŒ‰ç…§<code>ä¸‹æ ‡</code>è¿›è¡ŒæŸ¥è¯¢ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦å¯ä»¥è¾¾åˆ° <strong>O(1)</strong> ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ç»å¸¸è¯´çš„æ ¹æ®æŸä¸ªå€¼æ¥ç¡®å®šå®ƒçš„ä½ç½®ç­‰ï¼Œè¿™æ ·çš„æŸ¥è¯¢æ–¹å¼ (å·²ç»æ’å¥½åº) æœ€å¿«ä¹Ÿæ˜¯ <strong>O(logn)</strong> </p><p>å…ˆæ¥çœ‹ä¸€ä¸‹æ˜¯å¦‚ä½•å®ç°æ ¹æ®ä¸‹æ ‡æ¥è¿›è¡Œæ—¶é—´å¤æ‚åº¦ä¸º <strong>O(1)</strong> çš„æ“ä½œï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002112308.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002112308.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002112307187"></p><p>æˆ‘ä»¬å¾ˆå®¹æ˜“å°±å‘ç°è¿™æ ·çš„è§„å¾‹ï¼š</p><p>å‰æï¼šchar[] charList = new char[6]</p><p>ç»“è®ºï¼š<code>address = baseAddress + i * charSize</code></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ä»¥ä¸‹æ¡ä»¶å°±è¡Œï¼š</p><ul><li>è¯¥æ•°ç»„çš„èµ·å§‹åœ°å€ baseAddressï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„ 1000</li><li>è¯¥æ•°ç»„æ˜¯ä»€ä¹ˆç±»å‹ï¼Œè¿™é‡Œæ˜¯ Java çš„ char ç±»å‹ï¼Œå­—èŠ‚æ•°ä¸º 2</li></ul><p>å°±è¿™æ ·ï¼Œå¯ä»¥é€šè¿‡ä¸Šé¢æ¡ä»¶æ±‚å‡ºè¿™é‡Œä»»æ„ä¸€ä¸ªå…ƒç´ çš„åœ°å€ã€‚</p><h4 id="å‡çŸ¥è¯†ï¼š"><a href="#å‡çŸ¥è¯†ï¼š" class="headerlink" title="å‡çŸ¥è¯†ï¼š"></a>å‡çŸ¥è¯†ï¼š</h4><p>å¦‚æœï¼Œèµ·å§‹åœ°å€ä» 1 å¼€å§‹çš„è¯ï¼Œæ¥è®¡ç®—ä¸€ä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ</p><p>è®¡ç®—å…¬å¼æ˜¯ä¸æ˜¯è¦å˜ä¸ºï¼š<code>address = baseAddress + (i - 1) * charSize</code> </p><p>ä½ æƒ³ï¼Œä½ ç»†æƒ³ï¼Œæ˜¯ä¸æ˜¯æ¯æ¬¡éƒ½è¦å¤šè¿›è¡Œä¸€æ¬¡<strong>å‡æ³•</strong>æ“ä½œï¼Œè¿™æ · <code>åŠ æ³•å™¨</code> (åœ¨è®¡ç»„ä¸­æ˜¯æ²¡æœ‰å‡æ³•å™¨å­˜åœ¨çš„ï¼Œé€šè¿‡è½¬æ¢ä¸ºåŠ æ³•æ¥è®¡ç®—)æ˜¯ä¸æ˜¯å°±è¦å¤šè¿›è¡Œä¸€æ¬¡è®¡ç®—</p><p>è¿™ä¼šä¸ä¼šå°±æ˜¯å½“å¹´å®šä¹‰æ•°ç»„ä» 0 å¼€å§‹çš„é‚£ä½ç¨‹åºå‘˜çš„ idea å‘¢ï¼Ÿ(<del>å¼ºè€…å¦‚æ–¯</del>) å½“ç„¶ä¸æ˜¯ï¼Œè¿™ä»…ä»…æ˜¯ä¸€ç§è§„å®šè€Œå·²ï¼Œä¸Šé¢çš„ä¸€ç³»åˆ—çŒœæµ‹ï¼Œä»…ä»…æ˜¯ä¸ºäº†çŒœè€ŒçŒœ</p><h3 id="2-3-æ’å…¥å’Œåˆ é™¤"><a href="#2-3-æ’å…¥å’Œåˆ é™¤" class="headerlink" title="2.3 æ’å…¥å’Œåˆ é™¤"></a>2.3 æ’å…¥å’Œåˆ é™¤</h3><p><strong>One coin has two sides</strong>ï¼Œæœ‰åˆ©è‡ªç„¶æœ‰å¼Šã€‚åœ¨ä¸Šé¢å·²ç»è¯´è¿‡äº†æ•°ç»„çš„æŸ¥è¯¢ï¼Œä¹Ÿæ˜¯æ•°ç»„çš„æœ€å¤§ä¼˜ç‚¹ï¼›å½“ç„¶æ•°ç»„åœ¨æ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›ä¼˜åŒ–çš„å° tipsã€‚</p><p><code>æ’å…¥</code></p><p>ä¸ºä»€ä¹ˆè¯´æ•°ç»„ä¸­æ’å…¥ï¼Œä¼šæ˜¯æ—¶é—´å¤æ‚åº¦å˜é«˜å‘¢ï¼Ÿä¸»è¦æ˜¯æ•°ç»„æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œå¦‚æœåªæ˜¯åœ¨æœ€åä¸€ä¸ªå…ƒç´ æ’å…¥ä¸€ä¸ªæ–°çš„å…ƒç´ ï¼Œé‚£ä¹ˆæ²¡ä»€ä¹ˆå¤§ä¸äº†ï¼›ä½†æ˜¯ä½ è¦æ˜¯åœ¨ç¬¬ä¸€ä¸ªå…ƒç´ åé¢æ’å…¥ä¸€ä¸ªæ–°çš„å…ƒç´ ï¼Œé‚£å°±è¦æŠŠåŸæœ¬çš„ç¬¬äºŒä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ å…¨éƒ¨å‘åç§»åŠ¨ä¸€ä¸ª typeSizeï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002153520.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002153520.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002153518082"></p><p>ç”±ä¸Šé¢çš„å›¾ï¼Œå¯ä»¥è½»æ˜“çœ‹å‡ºæ’å…¥æ–°çš„å…ƒç´ åœ¨æœ€åï¼šå‰é¢å…ƒç´ çš„ä½ç½®éƒ½æœªå˜ï¼›æ’å…¥åœ¨ç¬¬äºŒä¸ªä½ç½®ï¼šç¬¬äºŒä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®éƒ½ <strong>+ 1</strong> äº†</p><p>å¹³å‡çš„æ—¶é—´å¤æ‚åº¦å°±ä¸ºï¼š<strong>O(n)</strong></p><p>å½“ç„¶è¿™æ ·åšæ˜¯æœ‰å‰æçš„ï¼šå°±æ˜¯æ˜¯è¦æœ‰åºçš„ã€‚å¦‚æœå¯¹æ’åºæ²¡æœ‰è¦æ±‚çš„ï¼Œå¯ä»¥å¦‚ä¸‹æ“ä½œï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002155752.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002155752.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002155750878"></p><p>æ­¤æ—¶åªéœ€è¦æŠŠåŸæœ¬åœ¨ 1 ä½ç½®çš„å…ƒç´ <strong>å¤åˆ¶</strong>åˆ°æ–°æ‰©å±•çš„ä½ç½®ï¼ŒæŠŠ 1 ä¸­çš„å…ƒç´ æ¢æˆæ–°çš„å…ƒç´ ï¼Œåœ¨ä¸Šè¿°çš„ä¾‹å­ä¸­å¯¹åº”çš„å°±æ˜¯ï¼šå°† n å¤åˆ¶åˆ°ä½ç½® 5 ä¸Šï¼Œç„¶åå°†ä½ç½® 1 çš„å…ƒç´ è¦†ç›–ä¸ºæ–°å…ƒç´  a</p><p><code>åˆ é™¤</code></p><p>åˆ é™¤æ•°ç»„ä¸­çš„å…ƒç´ ä¸æ’å…¥æ“ä½œç±»ä¼¼ï¼šä¸»è¦æ˜¯ä¸ºäº†ä¿è¯å†…å­˜çš„è¿ç»­æ€§ï¼Œå¦‚æœåˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œé‚£æ²¡ä»€ä¹ˆé—®é¢˜ï¼›å¦‚æœæ˜¯åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªå…ƒç´ åé¢çš„æ‰€æœ‰å…ƒç´ éƒ½è¦å‘å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚</p><p>åˆ™å¹³å‡çš„æ—¶é—´å¤æ‚åº¦å°±ä¸ºï¼š<strong>O(n)</strong></p><p>ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹çš„åˆ é™¤ï¼šå¦‚æœå¯¹æ²¡æœ‰ç«‹é©¬å¯¹åˆ é™¤å…ƒç´ è¿›è¡Œåƒåœ¾å›æ”¶çš„æ“ä½œï¼Œæœ‰ä»€ä¹ˆæ¯”è¾ƒå¥½çš„æ–¹å¼ï¼Ÿ</p><p>åœ¨ JVM è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ç®—æ³•ï¼š</p><ul><li>æ ‡è®° - æ¸…é™¤ç®—æ³•</li><li>å¤åˆ¶ç®—æ³•</li><li>æ ‡è®° - æ•´ç†ç®—æ³•</li><li>åˆ†ä»£æ”¶é›†ç®—æ³•</li></ul><p>åœ¨è¿™é‡Œä¸»è¦ä»‹ç»ä¸€ä¸‹ <strong>æ ‡è®° - æ¸…é™¤ç®—æ³•</strong>ï¼Œç®€å•æ¥è¯´ï¼š</p><p>åœ¨ JVM è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œä¸ç«‹é©¬è¿›è¡Œå›æ”¶ï¼Œåªæ˜¯å¯¹è¦è¿›è¡Œå›æ”¶çš„å…ƒç´ è¿›è¡Œæ ‡è®°ï¼Œç­‰åˆ°ç§¯ç´¯åˆ°ä¸€å®šé‡å†è¿›è¡Œä¸€æ¬¡æ‰¹å¤„ç†ï¼Œä¾‹å­å¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002163730.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002163730.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002163729145"></p><p>å¯ä»¥çœ‹è§ï¼Œåªéœ€è¦å¯¹è¦åˆ é™¤çš„å…ƒç´ è¿›è¡Œæ ‡è®°ï¼Œéšååˆ°æœ€åä¸€æ¬¡æ€§è¿›è¡Œå›æ”¶</p><p>ä½†æ˜¯è¿™æ ·ä¹Ÿä¼šå¸¦æ¥å¾ˆå¤šé—®é¢˜ï¼Œå¦‚æ•ˆç‡é—®é¢˜å’Œç©ºé—´é—®é¢˜ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002163919.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002163919.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002163917519"></p><p>å¦‚æœæ˜¯åˆ é™¤çš„å…ƒç´ æ˜¯ä¸€æ®µä¸€æ®µçš„ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿå¤§é‡çš„ç©ºé—´ç¢ç‰‡ï¼Œæ‰€ä»¥ JVM åé¢è¿˜æœ‰å¾ˆå¤šå…¶ä½™çš„å›æ”¶ç®—æ³•</p><h3 id="2-4-å…³äºæ•°ç»„è¶Šç•Œçš„é—®é¢˜"><a href="#2-4-å…³äºæ•°ç»„è¶Šç•Œçš„é—®é¢˜" class="headerlink" title="2.4 å…³äºæ•°ç»„è¶Šç•Œçš„é—®é¢˜"></a>2.4 å…³äºæ•°ç»„è¶Šç•Œçš„é—®é¢˜</h3><p>æˆ‘ä»¬å°è¯•åœ¨ Ubuntu 18.04 64bit ä¸­è¿è¡Œä¸‹é¢è¿™æ®µ C ä»£ç ï¼š</p><p><code>OverFlow.c</code> </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> arr[<span class="number">3</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(; i&lt;=<span class="number">3</span>; i++)&#123;</span><br><span class="line">        arr[i] = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;hello world\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŒ‰ç…§æ­£å¸¸æƒ³æ³•èµ°ä¸‹å»ï¼šä¼šæ‰“å°ä¸‰è¡Œ hello worldï¼Œå°±ä¼šè¿è¡Œå®Œæ¯•</p><p>è®©æˆ‘ä»¬è¿›è¡Œæµ‹è¯•å§ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002172344.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002172344.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002172343083"></p><p>ä½ å°±ä¼šçœ‹åˆ°æ§åˆ¶å°å¼€å§‹æ— é™æ‰“å° hello world äº†ï¼š</p><p>![image-20201002172557103](/Users/wangdechao/Library/Application Support/typora-user-images/image-20201002172557103.png)</p><p>åªè¦åœ¨å†…å­˜è¶³å¤Ÿçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç¨‹åºå°±ä¼šä¸€ç›´è¿è¡Œä¸‹å»ï¼Œè¿™å°±æ˜¯å…¸å‹çš„ StackOverFlow é—®é¢˜</p><p>ç®€å•çš„å°±å¯ä»¥ç†è§£æˆå¦‚ä¸‹ç»“æ„ï¼š</p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002184829.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002184829.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002184827040" style="zoom:50%;" /><p>è¿™ä¸ªæ ˆçš„ç»“æ„å…·ä½“å¯ä»¥å‚è€ƒã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹ï¼Œè¿™é‡Œå‡ºç°ä¸Šè¿°æƒ…å†µçš„ä¸»è¦åŸå› ï¼š</p><ul><li>C è¯­è¨€ä¸­æ˜¯æ‰€æœ‰çš„å†…å­˜éƒ½æ˜¯å¯ä»¥è®¿é—® (é™¤äº†å—é™å†…å­˜ä»¥å¤–)</li><li>åœ¨ä¸Šè¿°ä»£ç ä¸­ i &lt;=3ï¼Œè¯´æ˜ a[3] = 0 åœ¨å†…å­˜çš„æŸä¸ªåœ°å€ä¸Š</li><li>è€Œè¿™ä¸ªåœ°å€æœ¬èº«æ˜¯ <code>åŸæ¥çš„ i çš„åœ°å€</code> ï¼Œæ‰€ä»¥å°±ç›¸å½“äº i = 3 åˆè¢«èµ‹å€¼ä¸º i = 0ï¼Œç„¶åç»§ç»­ä¸æ–­å¾ªç¯</li></ul><p>å¦‚æœæƒ³çŸ¥é“è¿™ä¸ªæ ˆæº¢å‡ºæ˜¯å¦‚ä½•å…·ä½“å®ç°çš„è¯ï¼Œå¯ä»¥æ˜¯ç”¨ objdump å‘½ä»¤è¿›è¡Œåç¼–è¯‘ï¼Œå†è¿›è¡Œåˆ†æï¼Œå…¶ä¸­ä¸»è¦çš„æ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼šå…¶ä¸­å…³é”®è¡Œåº”è¯¥ä¸º 65fã€67eã€682ã€661</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">000000000000063a &lt;main&gt;:</span><br><span class="line"> 63a:    55                       push   %rbp</span><br><span class="line"> 63b:    48 89 e5                 mov    %rsp,%rbp</span><br><span class="line"> 63e:    48 83 ec 20              sub    $0x20,%rsp</span><br><span class="line"> 642:    89 7d ec                 mov    %edi,-0x14(%rbp)</span><br><span class="line"> 645:    48 89 75 e0              mov    %rsi,-0x20(%rbp)</span><br><span class="line"> 649:    c7 45 fc 00 00 00 00     movl   $0x0,-0x4(%rbp)</span><br><span class="line"> 650:    48 c7 45 f0 00 00 00     movq   $0x0,-0x10(%rbp)</span><br><span class="line"> 657:    00 </span><br><span class="line"> 658:    c7 45 f8 00 00 00 00     movl   $0x0,-0x8(%rbp)</span><br><span class="line"> 65f:    eb 1d                    jmp    67e &lt;main+0x44&gt;</span><br><span class="line"> 661:    8b 45 fc                 mov    -0x4(%rbp),%eax</span><br><span class="line"> 664:    48 98                    cltq   </span><br><span class="line"> 666:    c7 44 85 f0 00 00 00     movl   $0x0,-0x10(%rbp,%rax,4)</span><br><span class="line"> 66d:    00 </span><br><span class="line"> 66e:    48 8d 3d 9f 00 00 00     lea    0x9f(%rip),%rdi        # 714 &lt;_IO_stdin_used+0x4&gt;</span><br><span class="line"> 675:    e8 96 fe ff ff           callq  510 &lt;puts@plt&gt;</span><br><span class="line"> 67a:    83 45 fc 01              addl   $0x1,-0x4(%rbp)</span><br><span class="line"> 67e:    83 7d fc 03              cmpl   $0x3,-0x4(%rbp)</span><br><span class="line"> 682:    7e dd                    jle    661 &lt;main+0x27&gt;</span><br><span class="line"> 684:    b8 00 00 00 00           mov    $0x0,%eax</span><br><span class="line"> 689:    c9                       leaveq </span><br><span class="line"> 68a:    c3                       retq   </span><br><span class="line"> 68b:    0f 1f 44 00 00           nopl   0x0(%rax,%rax,1)</span><br></pre></td></tr></table></figure><p>å…¶å®ï¼Œåœ¨è¿™ä¸ªå·¨å¤§æ¼æ´å‡ºæ¥åï¼Œç°åœ¨çš„å†…å­˜å·²ç»åŠ äº†é‡‘ä¸é›€ä¿æŠ¤ (canary) äº†ï¼Œä¸ºäº†è®©è¿™ä¸ªæ¼æ´å¤ç°ï¼Œåœ¨ä¸Šé¢ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œå·²ç»ä½¿ç”¨ <strong>-fno-stack-protector</strong> å°†ä¿æŠ¤å…³é—­äº†</p><p>è€Œå¦‚æœè¯¥ç¨‹åºåœ¨ Java ä¸­å¤ç°ï¼Œåœ¨ç¼–è¯‘æ—¶å°±ä¼šæŠ›å‡º <strong>ArrayIndexOutOfBoundsException</strong> çš„å¼‚å¸¸äº†</p><h2 id="ä¸‰ã€Java-ä¸­çš„æ•°ç»„"><a href="#ä¸‰ã€Java-ä¸­çš„æ•°ç»„" class="headerlink" title="ä¸‰ã€Java ä¸­çš„æ•°ç»„"></a>ä¸‰ã€Java ä¸­çš„æ•°ç»„</h2><p>åœ¨ Java ä¸­ï¼Œå¯¹äºæ•°ç»„æ²¡æœ‰ä»€ä¹ˆå¥½äº†è§£çš„ï¼Œé¡¶å¤šå°±ä¸€ä¸ªåŸºæœ¬è¯­æ³•ï¼›ä½†æ˜¯åœ¨ Java ä¸­æœ‰ä¸€ä¸ªé›†åˆç±»ï¼Œæ˜¯æ¯ä¸ª Java ç¨‹åºå‘˜åº”è¯¥æ¯å¤©éƒ½ä¼šç”¨åˆ°çš„ï¼Œå®ƒå°±æ˜¯ <code>ArrayList</code> </p><p>å…ˆçœ‹ä¸€ä¸‹å®ƒçš„ç»§æ‰¿å’Œå®ç°å…³ç³»</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002213613.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20201002213613.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20201002213610816"></p><ul><li>å®ƒç»§æ‰¿äº† <strong>AbstractList</strong> ï¼Œå®ç°äº† <strong>List</strong>    ====&gt;    å®ƒæ˜¯ä¸€ä¸ªæ•°ç»„é˜Ÿåˆ—ï¼Œæä¾›äº†ç›¸å…³çš„æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€éå†ç­‰åŠŸèƒ½</li><li>å®ƒå®ç°äº†<strong>RandomAccess æ¥å£</strong>    ====&gt;    å®ç°è¿™ä¸ªè¿™ä¸ªæ¥å£çš„ List é›†åˆæ˜¯æ”¯æŒ<strong>å¿«é€Ÿéšæœºè®¿é—®</strong></li><li>å®ƒå®ç° <strong>java.io.Serializable æ¥å£</strong>    ====&gt;    ArrayList <strong>æ”¯æŒåºåˆ—åŒ–</strong>ï¼Œ<strong>èƒ½é€šè¿‡åºåˆ—åŒ–å»ä¼ è¾“</strong></li><li>å¹¶ä¸”è¦æ³¨æ„ï¼Œåœ¨å•çº¿ç¨‹ä¸­ä½¿ç”¨å®ƒï¼Œåœ¨å¤šçº¿ç¨‹ä½¿ç”¨ <strong>Vector(å°‘)</strong> æˆ–è€… <strong>CopyOnWriteArrayList(å¤š)**ï¼Œå°½é‡è¿˜æ˜¯ä½¿ç”¨åè€…è¾ƒå¤šï¼Œå‰è€…ä¸»è¦æ˜¯åŸºäº **synchronized</strong> å…³é”®å­—ï¼Œåè€…æ˜¯åŸºäº <strong>ReentrantLock</strong> æ“ä½œçš„</li></ul><p>å®ƒä¸ Java è‡ªå¸¦çš„æ™®é€šæ•°ç»„æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼šå®ƒæ˜¯<code>åŠ¨æ€</code>çš„</p><p>è¿™é‡Œä¸»è¦åŸºäºæºç åˆ†æä¸€ä¸‹åŠ¨æ€æ‰©å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ensureCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (minCapacity &gt; <span class="keyword">this</span>.elementData.length &amp;&amp; (<span class="keyword">this</span>.elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA || minCapacity &gt; <span class="number">10</span>)) &#123;</span><br><span class="line">        ++<span class="keyword">this</span>.modCount;</span><br><span class="line">        <span class="keyword">this</span>.grow(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Object[] grow(<span class="keyword">int</span> minCapacity) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.elementData = Arrays.copyOf(<span class="keyword">this</span>.elementData, <span class="keyword">this</span>.newCapacity(minCapacity));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Object[] grow() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.grow(<span class="keyword">this</span>.size + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">newCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> oldCapacity = <span class="keyword">this</span>.elementData.length;</span><br><span class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">            <span class="keyword">return</span> Math.max(<span class="number">10</span>, minCapacity);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (minCapacity &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> minCapacity;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> newCapacity - <span class="number">2147483639</span> &lt;= <span class="number">0</span> ? newCapacity : hugeCapacity(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><ul><li>å¯¹äºå˜é•¿æ•°æ®ç»“æ„ï¼Œå½“ç»“æ„ä¸­æ²¡æœ‰ç©ºä½™ç©ºé—´å¯ä¾›ä½¿ç”¨æ—¶ï¼Œå°±éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚åœ¨ ArrayList ä¸­ï¼Œå½“ç©ºé—´ç”¨å®Œï¼Œå…¶ä¼šæŒ‰ç…§åŸæ•°ç»„ç©ºé—´çš„1.5å€è¿›è¡Œæ‰©å®¹ã€‚</li></ul></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="é‡å­¦ç®—æ³•ç³»åˆ—" scheme="http://wangba.me/categories/%E9%87%8D%E5%AD%A6%E7%AE%97%E6%B3%95%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Leetcode" scheme="http://wangba.me/tags/Leetcode/"/>
    
    <category term="Algorithm" scheme="http://wangba.me/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>Algorithm</title>
    <link href="http://wangba.me/2020/10/01/Algorithm/"/>
    <id>http://wangba.me/2020/10/01/Algorithm/</id>
    <published>2020-10-01T14:42:29.000Z</published>
    <updated>2020-10-01T14:52:58.430Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>â€‹            æœ€è¿‘å®ä¹ åå‘ç°è‡ªå·±çš„ç®—æ³•èƒ½åŠ›æ€¥å‰§ä¸‹é™ï¼Œ<del>CRUD åªæ˜¯ä¸‹é™ï¼Œç®—æ³•æ‰æ˜¯ä¸Šé™</del>ï¼Œå†³å®šé‡æ–°å¼€ä¸€ä¸ªç³»åˆ—ï¼Œå°†æ•°æ®ç»“æ„ä¸ç®—æ³•é‡æ–°å­¦ä¸€éã€‚è¿™æ¬¡ä¸»è¦å‚è€ƒçš„è¯¾ç¨‹æ˜¯ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ã€‹å’Œã€Šç®—æ³•é¢è¯•é€šå…³40è®²ã€‹ã€‚è¿™é‡Œå°±ä¸åƒã€Šç®—æ³•å¯¼è®ºã€‹é‚£æ ·æ¯”è¾ƒç†è®ºåŒ–ï¼Œåº”è¯¥ä¼šæ›´åå‘äºã€Šç®—æ³•ã€‹è¿™æœ¬ä¹¦çš„ç±»å‹ã€‚</p><p>å¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™äº›æœ‰è¶£çš„ç‚¹ï¼š</p><ul><li>ğŸ· å°½é‡åˆ©ç”¨å›¾ + æ–‡å­—ï¼Œæ¸…æ™°çš„è¡¨è¾¾æ„æ€</li><li>ğŸ¢ ä¸€å®šè¦ç»“åˆ Leetcode ä¸Šçš„é¢˜ç›®</li><li>ğŸ­ å°½é‡ä»‹ç»ä¸€äº›<del>æ²¡ç”¨</del>æœ‰è¶£çš„å° Tips</li><li>ğŸ¦ ä½¿ç”¨ Java æ¥å®ç°æ‰€æœ‰çš„ç®—æ³•</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="é‡å­¦ç®—æ³•ç³»åˆ—" scheme="http://wangba.me/categories/%E9%87%8D%E5%AD%A6%E7%AE%97%E6%B3%95%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Leetcode" scheme="http://wangba.me/tags/Leetcode/"/>
    
    <category term="Algorithm" scheme="http://wangba.me/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆSpring Security (ä¸‰)</title>
    <link href="http://wangba.me/2020/09/30/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%B8%89/"/>
    <id>http://wangba.me/2020/09/30/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%B8%89/</id>
    <published>2020-09-30T06:47:27.000Z</published>
    <updated>2020-09-30T08:49:43.318Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>â€‹        åœ¨å‰åç«¯ä¸åˆ†ç¦»æ—¶ä»£ï¼Œå¯èƒ½ä½¿ç”¨çš„å°±æ˜¯<a href="http://wangba.me/2020/09/28/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%BA%8C/">ä¸Šä¸€èŠ‚</a>ä¸­è¿™ç§æ–¹æ³•ï¼›åœ¨ç°åœ¨è¿™ç§å‰åç«¯åˆ†ç¦»éåœ°èµ°çš„æƒ…å†µä¸‹ï¼Œå·²ç»ä¸å†æ¨èä½¿ç”¨ä¼ ç»Ÿçš„ session ï¼Œè€Œæ˜¯ä½¿ç”¨ç°åœ¨æ¯”è¾ƒæµè¡Œçš„ JWT è¿™ç§ token çš„æ–¹å¼è§£å†³</p><p>â€‹        å¯¹æ¯”åˆ†æä¸€ä¸‹ï¼š</p><table><thead><tr><th></th><th>æœ‰çŠ¶æ€ç™»å½•</th><th>æ— çŠ¶æ€ç™»å½•</th></tr></thead><tbody><tr><td>å®šä¹‰</td><td>æœåŠ¡ç«¯éœ€è¦è®°å½•æ¯æ¬¡ä¼šè¯çš„å®¢æˆ·ç«¯ä¿¡æ¯ï¼Œä»è€Œè¯†åˆ«å®¢æˆ·ç«¯èº«ä»½ï¼Œæ ¹æ®ç”¨æˆ·èº«ä»½è¿›è¡Œè¯·æ±‚çš„å¤„ç†</td><td>æœåŠ¡ç«¯ä¸ä¿å­˜ä»»ä½•å®¢æˆ·ç«¯è¯·æ±‚è€…ä¿¡æ¯ï¼›å®¢æˆ·ç«¯çš„æ¯æ¬¡è¯·æ±‚å¿…é¡»å…·å¤‡è‡ªæè¿°ä¿¡æ¯ï¼Œé€šè¿‡è¿™äº›ä¿¡æ¯è¯†åˆ«å®¢æˆ·ç«¯èº«ä»½</td></tr><tr><td>ä¼˜ç‚¹</td><td>æ¯”è¾ƒæ–¹ä¾¿ï¼Œä¸éœ€è¦åšå¤šä½™çš„å¤„ç†</td><td>ä½¿ç”¨ token å¾ˆçµæ´»ï¼›æœåŠ¡ç«¯ä¸éœ€è¦å­˜æ•°æ®ï¼›å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥å‘é€ç»™å¤šä¸ªæœåŠ¡å™¨</td></tr><tr><td>ç¼ºç‚¹</td><td>åªèƒ½æ˜¯ç½‘é¡µç«¯ï¼Œåœ¨ IOSã€Androidä¸è¡Œï¼›æœåŠ¡ç«¯ä¿å­˜å¤§é‡æ•°æ®ï¼›é›†ç¾¤åŒ–ä¸å¤ªè¡Œ</td><td>é…ç½®ç¨å¾®å¤æ‚(å…¶å®åœ¨æ¡†æ¶çš„åŠ æˆä¸‹ï¼Œä¸å¤æ‚)</td></tr></tbody></table><p><code>æœ‰çŠ¶æ€ç™»å½•</code></p><ul><li>ğŸŒ°ï¼šåœ¨ Tomcat ä¸­ï¼Œç”¨æˆ·ç™»å½•åï¼Œéœ€è¦æŠŠç”¨æˆ·çš„ä¿¡æ¯ä¿å­˜åœ¨æœåŠ¡å™¨çš„ session ä¸­ï¼Œç„¶åå‘é€ç»™ç”¨æˆ·ä¸€ä¸ª Cookie å€¼ï¼Œè®°å½•å¯¹åº”çš„ session å€¼ï¼Œç­‰ç”¨æˆ·ä¸‹ä¸€æ¬¡å†æ¬¡è®¿é—®è¯¥æœåŠ¡å™¨æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å¸¦ä¸Šè¿™ä¸ª Cookie å€¼ï¼ŒæœåŠ¡ç«¯å†è¯†åˆ«å…¶ä¸­çš„ session å€¼ï¼Œè¿›è¡Œåˆ¤æ–­</li></ul><p><code>æ— çŠ¶æ€ç™»å½•</code></p><ul><li>ğŸŒ°ï¼šå®¢æˆ·ç«¯å‘é€è´¦æˆ·å¯†ç åˆ°æœåŠ¡ç«¯è¿›è¡ŒéªŒè¯ï¼›è®¤è¯åæœåŠ¡ç«¯å‘é€ä¸€ä¸ª token ç»™å®¢æˆ·ç«¯ï¼›ä»¥åå®¢æˆ·ç«¯æ¯æ¬¡å‘é€è¯·æ±‚éƒ½å°† token æºå¸¦ä¸Šè¿›è¡Œè®¤è¯ï¼Œè¿›è¡Œåˆ¤æ–­</li></ul><h2 id="äºŒã€Test"><a href="#äºŒã€Test" class="headerlink" title="äºŒã€Test"></a>äºŒã€Test</h2><p>â€‹        åœ¨å‰åç«¯åˆ†ç¦»çš„åŸºç¡€ä¸Šï¼Œç°åœ¨å‰ç«¯å’Œåç«¯åªæ˜¯é€šè¿‡ JSON è¿›è¡Œäº¤äº’ï¼Œæ‰€ä»¥ç°åœ¨çš„é¡µé¢è·³è½¬å…¨éƒ¨ç”±å‰ç«¯è¿›è¡Œæ§åˆ¶ï¼Œåç«¯åªæ˜¯è¿”å›ä¸åŒçš„ JSON ç½¢äº†</p><p>é‡å†™<code>SecurityConfig</code>ä¸­çš„ configure æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">            <span class="comment">// ç™»å‡ºé¡µé¢ + ç™»å‡ºæˆåŠŸåé¡µé¢</span></span><br><span class="line">            .logout()</span><br><span class="line">            .logoutUrl(<span class="string">&quot;/logout&quot;</span>)</span><br><span class="line">            .logoutSuccessUrl(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">            .logoutSuccessHandler((httpServletRequest, httpServletResponse, authentication) -&gt; &#123;</span><br><span class="line">                httpServletResponse.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                PrintWriter out = httpServletResponse.getWriter();</span><br><span class="line">                out.write(<span class="string">&quot;æ³¨é”€æˆåŠŸ&quot;</span>);</span><br><span class="line">                out.flush();</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;)</span><br><span class="line">            .and()</span><br><span class="line">            <span class="comment">// ç™»å½•é¡µé¢ + ç™»å½•æ¥å£</span></span><br><span class="line">            .formLogin().loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">            .loginProcessingUrl(<span class="string">&quot;/securityLogin&quot;</span>)</span><br><span class="line">            .permitAll()</span><br><span class="line">            <span class="comment">// ç™»å½•å¤±è´¥å¤„ç†å™¨</span></span><br><span class="line">            .failureHandler((httpServletRequest, httpServletResponse, e) -&gt; &#123;</span><br><span class="line">                httpServletResponse.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                PrintWriter out = httpServletResponse.getWriter();</span><br><span class="line">                out.write(e.getMessage());</span><br><span class="line">                out.flush();</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="comment">// ç™»å½•æˆåŠŸå¤„ç†å™¨</span></span><br><span class="line">            .successHandler((httpServletRequest, httpServletResponse, authentication) -&gt; &#123;</span><br><span class="line">                Object principal = authentication.getPrincipal();</span><br><span class="line">                httpServletResponse.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">                PrintWriter out = httpServletResponse.getWriter();</span><br><span class="line">                out.write(<span class="keyword">new</span> ObjectMapper().writeValueAsString(principal));</span><br><span class="line">                out.flush();</span><br><span class="line">                out.close();</span><br><span class="line">            &#125;)</span><br><span class="line">            .and()</span><br><span class="line">            .csrf().disable()</span><br><span class="line">    ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>ç™»å½•æ¥å£</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200929172425.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200929172425.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200929172423472"></p><blockquote><p>æ³¨ï¼š</p><ul><li>å¯ä»¥çœ‹åˆ°ä½¿ç”¨å‰åç«¯åˆ†ç¦»ï¼Œå°±ä¸éœ€è¦åç«¯æ¥æ§åˆ¶è·³è½¬é¡µé¢ç­‰ï¼Œåªéœ€è¦å°† JSON å‘ç»™å‰ç«¯å°±è¡Œ</li><li>è¿™é‡Œé¢çš„ password ä¸ºç©ºï¼Œæ˜¯æ¡†æ¶åšçš„ï¼Œå…·ä½“å¯ä»¥çœ‹è¿™é‡Œ</li></ul></blockquote><p><code>ç™»å½•å¤±è´¥</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930092635.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930092635.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200930092629637"></p><blockquote><p>æ³¨ï¼š</p><ul><li>æ— è®ºæ˜¯ç”¨æˆ·åå’Œå¯†ç å…¶ä¸­ä¸€ä¸ªé”™è¯¯ï¼Œå°±ä¼šè¿”å› Bad credentials æç¤ºï¼Œä¸»è¦ä¹Ÿæ˜¯ä¸ºäº†å®‰å…¨ç€æƒ³ï¼Œå…·ä½“æµç¨‹å¯ä»¥çœ‹ä¸‹é¢çš„ 3.1 å°èŠ‚</li></ul></blockquote><p><code>æ³¨é”€ç™»å½•</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930093600.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930093600.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200930093559635"></p><h2 id="ä¸‰ã€Deep-Learning"><a href="#ä¸‰ã€Deep-Learning" class="headerlink" title="ä¸‰ã€Deep Learning"></a>ä¸‰ã€Deep Learning</h2><h3 id="3-1-æ·±å…¥äº†è§£ç™»å½•å¤±è´¥"><a href="#3-1-æ·±å…¥äº†è§£ç™»å½•å¤±è´¥" class="headerlink" title="3.1 æ·±å…¥äº†è§£ç™»å½•å¤±è´¥"></a>3.1 æ·±å…¥äº†è§£ç™»å½•å¤±è´¥</h3><p>â€‹        åœ¨ä¸Šé¢æˆ‘ä»¬æåˆ°äº†æ— è®ºæ˜¯ç”¨æˆ·åå’Œå¯†ç å…¶ä¸­ä¸€ä¸ªé”™è¯¯ï¼Œå°±ä¼šè¿”å› Bad credentialsï¼Œå®åˆ™åœ¨å…¶ä¸­è¿˜æœ‰å¾ˆå¤šç§é”™è¯¯ï¼Œè€Œä¸”ç”¨æˆ·åæ˜¯æœ‰ç”¨æˆ·åé”™è¯¯ï¼Œåªæ˜¯æœ€ç»ˆè¢« Bad credentials è¦†ç›–äº†ï¼Œç¨å¾®åˆ†æä¸€ä¸‹ï¼š</p><p><code>AbstractUserDetailsAuthenticationProvider</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Authentication <span class="title">authenticate</span><span class="params">(Authentication authentication)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">    Assert.isInstanceOf(UsernamePasswordAuthenticationToken.class, authentication, () -&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.messages.getMessage(<span class="string">&quot;AbstractUserDetailsAuthenticationProvider.onlySupports&quot;</span>, <span class="string">&quot;Only UsernamePasswordAuthenticationToken is supported&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    String username = authentication.getPrincipal() == <span class="keyword">null</span> ? <span class="string">&quot;NONE_PROVIDED&quot;</span> : authentication.getName();</span><br><span class="line">    <span class="keyword">boolean</span> cacheWasUsed = <span class="keyword">true</span>;</span><br><span class="line">    UserDetails user = <span class="keyword">this</span>.userCache.getUserFromCache(username);</span><br><span class="line">    <span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line">        cacheWasUsed = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            user = <span class="keyword">this</span>.retrieveUser(username, (UsernamePasswordAuthenticationToken)authentication);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UsernameNotFoundException var6) &#123;</span><br><span class="line">            <span class="keyword">this</span>.logger.debug(<span class="string">&quot;User &#x27;&quot;</span> + username + <span class="string">&quot;&#x27; not found&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.hideUserNotFoundExceptions) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> BadCredentialsException(<span class="keyword">this</span>.messages.getMessage(<span class="string">&quot;AbstractUserDetailsAuthenticationProvider.badCredentials&quot;</span>, <span class="string">&quot;Bad credentials&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">          <span class="comment">// çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œè¿›è¡Œè°ƒè¯•å¯ä»¥çœ‹è§ï¼š</p><ul><li>ä¼šå…ˆåœ¨ç¼“å­˜ä¸­æŸ¥è¯¢ä¸€ä¸‹æ˜¯å¦æœ‰è¿‡</li><li>å†è°ƒç”¨ retrieveUser æ¥è¿›è¡Œåˆ¤æ–­</li><li>ä¸€æ—¦æŠ›å‡º UsernameNotFoundException ï¼Œå°±çœ‹ hideUserNotFoundExceptions çš„å€¼äº†ï¼Œå¦‚æœä¸º trueï¼Œå°±ä¼šæŠ›å‡º Bad credentials</li></ul><p>è¿›è¡Œæ–­ç‚¹è°ƒè¯•ï¼šè¾“é”™ç”¨æˆ·åï¼Œå¹¶æ‰“ä¸Šæ–­ç‚¹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930135354.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930135354.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200930135352906"></p><p>é€šè¿‡ä¸Šå›¾å°±èƒ½çœ‹å‡ºï¼ŒhideUserNotFoundExceptions é»˜è®¤å€¼æ˜¯ true çš„</p><h3 id="3-2-æœªè®¤è¯å¤„ç†"><a href="#3-2-æœªè®¤è¯å¤„ç†" class="headerlink" title="3.2 æœªè®¤è¯å¤„ç†"></a>3.2 æœªè®¤è¯å¤„ç†</h3><p>åœ¨å‰åç«¯åˆ†ç¦»ï¼Œå¦‚æœå‡ºç°æœªè®¤è¯çš„çŠ¶æ€ï¼Œä¸å¯èƒ½æ§åˆ¶å‰ç«¯æ¥è·³è½¬é¡µé¢ç­‰ï¼Œåªèƒ½ç»™å‰ç«¯è¿”å›ç›¸åº”çš„ä¿¡æ¯å³å¯ï¼š</p><p>åœ¨ <code>AuthenticationEntryPoint</code> æ¥å£ä¸­æœ‰ä¸€ä¸ªæ–¹æ³•ï¼š<code>commence</code></p><p>åœ¨ <code>LoginUrlAuthenticationEntryPoint</code> ä¸­å®ç°æ–¹å¼ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">commence</span><span class="params">(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">    String redirectUrl = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.useForward) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.forceHttps &amp;&amp; <span class="string">&quot;http&quot;</span>.equals(request.getScheme())) &#123;</span><br><span class="line">            redirectUrl = <span class="keyword">this</span>.buildHttpsRedirectUrlForRequest(request);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (redirectUrl == <span class="keyword">null</span>) &#123;</span><br><span class="line">            String loginForm = <span class="keyword">this</span>.determineUrlToUseForThisRequest(request, response, authException);</span><br><span class="line">            <span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class="line">                logger.debug(<span class="string">&quot;Server side forward to: &quot;</span> + loginForm);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            RequestDispatcher dispatcher = request.getRequestDispatcher(loginForm);</span><br><span class="line">            dispatcher.forward(request, response);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        redirectUrl = <span class="keyword">this</span>.buildRedirectUrlToLoginPage(request, response, authException);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.redirectStrategy.sendRedirect(request, response, redirectUrl);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ä¸­æœ€ä¸»è¦çš„æ˜¯çœ‹ä¸€ä¸‹ <strong>useForward</strong> çš„é»˜è®¤å€¼ï¼Œå¦‚æœæ˜¯ <strong>true</strong>ï¼Œé‚£ä¹ˆé»˜è®¤å°±æ˜¯èµ°è½¬å‘ï¼›å¦‚æœæ˜¯ <strong>false</strong>ï¼Œé‚£ä¹ˆé»˜è®¤èµ°çš„å°±æ˜¯é‡å®šå‘</p><p>ä½¿å‡ºæ–­ç‚¹è°ƒè¯•å¤§æ³•ï¼š</p><ul><li>åœ¨ <strong>Postman</strong> ä¸­ç›´æ¥ä½¿ç”¨ <strong>GET</strong> æ–¹å¼è¯·æ±‚ï¼šlocalhost:8080/security</li></ul><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930141616.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930141616.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200930141614962"></p><p>æ­¤æ–¹æ³•åœ¨ç¬¬ä¸€èŠ‚ä¸­å·²ç»å†™è¿‡äº†ï¼Œå°±æ˜¯è¾“å‡ºä¸€ä¸ª <strong>Spring Security</strong></p><ul><li>åœ¨æ–¹æ³•å†…æ‰“ä¸Šæ–­ç‚¹</li></ul><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930141514.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930141514.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200930141512452"></p><p>ä»ä¸Šé¢çš„å›¾å°±å¯ä»¥çœ‹è§ï¼Œ<strong>useForward</strong> çš„é»˜è®¤å€¼æ˜¯ <strong>false</strong>ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç¡®å®šæ˜¯èµ°çš„é‡å®šå‘</p><p>åªéœ€è¦é‡å†™è¯¥æ–¹æ³•è¦†ç›–å®ƒå°±è¡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.exceptionHandling()</span><br><span class="line">.authenticationEntryPoint((req, resp, authException) -&gt; &#123;</span><br><span class="line">    resp.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">    PrintWriter out = resp.getWriter();</span><br><span class="line">    out.write(<span class="string">&quot;å°šæœªç™»å½•ï¼Œè¯·å…ˆç™»å½•&quot;</span>);</span><br><span class="line">    out.flush();</span><br><span class="line">    out.close();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930164934.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200930164934.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200930143626120"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Spring Security" scheme="http://wangba.me/tags/Spring-Security/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆSpring Security (äºŒ)</title>
    <link href="http://wangba.me/2020/09/28/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%BA%8C/"/>
    <id>http://wangba.me/2020/09/28/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%BA%8C/</id>
    <published>2020-09-28T10:13:07.000Z</published>
    <updated>2020-09-30T07:09:26.232Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€Test"><a href="#ä¸€ã€Test" class="headerlink" title="ä¸€ã€Test"></a>ä¸€ã€Test</h2><p>ç¯å¢ƒä¸<a href="http://wangba.me/2020/09/27/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%B8%80/">ä¸Šä¸€èŠ‚</a>çš„ç¯å¢ƒä¸€è‡´ï¼Œè¿™ä¸€èŠ‚ä¸»è¦æ¥è¿›è¡Œè‡ªå®šä¹‰æ“ä½œ</p><p>åœ¨ <code>SecurityConfig</code>  ä¸­é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(WebSecurity web)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    web.ignoring().antMatchers(<span class="string">&quot;/js/**&quot;</span>, <span class="string">&quot;/css/**&quot;</span>,<span class="string">&quot;/images/**&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">            .formLogin().loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">            .permitAll()</span><br><span class="line">            .and()</span><br><span class="line">            .csrf().disable()</span><br><span class="line">    ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡ªè¡Œå†™ä¸€ä¸ªç™»å½•é¡µé¢ï¼š</p><p><code>login.html</code> ä¸­çš„æ ¸å¿ƒä»£ç </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/login.html&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;name&quot;</span>&gt;</span>ç”¨æˆ·å<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;spin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;pass&quot;</span>&gt;</span>å¯†ç <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pass&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;spin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;button login&quot;</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-check&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ä¸»è¦æ³¨æ„ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><p>form çš„è¯·æ±‚åœ°å€æ˜¯ /login.htmlï¼Œæ–¹æ³•æ˜¯ post</p><p>ç”¨æˆ·åå’Œå¯†ç çš„å±æ€§å€¼åˆ†åˆ«æ˜¯ username å’Œ password</p></blockquote><h2 id="äºŒã€Deep-Learning"><a href="#äºŒã€Deep-Learning" class="headerlink" title="äºŒã€Deep Learning"></a>äºŒã€Deep Learning</h2><p> ğŸ¢ä¹‹ç–‘é—®ä¸€ï¼šä¸ºå•¥é»˜è®¤çš„ç™»å½•é¡µé¢å’Œç™»å½•æ¥å£æ˜¯ä¸€æ ·çš„ï¼Ÿè‡ªå®šä¹‰é¡µé¢åˆæ˜¯å¦‚ä½•è¦†ç›–é»˜è®¤é¡µé¢çš„å‘¢ï¼Ÿ</p><p><code>é»˜è®¤ç™»å½•é¡µé¢</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200928133405.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200928133405.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200928133357601"></p><p>å…³äºé¡µé¢çš„ç™»å½•çš„é…ç½®éƒ½åœ¨ï¼š<code>FormLoginConfigurer</code> </p><p>å…¶ä¸­è¿™ä¸ªç±»åˆæ˜¯ç»§æ‰¿ <code>AbstractAuthenticationFilterConfigurer</code> ç±»çš„</p><p>åˆ™åœ¨ <code>FormLoginConfigurer</code> åˆå§‹åŒ–çš„æ—¶å€™ï¼Œ<code>AbstractAuthenticationFilterConfigurer</code> çš„æ„é€ æ–¹æ³•ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="title">AbstractAuthenticationFilterConfigurer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   setLoginPage(<span class="string">&quot;/login&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¦‚æœæ²¡æœ‰è‡ªå®šä¹‰ç™»å½•é¡µé¢ï¼Œå°±ä¼šæ˜¯ <code>é¡¹ç›®åœ°å€/login</code> è¿™ä¸ªåœ°å€</p><p>å†çœ‹ä¸€ä¸‹ <code>FormLoginConfigurer</code> ä¸­çš„ init æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(H http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">   <span class="keyword">super</span>.init(http);</span><br><span class="line">   initDefaultLoginFilter(http);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•æ˜¯è°ƒç”¨äº†çˆ¶ç±»çš„ init æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(B http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">   updateAuthenticationDefaults();</span><br><span class="line">   updateAccessDefaults(http);</span><br><span class="line">   registerDefaultAuthenticationEntryPoint(http);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨çˆ¶ç±»çš„ init æ–¹æ³•ä¸­è°ƒç”¨äº† <code>updateAuthenticationDefaults()</code> æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">updateAuthenticationDefaults</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="comment">// æœªè‡ªå®šä¹‰é¡µé¢ï¼Œå°±ä¼šå’Œ loginPage åœ°å€ä¸€æ ·</span></span><br><span class="line">   <span class="keyword">if</span> (loginProcessingUrl == <span class="keyword">null</span>) &#123;</span><br><span class="line">      loginProcessingUrl(loginPage);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (failureHandler == <span class="keyword">null</span>) &#123;</span><br><span class="line">      failureUrl(loginPage + <span class="string">&quot;?error&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">final</span> LogoutConfigurer&lt;B&gt; logoutConfigurer = getBuilder().getConfigurer(</span><br><span class="line">         LogoutConfigurer.class);</span><br><span class="line">   <span class="keyword">if</span> (logoutConfigurer != <span class="keyword">null</span> &amp;&amp; !logoutConfigurer.isCustomLogoutSuccess()) &#123;</span><br><span class="line">      logoutConfigurer.logoutSuccessUrl(loginPage + <span class="string">&quot;?logout&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å°±èƒ½çœ‹åˆ°ï¼šå¦‚æœæˆ‘ä»¬æ²¡æœ‰è‡ªå®šä¹‰ç™»å½•æ¥å£ï¼Œé‚£ä¹ˆç™»å½•æ¥å£çš„åœ°å€å°±ä¼šè¢«è®¾ç½®ä¸ºå’Œç™»å½•é¡µé¢ä¸€è‡´</p><p><code>è‡ªå®šä¹‰ç™»å½•é¡µé¢</code></p><p>å¦‚æœè‡ªå®šä¹‰äº†é¡µé¢åœ°å€ï¼Œé¦–å…ˆä¼šåˆ° <code>FormLoginConfigurer</code> ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> FormLoginConfigurer&lt;H&gt; <span class="title">loginPage</span><span class="params">(String loginPage)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">super</span>.loginPage(loginPage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œé¢è°ƒç”¨äº†çˆ¶ç±»çš„ <code>loginPage</code> æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> T <span class="title">loginPage</span><span class="params">(String loginPage)</span> </span>&#123;</span><br><span class="line">   setLoginPage(loginPage);</span><br><span class="line">   updateAuthenticationDefaults();</span><br><span class="line">   <span class="keyword">this</span>.customLoginPage = <span class="keyword">true</span>;</span><br><span class="line">   <span class="keyword">return</span> getSelf();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™é‡Œé¢ set å®Œ <code>loginPage</code> åï¼ŒåˆåŒè°ƒç”¨äº† <code>updateAuthenticationDefaults()</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨ â˜ï¸ æœ‰</p><p>å¦‚æœè‡ªå®šä¹‰äº†ç™»å½•æ¥å£ <code>loginProcessingUrl</code> ï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥è¿™ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">loginProcessingUrl</span><span class="params">(String loginProcessingUrl)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.loginProcessingUrl = loginProcessingUrl;</span><br><span class="line">   authFilter</span><br><span class="line">         .setRequiresAuthenticationRequestMatcher(createLoginProcessingUrlMatcher(loginProcessingUrl));</span><br><span class="line">   <span class="keyword">return</span> getSelf();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ğŸ¢ä¹‹ç–‘é—®äºŒï¼šåœ¨æäº¤çš„è¡¨å•ä¸­ï¼Œå‚æ•°åˆ†åˆ«ä¸º username å’Œ passwordï¼Œå¯ä¸å¯ä»¥è‡ªå®šä¹‰å‘¢ï¼Ÿ</p><p>é¦–å…ˆè¿˜æ˜¯å» <code>FormLoginConfigurer</code> ç±»ä¸­çœ‹çœ‹æ„é€ æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">FormLoginConfigurer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">super</span>(<span class="keyword">new</span> UsernamePasswordAuthenticationFilter(), <span class="keyword">null</span>);</span><br><span class="line">   usernameParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">   passwordParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ super æ ¹æ® ğŸ‘† çš„ç»§æ‰¿å…³ç³»ï¼Œå°±å¯ä»¥çŸ¥é“æ˜¯ <code>AbstractAuthenticationFilterConfigurer</code> ä¸­çš„æ„é€ ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="title">AbstractAuthenticationFilterConfigurer</span><span class="params">(F authenticationFilter,</span></span></span><br><span class="line"><span class="function"><span class="params">      String defaultLoginProcessingUrl)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">this</span>();</span><br><span class="line">   <span class="comment">// å°†ä¼ è¿›æ¥çš„å‚æ•°èµ‹å€¼ç»™è¿™ä¸ªç±»çš„ authFilter</span></span><br><span class="line">   <span class="keyword">this</span>.authFilter = authenticationFilter;</span><br><span class="line">   <span class="keyword">if</span> (defaultLoginProcessingUrl != <span class="keyword">null</span>) &#123;</span><br><span class="line">      loginProcessingUrl(defaultLoginProcessingUrl);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šè¿™é‡Œä¸ºä»€ä¹ˆèƒ½ä¼ å‚ï¼Œæ˜¯ç”±äº </p><p>UsernamePasswordAuthenticationFilter ç»§æ‰¿ AbstractAuthenticationProcessingFilter</p><p>ä¸” F extends AbstractAuthenticationProcessingFilter</p></blockquote><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200928160656.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200928160656.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200928160655402"></p><p>æ­¤æ—¶å·²ç»æœ‰äº† <code>UsernamePasswordAuthenticationFilter</code> çš„å®ä¾‹äº†ï¼Œæ¥ç€æ‰§è¡Œ <code>usernameParameter</code> å’Œ <code>passwordParameter</code> æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> FormLoginConfigurer&lt;H&gt; <span class="title">usernameParameter</span><span class="params">(String usernameParameter)</span> </span>&#123;</span><br><span class="line">   getAuthenticationFilter().setUsernameParameter(usernameParameter);</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> FormLoginConfigurer&lt;H&gt; <span class="title">passwordParameter</span><span class="params">(String passwordParameter)</span> </span>&#123;</span><br><span class="line">   getAuthenticationFilter().setPasswordParameter(passwordParameter);</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>getAuthenticationFilter</code> æ˜¯çˆ¶ç±»çš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> F <span class="title">getAuthenticationFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> authFilter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œå°±å¾ˆæ˜ç¡®äº†ï¼Œå°±æ˜¯å°†åˆšæ‰çš„ new UsernamePasswordAuthenticationFilter() æ”¾åˆ°è¿™é‡Œé¢åˆ†åˆ«è°ƒç”¨ <code>setUsernameParameter</code> å’Œ <code>setPasswordParameter</code> æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsernameParameter</span><span class="params">(String usernameParameter)</span> </span>&#123;</span><br><span class="line">    Assert.hasText(usernameParameter, <span class="string">&quot;Username parameter must not be empty or null&quot;</span>);</span><br><span class="line">    <span class="keyword">this</span>.usernameParameter = usernameParameter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPasswordParameter</span><span class="params">(String passwordParameter)</span> </span>&#123;</span><br><span class="line">    Assert.hasText(passwordParameter, <span class="string">&quot;Password parameter must not be empty or null&quot;</span>);</span><br><span class="line">    <span class="keyword">this</span>.passwordParameter = passwordParameter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼ŒusernameParameter å’Œ passwordParameter å°±å·²ç»è¢«èµ‹å¥½å€¼äº†</p><p>å†é€šè¿‡è¿™ä¸ªç±» (<code>UsernamePasswordAuthenticationFilter</code>) ä¸­çš„è¿™ä¸¤ä¸ªæ–¹æ³•ä»ç™»å½•è¯·æ±‚ä¸­æ‹¿åˆ°è¿™ä¸¤ä¸ªå€¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> String <span class="title">obtainPassword</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request.getParameter(<span class="keyword">this</span>.passwordParameter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> String <span class="title">obtainUsername</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request.getParameter(<span class="keyword">this</span>.usernameParameter);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆè‡ªå®šä¹‰å°±å¾ˆç®€å•äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">            .formLogin().loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">                  <span class="comment">// åªéœ€è¦è®¾ç½®ä»¥ä¸‹ä¸¤é¡¹å°±è¡Œ</span></span><br><span class="line">            .usernameParameter(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">            .passwordParameter(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">            .permitAll()</span><br><span class="line">            .and()</span><br><span class="line">            .csrf().disable()</span><br><span class="line">    ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ğŸ¢ä¹‹ç–‘é—®ä¸‰ï¼šç™»å½•æˆåŠŸ or å¤±è´¥åçš„é‡å®šå‘çš„åœ°å€ï¼Œæ³¨é”€ç™»å½•çš„åœ°å€å¦‚ä½•è‡ªå®šä¹‰ï¼Ÿ</p><table><thead><tr><th>ç™»å½•æˆåŠŸ</th><th>ç™»å½•å¤±è´¥</th></tr></thead><tbody><tr><td>defaultSuccessUrl</td><td>failureForwardUrl</td></tr><tr><td>successForwardUrl</td><td>failureUrl</td></tr></tbody></table><p>åŒºåˆ«ç®€å•æ¥è¯´å°±æ˜¯ï¼š</p><p><code>defaultSuccessUrl </code> å¯èƒ½ä½ è®¿é—®çš„åœ°å€æ˜¯ <a href="http://localhost:8080/security">http://localhost:8080/security</a> ä½†æ˜¯ä½ æ²¡ç™»å½•ï¼Œæ‰€ä»¥ä½ å°±è·³è½¬åˆ° <a href="http://localhost:8080/login">http://localhost:8080/login</a> é¡µé¢ä¸‹ï¼Œå¦‚æœä½ ç™»å½•æˆåŠŸï¼Œé‚£ä¹ˆå°±ä¼šå›åˆ° /security é¡µé¢</p><p><code>successForwardUrl</code> ä¸ç®¡æ˜¯ä»€ä¹ˆé¡µé¢ï¼Œç™»å½•æˆåŠŸä¸€å¾‹æ˜¯ä½ è®¾ç½®çš„é¡µé¢</p><p>ç™»å½•å¤±è´¥åŒç†</p><p><code>æ³¨é”€ç™»å½•</code> </p><p>çœ‹ä¸‹é¢çš„ä»£ç </p><p>logoutUrlï¼šç”¨æ¥æ³¨é”€çš„åœ°å€ï¼Œé»˜è®¤ä¸º â€œ/logoutâ€</p><p>logoutRequestMatcherï¼šæ”¹å˜æ³¨é”€åœ°å€ï¼Œè¿˜æœ‰è¯·æ±‚æ–¹å¼</p><p>logoutSuccessUrlï¼šæ³¨é”€ç™»å½•æˆåŠŸåï¼Œè¦è·³è½¬çš„åœ°å€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    http.authorizeRequests()</span><br><span class="line">            .anyRequest().authenticated()</span><br><span class="line">            .and()</span><br><span class="line">      </span><br><span class="line">                  <span class="comment">// æ³¨é”€ç™»å½•è®¾ç½®</span></span><br><span class="line">            .logout()</span><br><span class="line">            .logoutUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">            .logoutRequestMatcher(<span class="keyword">new</span> AntPathRequestMatcher(<span class="string">&quot;/logout&quot;</span>,<span class="string">&quot;POST&quot;</span>))</span><br><span class="line">            .logoutSuccessUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">      </span><br><span class="line">                 <span class="comment">// ç™»å½•è®¾ç½®</span></span><br><span class="line">            .and()</span><br><span class="line">            .formLogin().loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">            .usernameParameter(<span class="string">&quot;user&quot;</span>)</span><br><span class="line">            .passwordParameter(<span class="string">&quot;pwd&quot;</span>)</span><br><span class="line">      </span><br><span class="line">                  <span class="comment">// ä¸‹é¢ä¸¤ä¸ªåªéœ€è¦ä¸€ä¸ª</span></span><br><span class="line">            .defaultSuccessUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">            .successForwardUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">      </span><br><span class="line">                  <span class="comment">// ä¸‹é¢ä¸¤ä¸ªåªéœ€è¦ä¸€ä¸ª</span></span><br><span class="line">            .failureForwardUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">            .failureUrl(<span class="string">&quot;&quot;</span>)</span><br><span class="line">      </span><br><span class="line">            .permitAll()</span><br><span class="line">            .and()</span><br><span class="line">            .csrf().disable()</span><br><span class="line">    ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Spring Security" scheme="http://wangba.me/tags/Spring-Security/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆSpring Security (ä¸€)</title>
    <link href="http://wangba.me/2020/09/27/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%B8%80/"/>
    <id>http://wangba.me/2020/09/27/SpringBoot%E6%95%B4%E5%90%88Spring-Security-%E4%B8%80/</id>
    <published>2020-09-27T10:52:23.000Z</published>
    <updated>2020-09-30T07:09:23.777Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>Java ä¸­æƒé™ç®¡ç†æœ€å¸¸ç”¨çš„æŠ€æœ¯åº”è¯¥å°±æ˜¯ï¼šSpring Security å’Œ Shiroã€‚</p><p>è™½ç„¶ Shiro ç”¨å®ƒè½»é‡ã€ç®€å•ã€æ˜“äºé›†æˆå æ®ä¸€å¸­ä¹‹åœ°ï¼Œä½†éšç€ SpringBoot çš„æµè¡Œï¼ŒSpring Security ä¹Ÿè·Ÿç€é¸¡çŠ¬å‡å¤©ï¼Œå°±ç›®å‰çš„è¶‹åŠ¿æ¥çœ‹ï¼ŒSpring Security ç»“åˆ Oauth2ã€JWT ç­‰æ›´åŠ æ–¹ä¾¿ã€‚</p><p>è¿™æ¬¡å…ˆå°è¯•ç‰›åˆ€ä¸€ä¸‹ï¼Œå¿«é€Ÿå…¥é—¨â€¦â€¦</p><h2 id="äºŒã€Environment"><a href="#äºŒã€Environment" class="headerlink" title="äºŒã€Environment"></a>äºŒã€Environment</h2><p><code>ä¸æƒ³ error ï¼Œå…ˆçœ‹ä¾èµ–</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927100536.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927100536.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927100528688"></p><blockquote><p>æ²¡çœ‹é”™ï¼Œå°±åªéœ€è¦è¿™ä¸¤ä¸ªä¾èµ–å°±è¡Œ</p></blockquote><p><code>pom.xml</code> </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--security--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--web--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>SecurityController</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/security&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;spring security&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€Test"><a href="#ä¸‰ã€Test" class="headerlink" title="ä¸‰ã€Test"></a>ä¸‰ã€Test</h2><p>å¯åŠ¨é¡¹ç›®å¯ä»¥çœ‹è§ï¼Œåœ¨æ§åˆ¶å°å¤šäº†ä¸€è¡Œï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927101458.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927101458.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927101455744"></p><p><code>Postman</code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927101707.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927101707.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927101705136"></p><blockquote><p>å¯ä»¥çœ‹è§æŠ¥é”™ï¼š401ï¼Œæ²¡æœ‰è¿›è¡Œè®¤è¯</p></blockquote><p><code>åŠ ä¸Šè®¤è¯</code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927101924.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927101924.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927101922872"></p><blockquote><p>å¯ä»¥çœ‹è§ï¼ŒåŠ ä¸Š Basic Authï¼š</p><p>å…¶ä¸­ç”¨æˆ·åä¸º userï¼Œå¯†ç ä¸ºåˆšæ‰æ§åˆ¶å°æ˜¾ç¤ºçš„å³å¯</p></blockquote><h2 id="å››ã€Deep-Learning"><a href="#å››ã€Deep-Learning" class="headerlink" title="å››ã€Deep Learning"></a>å››ã€Deep Learning</h2><p>ğŸ¢ä¹‹ç–‘é—®ï¼šä¸ºå•¥ç”¨æˆ·åæ˜¯ userï¼Œå¯†ç å°±æ˜¯æ§åˆ¶å°æ˜¾ç¤ºçš„é‚£ä¸ªï¼Ÿ</p><p>åˆ†ææ€è·¯ï¼š</p><p>ç”¨æˆ·åå’Œå¯†ç è‚¯å®šåœ¨ä¸€èµ·ï¼Œè¿™ä¸ªå¯†ç åˆæ˜¯ UUID å½¢å¼ï¼ŒæŸä¸ªåœ°æ–¹è‚¯å®šç”¨äº† UUID.randomUUID().toString()</p><p>æŒ‰ç…§æˆ‘ä»¬å¯¹ SpringBoot çš„ç‰¹æ€§ï¼Œè‚¯å®šåœ¨ XXXAutoConfiguration å’Œ XXXProperties ä¸­å­˜åœ¨ï¼Œæœç„¶åœ¨ SecurityProperties ä¸­çœ‹åˆ°äº†ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927104212.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927104212.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927104210784"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦å»æ‰¾ä¸€æ‰¾ï¼Œåœ¨å“ªé‡Œæœ‰è°ƒç”¨ getPassword çš„è¿™ä¸ªæ–¹æ³•çš„ç±»ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927104415.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927104415.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927104411301"></p><p>çœ‹åå­—åº”è¯¥å°±æ˜¯ï¼š<code>UserDetailsServiceAutoConfiguration</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">getOrDeducePassword</span><span class="params">(SecurityProperties.User user, PasswordEncoder encoder)</span> </span>&#123;</span><br><span class="line">   String password = user.getPassword();</span><br><span class="line">   <span class="keyword">if</span> (user.isPasswordGenerated()) &#123;</span><br><span class="line">      logger.info(String.format(<span class="string">&quot;%n%nUsing generated security password: %s%n&quot;</span>, user.getPassword()));</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (encoder != <span class="keyword">null</span> || PASSWORD_ALGORITHM_PATTERN.matcher(password).matches()) &#123;</span><br><span class="line">      <span class="keyword">return</span> password;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> NOOP_PASSWORD_PREFIX + password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­ï¼š</p><p>user.isPasswordGenerated() å¦‚æœä¸º trueï¼Œåˆ™æ‰“å°è¯¥ä¿¡æ¯</p></blockquote><p>å†å» ==user.isPasswordGenerated()== æ–¹æ³•ä¸­æ¢ç©¶ä¸€ä¸‹ï¼Œå›åˆ°äº†==SecurityProperties== ç±»ä¸­äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> passwordGenerated = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">      .......</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPasswordGenerated</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.passwordGenerated;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼špasswordGenerated å°±æ˜¯ä¸º true</p></blockquote><p>ğŸ¢ä¹‹ç–‘é—®ï¼šæ¯æ¬¡å¯åŠ¨éƒ½è¦è¾“å…¥æ–°çš„çš„å¯†ç ï¼Œå¤ªéº»çƒ¦äº†ï¼Œæˆ‘éœ€è¦è‡ªå®šä¹‰</p><p><code>ç¬¬ä¸€ç§æ–¹æ³•ï¼š</code></p><p>æŒ‰ç…§ SpringBoot çš„ç‰¹æ€§ï¼Œå¿…ç„¶å·²ç»ç»™ä½ å®‰æ’å¥½äº†ï¼Œè‚¯å®šæœ‰ä¸€ç§æ–¹æ³•æ˜¯åœ¨ properties æ–‡ä»¶ä¸­ç›´æ¥è¿›è¡Œï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927110312.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927110312.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927110311399"></p><p><code>idea</code> å·²ç»é€šè¿‡æç¤ºæ˜¾ç¤ºå‡ºæ¥äº†, <strong>idea yyds !</strong></p><p>ç›´æ¥ç‚¹è¿›å»çœ‹ä¸€ä¸‹ï¼Œå›è·³åˆ°å“ªä¸ªç±»ä¸­ï¼Œä¸å‡ºğŸ¢ğŸ¢çš„æ‰€æ–™ï¼Œåº”è¯¥å°±æ˜¯ ==SecurityProperties== ç±»ä¸­ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927112809.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927112809.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927112805908"></p><p>æœä¸å…¶ç„¶ï¼Œåˆ†åˆ«è·³åˆ°äº†</p><p><code>setName</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>setPassword</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (!StringUtils.hasLength(password)) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">this</span>.passwordGenerated = <span class="keyword">false</span>;</span><br><span class="line">   <span class="keyword">this</span>.password = password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šå¦‚æœåœ¨è¿™é‡Œè‡ªå®šä¹‰äº†å¯†ç ï¼Œå°±ä¼šå°† ==passwordGenerated== è®¾ç½®ä¸º falseï¼Œé‚£ä¹ˆåœ¨ ==isPasswordGenerated== å°±æ˜¯ false äº†ï¼Œåœ¨ ==UserDetailsServiceAutoConfiguration== ä¸­å°±ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆå¯†ç äº†</p></blockquote><p><code>application.properties</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.security.user.name</span>=<span class="string">wangba</span></span><br><span class="line"><span class="meta">spring.security.user.password</span>=<span class="string">8888</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927112305.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927112305.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927112303555"></p><p><code>ç¬¬äºŒç§æ–¹æ³•ï¼š</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä¸å¯¹å¯†ç è¿›è¡Œä»»ä½•ç¼–ç æ–¹å¼</span></span><br><span class="line">        <span class="keyword">return</span> NoOpPasswordEncoder.getInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        auth.inMemoryAuthentication()</span><br><span class="line">                .withUser(<span class="string">&quot;wangba&quot;</span>)</span><br><span class="line">                .password(<span class="string">&quot;guigui&quot;</span>)</span><br><span class="line">                .roles(<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">        ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927160833.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200927160833.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200927160832690"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Spring Security" scheme="http://wangba.me/tags/Spring-Security/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆSession</title>
    <link href="http://wangba.me/2020/09/22/SpringBoot%E6%95%B4%E5%90%88Session/"/>
    <id>http://wangba.me/2020/09/22/SpringBoot%E6%95%B4%E5%90%88Session/</id>
    <published>2020-09-22T13:43:13.000Z</published>
    <updated>2020-09-30T07:09:20.959Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><blockquote><p>Spring Session has the simple goal of free up session management from the limitations of the HTTP session stored in the server.</p><p>The solution makes it easy to share session data between services in the cloud without being tied to a single container (i.e. Tomcat). Additionally, it supports multiple sessions in the same browser and sending sessions in a header.</p></blockquote><p>ç®€å•åœ°æ¥è¯´ï¼šç”±æ¶æ„å¯¼è‡´äº†è¿™ç§æƒ…å†µçš„å‘ç”Ÿ</p><p><code>present</code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922201419.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922201419.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922201418003"></p><p>æœ€æ—©çš„æ¶æ„å°±æ˜¯å¾ˆç®€å•çš„å•æœåŠ¡å™¨çŠ¶æ€ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¿å­˜ç”¨æˆ·çŠ¶æ€ï¼Œé‚£ä¹ˆåªéœ€è¦ä¸€ä¸ª session å°±è¡Œäº†</p><p><code>now</code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922200615.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922200615.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922200614157"></p><p>ç°åœ¨çš„æ¶æ„éƒ½æ˜¯é›†ç¾¤å¼äº†ï¼šå¯ä»¥å‡è®¾è¿™æ ·çš„æƒ…æ™¯ï¼Œå¦‚æœæˆ‘åœ¨å·²ç»ç™»å½•çš„çŠ¶æ€ï¼Œæˆ‘é¦–å…ˆè¦çœ‹è§†é¢‘ (è¿™ä¸ªæœåŠ¡å‡å¦‚åœ¨ A æœåŠ¡å™¨ä¸Š)ï¼Œç„¶åæˆ‘åˆæµè§ˆå›¾ç‰‡ (è¿™ä¸ªæœåŠ¡å‡å¦‚åœ¨ B æœåŠ¡å™¨ä¸Š)ï¼Œå¦‚æœä¸å…±äº« session çš„è¯ï¼Œé‚£ä¹ˆæˆ‘é€‰æ‹©çš„æœåŠ¡ä¸åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šå°±è¦é‡æ–°ç™»å½•äº†ï¼Œè¿™å¯¹ç”¨æˆ·ä¹Ÿå¤ªä¸å‹å¥½äº†ã€‚</p><p><code>è§£å†³æ–¹æ¡ˆ </code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922200856.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922200856.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922200847137"></p><p>ä¸»æµçš„è§£å†³æ–¹æ¡ˆï¼šå°† seesion å­˜åˆ° redis ä¸­ï¼Œæ¯æ¬¡ server è¦å‘ session ä¸­å†™æ•°æ®ï¼Œæˆ–è€…è¦è¯» session çš„æ•°æ®æ—¶ï¼Œéƒ½æ˜¯å¯¹ redis ä¸­çš„ session è¿›è¡Œæ“ä½œã€‚</p><h2 id="äºŒã€ç¯å¢ƒæ­å»º"><a href="#äºŒã€ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€ç¯å¢ƒæ­å»º"></a>äºŒã€ç¯å¢ƒæ­å»º</h2><p><code>ä¸æƒ³ error ï¼Œå…ˆçœ‹ä¾èµ–</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922202750.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922202750.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922202748557"></p><p><code>pom.xml</code> </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--redis--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--web--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--spring session--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.session<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-session-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>application.properties</code> </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># redis åŸºæœ¬é…ç½®</span></span><br><span class="line"><span class="comment"># åœ°å€</span></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">10.2.10.115</span></span><br><span class="line"><span class="comment"># ç«¯å£å·  é»˜è®¤å°±æ˜¯ 6379</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="comment"># å¯†ç </span></span><br><span class="line"><span class="meta">spring.redis.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="comment"># ç¬¬å‡ ä¸ªæ•°æ®åº“  é»˜è®¤å°±æ˜¯ç¬¬0å·æ•°æ®åº“</span></span><br><span class="line"><span class="meta">spring.redis.database</span>=<span class="string">0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8080</span></span><br></pre></td></tr></table></figure><p><code>SessionController</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span></span><br><span class="line">    Integer port;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/set&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">set</span><span class="params">(HttpSession session)</span> </span>&#123;</span><br><span class="line">        session.setAttribute(<span class="string">&quot;wangba&quot;</span>, <span class="string">&quot;8888&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(port);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/get&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">(HttpSession session)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> session.getAttribute(<span class="string">&quot;user&quot;</span>) + <span class="string">&quot;:&quot;</span> + port;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€æµ‹è¯•"><a href="#ä¸‰ã€æµ‹è¯•" class="headerlink" title="ä¸‰ã€æµ‹è¯•"></a>ä¸‰ã€æµ‹è¯•</h2><p>è®¿é—®ï¼š<a href="http://localhost:8080/set">http://localhost:8080/set</a></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922210637.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922210637.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922210635181"></p><p>æ­¤æ—¶æ‰“å¼€ redis çœ‹ä¸€ä¸‹ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922212207.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922212207.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922212205673"></p><p>å†è®¿é—®ï¼š<a href="http://localhost:8081/get">http://localhost:8081/get</a></p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922212407.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200922212407.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200922212405236" style="zoom:150%;" /><p>å¯ä»¥çœ‹åˆ°æ­¤æ—¶ï¼Œåœ¨ä¸åŒçš„æœåŠ¡ä¸Šå¯ä»¥é€šè¿‡å…±äº« session </p><blockquote><p>æ³¨ï¼šè¿™è¾¹å¯ä»¥é€šè¿‡ nginx è¿›è¡Œè´Ÿè½½å‡è¡¡</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Session" scheme="http://wangba.me/tags/Session/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆRedis</title>
    <link href="http://wangba.me/2020/09/16/SpringBoot%E6%95%B4%E5%90%88Redis/"/>
    <id>http://wangba.me/2020/09/16/SpringBoot%E6%95%B4%E5%90%88Redis/</id>
    <published>2020-09-16T13:34:57.000Z</published>
    <updated>2020-09-30T07:09:18.512Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>é¢è¯•å®˜ï¼šredis çŸ¥é“å—</p><p>ğŸ¢ï¼šä¸çŸ¥é“</p><p>é¢è¯•å®˜ï¼šä½ å›å»ç­‰é€šçŸ¥å§</p><blockquote><p><strong>Redis</strong>æ˜¯ä¸€ä¸ªä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/ANSI_C">ANSI C</a>ç¼–å†™çš„<a href="https://zh.wikipedia.org/wiki/%E5%BC%80%E6%BA%90">å¼€æº</a>ã€æ”¯æŒ<a href="https://zh.wikipedia.org/wiki/%E7%94%B5%E8%84%91%E7%BD%91%E7%BB%9C">ç½‘ç»œ</a>ã€åŸºäº<a href="https://zh.wikipedia.org/wiki/%E5%86%85%E5%AD%98">å†…å­˜</a>ã€å¯é€‰<a href="https://zh.wikipedia.org/w/index.php?title=%E6%8C%81%E4%B9%85%E6%80%A7_(%E6%95%B0%E6%8D%AE%E5%BA%93)&action=edit&redlink=1">æŒä¹…æ€§</a>çš„<a href="https://zh.wikipedia.org/wiki/%E9%94%AE%E5%80%BC-%E5%80%BC%E6%95%B0%E6%8D%AE%E5%BA%93">é”®å€¼å¯¹å­˜å‚¨æ•°æ®åº“</a>ã€‚ä»2015å¹´6æœˆå¼€å§‹ï¼ŒRedisçš„å¼€å‘ç”±<a href="https://zh.wikipedia.org/w/index.php?title=Redis_Labs&action=edit&redlink=1">Redis Labs</a>èµåŠ©ï¼Œè€Œ2013å¹´5æœˆè‡³2015å¹´6æœˆæœŸé—´ï¼Œå…¶å¼€å‘ç”±<a href="https://zh.wikipedia.org/wiki/Pivotal">Pivotal</a>èµåŠ©ã€‚åœ¨2013å¹´5æœˆä¹‹å‰ï¼Œå…¶å¼€å‘ç”±<a href="https://zh.wikipedia.org/wiki/VMware">VMware</a>èµåŠ©ã€‚<a href="https://zh.wikipedia.org/wiki/Redis#cite_note-5)%E6%A0%B9%E6%8D%AE%E6%9C%88%E5%BA%A6%E6%8E%92%E8%A1%8C%E7%BD%91%E7%AB%99DB-Engines.com%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8CRedis%E6%98%AF%E6%9C%80%E6%B5%81%E8%A1%8C%E7%9A%84%E9%94%AE%E5%80%BC%E5%AF%B9%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%82">https://zh.wikipedia.org/wiki/Redis#cite_note-5)æ ¹æ®æœˆåº¦æ’è¡Œç½‘ç«™DB-Engines.comçš„æ•°æ®ï¼ŒRedisæ˜¯æœ€æµè¡Œçš„é”®å€¼å¯¹å­˜å‚¨æ•°æ®åº“ã€‚</a>                                                           â€”â€”â€“ç»´åŸºç™¾ç§‘</p></blockquote><p>æˆ‘è®°å¾—æˆ‘çœ‹è¿‡ä¸€ç¯‡è®²çš„éå¸¸å¥½çš„ NoSQL çš„æ–‡ç« ï¼Œä¸‹æ¬¡æ‰¾åˆ°åŠ è¿›æ¥ã€‚</p><p>å¢åŠ ï¼š<a href="https://www.cnblogs.com/xrq730/p/11039384.html">å…³ç³»å‹æ•°æ®åº“ä¸éå…³ç³»å‹æ•°æ®åº“</a></p><h2 id="äºŒã€ç¯å¢ƒæ­å»º"><a href="#äºŒã€ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€ç¯å¢ƒæ­å»º"></a>äºŒã€ç¯å¢ƒæ­å»º</h2><p><code>Redis</code></p><p>é¦–å…ˆå‡†å¤‡å¥½ redis çš„ç¯å¢ƒï¼Œæ­¤æ¬¡ redis æ˜¯å®‰è£…åœ¨ Ubuntu 18.04 ä¸Šçš„ï¼Œä¸»è¦é…ç½®å¦‚ä¸‹ï¼š</p><p>å¯ä»¥ä½¿ç”¨ <code>sudo vi /etc/redis/redis.conf</code> å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  è¯¥æŒ‡ä»¤å…è®¸æ‚¨å£°æ˜ä¸€ä¸ªinitç³»ç»Ÿæ¥ç®¡ç†Redisä½œä¸ºæœåŠ¡ï¼Œä»è€Œä¸ºæ‚¨æä¾›å¯¹å…¶æ“ä½œçš„æ›´å¤šæ§åˆ¶</span></span><br><span class="line">supervised systemd</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºäº†å±€åŸŸç½‘èƒ½è¿æ¥ä¸Š</span></span><br><span class="line"><span class="built_in">bind</span> 127.0.0.1 ::1</span><br><span class="line">    æ”¹ä¸º</span><br><span class="line"><span class="built_in">bind</span> 0.0.0.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºäº†å±€åŸŸç½‘èƒ½è¿æ¥ä¸Š</span></span><br><span class="line">protected-mode yes</span><br><span class="line">    æ”¹ä¸º</span><br><span class="line">protected-mode no</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹å¯†ç ï¼Œéå¿…é¡»</span></span><br><span class="line">requirepass 123456</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¿®æ”¹ redis é…ç½®</span></span><br><span class="line">sudo vi /etc/redis/redis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯ redis æœåŠ¡</span></span><br><span class="line">sudo service redis restart</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨ redis æœåŠ¡</span></span><br><span class="line">sudo service redis start</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­ redis æœåŠ¡</span></span><br><span class="line">sudo service redis stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨ redis å®¢æˆ·ç«¯ï¼Œå…¶ä¸­ -p æŒ‡å®šç«¯å£ï¼Œ-a è¡¨ç¤ºè®¤è¯å³å¯†ç </span></span><br><span class="line">redis-cli -p 6379 -a 123456</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨ redis é‡Œé¢çš„ä¸€äº›å‘½ä»¤</span></span><br><span class="line">127.0.0.1:6379&gt; ping</span><br><span class="line">PONG</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">127.0.0.1:6379&gt; get keyçš„åå­—</span><br></pre></td></tr></table></figure><p><code>pom.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>application.properties</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># redis åŸºæœ¬é…ç½®</span></span><br><span class="line"><span class="comment"># åœ°å€</span></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">10.2.10.108</span></span><br><span class="line"><span class="comment"># ç«¯å£å·  é»˜è®¤å°±æ˜¯ 6379</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="comment"># å¯†ç </span></span><br><span class="line"><span class="meta">spring.redis.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="comment"># ç¬¬å‡ ä¸ªæ•°æ®åº“  é»˜è®¤å°±æ˜¯ç¬¬0å·æ•°æ®åº“</span></span><br><span class="line"><span class="meta">spring.redis.database</span>=<span class="string">0</span></span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€æµ‹è¯•"><a href="#ä¸‰ã€æµ‹è¯•" class="headerlink" title="ä¸‰ã€æµ‹è¯•"></a>ä¸‰ã€æµ‹è¯•</h2><p><code>RedisController</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStringRedisTemplate</span><span class="params">(StringRedisTemplate stringRedisTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.stringRedisTemplate = stringRedisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/put&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">(String key, String value)</span> </span>&#123;</span><br><span class="line">        ValueOperations&lt;String, String&gt; ops = stringRedisTemplate.opsForValue();</span><br><span class="line">        ops.set(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/get&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test2</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        ValueOperations&lt;String, String&gt; ops = stringRedisTemplate.opsForValue();</span><br><span class="line">        <span class="keyword">return</span> ops.get(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Postman</code></p><p>é¦–å…ˆå°† redis æ¸…ç©ºï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213048.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213048.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200916213040993"></p><p><strong>æ’å…¥ï¼š</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213139.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213139.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200916213138474"></p><p>çœ‹ä¸‹ redis ä¸­ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213216.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213216.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200916213213677"></p><p><strong>æŸ¥è¯¢ï¼š</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213252.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200916213252.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200916213251374"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Java" scheme="http://wangba.me/tags/Java/"/>
    
    <category term="NoSQL" scheme="http://wangba.me/tags/NoSQL/"/>
    
  </entry>
  
  <entry>
    <title>é“æ°ç‹æœæ»¡æ±‰å…¨å¸­ 919</title>
    <link href="http://wangba.me/2020/09/15/%E9%93%81%E6%B0%8F%E7%8E%8B%E6%9C%9D%E6%BB%A1%E6%B1%89%E5%85%A8%E5%B8%AD-919/"/>
    <id>http://wangba.me/2020/09/15/%E9%93%81%E6%B0%8F%E7%8E%8B%E6%9C%9D%E6%BB%A1%E6%B1%89%E5%85%A8%E5%B8%AD-919/</id>
    <published>2020-09-15T13:23:00.000Z</published>
    <updated>2020-09-30T07:09:13.230Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 align=center>919 é“æ°ç‹æœæ»¡æ±‰å…¨å¸­ v1.3</h1><h2 id="æ¸…è’¸å¤§é—¸èŸ¹-5åª"><a href="#æ¸…è’¸å¤§é—¸èŸ¹-5åª" class="headerlink" title="æ¸…è’¸å¤§é—¸èŸ¹  5åª"></a>æ¸…è’¸å¤§é—¸èŸ¹  5åª</h2><blockquote><p>ææ–™ï¼š</p></blockquote><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>é˜³æ¾„æ¹–å¤§é—¸èŸ¹</td><td><a href="https://www.douguo.com/caipu/%E7%94%9F%E5%A7%9C">ç”Ÿå§œ</a></td></tr><tr><td><a href="https://www.douguo.com/caipu/%E8%92%9C%E7%93%A3">è’œç“£</a></td><td><a href="https://www.douguo.com/caipu/%E9%A6%99%E8%91%B1">é¦™è‘±</a></td></tr><tr><td><a href="https://www.douguo.com/caipu/%E7%B4%AB%E8%8B%8F">ç´«è‹</a></td><td><a href="https://www.douguo.com/caipu/%E7%94%9F%E6%8A%BD">ç”ŸæŠ½</a></td></tr><tr><td><a href="https://www.douguo.com/caipu/%E9%A6%99%E9%86%8B">é¦™é†‹</a></td><td><a href="https://www.douguo.com/caipu/%E6%96%99%E9%85%92">æ–™é…’</a></td></tr><tr><td><a href="https://www.douguo.com/caipu/%E9%A6%99%E6%B2%B9">é¦™æ²¹</a></td><td><a href="https://www.douguo.com/caipu/%E9%B8%A1%E7%B2%BE">é¸¡ç²¾</a></td></tr><tr><td><a href="https://www.douguo.com/caipu/%E7%B3%96">ç³–</a></td><td></td></tr></tbody></table><h2 id="å¯ä¹é¸¡ç¿…"><a href="#å¯ä¹é¸¡ç¿…" class="headerlink" title="å¯ä¹é¸¡ç¿…"></a>å¯ä¹é¸¡ç¿…</h2><blockquote><p>ææ–™ï¼š</p></blockquote><table><thead><tr><th><a href="https://www.douguo.com/caipu/%E9%B8%A1%E7%BF%85">é¸¡ç¿…</a>10ä¸ª</th><th><a href="https://www.douguo.com/caipu/%E5%8F%AF%E4%B9%90">å¯ä¹</a>300æ¯«å‡</th></tr></thead><tbody><tr><td><a href="https://www.douguo.com/caipu/%E8%80%81%E6%8A%BD">è€æŠ½</a>1å‹º</td><td>ç›ï¼Œé¸¡ç²¾é€‚é‡</td></tr><tr><td>è‘±å§œï¼Œå…«è§’é€‚é‡</td><td></td></tr></tbody></table><h2 id="ç³–é†‹æ’éª¨"><a href="#ç³–é†‹æ’éª¨" class="headerlink" title="ç³–é†‹æ’éª¨"></a>ç³–é†‹æ’éª¨</h2><blockquote><p>ææ–™ï¼š</p></blockquote><table><thead><tr><th><a href="https://www.douguo.com/caipu/%E7%8C%AA%E8%82%8B%E6%8E%92">çŒªè‚‹æ’</a>500å…‹</th><th><a href="https://www.douguo.com/caipu/%E8%91%B1">è‘±</a>é€‚é‡</th></tr></thead><tbody><tr><td><a href="https://www.douguo.com/caipu/%E5%A7%9C">å§œ</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E5%85%AB%E8%A7%92">å…«è§’</a>2ä¸ª</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E8%80%81%E6%8A%BD">è€æŠ½</a>2å‹º</td><td><a href="https://www.douguo.com/caipu/%E7%94%9F%E6%8A%BD">ç”ŸæŠ½</a>2å‹º</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E7%99%BD%E7%B3%96">ç™½ç³–</a>3å‹º</td><td><a href="https://www.douguo.com/caipu/%E9%A6%99%E9%86%8B">é¦™é†‹</a>4å‹º</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E6%96%99%E9%85%92">æ–™é…’</a>5å‹º</td><td><a href="https://www.douguo.com/caipu/%E7%86%9F%E7%99%BD%E8%8A%9D%E9%BA%BB">ç†Ÿç™½èŠéº»</a>é€‚é‡</td></tr></tbody></table><h2 id="éº»è¾£å°é¾™è™¾"><a href="#éº»è¾£å°é¾™è™¾" class="headerlink" title="éº»è¾£å°é¾™è™¾"></a>éº»è¾£å°é¾™è™¾</h2><blockquote><p>ææ–™ï¼š</p></blockquote><table><thead><tr><th><a href="https://www.douguo.com/caipu/%E5%B0%8F%E9%BE%99%E8%99%BE">å°é¾™è™¾</a>30æ–¤</th><th><a href="https://www.douguo.com/caipu/%E9%A6%99%E8%91%B1">é¦™è‘±</a>é€‚é‡</th></tr></thead><tbody><tr><td><a href="https://www.douguo.com/caipu/%E5%A7%9C">å§œ</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E8%92%9C">è’œ</a>é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E5%A4%A7%E8%91%B1">å¤§è‘±</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E6%A1%82%E7%9A%AE">æ¡‚çš®</a>é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E5%85%AB%E8%A7%92">å…«è§’</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E9%A6%99%E5%8F%B6">é¦™å¶</a>é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E7%B4%AB%E8%8B%8F">ç´«è‹</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E5%B0%8F%E7%B1%B3%E6%A4%92">å°ç±³æ¤’</a>é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E5%86%B0%E7%B3%96">å†°ç³–</a>é€‚é‡</td><td>è—•æ¡é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E9%9D%92%E6%A4%92">é’æ¤’</a>é€‚é‡</td><td>çº¢æ²¹ç«é”…åº•æ–™é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E8%B1%86%E7%93%A3%E9%85%B1">è±†ç“£é…±</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E6%B7%80%E7%B2%89">æ·€ç²‰</a>é€‚é‡</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E7%99%BD%E8%8A%9D%E9%BA%BB">ç™½èŠéº»</a>é€‚é‡</td><td></td></tr></tbody></table><h2 id="èŠå£«åŸ¹æ ¹æ³¡èœå·"><a href="#èŠå£«åŸ¹æ ¹æ³¡èœå·" class="headerlink" title="èŠå£«åŸ¹æ ¹æ³¡èœå·"></a>èŠå£«åŸ¹æ ¹æ³¡èœå·</h2><blockquote><p>ææ–™ï¼š</p></blockquote><h2 id="è’œè“‰é‡‘é’ˆè‡"><a href="#è’œè“‰é‡‘é’ˆè‡" class="headerlink" title="è’œè“‰é‡‘é’ˆè‡"></a>è’œè“‰é‡‘é’ˆè‡</h2><blockquote><p>ææ–™ï¼š</p></blockquote><table><thead><tr><th><a href="https://www.douguo.com/caipu/%E9%87%91%E9%92%88%E8%8F%87">é‡‘é’ˆè‡</a>1æŠŠ</th><th><a href="https://www.douguo.com/caipu/%E8%92%9C">è’œ</a>ä¸€å¤´</th></tr></thead><tbody><tr><td><a href="https://www.douguo.com/caipu/%E9%A3%9F%E7%94%A8%E6%B2%B9">é£Ÿç”¨æ²¹</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E9%85%B1%E6%B2%B9">é…±æ²¹</a>4å‹º</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E8%9A%9D%E6%B2%B9">èšæ²¹</a>2å‹º</td><td><a href="https://www.douguo.com/caipu/%E5%B0%8F%E8%91%B1">å°è‘±</a>4æ ¹</td></tr><tr><td><a href="https://www.douguo.com/caipu/%E9%B8%A1%E7%B2%BE">é¸¡ç²¾</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E7%B3%96">ç³–</a></td></tr><tr><td><a href="https://www.douguo.com/caipu/%E7%9B%90">ç›</a></td><td></td></tr></tbody></table><h2 id="é…’é…¿å°æ±¤åœ†å†²é¸¡è›‹"><a href="#é…’é…¿å°æ±¤åœ†å†²é¸¡è›‹" class="headerlink" title="é…’é…¿å°æ±¤åœ†å†²é¸¡è›‹"></a>é…’é…¿å°æ±¤åœ†å†²é¸¡è›‹</h2><blockquote><p>ææ–™ï¼š</p></blockquote><h2 id="å§œæ’å¥¶"><a href="#å§œæ’å¥¶" class="headerlink" title="å§œæ’å¥¶"></a>å§œæ’å¥¶</h2><blockquote><p>ææ–™ï¼š</p></blockquote><table><thead><tr><th><a href="https://www.douguo.com/caipu/%E8%80%81%E5%A7%9C">è€å§œ</a>1å¤§å—</th><th><a href="https://www.douguo.com/caipu/%E7%BA%AF%E7%89%9B%E5%A5%B6">çº¯ç‰›å¥¶</a>200æ¯«å‡</th></tr></thead><tbody><tr><td><a href="https://www.douguo.com/caipu/%E7%BB%86%E7%A0%82%E7%B3%96">ç»†ç ‚ç³–</a>é€‚é‡</td><td><a href="https://www.douguo.com/caipu/%E8%94%93%E8%B6%8A%E8%8E%93%E5%B9%B2">è”“è¶Šè“å¹²</a>å°‘è®¸</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="WangBa&#39;s CookBook" scheme="http://wangba.me/categories/WangBa-s-CookBook/"/>
    
    
    <category term="CookBook" scheme="http://wangba.me/tags/CookBook/"/>
    
    <category term="Life" scheme="http://wangba.me/tags/Life/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆSpring Data JPA ä¹‹å¤šæ¡ä»¶æœç´¢å·¥å…·ç±»</title>
    <link href="http://wangba.me/2020/09/14/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%B9%8B%E5%A4%9A%E6%9D%A1%E4%BB%B6%E6%90%9C%E7%B4%A2%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
    <id>http://wangba.me/2020/09/14/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%B9%8B%E5%A4%9A%E6%9D%A1%E4%BB%B6%E6%90%9C%E7%B4%A2%E5%B7%A5%E5%85%B7%E7%B1%BB/</id>
    <published>2020-09-14T12:21:20.000Z</published>
    <updated>2020-09-30T07:08:37.925Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>â€‹        åœ¨å‰é¢å·²ç»ä»‹ç»è¿‡äº† <a href="http://wangba.me/2020/09/10/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%BA%8C/">SpringBoot æ•´åˆ JPA </a>äº†ï¼Œä½†æ˜¯ä¸€èˆ¬åœ¨å…¬å¸ä¸šåŠ¡ä¸­ï¼Œå¦‚æœå‡ºç°å¾ˆå¤šæ¬¡å¤šæ¡ä»¶æœç´¢æŸ¥è¯¢çš„æƒ…å†µï¼Œé‚£ä¹ˆå°±ä¼šç”¨å¤§é‡å†—ä½™ä»£ç äº†ï¼›å†ç»“åˆæ³¨è§£çš„æ€æƒ³ã€‚æœ¬æ¬¡å°†å…¬å…±éƒ¨åˆ†æå–å‡ºæ¥ï¼Œå¹¶ç”¨æ³¨è§£çš„æ–¹å¼è¿›è¡Œæ“ä½œï¼Œå¯ä»¥å‚è€ƒå‰é¢ä½¿ç”¨<a href="http://wangba.me/2020/09/03/SpringBoot%E6%95%B4%E5%90%88AOP/">æ³¨è§£è¿›è¡Œ AOP å¤„ç†æ—¥å¿—</a>ï¼Œä¹Ÿç¬¦åˆäº† SpringBoot çš„æ€æƒ³ã€‚</p><h2 id="äºŒã€BaseQuery"><a href="#äºŒã€BaseQuery" class="headerlink" title="äºŒã€BaseQuery"></a>äºŒã€BaseQuery</h2><p><code>QueryWord</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.FIELD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> QueryWord &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ•°æ®åº“ä¸­å­—æ®µå,é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²,åˆ™Queryç±»ä¸­çš„å­—æ®µè¦ä¸æ•°æ®åº“ä¸­å­—æ®µä¸€è‡´</span></span><br><span class="line">    <span class="function">String <span class="title">column</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// equal, like, gt, lt...</span></span><br><span class="line">    <span class="function">MatchType <span class="title">func</span><span class="params">()</span> <span class="keyword">default</span> MatchType.equal</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// objectæ˜¯å¦å¯ä»¥ä¸ºnull</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">nullable</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">false</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å­—ç¬¦ä¸²æ˜¯å¦å¯ä¸ºç©º</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">empty</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">false</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// between...and... æŸ¥è¯¢è¯­å¥æ ‡è¯†ï¼Œ 0æ—¶é—´  1æ•°å­—ç±»å‹</span></span><br><span class="line">    <span class="function">BetweenType <span class="title">type</span><span class="params">()</span> <span class="keyword">default</span> BetweenType.datetime</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šæ³¨è§£ç±»ï¼Œåªè¦åœ¨è¦æŸ¥è¯¢çš„å±æ€§ä¸ŠåŠ ä¸Šç›¸åº”çš„æ³¨è§£å³å¯</p></blockquote><p><code>MatchType</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> MatchType &#123;</span><br><span class="line"></span><br><span class="line">    equal,                 <span class="comment">// filed = value</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸‹é¢å››ä¸ªç”¨äºNumberç±»å‹çš„æ¯”è¾ƒ</span></span><br><span class="line">    gt,                     <span class="comment">// filed &gt; value</span></span><br><span class="line">    ge,                     <span class="comment">// field &gt;= value</span></span><br><span class="line">    lt,                     <span class="comment">// field &lt; value</span></span><br><span class="line">    le,                     <span class="comment">// field &lt;= value</span></span><br><span class="line"></span><br><span class="line">    notEqual,               <span class="comment">// field != value</span></span><br><span class="line">    like,                   <span class="comment">// field like value</span></span><br><span class="line">    notLike,                <span class="comment">// field not like value</span></span><br><span class="line">    between,                <span class="comment">// between value1 and value2 ,Type is Date</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸‹é¢å››ä¸ªç”¨äºå¯æ¯”è¾ƒç±»å‹(Comparable)çš„æ¯”è¾ƒ</span></span><br><span class="line">    greaterThan,            <span class="comment">// field &gt; value</span></span><br><span class="line">    greaterThanOrEqualTo,   <span class="comment">// field &gt;= value</span></span><br><span class="line">    lessThan,               <span class="comment">// field &lt; value</span></span><br><span class="line">    lessThanOrEqualTo       <span class="comment">// field &lt;= value</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šæšä¸¾ç±»ï¼Œå¯ä»¥å¯¹æ¯”æ³¨é‡Šè¿›è¡Œç†è§£</p></blockquote><p><code>BetweenType</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span>  BetweenType &#123;</span><br><span class="line"></span><br><span class="line">    datetime,</span><br><span class="line">    number_long,</span><br><span class="line">    number_integer</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šå¯¹åº”ä¸Šé¢ <code>QueryWord</code>ä¸­çš„ BetweenType ï¼Œå¯ä»¥å¯¹æ—¶é—´æˆ–æ•°å­—ä¹‹é—´çš„å±æ€§è¿›è¡Œæ³¨è§£</p></blockquote><p><code>BaseQuery</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseQuery</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¬¬å¤šå°‘é¡µ + é¡µå¤§å°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pageNum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> pageSize = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Class, List&lt;Field&gt;&gt; fieldCache = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŠ¨æ€æŸ¥è¯¢</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Specification&lt;T&gt; <span class="title">toSpec</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ†é¡µ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pageable <span class="title">toPageable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> PageRequest.of(pageNum, pageSize);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ†é¡µ + æ’åº</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pageable <span class="title">toPageable</span><span class="params">(Sort sort)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> PageRequest.of(pageNum, pageSize, sort);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŠ¨æ€æŸ¥è¯¢ and è¿æ¥</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Specification&lt;T&gt; <span class="title">toSpecWithAnd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.toSpecWithLogicType(<span class="string">&quot;and&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åŠ¨æ€æŸ¥è¯¢ or è¿æ¥</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Specification&lt;T&gt; <span class="title">toSpecWithOr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.toSpecWithLogicType(<span class="string">&quot;or&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// logicType = or ï½œ and</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&#123; &quot;rawtypes&quot;, &quot;unchecked&quot; &#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Specification&lt;T&gt; <span class="title">toSpecWithLogicType</span><span class="params">(<span class="keyword">final</span> String logicType)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> BaseQuery outerThis = <span class="keyword">this</span>;</span><br><span class="line">        <span class="comment">// å°è£…æ¡ä»¶æŸ¥è¯¢å¯¹è±¡ Specification</span></span><br><span class="line">        Specification&lt;T&gt; specification = <span class="keyword">new</span> Specification&lt;T&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="comment">// Root ç”¨äºè·å–å±æ€§å­—æ®µï¼ŒCriteriaQueryå¯ä»¥ç”¨äºç®€å•æ¡ä»¶æŸ¥è¯¢ï¼ŒCriteriaBuilder ç”¨äºæ„é€ å¤æ‚æ¡ä»¶æŸ¥è¯¢</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Predicate <span class="title">toPredicate</span><span class="params">(Root&lt;T&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb)</span> </span>&#123;</span><br><span class="line">                Class clazz = outerThis.getClass();</span><br><span class="line">                <span class="comment">// åˆ¤æ–­ç¼“å­˜ä¸­æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå­˜åœ¨ä¸éœ€è¦å†æ¬¡ç”Ÿæˆï¼Œä¸å­˜åœ¨éœ€è¦é‡æ–°ç”Ÿæˆ</span></span><br><span class="line">                List&lt;Field&gt; fields = fieldCache.get(clazz);</span><br><span class="line">                <span class="keyword">if</span> (fields == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// è·å–æŸ¥è¯¢ç±»Queryçš„æ‰€æœ‰å­—æ®µ,åŒ…æ‹¬çˆ¶ç±»å­—æ®µ</span></span><br><span class="line">                    fields = getAllFieldsWithRoot(clazz);</span><br><span class="line">                    fieldCache.put(clazz, fields);</span><br><span class="line">                &#125;</span><br><span class="line">                List&lt;Predicate&gt; predicates = <span class="keyword">new</span> ArrayList&lt;&gt;(fields.size());</span><br><span class="line">                <span class="keyword">for</span> (Field field : fields) &#123;</span><br><span class="line">                    <span class="comment">// è·å–å­—æ®µä¸Šçš„ @QueryWord æ³¨è§£</span></span><br><span class="line">                    QueryWord qw = field.getAnnotation(QueryWord.class);</span><br><span class="line">                    <span class="keyword">if</span> (qw == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// è·å–å­—æ®µå</span></span><br><span class="line">                    String column = qw.column();</span><br><span class="line">                    <span class="comment">//å¦‚æœä¸»æ³¨è§£ä¸Š column ä¸ºé»˜è®¤å€¼&quot;&quot;,åˆ™ä»¥ field ä¸ºå‡†</span></span><br><span class="line">                    <span class="keyword">if</span> (column.equals(<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">                        column = field.getName();</span><br><span class="line">                    &#125;</span><br><span class="line">                    field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="comment">// nullable</span></span><br><span class="line">                        Object value = field.get(outerThis);</span><br><span class="line">                        <span class="comment">// å¦‚æœå€¼ä¸º null,æ³¨è§£æœªæ ‡æ³¨ nullable,è·³è¿‡</span></span><br><span class="line">                        <span class="keyword">if</span> (value == <span class="keyword">null</span> &amp;&amp; !qw.nullable()) &#123;</span><br><span class="line">                            <span class="keyword">continue</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// can be empty</span></span><br><span class="line">                        <span class="keyword">if</span> (value != <span class="keyword">null</span> &amp;&amp; String.class.isAssignableFrom(value.getClass())) &#123;</span><br><span class="line">                            String s = (String) value;</span><br><span class="line">                            <span class="comment">//å¦‚æœå€¼ä¸º&quot;&quot;,ä¸”æ³¨è§£æœªæ ‡æ³¨ empty ,è·³è¿‡</span></span><br><span class="line">                            <span class="keyword">if</span> (s.equals(<span class="string">&quot;&quot;</span>) &amp;&amp; !qw.empty()) &#123;</span><br><span class="line">                                <span class="keyword">continue</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">//é€šè¿‡æ³¨è§£ä¸Š func å±æ€§,æ„å»ºè·¯å¾„è¡¨è¾¾å¼</span></span><br><span class="line">                        Path path = root.get(column);</span><br><span class="line">                        <span class="keyword">switch</span> (qw.func()) &#123;</span><br><span class="line">                            <span class="keyword">case</span> equal:</span><br><span class="line">                                predicates.add(cb.equal(path, value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> like:</span><br><span class="line">                                predicates.add(cb.like(path, <span class="string">&quot;%&quot;</span> + value + <span class="string">&quot;%&quot;</span>));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> gt:</span><br><span class="line">                                predicates.add(cb.gt(path, (Number) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> lt:</span><br><span class="line">                                predicates.add(cb.lt(path, (Number) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> ge:</span><br><span class="line">                                predicates.add(cb.ge(path, (Number) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> le:</span><br><span class="line">                                predicates.add(cb.le(path, (Number) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> notEqual:</span><br><span class="line">                                predicates.add(cb.notEqual(path, value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> notLike:</span><br><span class="line">                                predicates.add(cb.notLike(path, <span class="string">&quot;%&quot;</span> + value + <span class="string">&quot;%&quot;</span>));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> greaterThan:</span><br><span class="line">                                predicates.add(cb.greaterThan(path, (Comparable) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> greaterThanOrEqualTo:</span><br><span class="line">                                predicates.add(cb.greaterThanOrEqualTo(path, (Comparable) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> lessThan:</span><br><span class="line">                                predicates.add(cb.lessThan(path, (Comparable) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> lessThanOrEqualTo:</span><br><span class="line">                                predicates.add(cb.lessThanOrEqualTo(path, (Comparable) value));</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            <span class="keyword">case</span> between:</span><br><span class="line">                                <span class="keyword">switch</span> (qw.type()) &#123;</span><br><span class="line">                                    <span class="keyword">case</span> datetime:</span><br><span class="line">                                        List&lt;Date&gt; dateList = (List&lt;Date&gt;) value;</span><br><span class="line">                                        predicates.add(cb.between(path, dateList.get(<span class="number">0</span>), dateList.get(<span class="number">1</span>)));</span><br><span class="line">                                        <span class="keyword">break</span>;</span><br><span class="line">                                    <span class="keyword">case</span> number_long:</span><br><span class="line">                                        List&lt;Long&gt; longList = (List&lt;Long&gt;) value;</span><br><span class="line">                                        predicates.add(cb.between(path, longList.get(<span class="number">0</span>), longList.get(<span class="number">1</span>)));</span><br><span class="line">                                        <span class="keyword">break</span>;</span><br><span class="line">                                    <span class="keyword">case</span> number_integer:</span><br><span class="line">                                        List&lt;Integer&gt; integerList = (List&lt;Integer&gt;) value;</span><br><span class="line">                                        predicates.add(cb.between(path, integerList.get(<span class="number">0</span>), integerList.get(<span class="number">1</span>)));</span><br><span class="line">                                        <span class="keyword">break</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                Predicate p = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">if</span> (logicType == <span class="keyword">null</span> || logicType.equals(<span class="string">&quot;&quot;</span>) || logicType.equals(<span class="string">&quot;and&quot;</span>)) &#123;</span><br><span class="line">                    p = cb.and(predicates.toArray(<span class="keyword">new</span> Predicate[predicates.size()])); <span class="comment">// and è¿æ¥</span></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (logicType.equals(<span class="string">&quot;or&quot;</span>)) &#123;</span><br><span class="line">                    p = cb.or(predicates.toArray(<span class="keyword">new</span> Predicate[predicates.size()]));  <span class="comment">// or è¿æ¥</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> p;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> specification;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–ç±» clazz çš„æ‰€æœ‰ Fieldï¼ŒåŒ…æ‹¬å…¶çˆ¶ç±»çš„ Field</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;Field&gt; <span class="title">getAllFieldsWithRoot</span><span class="params">(Class&lt;?&gt; clazz)</span> </span>&#123;</span><br><span class="line">        List&lt;Field&gt; fieldList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Field[] dFields = clazz.getDeclaredFields(); <span class="comment">//è·å–æœ¬ç±»æ‰€æœ‰å­—æ®µ</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != dFields &amp;&amp; dFields.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            fieldList.addAll(Arrays.asList(dFields));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è‹¥çˆ¶ç±»æ˜¯ Objectï¼Œåˆ™ç›´æ¥è¿”å›å½“å‰ Field åˆ—è¡¨</span></span><br><span class="line">        Class&lt;?&gt; superClass = clazz.getSuperclass();</span><br><span class="line">        <span class="keyword">if</span> (superClass == Object.class) &#123;</span><br><span class="line">            <span class="keyword">return</span> Arrays.asList(dFields);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é€’å½’æŸ¥è¯¢çˆ¶ç±»çš„ Field åˆ—è¡¨</span></span><br><span class="line">        List&lt;Field&gt; superFields = getAllFieldsWithRoot(superClass);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != superFields &amp;&amp; !superFields.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Field field : superFields) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!fieldList.contains(field)) &#123;</span><br><span class="line">                    fieldList.add(field);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fieldList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPageIndex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pageNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPageIndex</span><span class="params">(<span class="keyword">int</span> pageIndex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pageNum = pageIndex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPageSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pageSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPageSize</span><span class="params">(<span class="keyword">int</span> pageSize)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pageSize = pageSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šæœ€å…³é”®çš„ç±»</p><ul><li>æ‰€æœ‰åé¢è¦æŸ¥è¯¢çš„ç±»éƒ½è¦ç»§æ‰¿å®ƒ</li><li>ç®€å•çš„ç†è§£ï¼šé€šè¿‡åå°„è·å–æ³¨è§£ä¸Šçš„å­—æ®µä¿¡æ¯ï¼Œæ„é€ ç›¸åº”çš„æœç´¢æ¡ä»¶</li></ul></blockquote><h2 id="ä¸‰ã€Test"><a href="#ä¸‰ã€Test" class="headerlink" title="ä¸‰ã€Test"></a>ä¸‰ã€Test</h2><p><code>StudentQuery</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentQuery</span> <span class="keyword">extends</span> <span class="title">BaseQuery</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@QueryWord(column = &quot;id&quot;, func = MatchType.equal)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@QueryWord(func = MatchType.like)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// çœç•¥ set / get</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Specification <span class="title">toSpec</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.toSpecWithOr();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼Œä½¿ç”¨çš„æ˜¯ or æŸ¥è¯¢ï¼Œæµ‹è¯•ç±»å¦‚ä¸‹ï¼š</p><p><code>Test</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">find8</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    StudentQuery studentQuery = <span class="keyword">new</span> StudentQuery();</span><br><span class="line">    studentQuery.setId(<span class="number">1L</span>);</span><br><span class="line">    studentQuery.setName(<span class="string">&quot;er&quot;</span>);</span><br><span class="line">    studentQuery.setPageIndex(<span class="number">0</span>);</span><br><span class="line">    studentQuery.setPageSize(<span class="number">10</span>);</span><br><span class="line">    Page page = studentRepository.findAll(studentQuery.toSpec(), studentQuery.toPageable());</span><br><span class="line">    <span class="keyword">for</span> (Object o : page.getContent()) &#123;</span><br><span class="line">        System.out.println(o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šæ„é€ çš„æ¡ä»¶æ˜¯ id = 1çš„ï¼Œæˆ–è€… name = ? er ? çš„ student</p></blockquote><p><code>ç»“æœ</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200914200804.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200914200804.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200914200754861"></p><p>é€šè¿‡è¿™ä¸ªä¾‹å­ç®€å•æ‹ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹ï¼š</p><ol><li>é€šè¿‡ studentQuery.toSpec() è°ƒç”¨çˆ¶ç±» BaseQueryï¼›</li><li>åœ¨ BaseQuery ä¸­ï¼Œé€šè¿‡åå°„è·å¾—æ‰“äº†ç›¸åº”æ³¨è§£ä¸Šçš„å­—æ®µä¿¡æ¯ï¼›</li><li>å°†å­—æ®µä¿¡æ¯åŠ åˆ°æœç´¢æ¡ä»¶ä¸­ï¼Œè¿›è¡Œ or æˆ–è€… and è¿æ¥</li></ol><blockquote><p>æ³¨ï¼šå¦‚æœä½ çš„ä¸šåŠ¡ä¸­åªç”¨äº†å¾ˆå°‘çš„æ¡ä»¶æˆ–è€…åªç”¨æä¸ªåˆ«çš„å¤šæ¡ä»¶æŸ¥è¯¢ï¼Œå¯ä»¥ä¸ç”¨è¿™ä¸ªå·¥å…·ç±»</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Java" scheme="http://wangba.me/tags/Java/"/>
    
    <category term="MySQL" scheme="http://wangba.me/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆSpring Data JPA(äºŒ)</title>
    <link href="http://wangba.me/2020/09/10/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%BA%8C/"/>
    <id>http://wangba.me/2020/09/10/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%BA%8C/</id>
    <published>2020-09-10T10:38:46.000Z</published>
    <updated>2020-09-30T07:08:31.365Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>â€‹        åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»äº†ä¸€ä¸‹ Spring Data JPA çš„ä¸€ä¸‹ç®€å•çš„ CRUDï¼Œä½†æ˜¯åœ¨å…¬å¸ä¸šåŠ¡ä¸­ï¼Œä¸å¯èƒ½è¿™ä¹ˆç®€å•ï¼›ä¸”åœ¨ä¸šåŠ¡ä¸­å¤§éƒ¨åˆ†éƒ½æ˜¯æŸ¥è¯¢ä¸šåŠ¡ï¼Œå…·ä½“ç‚¹å°±æ˜¯åŠ¨æ€æŸ¥è¯¢ï¼Œä»€ä¹ˆå•è¡¨å¤šæ¡ä»¶æŸ¥è¯¢ã€å¤šè¡¨å¤šæ¡ä»¶æŸ¥è¯¢ç­‰ç­‰â€¦â€¦    </p><blockquote><p>æ³¨ï¼šä½¿ç”¨ç¯å¢ƒè¿˜æ˜¯å’Œä¸Šä¸€ç¯‡ä¸€æ ·</p></blockquote><h2 id="äºŒã€è‡ªå®šä¹‰SQLæŸ¥è¯¢"><a href="#äºŒã€è‡ªå®šä¹‰SQLæŸ¥è¯¢" class="headerlink" title="äºŒã€è‡ªå®šä¹‰SQLæŸ¥è¯¢"></a>äºŒã€è‡ªå®šä¹‰SQLæŸ¥è¯¢</h2><p>å¦‚æœæƒ³å’Œè¿™é‡Œé¢å†™åŸç”Ÿçš„ SQL è¯­å¥ï¼Œåªè¦åœ¨ <strong>repository</strong> ä¸­è¿™æ ·å†™å°±è¡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Query(nativeQuery = true,</span></span><br><span class="line"><span class="meta">        value = &quot;select * from Student where id = ?1&quot;)</span></span><br><span class="line"><span class="function">Student <span class="title">catchAllById</span><span class="params">(Long id)</span></span>;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><ul><li>å¦‚æœè¦å†™åŸç”Ÿ SQLï¼Œ@Query æ³¨è§£ä¸­çš„ nativeQuery è¦è®¾ç½®ä¸º trueï¼Œé»˜è®¤ä¸º false</li><li>å‡½æ•°åè®¾ç½®çš„ä¸èƒ½ä¸è‡ªå¸¦çš„å†²çªï¼Œä¾‹å¦‚ï¼šfindByIdï¼Œå¦‚æœè®¾ç½®äº†ä¸€æ ·ï¼Œå°±ä¼šå¯¼è‡´ä½¿ç”¨çš„è‡ªå¸¦çš„ API è¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œä¸æ˜¯è‡ªå®šä¹‰çš„ï¼Œå¦‚æœçœŸçš„æƒ³ä½¿ç”¨è‡ªå®šä¹‰è¦†ç›–è‡ªå¸¦çš„ï¼Œå¯ä»¥åœ¨å®ä½“ç±»ä¸Šä½¿ç”¨ @NamedQueries æ³¨è§£</li></ul></blockquote><p>åœ¨è¿™é‡Œæˆ‘ä»¬å°±ä½¿ç”¨ @Test è¿›è¡Œæµ‹è¯•ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911110259.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911110259.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911110257151"></p><p>è¿˜æœ‰ä¸€ç§ä½¿ç”¨ JPQL è¯­æ³•çš„æŸ¥è¯¢æ–¹å¼ï¼š</p><p><code>repository:</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Query(value = &quot;select s from Student s where s.name = ?1&quot;)</span></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">catchByName</span><span class="params">(String name)</span></span>;</span><br></pre></td></tr></table></figure><p><code>Test:</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911111044.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911111044.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911111044489"></p><p>å…³äº JPQLï¼šå’Œåœ¨ SQL ä¸­ä¸€æ ·ï¼ŒJPQL ä¸­çš„ select è¯­å¥ç”¨äºæ‰§è¡ŒæŸ¥è¯¢ã€‚å…¶è¯­æ³•å¯è¡¨ç¤ºä¸ºï¼š<br><code>select_clause form_clause [where_clause] [groupby_clause] [having_clause] [orderby_clause]</code></p><p>å…¶ä¸­ï¼š</p><ol><li>from å­å¥æ˜¯æŸ¥è¯¢è¯­å¥çš„å¿…é€‰å­å¥ã€‚</li><li>select ç”¨æ¥æŒ‡å®šæŸ¥è¯¢è¿”å›çš„ç»“æœå®ä½“æˆ–å®ä½“çš„æŸäº›å±æ€§ã€‚</li><li>from å­å¥å£°æ˜æŸ¥è¯¢æºå®ä½“ç±»ï¼Œå¹¶æŒ‡å®šæ ‡è¯†ç¬¦å˜é‡ï¼ˆç›¸å½“äºSQLè¡¨çš„åˆ«åï¼‰ã€‚</li><li>å¦‚æœä¸å¸Œæœ›è¿”å›é‡å¤å®ä½“ï¼Œå¯ä½¿ç”¨å…³é”®å­— distinct ä¿®é¥°ã€‚selectã€from éƒ½æ˜¯ JPQL çš„å…³é”®å­—ï¼Œé€šå¸¸å…¨å¤§å†™æˆ–å…¨å°å†™ï¼Œå»ºè®®ä¸è¦å¤§å°å†™æ··ç”¨ã€‚</li></ol><p>åœ¨ JPQL ä¸­ï¼ŒæŸ¥è¯¢æ‰€æœ‰å®ä½“çš„ JPQL æŸ¥è¯¢è¯­å¥å¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š<br><code>select o from Order o æˆ– select o from Order as o</code><br>è¿™é‡Œå…³é”®å­— as å¯ä»¥çœå»ï¼Œæ ‡è¯†ç¬¦å˜é‡çš„å‘½åè§„èŒƒä¸ Java æ ‡è¯†ç¬¦ç›¸åŒï¼Œä¸”åŒºåˆ†å¤§å°å†™</p><p>æ›´å¤šå‚è€ƒï¼š<a href="https://docs.oracle.com/html/E13946_04/ejb3_langref.html">å®˜ç½‘æ–‡æ¡£</a></p><h2 id="ä¸‰ã€è‡ªå®šä¹‰ç®€å•æŸ¥è¯¢"><a href="#ä¸‰ã€è‡ªå®šä¹‰ç®€å•æŸ¥è¯¢" class="headerlink" title="ä¸‰ã€è‡ªå®šä¹‰ç®€å•æŸ¥è¯¢"></a>ä¸‰ã€è‡ªå®šä¹‰ç®€å•æŸ¥è¯¢</h2><p>åœ¨ Spring Data JPA çš„<a href="https://docs.spring.io/spring-data/jpa/docs/2.3.3.RELEASE/reference/html/#jpa.named-parameters">å®˜ç½‘</a>ä¹Ÿä»‹ç»äº†è¿™ç§æ–¹å¼ï¼Œä¸€èˆ¬è¿™ç§æ–¹å¼åœ¨ä¸€äº›å°é¡¹ç›®ä¸­ä¹Ÿç»å¸¸ä½¿ç”¨ï¼š</p><table><thead><tr><th align="center">Keyword</th><th align="center">Sample</th><th align="center">JPQL snippet</th></tr></thead><tbody><tr><td align="center"><code>And</code></td><td align="center"><code>findByLastnameAndFirstname</code></td><td align="center"><code>â€¦ where x.lastname = ?1 and x.firstname = ?2</code></td></tr><tr><td align="center"><code>Or</code></td><td align="center"><code>findByLastnameOrFirstname</code></td><td align="center"><code>â€¦ where x.lastname = ?1 or x.firstname = ?2</code></td></tr><tr><td align="center"><code>Is</code>, <code>Equals</code></td><td align="center"><code>findByFirstname</code>,<code>findByFirstnameIs</code>,<code>findByFirstnameEquals</code></td><td align="center"><code>â€¦ where x.firstname = ?1</code></td></tr><tr><td align="center"><code>Between</code></td><td align="center"><code>findByStartDateBetween</code></td><td align="center"><code>â€¦ where x.startDate between ?1 and ?2</code></td></tr><tr><td align="center"><code>LessThan</code></td><td align="center"><code>findByAgeLessThan</code></td><td align="center"><code>â€¦ where x.age &lt; ?1</code></td></tr><tr><td align="center"><code>LessThanEqual</code></td><td align="center"><code>findByAgeLessThanEqual</code></td><td align="center"><code>â€¦ where x.age &lt;= ?1</code></td></tr><tr><td align="center"><code>GreaterThan</code></td><td align="center"><code>findByAgeGreaterThan</code></td><td align="center"><code>â€¦ where x.age &gt; ?1</code></td></tr><tr><td align="center"><code>GreaterThanEqual</code></td><td align="center"><code>findByAgeGreaterThanEqual</code></td><td align="center"><code>â€¦ where x.age &gt;= ?1</code></td></tr><tr><td align="center"><code>After</code></td><td align="center"><code>findByStartDateAfter</code></td><td align="center"><code>â€¦ where x.startDate &gt; ?1</code></td></tr><tr><td align="center"><code>Before</code></td><td align="center"><code>findByStartDateBefore</code></td><td align="center"><code>â€¦ where x.startDate &lt; ?1</code></td></tr><tr><td align="center"><code>IsNull</code>, <code>Null</code></td><td align="center"><code>findByAge(Is)Null</code></td><td align="center"><code>â€¦ where x.age is null</code></td></tr><tr><td align="center"><code>IsNotNull</code>, <code>NotNull</code></td><td align="center"><code>findByAge(Is)NotNull</code></td><td align="center"><code>â€¦ where x.age not null</code></td></tr><tr><td align="center"><code>Like</code></td><td align="center"><code>findByFirstnameLike</code></td><td align="center"><code>â€¦ where x.firstname like ?1</code></td></tr><tr><td align="center"><code>NotLike</code></td><td align="center"><code>findByFirstnameNotLike</code></td><td align="center"><code>â€¦ where x.firstname not like ?1</code></td></tr><tr><td align="center"><code>StartingWith</code></td><td align="center"><code>findByFirstnameStartingWith</code></td><td align="center"><code>â€¦ where x.firstname like ?1</code> (parameter bound with appended <code>%</code>)</td></tr><tr><td align="center"><code>EndingWith</code></td><td align="center"><code>findByFirstnameEndingWith</code></td><td align="center"><code>â€¦ where x.firstname like ?1</code> (parameter bound with prepended <code>%</code>)</td></tr><tr><td align="center"><code>Containing</code></td><td align="center"><code>findByFirstnameContaining</code></td><td align="center"><code>â€¦ where x.firstname like ?1</code> (parameter bound wrapped in <code>%</code>)</td></tr><tr><td align="center"><code>OrderBy</code></td><td align="center"><code>findByAgeOrderByLastnameDesc</code></td><td align="center"><code>â€¦ where x.age = ?1 order by x.lastname desc</code></td></tr><tr><td align="center"><code>Not</code></td><td align="center"><code>findByLastnameNot</code></td><td align="center"><code>â€¦ where x.lastname &lt;&gt; ?1</code></td></tr><tr><td align="center"><code>In</code></td><td align="center"><code>findByAgeIn(Collection&lt;Age&gt; ages)</code></td><td align="center"><code>â€¦ where x.age in ?1</code></td></tr><tr><td align="center"><code>NotIn</code></td><td align="center"><code>findByAgeNotIn(Collection&lt;Age&gt; ages)</code></td><td align="center"><code>â€¦ where x.age not in ?1</code></td></tr><tr><td align="center"><code>True</code></td><td align="center"><code>findByActiveTrue()</code></td><td align="center"><code>â€¦ where x.active = true</code></td></tr><tr><td align="center"><code>False</code></td><td align="center"><code>findByActiveFalse()</code></td><td align="center"><code>â€¦ where x.active = false</code></td></tr><tr><td align="center"><code>IgnoreCase</code></td><td align="center"><code>findByFirstnameIgnoreCase</code></td><td align="center"><code>â€¦ where UPPER(x.firstame) = UPPER(?1)</code></td></tr></tbody></table><p>åŸç†å¤§æ¦‚å¦‚ä¸‹ï¼š</p><p><strong>å‡å¦‚åˆ›å»ºå¦‚ä¸‹çš„æŸ¥è¯¢ï¼š<code>findByUserDepUuid()</code>ï¼Œæ¡†æ¶åœ¨è§£æè¯¥æ–¹æ³•æ—¶ï¼Œé¦–å…ˆå‰”é™¤ findByï¼Œç„¶åå¯¹å‰©ä¸‹çš„å±æ€§è¿›è¡Œè§£æ</strong></p><ol><li>å…ˆåˆ¤æ–­ userDepUuid ï¼ˆæ ¹æ® POJO è§„èŒƒï¼Œé¦–å­—æ¯å˜ä¸ºå°å†™ï¼‰æ˜¯å¦ä¸ºæŸ¥è¯¢å®ä½“çš„ä¸€ä¸ªå±æ€§ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¡¨ç¤ºæ ¹æ®è¯¥å±æ€§è¿›è¡ŒæŸ¥è¯¢ï¼›å¦‚æœæ²¡æœ‰è¯¥å±æ€§ï¼Œç»§ç»­ç¬¬äºŒæ­¥ï¼›</li><li>ä»å³å¾€å·¦æˆªå–ç¬¬ä¸€ä¸ªå¤§å†™å­—æ¯å¼€å¤´çš„å­—ç¬¦ä¸²æ­¤å¤„ä¸ºUuidï¼‰ï¼Œç„¶åæ£€æŸ¥å‰©ä¸‹çš„å­—ç¬¦ä¸²æ˜¯å¦ä¸ºæŸ¥è¯¢å®ä½“çš„ä¸€ä¸ªå±æ€§ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¡¨ç¤ºæ ¹æ®è¯¥å±æ€§è¿›è¡ŒæŸ¥è¯¢ï¼›å¦‚æœæ²¡æœ‰è¯¥å±æ€§ï¼Œåˆ™é‡å¤ç¬¬äºŒæ­¥ï¼Œç»§ç»­ä»å³å¾€å·¦æˆªå–ï¼›æœ€åå‡è®¾userä¸ºæŸ¥è¯¢å®ä½“çš„ä¸€ä¸ªå±æ€§ï¼›</li><li>æ¥ç€å¤„ç†å‰©ä¸‹éƒ¨åˆ†ï¼ˆDepUuidï¼‰ï¼Œå…ˆåˆ¤æ–­ user æ‰€å¯¹åº”çš„ç±»å‹æ˜¯å¦æœ‰depUuidå±æ€§ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è¡¨ç¤ºè¯¥æ–¹æ³•æœ€ç»ˆæ˜¯æ ¹æ® <code>Doc.user.depUuid</code> çš„å–å€¼è¿›è¡ŒæŸ¥è¯¢ï¼›å¦åˆ™ç»§ç»­æŒ‰ç…§æ­¥éª¤ 2 çš„è§„åˆ™ä»å³å¾€å·¦æˆªå–ï¼Œæœ€ç»ˆè¡¨ç¤ºæ ¹æ® <code>Doc.user.dep.uuid</code> çš„å€¼è¿›è¡ŒæŸ¥è¯¢ã€‚</li><li>å¯èƒ½ä¼šå­˜åœ¨ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚ DocåŒ…å«ä¸€ä¸ª user çš„å±æ€§ï¼Œä¹Ÿæœ‰ä¸€ä¸ª userDep å±æ€§ï¼Œæ­¤æ—¶ä¼šå­˜åœ¨æ··æ·†ã€‚å¯ä»¥æ˜ç¡®åœ¨å±æ€§ä¹‹é—´åŠ ä¸Š â€œ_â€ ä»¥æ˜¾å¼è¡¨è¾¾æ„å›¾ï¼Œæ¯”å¦‚ <code>findByUser_DepUuid()</code> æˆ–è€… <code>findByUserDep_uuid()</code></li></ol><p><code>repository:</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByName</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByNameAndPwd</span><span class="params">(String name, String pwd)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByNameStartingWith</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByNameEndingWith</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByNameContaining</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByNameContainingOrderByIdDesc</span><span class="params">(String name)</span></span>;</span><br></pre></td></tr></table></figure><p><code>test:</code></p><p><strong>findByName</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112401.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112401.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911112401002"></p><p><strong>findByNameAndPwd</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112633.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112633.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911112633532"></p><p><strong>findByNameStartingWith</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112706.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112706.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911112706325"></p><p><strong>findByNameEndingWith</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112749.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112749.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911112749472"></p><p><strong>findByNameContaining</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112818.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911112818.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911112818300"></p><p><strong>findByNameContainingOrderByIdDesc</strong></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911120538.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911120538.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911120538084"></p><h2 id="å››ã€åˆ†é¡µæŸ¥è¯¢"><a href="#å››ã€åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="å››ã€åˆ†é¡µæŸ¥è¯¢"></a>å››ã€åˆ†é¡µæŸ¥è¯¢</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†é¡µ + æ’åº</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">find6</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Sort sort = Sort.by(Sort.Direction.DESC, <span class="string">&quot;id&quot;</span>);</span><br><span class="line">    PageRequest pageRequest = PageRequest.of(<span class="number">0</span>, <span class="number">2</span>, sort);</span><br><span class="line">    Page&lt;Student&gt; studentPage = studentRepository.findAll(pageRequest);</span><br><span class="line">    <span class="keyword">for</span> (Student student : studentPage.getContent()) &#123;</span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><ul><li>Sort.by(æ’åºæ–¹å¼, æ’åºå­—æ®µ)</li><li>PageRequest.of(ç¬¬å¤šå°‘é¡µï¼Œé¡µå¤§å°)    â€”â€”â€“&gt;     ä¸€èˆ¬æ˜¯å†™ä¸€ä¸ª PageUtils</li></ul></blockquote><p><code>Test</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911142717.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911142717.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911142717361"></p><h2 id="äº”ã€åŠ¨æ€æŸ¥è¯¢"><a href="#äº”ã€åŠ¨æ€æŸ¥è¯¢" class="headerlink" title="äº”ã€åŠ¨æ€æŸ¥è¯¢"></a>äº”ã€åŠ¨æ€æŸ¥è¯¢</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†é¡µ + æ’åº + æœç´¢</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">find7</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    PageRequest pageRequest = PageRequest.of(<span class="number">0</span>, <span class="number">2</span>, Sort.by(Sort.Direction.DESC, <span class="string">&quot;id&quot;</span>));</span><br><span class="line">    Specification&lt;Student&gt; specification = <span class="keyword">new</span> Specification&lt;Student&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Predicate <span class="title">toPredicate</span><span class="params">(Root&lt;Student&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// å¢åŠ æœç´¢æ¡ä»¶: id &lt;= 5</span></span><br><span class="line">            Predicate predicate = criteriaBuilder.lessThanOrEqualTo(root.get(<span class="string">&quot;id&quot;</span>), <span class="number">5</span>);</span><br><span class="line">            <span class="keyword">return</span> predicate;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Page&lt;Student&gt; studentPage = studentRepository.findAll(specification, pageRequest);</span><br><span class="line">    <span class="keyword">for</span> (Student student : studentPage.getContent()) &#123;</span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><ul><li><p>root: ä»£è¡¨æŸ¥è¯¢çš„å®ä½“ç±»</p></li><li><p>query: å¯ä»¥ä»ä¸­å¾—åˆ° Root å¯¹è±¡</p></li><li><p>criteriaBuilder: ç”¨äºåˆ›å»º Criteria ç›¸å…³å¯¹è±¡çš„å·¥å‚</p></li><li><p>Predicate: ä»£è¡¨ä¸€ä¸ªæŸ¥è¯¢æ¡ä»¶</p></li></ul></blockquote><p><code>Test:</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911143430.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911143430.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911143430602"></p><p><code>å¤šæ¡ä»¶ï¼š</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†é¡µ + æ’åº + æœç´¢</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">find7</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    PageRequest pageRequest = PageRequest.of(<span class="number">0</span>, <span class="number">10</span>, Sort.by(Sort.Direction.DESC, <span class="string">&quot;id&quot;</span>));</span><br><span class="line">    List&lt;Predicate&gt; predicateList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    Specification&lt;Student&gt; specification = <span class="keyword">new</span> Specification&lt;Student&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Predicate <span class="title">toPredicate</span><span class="params">(Root&lt;Student&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder criteriaBuilder)</span> </span>&#123;</span><br><span class="line">            predicateList.add(criteriaBuilder.lessThanOrEqualTo(root.get(<span class="string">&quot;id&quot;</span>), <span class="number">5</span>));</span><br><span class="line">            predicateList.add(criteriaBuilder.like(root.get(<span class="string">&quot;name&quot;</span>), <span class="string">&quot;%&quot;</span> + <span class="string">&quot;er&quot;</span>));</span><br><span class="line">            <span class="keyword">return</span> criteriaBuilder.and(predicateList.toArray(<span class="keyword">new</span> Predicate[predicateList.size()]));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Page&lt;Student&gt; studentPage = studentRepository.findAll(specification, pageRequest);</span><br><span class="line">    <span class="keyword">for</span> (Student student : studentPage.getContent()) &#123;</span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Test:</code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911150134.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200911150134.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200911150134356"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Java" scheme="http://wangba.me/tags/Java/"/>
    
    <category term="MySQL" scheme="http://wangba.me/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆSpring Data JPA(ä¸€)</title>
    <link href="http://wangba.me/2020/09/10/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%B8%80/"/>
    <id>http://wangba.me/2020/09/10/SpringBoot%E6%95%B4%E5%90%88Spring-Data-JPA-%E4%B8%80/</id>
    <published>2020-09-10T10:38:30.000Z</published>
    <updated>2020-09-30T07:08:34.596Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><blockquote><p>JPA(Java Persistence API)æ˜¯Sunå®˜æ–¹æå‡ºçš„JavaæŒä¹…åŒ–è§„èŒƒã€‚å®ƒä¸ºJavaå¼€å‘äººå‘˜æä¾›äº†ä¸€ç§å¯¹è±¡/å…³è”æ˜ å°„å·¥å…·æ¥ç®¡ç†Javaåº”ç”¨ä¸­çš„å…³ç³»æ•°æ®ã€‚</p></blockquote><p>Spring Data JPA æ˜¯ Spring åŸºäº ORM æ¡†æ¶ã€JPA è§„èŒƒçš„åŸºç¡€ä¸Šå°è£…çš„ä¸€å¥—JPAåº”ç”¨æ¡†æ¶ï¼Œå¯ä½¿å¼€å‘è€…ç”¨æç®€çš„ä»£ç å³å¯å®ç°å¯¹æ•°æ®çš„è®¿é—®å’Œæ“ä½œã€‚å®ƒæä¾›äº†åŒ…æ‹¬å¢åˆ æ”¹æŸ¥ç­‰åœ¨å†…çš„å¸¸ç”¨åŠŸèƒ½ï¼Œä¸”æ˜“äºæ‰©å±•ï¼å­¦ä¹ å¹¶ä½¿ç”¨ Spring Data JPA å¯ä»¥æå¤§æé«˜å¼€å‘æ•ˆç‡ï¼</p><blockquote><p>spring data jpaè®©æˆ‘ä»¬è§£è„±äº†DAOå±‚çš„æ“ä½œï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰CRUDéƒ½å¯ä»¥ä¾èµ–äºå®ƒæ¥å®ç°</p></blockquote><h2 id="äºŒã€ç¯å¢ƒæ­å»º"><a href="#äºŒã€ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€ç¯å¢ƒæ­å»º"></a>äºŒã€ç¯å¢ƒæ­å»º</h2><p><code>pom.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>application.properties</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/jpa</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string"></span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line"><span class="meta">spring.jpa.database</span>=<span class="string">mysql</span></span><br><span class="line"><span class="comment"># æ˜¯å¦åœ¨æ§åˆ¶å°æ‰“å° sql è¯­å¥</span></span><br><span class="line"><span class="meta">spring.jpa.show-sql</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨ InnoDB ä½œä¸ºå¼•æ“ </span></span><br><span class="line"><span class="meta">spring.jpa.database-platform</span>=<span class="string">org.hibernate.dialect.MySQL5InnoDBDialect</span></span><br><span class="line"><span class="comment"># æ¯æ¬¡å¯åŠ¨éƒ½ä¼šæ›´æ–°æ•°æ®åº“ï¼Œå¦‚ï¼šå¢åŠ å­—æ®µç­‰ï¼Œä½†æ˜¯å¯¹æŸä¸ªå­—æ®µè¿›è¡Œæ”¹é€ æ˜¯è¯†åˆ«ä¸å‡ºæ¥</span></span><br><span class="line"><span class="meta">spring.jpa.hibernate.ddl-auto</span>=<span class="string">update</span></span><br></pre></td></tr></table></figure><p><code>entiy</code></p><p><strong>Student</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;student&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;id&quot;, columnDefinition = &quot;INT UNSIGNED COMMENT &#x27;è‡ªå¢ä¸»é”®&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;name&quot;, columnDefinition = &quot;VARCHAR(50) NOT NULL COMMENT &#x27;ç”¨æˆ·å&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;pwd&quot;, columnDefinition = &quot;VARCHAR(100) DEFAULT NULL COMMENT &#x27;å¯†ç &#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// çœç•¥ set get</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Grade</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;grade&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Grade</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;id&quot;, columnDefinition = &quot;INT UNSIGNED COMMENT &#x27;è‡ªå¢ä¸»é”®&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;subject&quot;, columnDefinition = &quot;VARCHAR(50) NOT NULL COMMENT &#x27;å­¦ç§‘&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subject;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;score&quot;, columnDefinition = &quot;TINYINT UNSIGNED NOT NULL COMMENT &#x27;æˆç»©&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String score;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// çœç•¥ set get</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šè¿™æ¬¡ä½¿ç”¨ä¸¤ä¸ªè¡¨ï¼Œä¸ºäº†åé¢è¿›è¡Œå¤æ‚æŸ¥è¯¢å‡†å¤‡ï¼Œè¿™é‡Œçš„å°†ä¸¤ä¸ªè¡¨çš„è‡ªå¢ id å…³è”åœ¨ä¸€èµ·ï¼Œå°±ä¸è€ƒè™‘å¤šå¯¹å¤šäº†</p></blockquote><p><code>repository</code></p><p><strong>StudentRepository</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Student</span>, <span class="title">Long</span>&gt;, <span class="title">JpaSpecificationExecutor</span>&lt;<span class="title">Student</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>GradeRepository</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">GradeRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Grade</span>, <span class="title">Long</span>&gt;, <span class="title">JpaSpecificationExecutor</span>&lt;<span class="title">Grade</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ä¸Šæ¬¡ aop é‚£é‡Œé¢å°±æè¿‡ï¼Œç”±äºç»§æ‰¿çš„æœ‰ CRUD çš„ repository å’Œä¸€äº›å…¶ä»–çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸Šé¢æåˆ°çš„è§£æ”¾ DAO å±‚çš„æ“ä½œï¼Œå…·ä½“çš„å¯ä»¥çœ‹ä¸‹å›¾</p></blockquote><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910145019.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910145019.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910145019869" style="zoom:150%;" /><h2 id="ä¸‰ã€CRUD"><a href="#ä¸‰ã€CRUD" class="headerlink" title="ä¸‰ã€CRUD"></a>ä¸‰ã€CRUD</h2><p><code>controller</code></p><p><strong>GradeController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/grade&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GradeController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> GradeRepository gradeRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGradeRepository</span><span class="params">(GradeRepository gradeRepository)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.gradeRepository = gradeRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Grade <span class="title">add</span><span class="params">(<span class="meta">@RequestBody</span> Grade grade)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> gradeRepository.save(grade);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/query&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Grade&gt; <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> gradeRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Grade <span class="title">update</span><span class="params">(<span class="meta">@RequestBody</span> Grade grade)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> gradeRepository.save(grade);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="meta">@RequestParam</span> Long id)</span> </span>&#123;</span><br><span class="line">        gradeRepository.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>StudentController</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/student&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> StudentRepository studentRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStudentRepository</span><span class="params">(StudentRepository studentRepository)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.studentRepository = studentRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">add</span><span class="params">(<span class="meta">@RequestBody</span> Student student)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentRepository.save(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/query&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">update</span><span class="params">(<span class="meta">@RequestBody</span> Student student)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentRepository.save(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="meta">@RequestParam</span> Long id)</span> </span>&#123;</span><br><span class="line">        studentRepository.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><ul><li><p>Spring å»ºè®®åœ¨è¿™é‡Œçš„æ³¨å…¥æ–¹å¼æ˜¯ set æˆ–è€… æ„é€ æ³¨å…¥ï¼Œä¸è¦ç›´æ¥æ³¨è§£æ³¨å…¥</p></li><li><p>ä¸ºäº†æ–¹ä¾¿ï¼Œåœ¨è¿™é‡Œè¿˜æ˜¯çœç•¥äº† Service å±‚çš„æ“ä½œ</p></li></ul></blockquote><p><code>Postmanæµ‹è¯•</code></p><p><code>å¢</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150238.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150238.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150238245"></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150312.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150312.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150312117"></p><p><code>æŸ¥</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150428.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150428.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150428435"></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150520.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150520.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150520147"></p><p><code>æ”¹</code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150633.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150633.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150633346"></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150752.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150752.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150751979"></p><p><code>åˆ </code></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150920.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910150920.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910150920385"></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910151023.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200910151023.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200910151023629"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Java" scheme="http://wangba.me/tags/Java/"/>
    
    <category term="MySQL" scheme="http://wangba.me/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆMyBatis</title>
    <link href="http://wangba.me/2020/09/09/SpringBoot%E6%95%B4%E5%90%88MyBatis/"/>
    <id>http://wangba.me/2020/09/09/SpringBoot%E6%95%B4%E5%90%88MyBatis/</id>
    <published>2020-09-09T07:52:44.000Z</published>
    <updated>2020-09-30T07:08:29.310Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€OverView"><a href="#ä¸€ã€OverView" class="headerlink" title="ä¸€ã€OverView"></a>ä¸€ã€OverView</h2><p>â€‹    åœ¨ä¸Šç¯‡æ–‡ç« ä¸­å·²ç»ç®€å•çš„å†™è¿‡ SpringBoot æ•´åˆ JDBCTemplate äº†ï¼Œä½†æ˜¯ç°åœ¨çš„å…¬å¸åº”è¯¥å¾ˆå°‘æœ‰ç”¨ JDBCTemplateï¼Œå›½å†…ä¸€èˆ¬éƒ½æ˜¯ MyBatis æˆ–è€…æ˜¯ Spring Data JPAï¼Œåœ¨æœ¬ç¯‡æ–‡ç« ä¸­å°±æ¥æ•´åˆä¸€ä¸‹ MyBatisã€‚</p><h2 id="äºŒã€ç¯å¢ƒæ­å»º"><a href="#äºŒã€ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€ç¯å¢ƒæ­å»º"></a>äºŒã€ç¯å¢ƒæ­å»º</h2><p>æ–°å»º SpringBoot é¡¹ç›®ï¼Œé€‰ä¸Š Webã€MySQLï¼Œåœ¨ pom.xml  ä¸­é…ç½®ä¸€ä¸‹æ•°æ®åº“è¿æ¥æ± ï¼š</p><p><code>pom.xml:</code>  </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.23<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>application.properties:</code> </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.type</span>=<span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/test</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string"></span></span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€CRUD"><a href="#ä¸‰ã€CRUD" class="headerlink" title="ä¸‰ã€CRUD"></a>ä¸‰ã€CRUD</h2><p><code>UserMapper:</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">      <span class="comment">// å¢</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into mybatis(name, password) values(#&#123;name&#125;, #&#123;password&#125;)&quot;)</span></span><br><span class="line">    <span class="meta">@SelectKey(statement = &quot;select last_insert_id()&quot;, keyProperty = &quot;id&quot;, before = false, resultType = Long.class)</span></span><br><span class="line">    <span class="function">Integer <span class="title">insert</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// æŸ¥</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from mybatis&quot;)</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">queryAllUser</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Results(&#123;</span></span><br><span class="line"><span class="meta">            @Result(property = &quot;id&quot;, column = &quot;i&quot;),</span></span><br><span class="line"><span class="meta">            @Result(property = &quot;name&quot;, column = &quot;n&quot;),</span></span><br><span class="line"><span class="meta">            @Result(property = &quot;password&quot;, column = &quot;p&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="meta">@Select(&quot;select id as i, name as n, password as p from mybatis where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">User <span class="title">queryById</span><span class="params">(Long id)</span></span>;</span><br><span class="line">    </span><br><span class="line">   <span class="comment">// æ”¹</span></span><br><span class="line">    <span class="meta">@Update(&quot;update mybatis set name = #&#123;name&#125;, password = #&#123;password&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">Integer <span class="title">update</span><span class="params">(User user)</span></span>;</span><br><span class="line">    </span><br><span class="line">   <span class="comment">// åˆ </span></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from mybatis where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">Integer <span class="title">delete</span><span class="params">(Long id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><ul><li><p>å¦‚æœä¸ä½¿ç”¨æ³¨è§£çš„æ–¹å¼ï¼Œå°±è¦ä½¿ç”¨ xml çš„æ–¹å¼ï¼Œæ³¨æ„å…¶ä¸­çš„èµ„æºè§£æé—®é¢˜ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p><code>å¢åŠ </code> </p><ul><li>statementæ˜¯è¦è¿è¡Œçš„SQLè¯­å¥ï¼Œå®ƒçš„è¿”å›å€¼é€šè¿‡resultTypeæ¥æŒ‡å®š</li><li>beforeè¡¨ç¤ºæŸ¥è¯¢è¯­å¥statementè¿è¡Œçš„æ—¶æœº</li><li>keyPropertyè¡¨ç¤ºæŸ¥è¯¢ç»“æœèµ‹å€¼ç»™ä»£ç ä¸­çš„å“ªä¸ªå¯¹è±¡ï¼ŒkeyColumnè¡¨ç¤ºå°†æŸ¥è¯¢ç»“æœèµ‹å€¼ç»™æ•°æ®åº“è¡¨ä¸­å“ªä¸€åˆ—</li><li>keyPropertyå’ŒkeyColumnéƒ½ä¸æ˜¯å¿…éœ€çš„ï¼Œæœ‰æ²¡æœ‰éƒ½å¯ä»¥</li><li>before=trueï¼Œæ’å…¥ä¹‹å‰è¿›è¡ŒæŸ¥è¯¢ï¼Œå¯ä»¥å°†æŸ¥è¯¢ç»“æœèµ‹ç»™keyPropertyå’ŒkeyColumnï¼Œèµ‹ç»™keyColumnç›¸å½“äºæ›´æ”¹æ•°æ®åº“</li><li>befaore=falseï¼Œå…ˆæ’å…¥ï¼Œå†æŸ¥è¯¢ï¼Œè¿™æ—¶åªèƒ½å°†ç»“æœèµ‹ç»™keyProperty</li><li>èµ‹å€¼ç»™keyPropertyç”¨æ¥â€œè¯»â€æ•°æ®åº“ï¼Œèµ‹å€¼ç»™keyColumnç”¨æ¥å†™æ•°æ®åº“</li><li>selectKeyçš„ä¸¤å¤§ä½œç”¨ï¼š1ã€ç”Ÿæˆä¸»é”®ï¼›2ã€è·å–åˆšåˆšæ’å…¥æ•°æ®çš„ä¸»é”®ã€‚</li><li>ä½¿ç”¨selectKeyï¼Œå¹¶ä¸”ä½¿ç”¨MySQLçš„last_insert_id()å‡½æ•°æ—¶ï¼Œbeforeå¿…ä¸ºfalseï¼Œä¹Ÿå°±æ˜¯è¯´å¿…é¡»å…ˆæ’å…¥ç„¶åæ‰§è¡Œlast_insert_id()æ‰èƒ½è·å¾—åˆšåˆšæ’å…¥æ•°æ®çš„IDã€‚</li><li>å‚è€ƒé“¾æ¥ï¼š<a href="https://www.cnblogs.com/weiyinfu/p/6835301.html#3">@SelectKeyæ³¨è§£</a></li></ul><p><code>æŸ¥</code></p><ul><li>@Resultsæ³¨è§£ç±»ä¼¼äºXMLä¸­çš„ResultMapæ˜ å°„æ–‡ä»¶</li></ul></blockquote><p><code>UserController:</code> ä¸ºäº†æ–¹ä¾¿å°±ä¸å†å†™ Service å±‚äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserMapper</span><span class="params">(UserMapper userMapper)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userMapper = userMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/insert&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.insert(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/query&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">queryAllUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.queryAllUser();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/query1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">queryById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.queryById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.update(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">delete</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.delete(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Postman æµ‹è¯•ï¼š</code> </p><p>å¢åŠ ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152447.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152447.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909152436340"></p><p>æŸ¥è¯¢æ‰€æœ‰ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152617.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152617.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909152617644"></p><p>é€šè¿‡ id æŸ¥è¯¢ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152702.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152702.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909152702160"></p><p>æ›´æ–°ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152910.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152910.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909152910165"></p><p>æŸ¥çœ‹ä¸€ä¸‹æ•°æ®åº“ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152940.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909152940.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909152940948"></p><p>åˆ é™¤ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909153038.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909153038.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909153032470"></p><p>æŸ¥çœ‹ä¸€ä¸‹æ•°æ®åº“ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909153131.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200909153131.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200909153131838"></p><blockquote><p>ä½¿ç”¨æ³¨è§£è¿›è¡ŒåŠ¨æ€æŸ¥è¯¢å…·ä½“å¯ä»¥å‚è€ƒï¼š<a href="https://mybatis.org/mybatis-3/zh/java-api.html">æ³¨è§£ç‰ˆåŠ¨æ€æŸ¥è¯¢</a></p><p>ä½¿ç”¨ xml æ–¹å¼è¿›è¡ŒåŠ¨æ€æŸ¥è¯¢å¯ä»¥å‚è€ƒï¼š<a href="https://mybatis.org/mybatis-3/zh/dynamic-sql.html">xml ç‰ˆåŠ¨æ€æŸ¥è¯¢</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Java" scheme="http://wangba.me/tags/Java/"/>
    
    <category term="SQL" scheme="http://wangba.me/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆJDBCTemplate</title>
    <link href="http://wangba.me/2020/09/08/SpringBoot%E6%95%B4%E5%90%88JDBCTemplate/"/>
    <id>http://wangba.me/2020/09/08/SpringBoot%E6%95%B4%E5%90%88JDBCTemplate/</id>
    <published>2020-09-08T11:33:14.000Z</published>
    <updated>2020-09-30T07:08:27.205Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€ç¯å¢ƒæ­å»º"><a href="#ä¸€ã€ç¯å¢ƒæ­å»º" class="headerlink" title="ä¸€ã€ç¯å¢ƒæ­å»º"></a>ä¸€ã€ç¯å¢ƒæ­å»º</h2><h3 id="1-å¼•å…¥ä¾èµ–"><a href="#1-å¼•å…¥ä¾èµ–" class="headerlink" title="1. å¼•å…¥ä¾èµ–"></a>1. å¼•å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">// WEB</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//  JDBC </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨ Swagger è¿›è¡Œæ¥å£æµ‹è¯•</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// mysql</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span></span><br><span class="line">// druid</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.23<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-æ•°æ®åº“è„šæœ¬"><a href="#2-æ•°æ®åº“è„šæœ¬" class="headerlink" title="2.æ•°æ®åº“è„šæœ¬"></a>2.æ•°æ®åº“è„šæœ¬</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`sys_user`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`sys_user`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">&#x27;ç¼–å·&#x27;</span>,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">  <span class="string">`nick_name`</span> <span class="built_in">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æ˜µç§°&#x27;</span>,</span><br><span class="line">  <span class="string">`avatar`</span> <span class="built_in">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;å¤´åƒ&#x27;</span>,</span><br><span class="line">  <span class="string">`password`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">  <span class="string">`salt`</span> <span class="built_in">varchar</span>(<span class="number">40</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;åŠ å¯†ç›&#x27;</span>,</span><br><span class="line">  <span class="string">`email`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;é‚®ç®±&#x27;</span>,</span><br><span class="line">  <span class="string">`mobile`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æ‰‹æœºå·&#x27;</span>,</span><br><span class="line">  <span class="string">`status`</span> <span class="built_in">tinyint</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;çŠ¶æ€  0ï¼šç¦ç”¨   1ï¼šæ­£å¸¸&#x27;</span>,</span><br><span class="line">  <span class="string">`dept_id`</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æœºæ„ID&#x27;</span>,</span><br><span class="line">  <span class="string">`create_by`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;åˆ›å»ºäºº&#x27;</span>,</span><br><span class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="string">`last_update_by`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æ›´æ–°äºº&#x27;</span>,</span><br><span class="line">  <span class="string">`last_update_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="string">`del_flag`</span> <span class="built_in">tinyint</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;æ˜¯å¦åˆ é™¤  -1ï¼šå·²åˆ é™¤  0ï¼šæ­£å¸¸&#x27;</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`name`</span> (<span class="string">`name`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">34</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8 <span class="keyword">COMMENT</span>=<span class="string">&#x27;ç”¨æˆ·ç®¡ç†&#x27;</span>;</span><br></pre></td></tr></table></figure><p><code>application.properties:</code> </p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.type</span>=<span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/test</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">******</span></span><br></pre></td></tr></table></figure><h2 id="äºŒã€CRUD"><a href="#äºŒã€CRUD" class="headerlink" title="äºŒã€CRUD"></a>äºŒã€CRUD</h2><h3 id="1-ç¼–å†™å¯¹åº”çš„å®ä½“ç±»"><a href="#1-ç¼–å†™å¯¹åº”çš„å®ä½“ç±»" class="headerlink" title="1.ç¼–å†™å¯¹åº”çš„å®ä½“ç±»"></a>1.ç¼–å†™å¯¹åº”çš„å®ä½“ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysUser</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String nickName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String avatar;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String salt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String mobile;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Byte status;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long deptId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String createBy;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String lastUpdateBy;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date lastUpdateTime;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Byte delFlag;</span><br><span class="line">  </span><br><span class="line">   <span class="comment">// set å’Œ get çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-ç¼–å†™å¯¹åº”çš„-CRUD-Repository"><a href="#2-ç¼–å†™å¯¹åº”çš„-CRUD-Repository" class="headerlink" title="2.ç¼–å†™å¯¹åº”çš„ CRUD Repository"></a>2.ç¼–å†™å¯¹åº”çš„ CRUD Repository</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysUserRepository</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert</span><span class="params">(SysUser user)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;insert into sys_user(id, name, password) values(?,?,?)&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.update(sql, user.getId(), user.getName(), user.getPassword());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert1</span><span class="params">(SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;insert into sys_user(id, name, password) values(:id, :name, :password)&quot;</span>;</span><br><span class="line">        NamedParameterJdbcTemplate namedParameterJdbcTemplate = <span class="keyword">new</span> NamedParameterJdbcTemplate(<span class="keyword">this</span>.jdbcTemplate.getDataSource());</span><br><span class="line">        <span class="keyword">return</span> namedParameterJdbcTemplate.update(sql, <span class="keyword">new</span> BeanPropertySqlParameterSource(sysUser));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå¯ä»¥ä¸ç”¨ä¼ æ‰€æœ‰çš„å‚æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert2</span><span class="params">(SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;insert into sys_user(id, name, password) values(:id, :name, :password)&quot;</span>;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">        map.put(<span class="string">&quot;id&quot;</span>, sysUser.getId());</span><br><span class="line">        map.put(<span class="string">&quot;name&quot;</span>, sysUser.getName());</span><br><span class="line">        map.put(<span class="string">&quot;password&quot;</span>, sysUser.getPassword());</span><br><span class="line">        NamedParameterJdbcTemplate namedParameterJdbcTemplate = <span class="keyword">new</span> NamedParameterJdbcTemplate(<span class="keyword">this</span>.jdbcTemplate.getDataSource());</span><br><span class="line">        <span class="keyword">return</span> namedParameterJdbcTemplate.update(sql, map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">update</span><span class="params">(SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;update sys_user set name = ?, password = ? where id = ?&quot;</span>;</span><br><span class="line">        Object[] args = &#123;sysUser.getName(), sysUser.getPassword(), sysUser.getId()&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] argTypes = &#123;Types.VARCHAR, Types.VARCHAR, Types.BIGINT&#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.jdbcTemplate.update(sql, args, argTypes);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; queryAllListMap() &#123;</span><br><span class="line">        String sql = <span class="string">&quot;select * from sys_user&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.jdbcTemplate.queryForList(sql);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// è¿™é‡Œè¦å†™ä¸€ä¸ª SysUserMapper å®ç° RowMapper</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SysUser <span class="title">queryById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;select * from sys_user where id = ?&quot;</span>;</span><br><span class="line">        Object[] args = &#123;id&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] argTypes = &#123;Types.BIGINT&#125;;</span><br><span class="line">        List&lt;SysUser&gt; list = <span class="keyword">this</span>.jdbcTemplate.query(sql, args, argTypes, <span class="keyword">new</span> SysUserMapper());</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(list)) &#123;</span><br><span class="line">            <span class="keyword">return</span> list.get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">deleteById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;delete from sys_user where id = ?&quot;</span>;</span><br><span class="line">        Object[] args = &#123; id &#125;;</span><br><span class="line">        <span class="keyword">int</span>[] argTypes = &#123; Types.BIGINT &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.jdbcTemplate.update(sql, args, argTypes);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-å¯¹åº”çš„-Controller-å±‚"><a href="#3-å¯¹åº”çš„-Controller-å±‚" class="headerlink" title="3.å¯¹åº”çš„ Controller å±‚"></a>3.å¯¹åº”çš„ Controller å±‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysUserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SysUserRepository sysUserRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/insert&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert</span><span class="params">(<span class="meta">@RequestBody</span> SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = sysUserRepository.insert(sysUser);</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/insert1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert1</span><span class="params">(<span class="meta">@RequestBody</span> SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = sysUserRepository.insert1(sysUser);</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/insert2&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">insert2</span><span class="params">(<span class="meta">@RequestBody</span> SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = sysUserRepository.insert2(sysUser);</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">update</span><span class="params">(<span class="meta">@RequestBody</span> SysUser sysUser)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = sysUserRepository.update(sysUser);</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; queryAllListMap() &#123;</span><br><span class="line">        <span class="keyword">return</span> sysUserRepository.queryAllListMap();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/id1&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SysUser <span class="title">queryById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sysUserRepository.queryById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/id3&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">deleteById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sysUserRepository.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šä¸ºäº†å›¾æ–¹ä¾¿ï¼Œå°±ä¸å†æ­¤å†™ Service å±‚äº†</p></blockquote><h3 id="4-ä½¿ç”¨-Swagger-è¿›è¡Œæµ‹è¯•"><a href="#4-ä½¿ç”¨-Swagger-è¿›è¡Œæµ‹è¯•" class="headerlink" title="4.ä½¿ç”¨ Swagger è¿›è¡Œæµ‹è¯•"></a>4.ä½¿ç”¨ Swagger è¿›è¡Œæµ‹è¯•</h3><p><code>å¢åŠ </code> </p><p>ç¬¬ä¸€ç§æ–¹å¼ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210508.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210508.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908210503256"></p><p>ç¬¬äºŒç§æ–¹å¼ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210645.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210645.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908210645484"></p><p>ç¬¬ä¸‰ç§æ–¹å¼ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210805.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210805.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908210804954"></p><p>çœ‹ä¸€ä¸‹æ•°æ®åº“æ˜¯å¦æœ‰ä¸‰æ¡æ•°æ®ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210847.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908210847.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908210846969"></p><p><code>ä¿®æ”¹</code> </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908211258.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908211258.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908211258932"></p><p><code>æŸ¥æ‰¾</code>  </p><p>æŸ¥æ‰¾æ‰€æœ‰ï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908211934.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908211934.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908211934284"></p><p><code>åˆ é™¤</code>  </p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908212720.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200908212720.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200908212720578"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Java" scheme="http://wangba.me/tags/Java/"/>
    
    <category term="SQL" scheme="http://wangba.me/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>0076.Minimum Window Substring</title>
    <link href="http://wangba.me/2020/09/04/0076-Minimum-Window-Substring/"/>
    <id>http://wangba.me/2020/09/04/0076-Minimum-Window-Substring/</id>
    <published>2020-09-04T13:56:11.000Z</published>
    <updated>2020-09-30T07:09:40.885Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="76-æœ€å°è¦†ç›–å­ä¸²-Hard"><a href="#76-æœ€å°è¦†ç›–å­ä¸²-Hard" class="headerlink" title="76. æœ€å°è¦†ç›–å­ä¸²  Hard"></a><a href="https://leetcode-cn.com/problems/minimum-window-substring/">76. æœ€å°è¦†ç›–å­ä¸²</a>  <font color="#e82f34" size=5>Hard</font></h2><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² Sã€ä¸€ä¸ªå­—ç¬¦ä¸² T ã€‚è¯·ä½ è®¾è®¡ä¸€ç§ç®—æ³•ï¼Œå¯ä»¥åœ¨ O(n) çš„æ—¶é—´å¤æ‚åº¦å†…ï¼Œä»å­—ç¬¦ä¸² S é‡Œé¢æ‰¾å‡ºï¼šåŒ…å« T æ‰€æœ‰å­—ç¬¦çš„æœ€å°å­ä¸²ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šS &#x3D; &quot;ADOBECODEBANC&quot;, T &#x3D; &quot;ABC&quot;</span><br><span class="line">è¾“å‡ºï¼š&quot;BANC&quot;</span><br></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li>å¦‚æœ S ä¸­ä¸å­˜è¿™æ ·çš„å­ä¸²ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸² <code>&quot;&quot;</code>ã€‚</li><li>å¦‚æœ S ä¸­å­˜åœ¨è¿™æ ·çš„å­ä¸²ï¼Œæˆ‘ä»¬ä¿è¯å®ƒæ˜¯å”¯ä¸€çš„ç­”æ¡ˆã€‚</li></ul><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><p>â€‹        è¿™é¢˜åœ¨ 0003 é¢˜ä¸­å°±å·²ç»æè¿‡äº†çš„æš—å·ï¼Œå°±æ˜¯æ´’æ´’æ°´çš„ä½¿ç”¨ä¸€ä¸‹ <code>Sliding Window</code> å°±å¯ä»¥äº†ï¼Œæ€è·¯è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼šå…ˆä¸æ–­çš„æ‰©å¼ çª—å£å³è¾¹ï¼Œç›´åˆ°å°†æ‰€æœ‰çš„è¦åŒ…å«çš„çŸ­å­—ç¬¦ä¸²ï¼›ç„¶åå¼€å§‹å°±ç§»åŠ¨çª—å£çš„å·¦è¾¹ï¼Œç›´åˆ°å·¦è¾¹å‹ç¼©åˆ°ä¸èƒ½å†å®¹çº³è¿™ä¸ªçŸ­å­—ç¬¦ä¸²äº†ï¼Œå†è¿›è¡Œä¸æ–­æ¯”è¾ƒï¼Œå°±å¯ä»¥å¾—åˆ°æœ€ç»ˆç»“æœäº†ã€‚<br>â€‹        è¿™ç§æ—¶å€™å°±éœ€è¦å‡ºç° <strong>ä½†æ˜¯</strong> è¿™ä¸ªè¯è¯­ï¼Œæœç„¶åœ¨å®ç°çš„æ—¶å€™å°±éœ€è¦æ³¨æ„å¾ˆå¤šé—®é¢˜äº†ï¼Œå¯¹äºè¿™ç§æŠ½è±¡é—®é¢˜ï¼Œå…ˆæ¥ä¸ªğŸŒ°ï¼šç»™çš„ä¾‹å­å®åœ¨æ˜¯å¤ªæ™®é€šäº†ï¼Œåº”è¯¥ç”¨é‚£ç§å¸¦ç‚¹ç‰¹æ®Šæ€§çš„ä¾‹å­</p><blockquote><p>S = â€œABANCDBâ€     T = â€œABCâ€</p></blockquote><p>å¯¹ç€ä»£ç æ‹ä¸€éåº”è¯¥å°±æ‡‚äº†ï¼š<br>ç¬¬ä¸€éè¿‡åå¯ä»¥çœ‹è§ï¼šâ€ABANCâ€ æ˜¯ä¸€ä¸ªæ»‘åŠ¨çª—å£ï¼Œmap çš„å€¼ä¹Ÿå˜ä¸ºäº†ï¼š</p><table><thead><tr><th align="center"></th><th align="center">A</th><th align="center">B</th><th align="center">C</th></tr></thead><tbody><tr><td align="center">åˆå§‹å€¼</td><td align="center">1</td><td align="center">1</td><td align="center">1</td></tr><tr><td align="center">éå†åˆ° A</td><td align="center">0</td><td align="center">1</td><td align="center">1</td></tr><tr><td align="center">éå†åˆ° B</td><td align="center">0</td><td align="center">0</td><td align="center">1</td></tr><tr><td align="center">éå†åˆ° A</td><td align="center">-1</td><td align="center">0</td><td align="center">1</td></tr><tr><td align="center">éå†åˆ° N</td><td align="center">-1</td><td align="center">0</td><td align="center">1</td></tr><tr><td align="center">éå†åˆ° C</td><td align="center">-1</td><td align="center">0</td><td align="center">0</td></tr></tbody></table><p>æ­¤æ—¶çš„ count == t çš„é•¿åº¦äº†ï¼Œè¿™æ ·æ‰©å¼ çª—å£å°±å®Œæˆäº† ======&gt;   min = 5</p><p>æ¥ä¸‹æ¥å°±æ˜¯æ”¶ç¼©çª—å£ï¼Œå…¶æ ¹æœ¬åŸå› å°±æ˜¯è¿™æ ·å·¦è¾¹å‡ºç°é‡å¤å…ƒç´ ï¼Œå¯ä»¥å»æ‰å½¢æˆæœ€å°çš„çª—å£ï¼š</p><p>å¦‚æœåœ¨ map ä¸­çš„å€¼æ˜¯ç­‰äº 0 çš„ï¼Œè¯´æ˜å®ƒæ˜¯åˆšåˆšå¥½çš„ï¼Œå¦‚æœæŠŠè¿™ä¸ªæ’é™¤çš„è¯ï¼Œè¿™ä¸ªçª—å£å°±ä¸å†æˆç«‹äº†ï¼Œè¦ç»§ç»­æ‰©å¼ </p><p>çª—å£äº†ï¼›å¦‚æœ map ä¸­çš„å€¼ å°äº 0 çš„ï¼Œè¯´æ˜å®ƒæ˜¯å¤šä½™çš„ï¼Œä½†æ˜¯è¦çœ‹å®ƒçš„ä½ç½®äº†ï¼Œå¯ä»¥çœ‹ä¸‹ğŸŒ°ï¼š</p><p>â€œABANCâ€ è¿™ä¸ª A å°±å¯ä»¥å»æ‰ï¼›â€BAANCâ€ è¿™ä¸ª A å°±ä¸å¯ä»¥å»æ‰ï¼Œæ­¤æ—¶å°±è¦æ‰©å¼ çª—å£äº†</p><p><del>åå¤æ¨ªè·³</del> ï¼Œå®Œæˆâœ…</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">minWindow</span><span class="params">(String s, String t)</span> </span>&#123;</span><br><span class="line">        Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">                <span class="comment">// ä½¿ç”¨ hashmap å°† t ä¸­çš„å­—ç¬¦å­˜å…¥</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; t.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">char</span> c = t.charAt(i);</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(c)) &#123;</span><br><span class="line">                <span class="keyword">int</span> tmp = map.get(c);</span><br><span class="line">                map.put(c, tmp + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                map.put(c, <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ç”¨æ¥åˆ¤æ–­è¿™ä¸ªçª—å£æ˜¯å¦åŒ…å«äº† t</span></span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">      <span class="comment">// ä¸€ä¸ªçª—å£çš„å·¦å³</span></span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = <span class="number">0</span>;  </span><br><span class="line">        <span class="keyword">int</span> min = Integer.MAX_VALUE;</span><br><span class="line">      <span class="comment">// é•¿åº¦æœ€å°çš„çª—å£çš„å·¦å³</span></span><br><span class="line">        <span class="keyword">int</span> minLeft = <span class="number">0</span>, minRight = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (; right &lt; s.length(); right++) &#123;</span><br><span class="line">            <span class="keyword">char</span> temp = s.charAt(right);</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(temp)) &#123;</span><br><span class="line">                count = map.get(temp) &gt; <span class="number">0</span> ? count + <span class="number">1</span> : count;</span><br><span class="line">                map.put(temp, map.get(temp) - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (count == t.length()) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((right - left) &lt; min) &#123;</span><br><span class="line">                    min = right - left;</span><br><span class="line">                    minLeft = left;</span><br><span class="line">                    minRight = right;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">char</span> c = s.charAt(left);</span><br><span class="line">              <span class="comment">// å·¦è¾¹çš„é‡å¤å­—ç¬¦å¯ä»¥ä¸ç”¨</span></span><br><span class="line">                <span class="keyword">if</span> (map.containsKey(c)) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (map.get(c) &gt;= <span class="number">0</span>)</span><br><span class="line">                        count--;</span><br><span class="line">                    map.put(c, map.get(c) + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> min == Integer.MAX_VALUE ? <span class="string">&quot;&quot;</span> : s.substring(minLeft, minRight + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ä¸€å¤©ä¸€é“åŠ›æ‰£é¢˜ï¼Œå—¤ä¹‹ä»¥é¼»ï¼ŒåŠä¿¡åŠç–‘ï¼Œç™¾æ„Ÿäº¤é›†ï¼Œå…³é—¨å¤§å‰ï¼Œskr skr ! ! !</summary>
    
    
    
    <category term="LeetCodeçœŸçš„éš¾ç³»åˆ—" scheme="http://wangba.me/categories/LeetCode%E7%9C%9F%E7%9A%84%E9%9A%BE%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Leetcode" scheme="http://wangba.me/tags/Leetcode/"/>
    
    <category term="String" scheme="http://wangba.me/tags/String/"/>
    
    <category term="Sliding Window" scheme="http://wangba.me/tags/Sliding-Window/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆAOP</title>
    <link href="http://wangba.me/2020/09/03/SpringBoot%E6%95%B4%E5%90%88AOP/"/>
    <id>http://wangba.me/2020/09/03/SpringBoot%E6%95%B4%E5%90%88AOP/</id>
    <published>2020-09-03T13:52:37.000Z</published>
    <updated>2020-09-30T07:08:24.891Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€èƒŒæ™¯"><a href="#ä¸€ã€èƒŒæ™¯" class="headerlink" title="ä¸€ã€èƒŒæ™¯"></a>ä¸€ã€èƒŒæ™¯</h2><p>â€‹        åœ¨å…¬å¸å†™ä¸šåŠ¡çš„æ—¶å€™ï¼Œéƒ½ä¼šæœ‰ä¿å­˜æ—¥å¿—çš„æ“ä½œï¼Œæ–¹ä¾¿å‡ºé”™çš„æ—¶å€™è¿›è¡Œæ’æŸ¥ï¼›ä¸€èˆ¬ä¸ä»…ä»…åœ¨æ•°æ®åº“ä¸­ä¿å­˜æ—¥å¿—ï¼Œ</p><p>ä¹Ÿä¼šåœ¨åç«¯æ§åˆ¶å°æ‰“å°ä¸€äº›éœ€è¦çš„ä¿¡æ¯ã€‚åœ¨è¿™é‡Œï¼Œä¸€èˆ¬ä½¿ç”¨ AOP ç»‡å…¥çš„æ–¹å¼å°†æ—¥å¿—ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œä½¿ç”¨ä¸€äº›æ—¥</p><p>å¿—åŒ…å°†æŸäº› Controller å±‚çš„ä¿¡æ¯æ‰“å°åœ¨æ§åˆ¶å°ã€‚</p><h2 id="äºŒã€å‡†å¤‡"><a href="#äºŒã€å‡†å¤‡" class="headerlink" title="äºŒã€å‡†å¤‡"></a>äºŒã€å‡†å¤‡</h2><h3 id="Entiy"><a href="#Entiy" class="headerlink" title="Entiy:"></a>Entiy:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;log&quot;)</span></span><br><span class="line"><span class="meta">@EntityListeners(AuditingEntityListener.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Log</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY )</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;title&quot;, columnDefinition = &quot;VARCHAR(100) COMMENT &#x27;æ ‡é¢˜&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;author&quot;, columnDefinition = &quot;VARCHAR(255) COMMENT &#x27;ä½œè€…&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;content&quot;, columnDefinition = &quot;TEXT COMMENT &#x27;å†…å®¹&#x27;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// get å’Œ set çœç•¥</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨: è¿™é‡Œæ˜¯ä½¿ç”¨ Spring Data JPA è‡ªåŠ¨ç”Ÿæˆçš„æ•°æ®åº“å¯¹åº”å®ä½“ï¼Œå¯¼å…¥ç›¸å…³ä¾èµ–åï¼Œå¯ä»¥å…ˆè¿è¡Œä¸€éï¼Œçœ‹æ•°æ®åº“</p><p>æ˜¯å¦ç”Ÿæˆå¯¹åº”å®ä½“ï¼›ç„¶åè‡ªè¡Œåœ¨æ•°æ®åº“ä¸­æ’å…¥å‡ æ¡æ•°æ®ã€‚</p></blockquote><h3 id="Repository"><a href="#Repository" class="headerlink" title="Repository:"></a>Repository:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">LogRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Log</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨: è¿™é‡Œåªè¦ç»§æ‰¿ <code>JpaRepository</code> ï¼Œè¿™ä¸ª repository ä¹Ÿç»§æ‰¿äº†åˆ«çš„ repositoryï¼ˆé‡Œé¢æœ‰ä¸€äº›å¸¸è§çš„æ–¹æ³•å¯ä»¥</p><p>è°ƒç”¨ï¼‰</p></blockquote><h3 id="Service"><a href="#Service" class="headerlink" title="Service:"></a>Service:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LogRepository logRepository;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Log&gt; <span class="title">getAllLog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Log&gt; logs = logRepository.findAll();</span><br><span class="line">        <span class="keyword">return</span> logs;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨: è¿™é‡Œå°±ä¸å†™æ¥å£ï¼Œå†å»å®ç°äº†</p></blockquote><h3 id="Controller"><a href="#Controller" class="headerlink" title="Controller:"></a>Controller:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LogService logService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Log&gt; <span class="title">getAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Log&gt; logs = logService.getAllLog();</span><br><span class="line">        <span class="keyword">return</span> logs;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†ä½¿ç”¨ <strong>Postman</strong> ç­‰å·¥å…·è¿›è¡Œä¸€æ¬¡æµ‹è¯•å°±è¡Œ</p><h2 id="ä¸‰ã€ä½¿ç”¨æ³¨è§£çš„æ–¹å¼è¿›è¡Œ-AOP"><a href="#ä¸‰ã€ä½¿ç”¨æ³¨è§£çš„æ–¹å¼è¿›è¡Œ-AOP" class="headerlink" title="ä¸‰ã€ä½¿ç”¨æ³¨è§£çš„æ–¹å¼è¿›è¡Œ AOP"></a>ä¸‰ã€ä½¿ç”¨æ³¨è§£çš„æ–¹å¼è¿›è¡Œ AOP</h2><p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ–¹æ³•çº§åˆ«çš„ <code>@Log</code> æ³¨è§£ï¼Œç”¨äºæ ‡æ³¨éœ€è¦ç›‘æ§çš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Log &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰ä¸€ä¸ªLogAspectç±»ï¼Œä½¿ç”¨ <code>@Aspect</code> æ ‡æ³¨è®©å…¶æˆä¸ºä¸€ä¸ªåˆ‡é¢ï¼Œåˆ‡ç‚¹ä¸ºä½¿ç”¨ <code>@Log</code> æ³¨è§£æ ‡æ³¨çš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogAspec</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Logger logger  = LoggerFactory.getLogger(LogAspec.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(org.wangba.springboot013aop.antoation.Log)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pointcut</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;pointcut()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doBefore</span><span class="params">(JoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;Start Time: &#123;&#125;&quot;</span>, System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@After(&quot;pointcut()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfter</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;End Time: &#123;&#125;&quot;</span>, System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†åœ¨ <code>Controller</code> å±‚çš„æ–¹æ³•ä¸ŠåŠ ä¸Š <code>@Log</code> æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    LogService logService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Log(&quot;è·å¾—æ‰€æœ‰æ–‡ç« &quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Article&gt; <span class="title">getAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Article&gt; articles = logService.getAllLog();</span><br><span class="line">        <span class="keyword">return</span> articles;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å†åœ¨ <strong>Postman</strong> ä¸­æµ‹è¯•ä¸€æ¬¡ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°æ§åˆ¶å°ä¼šæ‰“å°å¦‚ä¸‹ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200903214650.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200903214650.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200903214650730"></p><blockquote><p>åœ¨å…¬å¸ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯åœ¨  <code>@Before</code> è¿›è¡Œä¸€äº›è¯·æ±‚ä¿¡æ¯ç­‰ï¼Œ <code> @After</code> åœ¨æ§åˆ¶å°æ‰“å°ä¸€äº›ä¿¡æ¯ï¼Œå¹¶å°†ç»“</p><p>æœç›´æ¥å­˜åˆ°æ•°æ®åº“ä¸­çš„æ—¥å¿—è¡¨ä¸­ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Java" scheme="http://wangba.me/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootä¸­ç±»å‹è½¬æ¢</title>
    <link href="http://wangba.me/2020/09/02/SpringBoot%E4%B8%AD%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"/>
    <id>http://wangba.me/2020/09/02/SpringBoot%E4%B8%AD%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</id>
    <published>2020-09-02T12:55:09.000Z</published>
    <updated>2020-09-30T07:08:22.269Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€é—®é¢˜"><a href="#ä¸€ã€é—®é¢˜" class="headerlink" title="ä¸€ã€é—®é¢˜"></a>ä¸€ã€é—®é¢˜</h2><p>å¦‚æœå‰ç«¯ä¼ æ¥ä¸€ä¸ªæ—¥æœŸå‚æ•°ï¼Œæ˜¯ç”¨ String ç±»å‹çš„ï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨åç«¯è¿›è¡Œä¼ å‚å‘¢ï¼Ÿ</p><p>ä¹Ÿå³å¦‚ä¸‹è¿™ç§æƒ…å†µï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">(Date date)</span> </span>&#123;</span><br><span class="line">        System.out.println(date);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨è¾“å…¥ï¼š<a href="http://localhost:8080/hello?date=2020-01-01">http://localhost:8080/hello?date=2020-01-01</a></p><p>å¯ä»¥åœ¨åå°çœ‹åˆ°  <code>WARN</code> ï¼š</p><blockquote><p>Failed to convert value of type â€˜java.lang.Stringâ€™ to required type â€˜java.util.Dateâ€™</p></blockquote><h2 id="äºŒã€è§£å†³"><a href="#äºŒã€è§£å†³" class="headerlink" title="äºŒã€è§£å†³"></a>äºŒã€è§£å†³</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringTransDate</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">Date</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> SimpleDateFormat simpleDateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s != <span class="keyword">null</span> &amp;&amp; !<span class="string">&quot;&quot;</span>.equals(s)) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> simpleDateFormat.parse(s);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šè¦å°†è¯¥ç±»ä½¿ç”¨ @Component æ³¨å…¥</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Java" scheme="http://wangba.me/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>0003.Longest Substring Without Repeating Characters</title>
    <link href="http://wangba.me/2020/09/01/0003-Longest-Substring-Without-Repeating-Characters/"/>
    <id>http://wangba.me/2020/09/01/0003-Longest-Substring-Without-Repeating-Characters/</id>
    <published>2020-09-01T13:26:29.000Z</published>
    <updated>2020-09-30T07:09:37.081Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="0003-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²-Medium"><a href="#0003-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²-Medium" class="headerlink" title="0003. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² Medium"></a><a href="https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/">0003. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</a> <font color="#fd9016" size=5>Medium</font></h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ <strong>æœ€é•¿å­ä¸²</strong> çš„é•¿åº¦ã€‚</p><p><strong>ç¤ºä¾‹ 1:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;abcabcbb&quot;</span><br><span class="line">è¾“å‡º: 3 </span><br><span class="line">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;abc&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;bbbbb&quot;</span><br><span class="line">è¾“å‡º: 1</span><br><span class="line">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;b&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;pwwkew&quot;</span><br><span class="line">è¾“å‡º: 3</span><br><span class="line">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;wke&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br><span class="line"></span><br><span class="line">è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ&quot;pwke&quot; æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚</span><br></pre></td></tr></table></figure><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><p> ğŸ·ï¼šç¬¬ä¸€ä¸ªæƒ³æ³•å°±æ˜¯è¿™ä¸ªæ˜¯ä¸æ˜¯å’Œ KMP ç®—æ³•æœ‰é‚£ä¹ˆä¸€ç‚¹ç‚¹åƒçš„</p><p> åŠ›æ‰£ï¼šè®©ä½ è§è¯†ä¸€ä¸‹ï¼Œå€¼å¾—æˆ‘ä»¬å®˜ç½‘æœ‰ä¸€ä¸ªæ ‡ç­¾çš„æ€æƒ³ â€”â€”â€”&gt;  <code>Sliding Window</code> </p><p>ğŸ·ï¼šè¯´äººè¯</p><p>åŠ›æ‰£ï¼šå°±æ˜¯ <code>æ»‘åŠ¨çª—å£</code> å¤§æ³•ï¼Œä½ åé¢ä¼šçœ‹åˆ°å¾ˆå¤šæ¬¡è¿™ç§æ€æƒ³ï¼Œæƒ³ç»§ç»­çœ‹è¿™æ ·çš„é¢˜ï¼Œç‚¹<a href="https://leetcode-cn.com/tag/sliding-window/">è¿™é‡Œ</a>ï¼Œè¿˜æœ‰ä¸€äº›æš—å·ï¼š76ã€</p><p>438ã€567</p><blockquote><p>æ»‘åŠ¨çª—å£æ€æƒ³ï¼š</p><p>æ»‘åŠ¨çª—å£çš„å³è¾¹ç•Œä¸æ–­çš„å³ç§»ï¼Œåªè¦æ²¡æœ‰é‡å¤çš„å­—ç¬¦ï¼Œå°±æŒç»­å‘å³æ‰©å¤§çª—å£è¾¹ç•Œã€‚ä¸€æ—¦å‡ºç°äº†é‡å¤å­—ç¬¦ï¼Œå°±éœ€è¦ç¼©å°å·¦è¾¹ç•Œï¼Œç›´åˆ°é‡å¤çš„å­—ç¬¦ç§»å‡ºäº†å·¦è¾¹ç•Œï¼Œç„¶åç»§ç»­ç§»åŠ¨æ»‘åŠ¨çª—å£çš„å³è¾¹ç•Œã€‚ä»¥æ­¤ç±»æ¨ï¼Œæ¯æ¬¡ç§»åŠ¨éœ€è¦è®¡ç®—å½“å‰é•¿åº¦ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°æœ€å¤§é•¿åº¦ï¼Œæœ€ç»ˆæœ€å¤§çš„å€¼å°±æ˜¯é¢˜ç›®ä¸­çš„æ‰€æ±‚ã€‚</p></blockquote><p>ğŸ·ï¼šåº”è¯¥å°±æ˜¯åŒæŒ‡é’ˆçš„å˜å½¢ç‰ˆäº†â€¦â€¦..</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(s.charAt(i)))</span><br><span class="line">                j = Math.max(j, map.get(s.charAt(i)) + <span class="number">1</span>);</span><br><span class="line">            map.put(s.charAt(i), i);</span><br><span class="line">            max = Math.max(max, i - j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ä¸€å¤©ä¸€é“åŠ›æ‰£é¢˜ï¼Œå—¤ä¹‹ä»¥é¼»ï¼ŒåŠä¿¡åŠç–‘ï¼Œç™¾æ„Ÿäº¤é›†ï¼Œå…³é—¨å¤§å‰ï¼Œskr skr ! ! !</summary>
    
    
    
    <category term="LeetCodeçœŸçš„éš¾ç³»åˆ—" scheme="http://wangba.me/categories/LeetCode%E7%9C%9F%E7%9A%84%E9%9A%BE%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Leetcode" scheme="http://wangba.me/tags/Leetcode/"/>
    
    <category term="String" scheme="http://wangba.me/tags/String/"/>
    
    <category term="Sliding Window" scheme="http://wangba.me/tags/Sliding-Window/"/>
    
    <category term="Two pointer" scheme="http://wangba.me/tags/Two-pointer/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootä¸­çš„è·¯å¾„æ˜ å°„</title>
    <link href="http://wangba.me/2020/09/01/SpringBoot%E4%B8%AD%E7%9A%84%E8%B7%AF%E5%BE%84%E6%98%A0%E5%B0%84/"/>
    <id>http://wangba.me/2020/09/01/SpringBoot%E4%B8%AD%E7%9A%84%E8%B7%AF%E5%BE%84%E6%98%A0%E5%B0%84/</id>
    <published>2020-09-01T13:25:29.000Z</published>
    <updated>2020-09-30T07:08:15.292Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€åœ¨-SpringBootä¸­ä½¿ç”¨-SSM-æ¡†æ¶ä¸­çš„æ˜ å°„"><a href="#ä¸€ã€åœ¨-SpringBootä¸­ä½¿ç”¨-SSM-æ¡†æ¶ä¸­çš„æ˜ å°„" class="headerlink" title="ä¸€ã€åœ¨ SpringBootä¸­ä½¿ç”¨ SSM æ¡†æ¶ä¸­çš„æ˜ å°„"></a>ä¸€ã€åœ¨ SpringBootä¸­ä½¿ç”¨ SSM æ¡†æ¶ä¸­çš„æ˜ å°„</h2><p>å†™ä¸‹å¦‚ä¸‹çš„ Controllerï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¹¶åœ¨ <code>resources/templates</code> ä¸­æ–°å»º <code>hello.html</code> </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, Spring Boot<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šåœ¨ SpringBoot ä¸­ï¼Œé»˜è®¤çš„é™æ€èµ„æºæ˜¯æ”¾åœ¨ä»¥ä¸‹å‡ ä¸ªä½ç½®ï¼š</p><ol><li>classpath:/META-INF/resources/</li><li>classpath:/resources/</li><li>classpath:/static/</li><li>classpath:/public/</li><li>/</li></ol><p>å…¶ä¸­ç¬¬ 5 ä¸ªè¡¨ç¤º webapp ç›®å½•ä¸­çš„é™æ€èµ„æºä¹Ÿä¸è¢«æ‹¦æˆª</p></blockquote><p>æ‰€ä»¥åœ¨è¿™é‡Œè¿™ä¸æ˜¯ä¸€ä¸ªé™æ€èµ„æºï¼Œæˆ‘ä»¬ä»¥å‰çš„åšæ³•å°±æ˜¯ç›´æ¥è¿”å›è¿™ä¸ªé¡µé¢ï¼Œæ²¡å†™ä¸Šé¢çš„ Controller ç›´æ¥ä½¿ç”¨ <a href="http://localhost:8080/hello">http://localhost:8080/hello</a> æ˜¯è®¿é—®ä¸åˆ°è¯¥é¡µé¢çš„</p><h2 id="äºŒã€åœ¨-SpringBoot-ä¸­è¿›è¡Œè·¯å¾„æ˜ å°„"><a href="#äºŒã€åœ¨-SpringBoot-ä¸­è¿›è¡Œè·¯å¾„æ˜ å°„" class="headerlink" title="äºŒã€åœ¨ SpringBoot ä¸­è¿›è¡Œè·¯å¾„æ˜ å°„"></a>äºŒã€åœ¨ SpringBoot ä¸­è¿›è¡Œè·¯å¾„æ˜ å°„</h2><p>åªéœ€è¦è¿›è¡Œå¦‚ä¸‹é…ç½®å°±å¯ä»¥è¿›è¡Œè·¯å¾„æ˜ å°„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;wangba&quot;</span>).setViewName(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æ¬¡è®¿é—®ï¼š<a href="http://localhost:8080/wangba">http://localhost:8080/wangba</a></p><p>ç»“æœï¼š</p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200901203239.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200901203239.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200901203234294"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Java" scheme="http://wangba.me/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>0001.Two Sum</title>
    <link href="http://wangba.me/2020/08/31/0001-Two-Sum/"/>
    <id>http://wangba.me/2020/08/31/0001-Two-Sum/</id>
    <published>2020-08-31T13:26:10.000Z</published>
    <updated>2020-09-30T07:08:03.901Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="0001-ä¸¤æ•°ä¹‹å’Œ-Easy"><a href="#0001-ä¸¤æ•°ä¹‹å’Œ-Easy" class="headerlink" title="0001. ä¸¤æ•°ä¹‹å’Œ  Easy"></a><a href="https://leetcode-cn.com/problems/two-sum/">0001. ä¸¤æ•°ä¹‹å’Œ</a>  <font color="green" size=5>Easy</font></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªç›®æ ‡å€¼ <code>target</code>ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ <strong>ä¸¤ä¸ª</strong> æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚</p><p><strong>ç¤ºä¾‹:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç»™å®š nums &#x3D; [2, 7, 11, 15], target &#x3D; 9</span><br><span class="line"></span><br><span class="line">å› ä¸º nums[0] + nums[1] &#x3D; 2 + 7 &#x3D; 9</span><br><span class="line">æ‰€ä»¥è¿”å› [0, 1]</span><br></pre></td></tr></table></figure><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><blockquote><p>å‚»ç“œå¼æƒ³æ³•ï¼šéå†ä¸¤æ¬¡ï¼Œæ±‚å’Œï¼ˆå»é™¤é‡å¤çš„å…ƒç´ ï¼Œä½ç½®ä¸åŒçš„ç›¸ç­‰å…ƒç´ å¯ä»¥è¿›è¡Œè®¡ç®—ï¼‰</p><p>åŠ›æ‰£å†…å¿ƒOSï¼šä½ è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦èƒ½è¿‡ç®—æˆ‘è¾“ï¼ï¼ï¼</p><p>ğŸ˜¯ï¼šå°±è¿™ï¼Œç•¥æ–½å°è®¡ï¼š<code>ç©ºé—´æ¢æ—¶é—´ä¹‹æœ¯</code> </p></blockquote><p>é¦–å…ˆï¼Œéå†ä¸€éæ•°ç»„å°†æ•°ç»„çš„å€¼æ”¾å…¥ Map ä¸­ï¼Œç„¶åå†éå†ä¸€æ¬¡ï¼Œå°† target - å–åˆ°çš„å€¼ï¼Œä½†æ˜¯è¦æ³¨æ„ä¸èƒ½ä»…ä»…åˆ¤æ–­æ˜¯</p><p>å¦å­˜åœ¨è¿™ä¸ªå€¼ï¼Œå› ä¸ºå¯èƒ½ä¼šå‡ºç°ä¸‹é¢è¿™ç§æƒ…å†µï¼štarget = 4ï¼Œè¯¥æ•°ç»„ä¸­å°±åªæœ‰ä¸€ä¸ª 2ï¼Œè¿™æ ·å°±ä¼šå‡ºé”™ã€‚æ‰€ä»¥è¿˜è¦åˆ¤æ–­</p><p>å–åˆ°çš„å€¼è¿˜ä¸èƒ½æ˜¯ç¬¬ä¸€æ¬¡çš„å…ƒç´ ã€‚</p><h2 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">        HashMap&lt;Integer, Integer&gt; hashMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            hashMap.put(nums[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> temp = target - nums[i];</span><br><span class="line">            <span class="keyword">if</span> (hashMap.containsKey(temp) &amp;&amp; hashMap.get(temp) != i) &#123;</span><br><span class="line">                res[<span class="number">0</span>] = hashMap.get(temp);</span><br><span class="line">                res[<span class="number">1</span>] = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ä¸€å¤©ä¸€é“åŠ›æ‰£é¢˜ï¼Œå—¤ä¹‹ä»¥é¼»ï¼ŒåŠä¿¡åŠç–‘ï¼Œç™¾æ„Ÿäº¤é›†ï¼Œå…³é—¨å¤§å‰ï¼Œskr skr ! ! !</summary>
    
    
    
    <category term="LeetCodeçœŸçš„éš¾ç³»åˆ—" scheme="http://wangba.me/categories/LeetCode%E7%9C%9F%E7%9A%84%E9%9A%BE%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Leetcode" scheme="http://wangba.me/tags/Leetcode/"/>
    
    <category term="Array" scheme="http://wangba.me/tags/Array/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootä¸­çš„Servletã€Filterã€Listener</title>
    <link href="http://wangba.me/2020/08/31/SpringBoot%E4%B8%AD%E7%9A%84Servlet%E3%80%81Filter%E3%80%81Listener/"/>
    <id>http://wangba.me/2020/08/31/SpringBoot%E4%B8%AD%E7%9A%84Servlet%E3%80%81Filter%E3%80%81Listener/</id>
    <published>2020-08-31T12:08:27.000Z</published>
    <updated>2020-09-30T07:07:21.821Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€Servlet"><a href="#ä¸€ã€Servlet" class="headerlink" title="ä¸€ã€Servlet"></a>ä¸€ã€Servlet</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/MyServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyServlet&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>@WebServlet(urlPatterns = â€œ/MyServletâ€)ï¼šæŒ‡å®šServletæŒ‡å®šçš„ URL</p></blockquote><h2 id="äºŒã€Filter"><a href="#äºŒã€Filter" class="headerlink" title="äºŒã€Filter"></a>äºŒã€Filter</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter(&quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyFilter&quot;</span>);</span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>@WebFilter(â€œ/*â€)ï¼šæŒ‡å®šè·¯å¾„è¿›è¡Œè¿‡æ»¤</p></blockquote><h2 id="ä¸‰ã€Listener"><a href="#ä¸‰ã€Listener" class="headerlink" title="ä¸‰ã€Listener"></a>ä¸‰ã€Listener</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyListener</span> <span class="keyword">implements</span> <span class="title">ServletRequestListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestInitialized</span><span class="params">(ServletRequestEvent sre)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;requestInitialized.............&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestDestroyed</span><span class="params">(ServletRequestEvent sre)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;requestDestroyed................&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>@WebListenerï¼šæ ‡æ³¨ä¸ºç›‘å¬å™¨</p></blockquote><p><code>å¯ä»¥è‡ªè¡Œæµ‹è¯•ä¿®æ”¹è·¯ç”±è·¯å¾„ç­‰è¿›è¡Œæµ‹è¯•</code></p><h2 id="å››ã€åŒºåˆ«"><a href="#å››ã€åŒºåˆ«" class="headerlink" title="å››ã€åŒºåˆ«"></a>å››ã€åŒºåˆ«</h2><p>å¯åŠ¨ç»“æœï¼š<a href="http://localhost:8080/MyServlet">http://localhost:8080/MyServlet</a></p><p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200831195105.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200831195105.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200831195100184"></p><p>é…åˆå®˜æ–¹å›¾è§£é‡Šä¸€ä¸‹ï¼š</p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200831195155.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200831195155.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200831195155569" style="zoom: 50%;" /><p>é¦–å…ˆæ˜¯ <strong><code>Listener</code></strong> ==&gt; <strong><code>Filter</code></strong> ==&gt; <strong><code>Servlet</code></strong> </p><p>ä¸‹é¢è¿˜æœ‰ä¸€æ¬¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MyFilter</span><br><span class="line">requestDestroyed................</span><br></pre></td></tr></table></figure><p>å†æµè§ˆå™¨æ‰“å¼€æ§åˆ¶å°ï¼Œå¼ºåˆ¶åˆ·æ–°ä¸€ä¸‹ï¼šmacOS(å¿«æ·é”®ï¼šcommand + shift + R)ï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p><img src="https://gitee.com/wonderfuleight/blogImg/raw/master//20200831195932.png" class="lazyload" data-srcset="https://gitee.com/wonderfuleight/blogImg/raw/master//20200831195932.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20200831195932817" style="zoom: 200%;" /><p>æœ€ä¸‹é¢çš„é‚£ä¸ªæ˜¯æˆ‘çš„æµè§ˆå™¨æ‰©å±•åŠ è½½çš„è„šæœ¬</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Spring BootçœŸçš„é¦™ç³»åˆ—" scheme="http://wangba.me/categories/Spring-Boot%E7%9C%9F%E7%9A%84%E9%A6%99%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Spring Boot" scheme="http://wangba.me/tags/Spring-Boot/"/>
    
    <category term="Java" scheme="http://wangba.me/tags/Java/"/>
    
  </entry>
  
</feed>
